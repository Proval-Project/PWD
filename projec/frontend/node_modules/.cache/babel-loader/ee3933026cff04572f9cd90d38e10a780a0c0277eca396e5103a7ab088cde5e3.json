{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import'./DashboardPages.css';import'./EstimateRequest.css';import CustomerSearchModal from'../../components/CustomerSearchModal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EstimateRequestPage=()=>{const navigate=useNavigate();// 현재 로그인한 사용자 정보\nconst currentUser=JSON.parse(localStorage.getItem('user')||'{}');const isCustomer=currentUser.roleId===3;// 관리자/직원용 상태\nconst[selectedCustomer,setSelectedCustomer]=useState(null);const[showCustomerSearch,setShowCustomerSearch]=useState(false);const handleNewEstimate=()=>{if(isCustomer){// 고객은 바로 이동\nnavigate('/estimate-request/new');}else{// 관리자/직원은 고객 선택 확인\nif(!selectedCustomer){alert('고객을 먼저 선택해주세요.');return;}// 선택된 고객 정보를 localStorage에 저장\nlocalStorage.setItem('selectedCustomer',JSON.stringify(selectedCustomer));navigate('/estimate-request/new');}};const handleLoadTemporary=()=>{if(!selectedCustomer){alert('고객을 먼저 선택해주세요.');return;}// 선택된 고객 정보를 localStorage에 저장\nlocalStorage.setItem('selectedCustomerForTempStorage',JSON.stringify(selectedCustomer));navigate('/estimate-request/temporary');};const handleReInquiry=()=>{navigate('/existing-estimate-reinquiry');};const handleCustomerSelect=user=>{setSelectedCustomer(user);setShowCustomerSearch(false);};const handleCustomerSearch=()=>{setShowCustomerSearch(true);};return/*#__PURE__*/_jsxs(\"div\",{className:\"estimate-request-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:()=>navigate(-1),children:\"<\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"\\uACAC\\uC801\\uC694\\uCCAD\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"action-cards\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"action-card\",onClick:handleNewEstimate,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uC2E0\\uADDC \\uACAC\\uC801 \\uC694\\uCCAD\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uC0C8\\uB85C\\uC6B4 \\uACAC\\uC801\\uC744 \\uC694\\uCCAD\\uD569\\uB2C8\\uB2E4\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-card\",onClick:handleLoadTemporary,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uC784\\uC2DC\\uC800\\uC7A5 \\uBD88\\uB7EC\\uC624\\uAE30\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uC784\\uC2DC\\uC800\\uC7A5\\uB41C \\uACAC\\uC801\\uC744 \\uBD88\\uB7EC\\uC635\\uB2C8\\uB2E4\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-card\",onClick:handleReInquiry,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uAE30\\uC874 \\uACAC\\uC801 \\uC7AC\\uBB38\\uC758\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uAE30\\uC874 \\uACAC\\uC801\\uC5D0 \\uB300\\uD574 \\uC7AC\\uBB38\\uC758\\uD569\\uB2C8\\uB2E4\"})]})]}),!isCustomer&&/*#__PURE__*/_jsxs(\"div\",{className:\"customer-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"customer-search\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uACE0\\uAC1D \\uAC80\\uC0C9\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-search\",onClick:handleCustomerSearch,children:\"\\uACE0\\uAC1D \\uAC80\\uC0C9\"}),selectedCustomer&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-clear\",onClick:()=>setSelectedCustomer(null),children:\"\\uC120\\uD0DD \\uD574\\uC81C\"})]})]}),selectedCustomer&&/*#__PURE__*/_jsxs(\"div\",{className:\"customer-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uC120\\uD0DD\\uB41C \\uACE0\\uAC1D \\uC815\\uBCF4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"\\uD68C\\uC0AC\\uBA85:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:selectedCustomer.companyName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"\\uB2F4\\uB2F9\\uC790 \\uC131\\uD568:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:selectedCustomer.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"\\uC9C1\\uAE09:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:selectedCustomer.position})]})]})]}),showCustomerSearch&&/*#__PURE__*/_jsx(CustomerSearchModal,{isOpen:showCustomerSearch,onClose:()=>setShowCustomerSearch(false),onSelectUser:handleCustomerSelect})]})]});};export default EstimateRequestPage;","map":{"version":3,"names":["React","useState","useNavigate","CustomerSearchModal","jsx","_jsx","jsxs","_jsxs","EstimateRequestPage","navigate","currentUser","JSON","parse","localStorage","getItem","isCustomer","roleId","selectedCustomer","setSelectedCustomer","showCustomerSearch","setShowCustomerSearch","handleNewEstimate","alert","setItem","stringify","handleLoadTemporary","handleReInquiry","handleCustomerSelect","user","handleCustomerSearch","className","children","onClick","companyName","name","position","isOpen","onClose","onSelectUser"],"sources":["/Users/simjimin/Downloads/final_develop/projec/frontend/src/pages/Dashboard/EstimateRequestPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './DashboardPages.css';\nimport './EstimateRequest.css';\nimport { searchUsers } from '../../api/userManagement';\nimport CustomerSearchModal from '../../components/CustomerSearchModal';\n\nconst EstimateRequestPage: React.FC = () => {\n  const navigate = useNavigate();\n  \n  // 현재 로그인한 사용자 정보\n  const currentUser = JSON.parse(localStorage.getItem('user') || '{}');\n  const isCustomer = currentUser.roleId === 3;\n\n  // 관리자/직원용 상태\n  const [selectedCustomer, setSelectedCustomer] = useState<any>(null);\n  const [showCustomerSearch, setShowCustomerSearch] = useState(false);\n\n  const handleNewEstimate = () => {\n    if (isCustomer) {\n      // 고객은 바로 이동\n      navigate('/estimate-request/new');\n    } else {\n      // 관리자/직원은 고객 선택 확인\n      if (!selectedCustomer) {\n        alert('고객을 먼저 선택해주세요.');\n        return;\n      }\n      // 선택된 고객 정보를 localStorage에 저장\n      localStorage.setItem('selectedCustomer', JSON.stringify(selectedCustomer));\n      navigate('/estimate-request/new');\n    }\n  };\n\n  const handleLoadTemporary = () => {\n    if (!selectedCustomer) {\n      alert('고객을 먼저 선택해주세요.');\n      return;\n    }\n    // 선택된 고객 정보를 localStorage에 저장\n    localStorage.setItem('selectedCustomerForTempStorage', JSON.stringify(selectedCustomer));\n    navigate('/estimate-request/temporary');\n  };\n\n  const handleReInquiry = () => {\n    navigate('/existing-estimate-reinquiry');\n  };\n\n  const handleCustomerSelect = (user: any) => {\n    setSelectedCustomer(user);\n    setShowCustomerSearch(false);\n  };\n\n  const handleCustomerSearch = () => {\n    setShowCustomerSearch(true);\n  };\n\n  return (\n    <div className=\"estimate-request-page\">\n      <div className=\"page-header\">\n        <div className=\"header-left\">\n          <button className=\"back-btn\" onClick={() => navigate(-1)}>\n            &lt;\n          </button>\n          <h1>견적요청</h1>\n        </div>\n      </div>\n\n      <div className=\"main-content\">\n        <div className=\"action-cards\">\n          <div className=\"action-card\" onClick={handleNewEstimate}>\n            <h3>신규 견적 요청하기</h3>\n            <p>새로운 견적을 요청합니다</p>\n          </div>\n          \n          <div className=\"action-card\" onClick={handleLoadTemporary}>\n            <h3>임시저장 불러오기</h3>\n            <p>임시저장된 견적을 불러옵니다</p>\n          </div>\n          \n          <div className=\"action-card\" onClick={handleReInquiry}>\n            <h3>기존 견적 재문의</h3>\n            <p>기존 견적에 대해 재문의합니다</p>\n          </div>\n        </div>\n\n        {/* 관리자/직원용 고객 검색 및 정보 표시 */}\n        {!isCustomer && (\n          <div className=\"customer-section\">\n            <div className=\"customer-search\">\n              <h3>고객 검색</h3>\n              <div className=\"search-controls\">\n                <button \n                  className=\"btn-search\" \n                  onClick={handleCustomerSearch}\n                >\n                  고객 검색\n                </button>\n                {selectedCustomer && (\n                  <button \n                    className=\"btn-clear\" \n                    onClick={() => setSelectedCustomer(null)}\n                  >\n                    선택 해제\n                  </button>\n                )}\n              </div>\n            </div>\n\n            {selectedCustomer && (\n              <div className=\"customer-info\">\n                <h3>선택된 고객 정보</h3>\n                <div className=\"info-row\">\n                  <span className=\"label\">회사명:</span>\n                  <span className=\"value\">{selectedCustomer.companyName}</span>\n                </div>\n                <div className=\"info-row\">\n                  <span className=\"label\">담당자 성함:</span>\n                  <span className=\"value\">{selectedCustomer.name}</span>\n                </div>\n                <div className=\"info-row\">\n                  <span className=\"label\">직급:</span>\n                  <span className=\"value\">{selectedCustomer.position}</span>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* 고객 검색 모달 */}\n        {showCustomerSearch && (\n          <CustomerSearchModal\n            isOpen={showCustomerSearch}\n            onClose={() => setShowCustomerSearch(false)}\n            onSelectUser={handleCustomerSelect}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default EstimateRequestPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}