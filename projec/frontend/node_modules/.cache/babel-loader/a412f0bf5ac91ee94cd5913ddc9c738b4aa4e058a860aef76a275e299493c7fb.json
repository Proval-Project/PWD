{"ast":null,"code":"import _objectWithoutProperties from\"/Users/simjimin/Downloads/final_develop/projec/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _objectSpread from\"/Users/simjimin/Downloads/final_develop/projec/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const _excluded=[\"ValveSeriesCode\"];import React,{useState,useEffect,useRef,useCallback,useMemo}from'react';import{useNavigate,useSearchParams}from'react-router-dom';import axios from'axios';import{DndContext,closestCenter,KeyboardSensor,PointerSensor,useSensor,useSensors}from'@dnd-kit/core';import{arrayMove,SortableContext,sortableKeyboardCoordinates,verticalListSortingStrategy}from'@dnd-kit/sortable';import{useSortable}from'@dnd-kit/sortable';import{CSS}from'@dnd-kit/utilities';import'./DashboardPages.css';import'./NewEstimateRequest.css';// í¬ë¡œìŠ¤í”Œë«í¼ ê²½ë¡œ ì²˜ë¦¬ë¥¼ ìœ„í•œ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const isManagerFile=filePath=>{if(!filePath)return false;// Windowsì™€ Unix ê²½ë¡œ ëª¨ë‘ ì§€ì›\nconst normalizedPath=filePath.replace(/\\\\/g,'/');// Windows ë°±ìŠ¬ë˜ì‹œë¥¼ ìŠ¬ë˜ì‹œë¡œ ë³€í™˜\n// ë‹¤ì–‘í•œ ê²½ë¡œ íŒ¨í„´ ì§€ì›\nconst managerFilePatterns=['/ResultFiles/','\\\\ResultFiles\\\\','ResultFiles/','ResultFiles\\\\'];return managerFilePatterns.some(pattern=>normalizedPath.includes(pattern));};// ê²½ë¡œì—ì„œ managerFileType ì¶”ì¶œí•˜ëŠ” í¬ë¡œìŠ¤í”Œë«í¼ í•¨ìˆ˜\nconst extractManagerFileType=filePath=>{if(!filePath)return null;const normalizedPath=filePath.replace(/\\\\/g,'/');const pathParts=normalizedPath.split('/');const resultFilesIndex=pathParts.findIndex(part=>part==='ResultFiles');if(resultFilesIndex!==-1&&resultFilesIndex+1<pathParts.length){return pathParts[resultFilesIndex+1];}return null;};// CustomerRequest íŒŒì¼ì¸ì§€ í™•ì¸í•˜ëŠ” í¬ë¡œìŠ¤í”Œë«í¼ í•¨ìˆ˜\nconst isCustomerFile=filePath=>{if(!filePath)return false;const normalizedPath=filePath.replace(/\\\\/g,'/');const customerFilePatterns=['/CustomerRequest/','\\\\CustomerRequest\\\\','CustomerRequest/','CustomerRequest\\\\'];return customerFilePatterns.some(pattern=>normalizedPath.includes(pattern));};// ResultFiles/customer íŒŒì¼ì¸ì§€ í™•ì¸ (ê³ ê°ì—ê²Œ ì œê³µë˜ëŠ” ê²°ê³¼ ë¬¸ì„œ)\nconst isResultCustomerFile=filePath=>{if(!filePath)return false;const normalizedPath=filePath.replace(/\\\\/g,'/').toLowerCase();// íŠ¸ë ˆì¼ë§ ìŠ¬ë˜ì‹œ ìœ ë¬´ì™€ ëŒ€ì†Œë¬¸ì ì°¨ì´ í—ˆìš©\nreturn normalizedPath.includes('/resultfiles/customer');};// ë‹¨ìœ„/ì‚¬ì´ì¦ˆ ë§ˆìŠ¤í„° ë°ì´í„° íƒ€ì…\n// ë“œë˜ê·¸ ê°€ëŠ¥í•œ ì•„ì´í…œ ì»´í¬ë„ŒíŠ¸\nconst SortableItem=_ref=>{let{children,id}=_ref;const{attributes,listeners,setNodeRef,transform,transition,isDragging}=useSortable({id});const style={transform:CSS.Transform.toString(transform),transition,opacity:isDragging?0.5:1};return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({ref:setNodeRef,style:style},attributes),{},{children:/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({},listeners),{},{children:children}))}));};// ê¸°íƒ€ ìš”ì²­ì‚¬í•­ ì»´í¬ë„ŒíŠ¸ (ì™„ì „íˆ ë…ë¦½ì )\nconst CustomerRequirementComponent=/*#__PURE__*/React.memo(_ref2=>{let{value,onChange,isReadOnly=false}=_ref2;const[localValue,setLocalValue]=useState(value);// ì™¸ë¶€ ê°’ì´ ë³€ê²½ë˜ë©´ ë™ê¸°í™”\nuseEffect(()=>{setLocalValue(value);},[value]);const handleChange=e=>{const newValue=e.target.value;setLocalValue(newValue);onChange(newValue);};return/*#__PURE__*/_jsxs(\"div\",{className:\"requirement-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uAE30\\uD0C0\\uC694\\uCCAD\\uC0AC\\uD56D\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"customer-requirement\",name:\"customerRequirement\",value:localValue,onChange:handleChange,placeholder:\"\\uAE30\\uD0C0 \\uC694\\uCCAD\\uC0AC\\uD56D\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",disabled:isReadOnly})]});});const NewEstimateRequestPage=()=>{const navigate=useNavigate();const[searchParams]=useSearchParams();const[tempEstimateNo,setTempEstimateNo]=useState('');const isDataLoaded=useRef(false);// ë°ì´í„° ë¡œë”© ìƒíƒœ ì¶”ì \nconst[projectName,setProjectName]=useState('');const[selectedType,setSelectedType]=useState('');const[types,setTypes]=useState([]);const[valves,setValves]=useState([]);const[currentValve,setCurrentValve]=useState(null);const[attachments,setAttachments]=useState([]);const[customerRequirement,setCustomerRequirement]=useState('');const[otherRequests,setOtherRequests]=useState([]);const[isReadOnly,setIsReadOnly]=useState(false);// READONLY ëª¨ë“œ ìƒíƒœ\nconst[backendStatusText,setBackendStatusText]=useState('');// ë°±ì—”ë“œ ìƒíƒœ í…ìŠ¤íŠ¸\nconst[backendStatus,setBackendStatus]=useState(null);// ë°±ì—”ë“œ ìƒíƒœ ì½”ë“œ (1~5)\nconst[staffComment,setStaffComment]=useState('');const[isInitialized,setIsInitialized]=useState(false);// í˜„ì¬ ì„ íƒëœ Typeê³¼ Valveì˜ IDë¥¼ ì €ì¥í•˜ëŠ” ìƒíƒœ\nconst[selectedTypeId,setSelectedTypeId]=useState(null);const[selectedValveId,setSelectedValveId]=useState(null);// ìš”ì•½ ì¹´ë“œ í‘œì‹œìš© íŒŒìƒ ê°’ë“¤\nconst totalQty=useMemo(()=>valves.reduce((sum,v)=>sum+(Number(v.qty)||0),0),[valves]);const statusText=useMemo(()=>isReadOnly?'ì¡°íšŒ':valves.length>0?'ì‘ì„±ì¤‘':'ì‹ ê·œ',[isReadOnly,valves.length]);const uiStatusText=useMemo(()=>backendStatusText||statusText,[backendStatusText,statusText]);// ğŸ”‘ ê´€ë¦¬ ì²¨ë¶€íŒŒì¼ ìƒíƒœ ì¶”ê°€\nconst[managerAttachments,setManagerAttachments]=useState([]);const[bodyValveList,setBodyValveList]=useState([]);const[showValveDropdown,setShowValveDropdown]=useState(false);const specSectionRef=useRef(null);const tagNoRef=useRef(null);// í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°\nconst[currentUser,setCurrentUser]=useState(null);const[selectedCustomer,setSelectedCustomer]=useState(null);const[bodyMatList,setBodyMatList]=useState([]);const[trimMatList,setTrimMatList]=useState([]);const[trimOptionList,setTrimOptionList]=useState([]);const[actSizeList,setActSizeList]=useState([]);const[actHWList,setActHWList]=useState([]);const[bodyRatingList,setBodyRatingList]=useState([]);const nameToCodeCache=useRef(new Map());const codeToNameCache=useRef(new Map());const[trimPortSizeList,setTrimPortSizeList]=useState([]);// EstimateDetailPageì™€ ë™ì¼í•œ ì •ë ¬ ë° Unit ëª©ë¡ ìƒì„± ë¡œì§ ì¶”ê°€\nconst customSort=(a,b)=>{const isNumberA=!isNaN(parseFloat(a));const isNumberB=!isNaN(parseFloat(b));if(isNumberA&&!isNumberB)return-1;if(!isNumberA&&isNumberB)return 1;if(a.toUpperCase()==='SPECIAL'&&b.toUpperCase()!=='SPECIAL')return 1;if(a.toUpperCase()!=='SPECIAL'&&b.toUpperCase()==='SPECIAL')return-1;return a.localeCompare(b,undefined,{numeric:true});};const uniqueRatingUnits=useMemo(()=>{if(!bodyRatingList||bodyRatingList.length===0){return[];}const unitMap=new Map();bodyRatingList.forEach(item=>{if(item.ratingUnitCode&&!unitMap.has(item.ratingUnitCode)){unitMap.set(item.ratingUnitCode,item.ratingUnit);}});// { code, name } í˜•íƒœì˜ ê°ì²´ ë°°ì—´ë¡œ ë³€í™˜\nconst units=Array.from(unitMap,_ref3=>{let[code,name]=_ref3;return{code,name};});return units.sort((a,b)=>customSort(a.name,b.name));},[bodyRatingList]);const filteredRatingList=useMemo(()=>{if(!currentValve||!currentValve.body.ratingUnit){// ratingUnitì€ ì´ì œ ì½”ë“œì…ë‹ˆë‹¤.\nreturn[];}return bodyRatingList.filter(item=>item.ratingUnitCode===currentValve.body.ratingUnit);},[currentValve,bodyRatingList]);useEffect(()=>{const userStr=localStorage.getItem('user');if(userStr){setCurrentUser(JSON.parse(userStr));}// ì„ íƒëœ ê³ ê° ì •ë³´ ê°€ì ¸ì˜¤ê¸°\nconst customerStr=localStorage.getItem('selectedCustomer');if(customerStr){setSelectedCustomer(JSON.parse(customerStr));}// readonly ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° í™•ì¸\nconst readonlyParam=searchParams.get('readonly');console.log('NewEstimateRequestPage - readonlyParam:',readonlyParam);console.log('NewEstimateRequestPage - searchParams:',Object.fromEntries(searchParams.entries()));if(readonlyParam==='true'){setIsReadOnly(true);console.log('NewEstimateRequestPage - isReadOnly set to true');}else{setIsReadOnly(false);console.log('NewEstimateRequestPage - isReadOnly set to false');}},[searchParams]);useEffect(()=>{fetchBodyValveList();// ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ë°¸ë¸Œ ëª©ë¡ ë¡œë“œ\nfetchBodyRatingList();},[]);// ë¹ˆ ë°°ì—´: í•œ ë²ˆë§Œ ì‹¤í–‰\n// ë§¤ë‹ˆì € ë˜ëŠ” ì‘ì„±ìì¸ì§€ í™•ì¸\nconst isManager=(currentUser===null||currentUser===void 0?void 0:currentUser.roleId)===2;const isWriter=(currentUser===null||currentUser===void 0?void 0:currentUser.roleId)===3;const sensors=useSensors(useSensor(PointerSensor,{activationConstraint:{distance:8// 8px ì´ìƒ ë“œë˜ê·¸í•´ì•¼ ë“œë˜ê·¸ ì‹œì‘\n}}),useSensor(KeyboardSensor,{coordinateGetter:sortableKeyboardCoordinates}));// BodyValveList ê°€ì ¸ì˜¤ê¸° (í•¨ìˆ˜ ì •ì˜ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€)\nconst fetchBodyValveList=async()=>{try{const response=await axios.get('/api/estimate/body-valve-list');setBodyValveList(response.data);}catch(error){console.error('Error fetching body valve list:',error);}};// BodyRatingList ê°€ì ¸ì˜¤ê¸°\nconst fetchBodyRatingList=async()=>{try{const response=await axios.get('/api/estimate/body-rating-list');setBodyRatingList(response.data);}catch(error){console.error('Error fetching body rating list:',error);}};// ê¸°ì¡´ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° useEffect (ì˜ì¡´ì„± ìˆ˜ì •)\nuseEffect(()=>{if(bodyRatingList.length>0){// bodyValveList -> bodyRatingList\nconst userStr=localStorage.getItem('user');if(userStr){setCurrentUser(JSON.parse(userStr));}const customerStr=localStorage.getItem('selectedCustomer');if(customerStr){setSelectedCustomer(JSON.parse(customerStr));}const loadParam=searchParams.get('load');if(loadParam&&!isDataLoaded.current){loadExistingData(loadParam);// ë‘ ë²ˆì§¸ ì¸ì ì œê±°\nisDataLoaded.current=true;}}},[searchParams,bodyRatingList]);// ì˜ì¡´ì„± ë°°ì—´ì„ bodyRatingListë¡œ ë³€ê²½\n// Type ë“œë˜ê·¸ì•¤ë“œë¡­ í•¸ë“¤ëŸ¬\nconst handleTypeDragEnd=useCallback(event=>{const{active,over}=event;if(active.id!==(over===null||over===void 0?void 0:over.id)){setTypes(items=>{const oldIndex=items.findIndex(item=>item.id===active.id);const newIndex=items.findIndex(item=>item.id===(over===null||over===void 0?void 0:over.id));const newItems=arrayMove(items,oldIndex,newIndex);// order ì—…ë°ì´íŠ¸\nreturn newItems.map((item,index)=>_objectSpread(_objectSpread({},item),{},{order:index+1}));});// Type ìˆœì„œê°€ ë°”ë€Œë©´ ì „ì²´ Valveì˜ SheetNo ì¬ê³„ì‚°\nsetTimeout(()=>{updateAllSheetNumbers();},0);}},[]);// Type ì¶”ê°€/ì‚­ì œ ê¸°ëŠ¥\nconst handleAddType=useCallback(()=>{setShowValveDropdown(true);},[]);// Type ì‚­ì œ ê¸°ëŠ¥\nconst handleRemoveType=useCallback(index=>{setTypes(prevTypes=>{const newTypes=prevTypes.filter((_,i)=>i!==index);// order ì¬ì •ë ¬\nreturn newTypes.map((type,i)=>_objectSpread(_objectSpread({},type),{},{order:i+1}));});},[]);// Type ë³€ê²½ í•¸ë“¤ëŸ¬\nconst handleTypeChange=useCallback((index,field,value)=>{setTypes(prevTypes=>{const newTypes=[...prevTypes];newTypes[index]=_objectSpread(_objectSpread({},newTypes[index]),{},{[field]:value});return newTypes;});},[]);const handleValveSelect=useCallback(valve=>{// ì¤‘ë³µ ì²´í¬\nconst isDuplicate=types.some(type=>type.name===valve.valveSeries);if(isDuplicate){alert('ì´ë¯¸ ì¶”ê°€ëœ Typeì…ë‹ˆë‹¤.');return;}const timestamp=Date.now();const newType={id:\"type-\".concat(timestamp),name:valve.valveSeries,code:valve.valveSeriesCode,// ValveSeriesCode ì €ì¥\ncount:0,order:types.length+1,typeId:\"type-\".concat(timestamp)// ì¶”ê°€\n};console.log('--- Debugging handleValveSelect ---');console.log('Selected Valve (BodyValveData):',valve);console.log('New Type (TypeData):',newType);console.log('-----------------------------------');console.log('ìƒˆë¡œìš´ íƒ€ì… ì¶”ê°€:',newType);// ë””ë²„ê¹…ìš©\nsetTypes(prev=>{const newTypes=[...prev,newType];console.log('ì—…ë°ì´íŠ¸ëœ types:',newTypes);// ë””ë²„ê¹…ìš©\nreturn newTypes;});// ìƒˆë¡œ ì¶”ê°€ëœ íƒ€ì…ì„ ìë™ìœ¼ë¡œ ì„ íƒ\nsetSelectedType(newType.id);console.log('selectedType ì„¤ì •:',newType.id);// ë””ë²„ê¹…ìš©\nsetShowValveDropdown(false);},[types]);// Valve ë“œë˜ê·¸ì•¤ë“œë¡­ í•¸ë“¤ëŸ¬\nconst handleValveDragEnd=useCallback(event=>{const{active,over}=event;if(active.id!==(over===null||over===void 0?void 0:over.id)){const activeValve=valves.find(v=>v.id===active.id);if(!activeValve)return;// ê°™ì€ Type ë‚´ì—ì„œë§Œ ë“œë˜ê·¸ í—ˆìš©\nsetValves(items=>{const sameTypeItems=items.filter(item=>item.typeId===activeValve.typeId);const otherTypeItems=items.filter(item=>item.typeId!==activeValve.typeId);const oldIndex=sameTypeItems.findIndex(item=>item.id===active.id);const newIndex=sameTypeItems.findIndex(item=>item.id===(over===null||over===void 0?void 0:over.id));const reorderedSameType=arrayMove(sameTypeItems,oldIndex,newIndex);// ê°™ì€ Type ë‚´ì—ì„œ order ì¬ì •ë ¬ (1ë¶€í„° ì‹œì‘)\nconst updatedSameType=reorderedSameType.map((item,index)=>_objectSpread(_objectSpread({},item),{},{order:index+1}));// ì „ì²´ ë°°ì—´ ì¬êµ¬ì„±\nreturn[...otherTypeItems,...updatedSameType].sort((a,b)=>{var _types$find,_types$find2;// Type ìˆœì„œëŒ€ë¡œ, ê·¸ ë‹¤ìŒ order ìˆœì„œëŒ€ë¡œ ì •ë ¬\nconst typeOrderA=((_types$find=types.find(t=>t.id===a.typeId))===null||_types$find===void 0?void 0:_types$find.order)||0;const typeOrderB=((_types$find2=types.find(t=>t.id===b.typeId))===null||_types$find2===void 0?void 0:_types$find2.order)||0;if(typeOrderA!==typeOrderB){return typeOrderA-typeOrderB;}return a.order-b.order;});});}},[valves,types]);// ì „ì²´ SheetNo ì¬ê³„ì‚° í•¨ìˆ˜\nconst updateAllSheetNumbers=useCallback(()=>{setValves(currentValves=>{let globalSheetNo=1;return currentValves.sort((a,b)=>{var _types$find3,_types$find4;// Type ìˆœì„œëŒ€ë¡œ, ê·¸ ë‹¤ìŒ order ìˆœì„œëŒ€ë¡œ ì •ë ¬\nconst typeOrderA=((_types$find3=types.find(t=>t.id===a.typeId))===null||_types$find3===void 0?void 0:_types$find3.order)||0;const typeOrderB=((_types$find4=types.find(t=>t.id===b.typeId))===null||_types$find4===void 0?void 0:_types$find4.order)||0;if(typeOrderA!==typeOrderB){return typeOrderA-typeOrderB;}return a.order-b.order;}).map(valve=>_objectSpread({},valve));});},[types]);// Valve ì¶”ê°€/ì‚­ì œ ê¸°ëŠ¥\nconst handleAddValve=useCallback(()=>{if(!selectedType){alert('ë¨¼ì € Step 1ì—ì„œ Typeì„ ì„ íƒí•´ì£¼ì„¸ìš”.');return;}const selectedTypeData=types.find(t=>t.id===selectedType);if(!selectedTypeData)return;// ê°™ì€ Typeì˜ TagNo ê°œìˆ˜ í™•ì¸\nconst sameTypeValves=valves.filter(v=>v.typeId===selectedType);const nextOrder=sameTypeValves.length+1;// 1ë¶€í„° ì‹œì‘\n// ìƒˆë¡œìš´ ê³ ìœ  SheetID ìƒì„± (í•œ ë²ˆ í• ë‹¹ë˜ë©´ ë³€í•˜ì§€ ì•ŠìŒ)\nconst newSheetID=Math.max(...valves.map(v=>v.sheetID),0)+1;const newValve={id:\"valve-\".concat(Date.now()),tagNo:\"Tag-\".concat(String(getNextTagNo()).padStart(4,'0')),// ê¸°ë³¸ê°’ì´ì§€ë§Œ ì‚¬ìš©ìê°€ ìˆ˜ì • ê°€ëŠ¥\nqty:0,order:nextOrder,sheetID:newSheetID,// ê³ ìœ  ID, ì ˆëŒ€ ë³€í•˜ì§€ ì•ŠìŒ\ntypeId:selectedType,fluid:{medium:'',fluid:'',density:'',molecular:'',t1:{max:0,normal:0,min:0},p1:{max:0,normal:0,min:0},p2:{max:0,normal:0,min:0},dp:{max:0,normal:0,min:0},qm:{max:0,normal:0,min:0,unit:'mÂ³/h'},qn:{max:0,normal:0,min:0,unit:'mÂ³/h'},pressureUnit:'Mpa(g)',temperatureUnit:'Â°C'},body:{type:selectedTypeData.name,typeCode:selectedTypeData.code,// Step 1ì—ì„œ ì €ì¥í•œ ValveSeriesCode ì‚¬ìš©\nsize:'',sizeUnit:'',materialBody:'',materialTrim:'',option:'',rating:'',ratingUnit:''},actuator:{type:'',hw:''},accessory:{positioner:{exists:false,type:'',maker:'',model:''},explosionProof:'',transmitter:{exists:false,type:''},solenoidValve:{exists:false,type:'',maker:'',model:''},limitSwitch:{exists:false,type:'',maker:'',model:''},airSet:{exists:false,type:'',maker:'',model:''},volumeBooster:{exists:false,type:'',maker:'',model:''},airOperatedValve:{exists:false,type:'',maker:'',model:''},lockupValve:{exists:false,type:'',maker:'',model:''},snapActingRelay:{exists:false,type:'',maker:'',model:''}},// ë¼ë””ì˜¤ ë²„íŠ¼ ìƒíƒœë“¤\nisQM:false,isP2:false,isN1:false,isDensity:false,isHW:false};setValves(prev=>[...prev,newValve]);},[selectedType,types,valves.length]);// TagNo ìƒì„±ì„ ìœ„í•œ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\nconst getNextTagNo=useCallback(()=>{return valves.length+1;},[valves]);// í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì •ì˜í•  ë“œë¡­ë‹¤ìš´ ë°°ì—´ë“¤\nconst fluidOptions=['Liquid','Vaporous','Gaseous'];const actuatorTypeOptions=['Pneumatic','Electric','Hydraulic','No'];const positionerTypeOptions=['P.P','E.P','Smart'];const explosionProofOptions=['ë‚´ì••ë°©í­','ë³¸ì§ˆì•ˆì „ë°©í­','ìˆ˜ì†Œë°©í­'];const transmitterTypeOptions=['Pressure','Temperature','Flow','No'];const hwOptions=['Yes','No'];// ë¼ë””ì˜¤ ë²„íŠ¼ ì˜µì…˜ë“¤\nconst flowTypeOptions=['Qm','Qn'];const pressureOptions=['P1','P2'];const temperatureOptions=['T1','N1'];const densityOptions=['Density','Molecular'];// DBì—ì„œ ê°€ì ¸ì˜¬ ë§ˆìŠ¤í„° ë°ì´í„° ìƒíƒœ\nconst[bodySizeList,setBodySizeList]=useState([]);// Size ê°’ìœ¼ë¡œë¶€í„° Unitì„ ìœ ì¶”í•˜ëŠ” í•¨ìˆ˜\nconst getSizeUnitFromSize=size=>{if(!size)return'';// inch ë‹¨ìœ„ (1/2\", 1\", 2\" ë“±)\nif(size.includes('\"')||size.includes('â€³')){return'I';}// DN ë‹¨ìœ„ (15A, 20A, 25A ë“±) - í•˜ì§€ë§Œ í˜„ì¬ëŠ” F, G, H ë“±ìœ¼ë¡œ ì €ì¥ë¨\nif(size==='F')return'A';// FëŠ” 20Aì— í•´ë‹¹\nif(size==='G')return'A';// GëŠ” 25Aì— í•´ë‹¹\nif(size==='H')return'A';// HëŠ” 32Aì— í•´ë‹¹\nif(size==='I')return'A';// IëŠ” 40Aì— í•´ë‹¹\nif(size==='J')return'A';// JëŠ” 50Aì— í•´ë‹¹\nif(size==='K')return'A';// KëŠ” 65Aì— í•´ë‹¹\nif(size==='L')return'A';// LëŠ” 80Aì— í•´ë‹¹\nif(size==='M')return'A';// MëŠ” 100Aì— í•´ë‹¹\nif(size==='N')return'A';// NëŠ” 125Aì— í•´ë‹¹\nif(size==='O')return'A';// OëŠ” 150Aì— í•´ë‹¹\nif(size==='P')return'A';// PëŠ” 200Aì— í•´ë‹¹\nif(size==='Q')return'A';// QëŠ” 250Aì— í•´ë‹¹\nif(size==='R')return'A';// RëŠ” 300Aì— í•´ë‹¹\nif(size==='S')return'A';// SëŠ” 350Aì— í•´ë‹¹\nif(size==='T')return'A';// TëŠ” 400Aì— í•´ë‹¹\nif(size==='U')return'A';// UëŠ” 450Aì— í•´ë‹¹\nif(size==='V')return'A';// VëŠ” 500Aì— í•´ë‹¹\nif(size==='W')return'A';// WëŠ” 550Aì— í•´ë‹¹\nif(size==='X')return'A';// XëŠ” 600Aì— í•´ë‹¹\nif(size==='Y')return'A';// YëŠ” 900Aì— í•´ë‹¹\n// None\nif(size==='None'){return'N';}// SPECIAL\nif(size==='SPECIAL'){return'Z';}return'';};// ì´ë¦„ì„ ì½”ë“œë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜ë“¤\nconst getNameToCode=(list,name,nameField,codeField)=>{const item=list.find(item=>item[nameField]===name);return item?item[codeField]:'';};const getBodySizeCode=(size,unit)=>{// UIì—ì„œ ì´ë¯¸ ì½”ë“œë¥¼ ì„ íƒí•˜ë¯€ë¡œ ê·¸ëŒ€ë¡œ ë°˜í™˜\nreturn size;};const getBodyMatCode=name=>{// UIì—ì„œ ì´ë¯¸ ì½”ë“œë¥¼ ì„ íƒí•˜ë¯€ë¡œ ê·¸ëŒ€ë¡œ ë°˜í™˜\nreturn name;};const getTrimMatCode=name=>{// UIì—ì„œ ì´ë¯¸ ì½”ë“œë¥¼ ì„ íƒí•˜ë¯€ë¡œ ê·¸ëŒ€ë¡œ ë°˜í™˜\nreturn name;};const getTrimOptionCode=name=>{// UIì—ì„œ ì´ë¯¸ ì½”ë“œë¥¼ ì„ íƒí•˜ë¯€ë¡œ ê·¸ëŒ€ë¡œ ë°˜í™˜\nreturn name;};const getBodyRatingCode=name=>{const item=bodyRatingList.find(item=>item.ratingName===name);return item?item.ratingCode:'';};const getBodyRatingName=code=>{const item=bodyRatingList.find(item=>item.ratingCode===code);return item?item.ratingName:'';};const getBodyRatingUnitNameByCode=unitCode=>{const item=bodyRatingList.find(item=>item.ratingUnitCode===unitCode);return item?item.ratingUnit:'';// unitCodeê°€ ì•„ë‹Œ unit(ì´ë¦„)ì„ ë°˜í™˜\n};const getBodyRatingUnit=code=>{// ratingCodeê°€ ì•„ë‹Œ ratingUnitCodeë¡œ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.\nconst item=bodyRatingList.find(item=>item.ratingUnitCode===code);// ratingUnitCodeê°€ ì•„ë‹Œ ratingUnit(ì´ë¦„)ì„ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.\nreturn item?item.ratingUnit:'';};const getBodyRatingUnitCode=ratingCode=>{const item=bodyRatingList.find(item=>item.ratingCode===ratingCode);return item?item.ratingUnitCode:'';};const getBodySizeName=(code,unitCode)=>{const item=bodySizeList.find(item=>item.bodySizeCode===code&&item.sizeUnitCode===unitCode);return item?item.bodySize:'';};const getBodyRatingUnitByCode=unitCode=>{// bodyRatingListì—ì„œ unitCodeì— í•´ë‹¹í•˜ëŠ” unit ì´ë¦„ì„ ì°¾ìŠµë‹ˆë‹¤.\nconst item=bodyRatingList.find(item=>item.ratingUnitCode===unitCode);return item?item.ratingUnit:'';};// ì²¨ë¶€íŒŒì¼ ê´€ë ¨ ìƒíƒœ\nconst[fileAttachments,setFileAttachments]=useState([]);const[uploadingFiles,setUploadingFiles]=useState(false);const[pendingFiles,setPendingFiles]=useState([]);// ì„ì‹œ ì €ì¥í•  íŒŒì¼ë“¤\n// ì²¨ë¶€íŒŒì¼ì„ attachments ìƒíƒœì™€ ë™ê¸°í™” (ì„ì‹œ ì„ íƒ íŒŒì¼ë„ í‘œì‹œ)\nuseEffect(()=>{console.log('ğŸ”„ fileAttachments ë³€ê²½ë¨:',fileAttachments);const attachmentFiles=fileAttachments.map(att=>({name:att.name,size:att.size,path:att.filePath||att.path||'',id:att.attachmentId||att.id||att.uniqueId,isPending:!!att.isPending}));console.log('ğŸ’¾ attachmentsë¡œ ë³€í™˜ë¨:',attachmentFiles);setAttachments(prev=>{const prevString=JSON.stringify(prev);const newString=JSON.stringify(attachmentFiles);if(prevString===newString){console.log('ğŸ”„ attachments ìƒíƒœ ë™ì¼, ì—…ë°ì´íŠ¸ ìƒëµ');return prev;}console.log('ğŸ”„ attachments ìƒíƒœ ë³€ê²½ë¨ - fileAttachmentsì—ì„œ ë™ê¸°í™”');return attachmentFiles;});},[fileAttachments]);// attachments ìƒíƒœ ë³€ê²½ ì‹œ ë¡œê¹… (ë¬´í•œ ë£¨í”„ ë°©ì§€)\nuseEffect(()=>{console.log('ğŸ“‹ attachments ìƒíƒœ ë³€ê²½ë¨:',attachments);},[attachments]);// attachments ìƒíƒœ ë³€ê²½ ì‹œ ë¡œê¹…\nuseEffect(()=>{console.log('ğŸ“‹ attachments ìƒíƒœ ë³€ê²½ë¨:',attachments);},[attachments]);// pendingFiles ìƒíƒœ ë³€í™” ì¶”ì \nuseEffect(()=>{console.log('ğŸ”„ pendingFiles ìƒíƒœ ë³€ê²½ë¨:',pendingFiles);console.log('ğŸ”„ pendingFiles ê°œìˆ˜:',pendingFiles.length);console.log('ğŸ”„ pendingFiles íŒŒì¼ëª…ë“¤:',pendingFiles.map(f=>f.name));},[pendingFiles]);const handleDeleteValve=useCallback(valveId=>{setValves(prev=>prev.filter(valve=>valve.id!==valveId));if((currentValve===null||currentValve===void 0?void 0:currentValve.id)===valveId){setCurrentValve(null);}},[currentValve]);// ì²¨ë¶€íŒŒì¼ ì—…ë¡œë“œ í•¨ìˆ˜ (ì¦‰ì‹œ ë°±ì—”ë“œ ì—…ë¡œë“œ)\nconst handleFileUpload=useCallback(async files=>{console.log('ğŸš€ handleFileUpload í˜¸ì¶œë¨!');console.log('ğŸ“ ì—…ë¡œë“œí•  íŒŒì¼ë“¤:',files);console.log('ğŸ”‘ í˜„ì¬ tempEstimateNo:',tempEstimateNo);setUploadingFiles(true);const newFiles=[];try{console.log('íŒŒì¼ ì—…ë¡œë“œ ì‹œì‘:',files.length,'ê°œ íŒŒì¼');// í˜„ì¬ ì‚¬ìš©ì ID ê°€ì ¸ì˜¤ê¸° (í•¨ìˆ˜ ì‹œì‘ ì‹œì ì—)\nconst userStr=localStorage.getItem('user');const currentUser=userStr?JSON.parse(userStr):null;const uploadUserID=(currentUser===null||currentUser===void 0?void 0:currentUser.userId)||'admin';for(let i=0;i<files.length;i++){const file=files[i];console.log('íŒŒì¼ ì •ë³´:',file.name,'í¬ê¸°:',file.size,'íƒ€ì…:',file.type);newFiles.push(file);}// ìƒˆë¡œ ì„ íƒëœ íŒŒì¼ë“¤ì„ pendingFilesì— ì €ì¥ (ê²¬ì ìš”ì²­ ì‹œì ì— ì—…ë¡œë“œ)\nfor(const file of newFiles){try{console.log('ìƒˆ íŒŒì¼ì„ pendingFilesì— ì €ì¥:',file.name);// ğŸ”‘ ì¤‘ë³µ ì²´í¬: ì´ë¯¸ fileAttachmentsì— ìˆëŠ” íŒŒì¼ì¸ì§€ í™•ì¸\nconst isDuplicate=fileAttachments.some(att=>att.name===file.name);if(isDuplicate){console.log('âš ï¸ ì¤‘ë³µ íŒŒì¼ ê°ì§€, pendingFilesì— ì¶”ê°€í•˜ì§€ ì•ŠìŒ:',file.name);continue;}// ğŸ”‘ ì¶”ê°€ ì¤‘ë³µ ì²´í¬: pendingFilesì—ë„ ì´ë¯¸ ìˆëŠ”ì§€ í™•ì¸\nconst isPendingDuplicate=pendingFiles.some(pendingFile=>pendingFile.name===file.name);if(isPendingDuplicate){console.log('âš ï¸ pendingFiles ì¤‘ë³µ ê°ì§€, ì¶”ê°€í•˜ì§€ ì•ŠìŒ:',file.name);continue;}// ğŸ”‘ íŒŒì¼ í¬ê¸°ì™€ ì´ë¦„ìœ¼ë¡œ ë” ì •í™•í•œ ì¤‘ë³µ ì²´í¬\nconst isExactDuplicate=pendingFiles.some(pendingFile=>pendingFile.name===file.name&&pendingFile.size===file.size);if(isExactDuplicate){console.log('âš ï¸ ì •í™•í•œ ì¤‘ë³µ íŒŒì¼ ê°ì§€, ì¶”ê°€í•˜ì§€ ì•ŠìŒ:',file.name,file.size);continue;}const newAttachment={name:file.name,size:file.size,uniqueId:Date.now()+Math.random(),isPending:true};setFileAttachments(prev=>[...prev,newAttachment]);setPendingFiles(prev=>[...prev,file]);// ğŸ”‘ ìƒˆ íŒŒì¼ë§Œ pendingFilesì— ì¶”ê°€\nconsole.log('âœ… ìƒˆ íŒŒì¼ì´ pendingFilesì— ì¶”ê°€ë¨:',file.name);continue;// uploadUserIDëŠ” ì´ë¯¸ ìœ„ì—ì„œ ì„ ì–¸ë¨\nconsole.log('íŒŒì¼ ì—…ë¡œë“œ ì‹œë„:',{fileName:file.name,tempEstimateNo,uploadUserID,fileType:'customer'});const formData=new FormData();formData.append('file',file);formData.append('tempEstimateNo',tempEstimateNo);formData.append('fileType','customer');const response=await fetch(\"/api/estimate/sheets/\".concat(tempEstimateNo,\"/attachments?uploadUserID=\").concat(uploadUserID,\"&fileType=customer\"),{method:'POST',body:formData});if(response.ok){const uploadedFile=await response.json();console.log('âœ… íŒŒì¼ ì—…ë¡œë“œ ì„±ê³µ:',uploadedFile);// ì—…ë¡œë“œëœ íŒŒì¼ ì •ë³´ë¥¼ fileAttachmentsì— ì¶”ê°€\nconst newAttachment={name:file.name,size:file.size,uniqueId:Date.now()+Math.random(),isPending:false,attachmentId:uploadedFile.attachmentID,filePath:uploadedFile.filePath};console.log('ğŸ“ ìƒˆë¡œìš´ ì²¨ë¶€íŒŒì¼ ê°ì²´ ìƒì„±:',newAttachment);setFileAttachments(prev=>{const updated=[...prev,newAttachment];console.log('ğŸ”„ fileAttachments ìƒíƒœ ì—…ë°ì´íŠ¸:',updated);console.log('ğŸ” isPending=falseì¸ íŒŒì¼ë“¤:',updated.filter(att=>!att.isPending));return updated;});// ì¦‰ì‹œ attachments ìƒíƒœì—ë„ ì¶”ê°€\nsetAttachments(prev=>{const newAttachmentForAttachments={name:file.name,size:file.size,path:uploadedFile.filePath,id:uploadedFile.attachmentID};const updated=[...prev,newAttachmentForAttachments];console.log('ğŸ“ attachments ìƒíƒœ ì¦‰ì‹œ ì—…ë°ì´íŠ¸:',updated);return updated;});}else{console.error('âŒ íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨:',response.status);const errorText=await response.text();console.error('âŒ ì˜¤ë¥˜ ë‚´ìš©:',errorText);// ì‹¤íŒ¨í•œ íŒŒì¼ì€ ì„ì‹œë¡œë§Œ í‘œì‹œ\nconst newAttachment={name:file.name,size:file.size,uniqueId:Date.now()+Math.random(),isPending:true};setFileAttachments(prev=>[...prev,newAttachment]);}}catch(error){console.error('íŒŒì¼ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜:',error);// ì˜¤ë¥˜ ë°œìƒ ì‹œ ì„ì‹œë¡œë§Œ í‘œì‹œ\nconst newAttachment={name:file.name,size:file.size,uniqueId:Date.now()+Math.random(),isPending:true};setFileAttachments(prev=>[...prev,newAttachment]);}}}catch(error){console.error('íŒŒì¼ ì„ì‹œ ì €ì¥ ì‹¤íŒ¨:',error);alert('íŒŒì¼ ì„ì‹œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');}finally{setUploadingFiles(false);}},[]);// ì²¨ë¶€íŒŒì¼ ì‚­ì œ í•¨ìˆ˜ (ì¦‰ì‹œ ë°±ì—”ë“œ API í˜¸ì¶œ)\nconst handleDeleteAttachment=useCallback(async(fileId,filePath)=>{try{console.log('ğŸ—‘ï¸ ì‚­ì œ ì‹œë„ - fileId:',fileId,'filePath:',filePath);console.log('ğŸ” í˜„ì¬ fileAttachments:',fileAttachments);// ì²¨ë¶€íŒŒì¼ ì°¾ê¸° (id, uniqueId, attachmentId ëª¨ë‘ í™•ì¸)\nconst attachment=fileAttachments.find(att=>att.id===fileId||att.uniqueId===fileId||att.attachmentId===fileId);if(!attachment){console.error('âŒ ì‚­ì œí•  ì²¨ë¶€íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:',fileId);console.log('ğŸ” fileAttachmentsì—ì„œ ì°¾ì„ ìˆ˜ ìˆëŠ” IDë“¤:',fileAttachments.map(att=>({id:att.id,uniqueId:att.uniqueId,attachmentId:att.attachmentId})));return;}console.log('âœ… ì°¾ì€ ì²¨ë¶€íŒŒì¼:',attachment);if(attachment.isPending){// ì„ì‹œ íŒŒì¼ì¸ ê²½ìš° pendingFilesì—ì„œë§Œ ì œê±° (ë°±ì—”ë“œ í˜¸ì¶œ ë¶ˆí•„ìš”)\nsetPendingFiles(prev=>prev.filter(file=>file.name!==attachment.name));console.log('âœ… ì„ì‹œ íŒŒì¼ ì‚­ì œë¨:',attachment.name);}else if(attachment.attachmentId){// ì—…ë¡œë“œëœ íŒŒì¼ì¸ ê²½ìš° ì¦‰ì‹œ ë°±ì—”ë“œì—ì„œ ì‚­ì œ\ntry{console.log('ğŸ—‘ï¸ ë°±ì—”ë“œ ì‚­ì œ API ì¦‰ì‹œ í˜¸ì¶œ:',attachment.attachmentId,attachment.name);console.log('ğŸŒ ì‚­ì œ API URL:',\"/api/estimate/attachments/\".concat(attachment.attachmentId));const response=await axios.delete(\"/api/estimate/attachments/\".concat(attachment.attachmentId));console.log('âœ… ë°±ì—”ë“œì—ì„œ íŒŒì¼ ì‚­ì œ ì„±ê³µ:',attachment.name,'ì‘ë‹µ:',response);// ë°±ì—”ë“œ ì‚­ì œ ì„±ê³µ ì‹œì—ë§Œ ë¡œì»¬ ìƒíƒœì—ì„œ ì œê±°\nsetFileAttachments(prev=>{const filtered=prev.filter(att=>att.id!==fileId&&att.uniqueId!==fileId&&att.attachmentId!==fileId);console.log('ğŸ—‘ï¸ fileAttachments ìƒíƒœì—ì„œ ì‚­ì œë¨:',attachment.name,'ë‚¨ì€ íŒŒì¼:',filtered.length);return filtered;});setAttachments(prev=>{const filtered=prev.filter(att=>att.id!==fileId&&att.uniqueId!==fileId&&att.attachmentId!==fileId);console.log('ğŸ—‘ï¸ attachments ìƒíƒœì—ì„œ ì‚­ì œë¨:',attachment.name,'ë‚¨ì€ íŒŒì¼:',filtered.length);return filtered;});console.log('âœ… ì²¨ë¶€íŒŒì¼ ì‚­ì œ ì™„ë£Œ (ë°±ì—”ë“œ + í”„ë¡ íŠ¸ì—”ë“œ):',attachment.name);}catch(serverError){var _serverError$response,_serverError$response2;console.error('âŒ ë°±ì—”ë“œ ì‚­ì œ ì‹¤íŒ¨:',serverError);console.error('âŒ ì„œë²„ ì˜¤ë¥˜ ìƒì„¸:',(_serverError$response=serverError.response)===null||_serverError$response===void 0?void 0:_serverError$response.data);console.error('âŒ ì„œë²„ ìƒíƒœ ì½”ë“œ:',(_serverError$response2=serverError.response)===null||_serverError$response2===void 0?void 0:_serverError$response2.status);// ë°±ì—”ë“œ ì‚­ì œ ì‹¤íŒ¨ ì‹œ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼\nalert(\"\\uD30C\\uC77C \\uC0AD\\uC81C\\uC5D0 \\uC2E4\\uD328\\uD588\\uC2B5\\uB2C8\\uB2E4: \".concat(attachment.name));return;// ë¡œì»¬ ìƒíƒœ ë³€ê²½í•˜ì§€ ì•ŠìŒ\n}}else{console.log('âš ï¸ attachmentIdê°€ ì—†ì–´ì„œ ë°±ì—”ë“œ ì‚­ì œ ë¶ˆê°€:',attachment);alert('íŒŒì¼ ì •ë³´ê°€ ì˜¬ë°”ë¥´ì§€ ì•Šì•„ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');return;}}catch(error){console.error('íŒŒì¼ ì‚­ì œ ì¤‘ ì˜¤ë¥˜:',error);alert('íŒŒì¼ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');}},[fileAttachments]);// ğŸ”‘ ê´€ë¦¬ ì²¨ë¶€íŒŒì¼ ë¡œë“œ í•¨ìˆ˜\nconst loadManagerAttachments=useCallback(async()=>{if(!tempEstimateNo)return;try{console.log('ğŸ”„ loadManagerAttachments ì‹œì‘ - tempEstimateNo:',tempEstimateNo);const response=await fetch(\"http://192.168.0.14:5135/api/estimate/sheets/\".concat(tempEstimateNo,\"/attachments\"));console.log('ğŸ“¡ API ì‘ë‹µ ìƒíƒœ:',response.status,response.ok);if(response.ok){const attachments=await response.json();// ResultFiles/customerë§Œ ë‚¨ê¹€ (ê²½ë¡œ/managerFileType ëª¨ë‘ ê³ ë ¤)\nconst customerResultFiles=(attachments||[]).filter(att=>{const p=att.path||att.filePath;const type=(att.managerFileType||att.ManagerFileType||'').toString().toLowerCase();return isResultCustomerFile(p)||type==='customer';});setManagerAttachments(customerResultFiles);console.log('âœ… ê´€ë¦¬ ì²¨ë¶€íŒŒì¼(ê³ ê°ìš©) ë¡œë“œ ì™„ë£Œ:',customerResultFiles.length,'ê°œ');}else{console.error('âŒ API ì‘ë‹µ ì‹¤íŒ¨:',response.status,response.statusText);}}catch(error){console.error('ê´€ë¦¬ ì²¨ë¶€íŒŒì¼ ë¡œë“œ ì˜¤ë¥˜:',error);}},[tempEstimateNo]);// ì²¨ë¶€íŒŒì¼ ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜\nconst handleDownloadAttachment=useCallback(async(attachmentId,fileName)=>{try{const response=await axios.get(\"/api/estimate/attachments/\".concat(attachmentId,\"/download\"),{responseType:'blob'});const url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',fileName);document.body.appendChild(link);link.click();link.remove();window.URL.revokeObjectURL(url);}catch(error){console.error('íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨:',error);alert('íŒŒì¼ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');}},[]);// ğŸ”‘ ê´€ë¦¬ ì²¨ë¶€íŒŒì¼ ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜ (ê³ ê°ìš© - PDFë§Œ)\nconst handleDownloadManagerFile=useCallback(async file=>{try{if(!file.fileName.toLowerCase().endsWith('.pdf')){alert('PDF íŒŒì¼ë§Œ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');return;}const response=await fetch(\"http://192.168.0.14:5135/api/estimate/attachments/\".concat(file.attachmentID,\"/download\"));if(response.ok){const blob=await response.blob();const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=file.fileName;document.body.appendChild(a);a.click();window.URL.revokeObjectURL(url);document.body.removeChild(a);}else{alert('íŒŒì¼ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');}}catch(error){console.error('íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜:',error);alert('íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');}},[]);// ValveSeriesCodeë¡œ ì‹¤ì œ ì´ë¦„ ì°¾ê¸°\nconst getValveSeriesName=code=>{// bodyValveListì—ì„œ ì°¾ê¸° (ë¡œë“œëœ ê²½ìš°)\nif(bodyValveList.length>0){const valve=bodyValveList.find(v=>v.valveSeriesCode===code);if(valve){return valve.valveSeries;}}// ì„ì‹œ í•˜ë“œì½”ë”© ë§¤í•‘ (bodyValveListê°€ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì€ ê²½ìš°)\nconst hardcodedMapping={'G':'2-Way Ball','A':'2-way Globe','B':'3-way Globe','C':'Angle','N':'3-Way Ball'};return hardcodedMapping[code]||code;};// ê¸°ì¡´ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° í•¨ìˆ˜\nconst loadExistingData=async loadTempEstimateNo=>{try{var _ref4,_existingData$statusT,_existingData$estimat,_existingData$status,_existingData$estimat2,_existingData$estimat3,_existingData$attachm;const ratingList=bodyRatingList;// state ì§ì ‘ ì‚¬ìš©\n// loadExistingData ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•  ë¡œì»¬ í•¨ìˆ˜ë“¤ ì •ì˜\nconst getBodyRatingNameLocal=code=>{const item=ratingList.find(item=>item.ratingCode===code);return item?item.ratingName:'';};const getBodyRatingUnitLocal=code=>{const item=ratingList.find(item=>item.ratingUnitCode===code);return item?item.ratingUnit:'';};// ê¸°ì¡´ ê²¬ì  ë°ì´í„° ì¡°íšŒ\nconst response=await axios.get(\"http://192.168.0.14:5135/api/estimate/sheets/\".concat(loadTempEstimateNo));const existingData=response.data;// ê¸°ë³¸ ì •ë³´ ì„¤ì •\nsetTempEstimateNo(loadTempEstimateNo);setProjectName(existingData.project||'');// ìƒíƒœ í…ìŠ¤íŠ¸/ì½”ë“œ ì €ì¥ (ìµœìƒìœ„ ë˜ëŠ” estimateSheet ë‚´ë¶€ ëª¨ë‘ ëŒ€ì‘)\nconst statusTextServer=(_ref4=(_existingData$statusT=existingData===null||existingData===void 0?void 0:existingData.statusText)!==null&&_existingData$statusT!==void 0?_existingData$statusT:existingData===null||existingData===void 0?void 0:(_existingData$estimat=existingData.estimateSheet)===null||_existingData$estimat===void 0?void 0:_existingData$estimat.statusText)!==null&&_ref4!==void 0?_ref4:'';const statusCodeServer=(_existingData$status=existingData===null||existingData===void 0?void 0:existingData.status)!==null&&_existingData$status!==void 0?_existingData$status:existingData===null||existingData===void 0?void 0:(_existingData$estimat2=existingData.estimateSheet)===null||_existingData$estimat2===void 0?void 0:_existingData$estimat2.status;if(statusTextServer)setBackendStatusText(statusTextServer);if(typeof statusCodeServer==='number'){setBackendStatus(statusCodeServer);}else if(statusTextServer){const map={'ì„ì‹œì €ì¥':1,'ê²¬ì ìš”ì²­':2,'ê²¬ì ì²˜ë¦¬ì¤‘':3,'ê²¬ì ì™„ë£Œ':4,'ì£¼ë¬¸':5};const code=map[statusTextServer.trim()];if(code)setBackendStatus(code);}setCustomerRequirement(existingData.customerRequirement||'');// EstimateRequest ë°ì´í„°ê°€ ìˆìœ¼ë©´ ë³µì›\nconsole.log('ğŸ” loadExistingData - existingData í™•ì¸:',existingData);console.log('ğŸ” estimateRequests ì¡´ì¬ ì—¬ë¶€:',!!existingData.estimateRequests);console.log('ğŸ” estimateRequests ê¸¸ì´:',(_existingData$estimat3=existingData.estimateRequests)===null||_existingData$estimat3===void 0?void 0:_existingData$estimat3.length);if(existingData.estimateRequests&&existingData.estimateRequests.length>0){var _existingData$estimat4;// EstimateRequest ë°ì´í„°ë¥¼ typesì™€ valvesë¡œ ë³€í™˜\nconst loadedTypes=[];const loadedValves=[];// ë°±ì—”ë“œ ì‘ë‹µ êµ¬ì¡° í™•ì¸ (ìƒˆë¡œìš´ êµ¬ì¡° vs ì´ì „ êµ¬ì¡°)\nconst isNewStructure=existingData.estimateRequests.length>0&&existingData.estimateRequests[0].tagNos;// ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€\nconsole.log('ğŸ” êµ¬ì¡° í™•ì¸:');console.log('estimateRequests[0]:',existingData.estimateRequests[0]);console.log('estimateRequests[0].tagNos:',(_existingData$estimat4=existingData.estimateRequests[0])===null||_existingData$estimat4===void 0?void 0:_existingData$estimat4.tagNos);console.log('isNewStructure:',isNewStructure);if(isNewStructure){// ìƒˆë¡œìš´ êµ¬ì¡°: { valveType, tagNos[] }\n// ë°¸ë¸Œ íƒ€ì…ë³„ë¡œ SheetNo ìˆœì„œ ê³„ì‚° (ìˆ˜ì •ëœ ë²„ì „)\nconst valveTypeOrder=new Map();existingData.estimateRequests.forEach(req=>{if(req.tagNos&&req.tagNos.length>0){// ê° ë°¸ë¸Œ íƒ€ì…ì˜ ëª¨ë“  TagNoì˜ SheetNoë¥¼ í™•ì¸í•˜ì—¬ ê°€ì¥ ì‘ì€ ê°’ ì‚¬ìš©\nconst sheetNos=req.tagNos.map(tagNo=>tagNo.sheetNo).filter(Boolean);if(sheetNos.length>0){const minSheetNo=Math.min(...sheetNos);valveTypeOrder.set(req.valveType,minSheetNo);}}});// ë°¸ë¸Œ íƒ€ì…ì„ SheetNo ìˆœì„œëŒ€ë¡œ ì •ë ¬\nconst sortedValveTypes=Array.from(valveTypeOrder.entries()).sort((_ref5,_ref6)=>{let[,a]=_ref5;let[,b]=_ref6;return a-b;});// ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€\nconsole.log('ğŸ” ë°¸ë¸Œ íƒ€ì… ì •ë ¬ ì •ë³´:');console.log('valveTypeOrder:',valveTypeOrder);console.log('sortedValveTypes:',sortedValveTypes);// ì •ë ¬ëœ ìˆœì„œëŒ€ë¡œ Type ë°ì´í„° ìƒì„±\nsortedValveTypes.forEach((_ref7,index)=>{let[valveType,sheetNo]=_ref7;const valveSeriesName=getValveSeriesName(valveType);const typeData={id:\"type-\".concat(index),name:valveSeriesName,code:valveType,count:existingData.estimateRequests.filter(req=>req.valveType===valveType).length,order:sheetNo,// SheetNo ê¸°ì¤€ ìˆœì„œ\ntypeId:\"type-\".concat(index)};loadedTypes.push(typeData);});// TagNo ë°ì´í„°ë¥¼ Valve ë°ì´í„°ë¡œ ë³€í™˜\nexistingData.estimateRequests.forEach(req=>{if(req.tagNos&&req.tagNos.length>0){req.tagNos.forEach((tagNo,tagIndex)=>{var _tagNo$density,_tagNo$molecularWeigh,_tagNo$isDensity;const valveData={id:\"valve-\".concat(req.valveType,\"-\").concat(tagIndex),tagNo:tagNo.tagNo||'',qty:tagNo.qty||1,order:tagNo.sheetNo||tagIndex+1,// SheetNo ì‚¬ìš©, ì—†ìœ¼ë©´ tagIndex + 1\nsheetID:tagNo.sheetID||0,fluid:{medium:tagNo.medium||'',fluid:tagNo.fluid||'',density:((_tagNo$density=tagNo.density)===null||_tagNo$density===void 0?void 0:_tagNo$density.toString())||'',molecular:((_tagNo$molecularWeigh=tagNo.molecularWeight)===null||_tagNo$molecularWeigh===void 0?void 0:_tagNo$molecularWeigh.toString())||'',t1:{max:tagNo.inletTemperatureQ||0,normal:tagNo.inletTemperatureNorQ||0,min:tagNo.inletTemperatureMinQ||0},p1:{max:tagNo.inletPressureMaxQ||0,normal:tagNo.inletPressureNorQ||0,min:tagNo.inletPressureMinQ||0},p2:{max:tagNo.outletPressureMaxQ||0,normal:tagNo.outletPressureNorQ||0,min:tagNo.outletPressureMinQ||0},dp:{max:tagNo.differentialPressureMaxQ||0,normal:tagNo.differentialPressureNorQ||0,min:tagNo.differentialPressureMinQ||0},qm:{max:tagNo.qmMax||0,normal:tagNo.qmNor||0,min:tagNo.qmMin||0,unit:tagNo.qmUnit||'mÂ³/h'},qn:{max:tagNo.qnMax||0,normal:tagNo.qnNor||0,min:tagNo.qnMin||0,unit:tagNo.qnUnit||'mÂ³/h'},pressureUnit:tagNo.pressureUnit||'Mpa(g)',temperatureUnit:tagNo.temperatureUnit||'â„ƒ'},body:{type:getValveSeriesName(req.valveType||''),typeCode:req.valveType||'',size:tagNo.bodySize,sizeUnit:tagNo.bodySizeUnit,materialBody:tagNo.bodyMat,materialTrim:tagNo.trimMat,option:tagNo.trimOption,rating:tagNo.bodyRating,ratingUnit:tagNo.bodyRatingUnit},actuator:{type:tagNo.actType||'None',hw:tagNo.isHW?'Yes':'No'},accessory:{positioner:{exists:tagNo.isPositioner||false,type:tagNo.positionerType||'',maker:'',model:''},explosionProof:tagNo.explosionProof||'',transmitter:{exists:tagNo.transmitterType?true:false,type:tagNo.transmitterType||''},solenoidValve:{exists:tagNo.isSolenoid||false,type:'',maker:'',model:''},limitSwitch:{exists:tagNo.isLimSwitch||false,type:'',maker:'',model:''},airSet:{exists:tagNo.isAirSet||false,type:'',maker:'',model:''},volumeBooster:{exists:tagNo.isVolumeBooster||false,type:'',maker:'',model:''},airOperatedValve:{exists:tagNo.isAirOperated||false,type:'',maker:'',model:''},lockupValve:{exists:tagNo.isLockUp||false,type:'',maker:'',model:''},snapActingRelay:{exists:tagNo.isSnapActingRelay||false,type:'',maker:'',model:''}},isQM:tagNo.isQM||false,isP2:tagNo.isP2||false,isN1:false,isDensity:(_tagNo$isDensity=tagNo.isDensity)!==null&&_tagNo$isDensity!==void 0?_tagNo$isDensity:false,isHW:tagNo.isHW||false,typeId:\"type-\".concat(req.valveType)};loadedValves.push(valveData);});}});}else{// ì´ì „ êµ¬ì¡°: ê°œë³„ EstimateRequest ë°°ì—´ (í˜„ì¬ API ì‘ë‹µ)\n// ValveTypeë³„ë¡œ ì‹¤ì œ ê·¸ë£¹í•‘\nconst groupedByValveType=existingData.estimateRequests.reduce((acc,req)=>{const valveType=req.valveType||'Unknown';if(!acc[valveType]){acc[valveType]=[];}acc[valveType].push(req);return acc;},{});console.log('ê·¸ë£¹í•‘ëœ ValveType:',groupedByValveType);// ë°¸ë¸Œ íƒ€ì…ë³„ë¡œ SheetNo ìˆœì„œ ê³„ì‚° (ì´ì „ êµ¬ì¡°ìš©)\nconst valveTypeOrder=new Map();Object.entries(groupedByValveType).forEach(_ref8=>{let[valveType,requests]=_ref8;// ê° ë°¸ë¸Œ íƒ€ì…ì˜ ëª¨ë“  requestì˜ SheetNoë¥¼ í™•ì¸í•˜ì—¬ ê°€ì¥ ì‘ì€ ê°’ ì‚¬ìš©\nconst sheetNos=requests.map(req=>req.sheetNo).filter(Boolean);if(sheetNos.length>0){const minSheetNo=Math.min(...sheetNos);valveTypeOrder.set(valveType,minSheetNo);}});// ë°¸ë¸Œ íƒ€ì…ì„ SheetNo ìˆœì„œëŒ€ë¡œ ì •ë ¬\nconst sortedValveTypes=Array.from(valveTypeOrder.entries()).sort((_ref9,_ref0)=>{let[,a]=_ref9;let[,b]=_ref0;return a-b;});// ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€\nconsole.log('ğŸ” ì´ì „ êµ¬ì¡° - ë°¸ë¸Œ íƒ€ì… ì •ë ¬ ì •ë³´:');console.log('valveTypeOrder:',valveTypeOrder);console.log('sortedValveTypes:',sortedValveTypes);// ì •ë ¬ëœ ìˆœì„œëŒ€ë¡œ Type ë°ì´í„° ìƒì„±\nsortedValveTypes.forEach((_ref1,index)=>{let[valveType,sheetNo]=_ref1;const valveSeriesName=getValveSeriesName(valveType);const requests=groupedByValveType[valveType];// Type ë°ì´í„° ìƒì„±\nconst typeData={id:\"type-\".concat(index),name:valveSeriesName,code:valveType,count:requests.length,order:sheetNo,// SheetNo ê¸°ì¤€ ìˆœì„œ\ntypeId:\"type-\".concat(index)// ì¶”ê°€\n};loadedTypes.push(typeData);// ê° requestë¥¼ Valve ë°ì´í„°ë¡œ ë³€í™˜\nrequests.forEach((req,tagIndex)=>{var _req$density,_req$molecularWeight,_req$isDensity;// ë°±ì—”ë“œ ì‘ë‹µ êµ¬ì¡° ë””ë²„ê¹…\nconsole.log('ğŸ” ë°±ì—”ë“œ ì‘ë‹µ êµ¬ì¡° í™•ì¸:');console.log('req.bodySizeUnit:',req.bodySizeUnit);console.log('req.bodySize:',req.bodySize);console.log('req ì „ì²´ êµ¬ì¡°:',req);// Size ë°ì´í„° ë³µì› í™•ì¸\nconsole.log('ğŸ” Size ë°ì´í„° ë³µì›:');console.log('ë³µì›ëœ sizeUnit:',req.bodySizeUnit||getSizeUnitFromSize(req.bodySize)||'');console.log('ë³µì›ëœ size:',req.bodySize||'');// loadExistingData í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ\nconst valveData={id:\"valve-\".concat(valveType,\"-\").concat(tagIndex),tagNo:req.tagno||'',qty:req.qty||1,order:req.sheetNo||tagIndex+1,// SheetNo ì‚¬ìš©, ì—†ìœ¼ë©´ tagIndex + 1\nsheetID:req.sheetID||0,fluid:{medium:req.medium||'',fluid:req.fluid||'',density:((_req$density=req.density)===null||_req$density===void 0?void 0:_req$density.toString())||'',molecular:((_req$molecularWeight=req.molecularWeight)===null||_req$molecularWeight===void 0?void 0:_req$molecularWeight.toString())||'',t1:{max:req.inletTemperatureQ||0,normal:req.inletTemperatureNorQ||0,min:req.inletTemperatureMinQ||0},p1:{max:req.inletPressureMaxQ||0,normal:req.inletPressureNorQ||0,min:req.inletPressureMinQ||0},p2:{max:req.outletPressureMaxQ||0,normal:req.outletPressureNorQ||0,min:req.outletPressureMinQ||0},dp:{max:req.differentialPressureMaxQ||0,normal:req.differentialPressureNorQ||0,min:req.differentialPressureMinQ||0},qm:{max:req.qmMax||0,normal:req.qmNor||0,min:req.qmMin||0,unit:req.qmUnit||'mÂ³/h'},qn:{max:req.qnMax||0,normal:req.qnNor||0,min:req.qnMin||0,unit:req.qnUnit||'mÂ³/h'},pressureUnit:req.pressureUnit||'Mpa(g)',temperatureUnit:req.temperatureUnit||'â„ƒ'},body:{type:valveSeriesName,typeCode:valveType,size:req.bodySize||'',// ê¸°ì¡´ ì €ì¥ëœ Size ê°’ ë³µì›\nsizeUnit:req.bodySizeUnit||getSizeUnitFromSize(req.bodySize)||'',// ê¸°ì¡´ ì €ì¥ëœ Size Unit ë³µì› ë˜ëŠ” Size ê°’ìœ¼ë¡œë¶€í„° ìœ ì¶”\nmaterialBody:req.bodyMat||'',materialTrim:req.trimMat||'',option:req.trimOption||'',rating:req.bodyRating||'',ratingUnit:req.bodyRatingUnit||''},actuator:{type:req.actType||'None',hw:req.isHW?'Yes':'No'},accessory:{positioner:{exists:req.isPositioner||false,type:req.positionerType||'',maker:'',model:''},explosionProof:req.explosionProof||'',transmitter:{exists:req.transmitterType?true:false,type:req.transmitterType||''},solenoidValve:{exists:req.isSolenoid||false,type:'',maker:'',model:''},limitSwitch:{exists:req.isLimSwitch||false,type:'',maker:'',model:''},airSet:{exists:req.isAirSet||false,type:'',maker:'',model:''},volumeBooster:{exists:req.isVolumeBooster||false,type:'',maker:'',model:''},airOperatedValve:{exists:req.isAirOperated||false,type:'',maker:'',model:''},lockupValve:{exists:req.isLockUp||false,type:'',maker:'',model:''},snapActingRelay:{exists:req.isSnapActingRelay||false,type:'',maker:'',model:''}},isQM:req.isQM||false,isP2:req.isP2||false,isN1:false,isDensity:(_req$isDensity=req.isDensity)!==null&&_req$isDensity!==void 0?_req$isDensity:false,isHW:req.isHW||false,typeId:typeData.id};loadedValves.push(valveData);});});}// loadExistingData í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ\n// loadedValvesë¥¼ SheetNo ìˆœì„œëŒ€ë¡œ ì •ë ¬\nloadedValves.sort((a,b)=>a.order-b.order);// ìƒíƒœ ì—…ë°ì´íŠ¸\nsetTypes(loadedTypes);console.log('setValvesë¥¼ í˜¸ì¶œí•˜ê¸° ì§ì „ì…ë‹ˆë‹¤. loadedValves ë°ì´í„°:',loadedValves);setValves(loadedValves);console.log('setValvesê°€ í˜¸ì¶œë˜ì—ˆìŠµë‹ˆë‹¤.');console.log('ë³µì›ëœ Types:',loadedTypes);console.log('ë³µì›ëœ Valves:',loadedValves);// ë””ë²„ê¹…ì„ ìœ„í•œ ìƒì„¸ ë¡œê·¸\nloadedValves.forEach((valve,index)=>{console.log(\"Valve \".concat(index,\" \\uC0C1\\uC138 \\uC815\\uBCF4:\"),{tagNo:valve.tagNo,actuator:valve.actuator,body:valve.body,isHW:valve.isHW});});}// ì²¨ë¶€íŒŒì¼ ë°ì´í„° ë³µì›\nconsole.log('ì „ì²´ ì‘ë‹µ ë°ì´í„°:',existingData);console.log('attachments í•„ë“œ:',existingData.attachments);console.log('attachments íƒ€ì…:',typeof existingData.attachments);console.log('attachments ê¸¸ì´:',(_existingData$attachm=existingData.attachments)===null||_existingData$attachm===void 0?void 0:_existingData$attachm.length);if(existingData.attachments&&existingData.attachments.length>0){console.log('ì²¨ë¶€íŒŒì¼ ë°ì´í„°:',existingData.attachments);// CustomerRequest í´ë”ì˜ í•­ëª©ë§Œ í•˜ë‹¨ ì²¨ë¶€íŒŒì¼ì— í‘œì‹œ\nconst loadedAttachments=existingData.attachments.filter(att=>isCustomerFile(att.filePath||att.path)).map(att=>({id:att.attachmentID,// ë°±ì—”ë“œ API ì‘ë‹µ: attachmentID\nname:att.fileName,// ë°±ì—”ë“œ API ì‘ë‹µ: fileName\nsize:att.fileSize||0,// ë°±ì—”ë“œ API ì‘ë‹µ: fileSize\nisPending:false,attachmentId:att.attachmentID,// ë°±ì—”ë“œ API ì‘ë‹µ: attachmentID\nfilePath:att.filePath// ë°±ì—”ë“œ API ì‘ë‹µ: filePath\n}));console.log('ë§¤í•‘ëœ ì²¨ë¶€íŒŒì¼:',loadedAttachments);console.log('ğŸ” setFileAttachments í˜¸ì¶œ ì „ fileAttachments ìƒíƒœ:',fileAttachments);setFileAttachments(loadedAttachments);console.log('ğŸ” setFileAttachments í˜¸ì¶œ ì™„ë£Œ');// ğŸ”‘ ê¸°ì¡´ íŒŒì¼ ë¡œë“œ í›„ pendingFiles ì™„ì „ ì´ˆê¸°í™” (ì¤‘ë³µ ì—…ë¡œë“œ ë°©ì§€)\nsetPendingFiles([]);console.log('âœ… pendingFiles ì™„ì „ ì´ˆê¸°í™”ë¨ (ê¸°ì¡´ íŒŒì¼ ì¤‘ë³µ ì—…ë¡œë“œ ë°©ì§€)');}else{console.log('ì²¨ë¶€íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.');// ğŸ”‘ ì²¨ë¶€íŒŒì¼ì´ ì—†ì–´ë„ pendingFiles ì™„ì „ ì´ˆê¸°í™”\nsetPendingFiles([]);console.log('âœ… pendingFiles ì™„ì „ ì´ˆê¸°í™”ë¨ (ì²¨ë¶€íŒŒì¼ ì—†ìŒ)');}// ğŸ”‘ ì¶”ê°€ ì•ˆì „ì¥ì¹˜: fileAttachmentsë„ ì™„ì „ ì´ˆê¸°í™”\nconsole.log('ğŸ” loadExistingData ì™„ë£Œ í›„ pendingFiles ìƒíƒœ:',pendingFiles);// ğŸ”‘ ê´€ë¦¬ ì²¨ë¶€íŒŒì¼ ë¡œë“œ\nawait loadManagerAttachments();alert('ì„ì‹œì €ì¥ëœ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.');}catch(error){console.error('ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:',error);alert('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');// ì‹¤íŒ¨ ì‹œ ìƒˆë¡œìš´ TempEstimateNo ìƒì„±\ngenerateTempEstimateNo();}};// í˜ì´ì§€ ì§„ì… ì‹œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nuseEffect(()=>{const initializeData=async()=>{// ë§ˆìŠ¤í„° ë°ì´í„°ë“¤ì„ ë¨¼ì € ëª¨ë‘ ê°€ì ¸ì˜µë‹ˆë‹¤.\nawait Promise.all([fetchMasterData(),fetchBodyValveList()]);// isInitialized ìƒíƒœë¥¼ trueë¡œ ì„¤ì •í•˜ì—¬ ë§ˆìŠ¤í„° ë°ì´í„° ë¡œë”©ì´ ì™„ë£Œë˜ì—ˆìŒì„ í‘œì‹œí•©ë‹ˆë‹¤.\nsetIsInitialized(true);};initializeData();},[]);// ì´ useEffectëŠ” ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ í•œ ë²ˆë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.\n// ë§ˆìŠ¤í„° ë°ì´í„° ë¡œë”©ì´ ì™„ë£Œëœ í›„, ê²¬ì  ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” useEffect\nuseEffect(()=>{// isInitializedê°€ falseì´ë©´ (ë§ˆìŠ¤í„° ë°ì´í„° ë¡œë”© ì „ì´ë©´) ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\nif(!isInitialized){return;}const loadParam=searchParams.get('load');console.log('ğŸ” useEffect - loadParam í™•ì¸:',loadParam);console.log('ğŸ” useEffect - isDataLoaded.current:',isDataLoaded.current);if(loadParam){console.log('ğŸ” loadExistingData í˜¸ì¶œ ì‹œì‘:',loadParam);console.log('ğŸ” isDataLoaded.current ìƒíƒœ:',isDataLoaded.current);// isDataLoadedë¥¼ ê°•ì œë¡œ falseë¡œ ì„¤ì •í•˜ì—¬ í•­ìƒ ë¡œë“œë˜ë„ë¡ í•¨\nisDataLoaded.current=false;console.log('ğŸ” isDataLoaded.currentë¥¼ falseë¡œ ê°•ì œ ì„¤ì •');loadExistingData(loadParam);isDataLoaded.current=true;}},[isInitialized,searchParams]);// isInitializedê°€ trueë¡œ ë°”ë€Œë©´ ì´ useEffectê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.\n// ë§ˆìŠ¤í„° ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst fetchMasterData=async()=>{try{// Rating ë°©ì‹ê³¼ ë™ì¼í•˜ê²Œ, size-unit-list API í˜¸ì¶œì„ ì œê±°í•©ë‹ˆë‹¤.\nconst[sizeRes,matRes,trimMatRes,optionRes,ratingRes,portSizeRes]=await Promise.all([axios.get('/api/estimate/body-size-list'),axios.get('/api/estimate/body-mat-list'),axios.get('/api/estimate/trim-mat-list'),axios.get('/api/estimate/trim-option-list'),axios.get('/api/estimate/body-rating-list'),axios.get('/api/estimate/trim-port-size-list')]);console.log('ğŸ” Size API ì‘ë‹µ:',sizeRes.data);setBodySizeList(sizeRes.data);setBodyMatList(matRes.data);setTrimMatList(trimMatRes.data);setTrimOptionList(optionRes.data);setBodyRatingList(ratingRes.data);setTrimPortSizeList(portSizeRes.data);// bodyRatingList ë°ì´í„°ë¥¼ ë°˜í™˜\nreturn ratingRes.data;}catch(error){console.error('ë§ˆìŠ¤í„° ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:',error);return[];}};// TempEstimateNo ìƒì„±\nconst generateTempEstimateNo=async()=>{try{const response=await axios.post('http://192.168.0.14:5135/api/estimate/generate-temp-no',null,{params:{currentUserId:(currentUser===null||currentUser===void 0?void 0:currentUser.userId)||'admin'}});setTempEstimateNo(response.data.tempEstimateNo);}catch(error){console.error('TempEstimateNo ìƒì„± ì‹¤íŒ¨:',error);}};// [After] ì•„ë˜ í•¨ìˆ˜ ì „ì²´ë¥¼ ë³µì‚¬í•´ì„œ ê¸°ì¡´ í•¨ìˆ˜ì™€ êµì²´í•´ì£¼ì„¸ìš”.\nconst createSavePayload=useCallback(()=>{// ì „ì—­ SheetNo ê³„ì‚°\nlet globalSheetNo=1;const sortedValves=valves.sort((a,b)=>{var _types$find5,_types$find6;const typeOrderA=((_types$find5=types.find(t=>t.id===a.typeId))===null||_types$find5===void 0?void 0:_types$find5.order)||0;const typeOrderB=((_types$find6=types.find(t=>t.id===b.typeId))===null||_types$find6===void 0?void 0:_types$find6.order)||0;if(typeOrderA!==typeOrderB){return typeOrderA-typeOrderB;}return a.order-b.order;});const allTagNos=sortedValves.map(valve=>{const tagNoData={SheetID:valve.sheetID>0?valve.sheetID:undefined,SheetNo:globalSheetNo++,Tagno:valve.tagNo,ValveSeriesCode:valve.body.typeCode,// [ìˆ˜ì •] valveSeriesCode -> ValveSeriesCode (ë°±ì—”ë“œ ëª¨ë¸ ì´ë¦„ê³¼ ì¼ì¹˜)\nQty:valve.qty,Medium:valve.fluid.medium,Fluid:valve.fluid.fluid,IsQM:valve.isQM,QMUnit:valve.fluid.qm.unit,QMMax:parseFloat(valve.fluid.qm.max.toString())||0,QMNor:parseFloat(valve.fluid.qm.normal.toString())||0,QMMin:parseFloat(valve.fluid.qm.min.toString())||0,QNUnit:valve.fluid.qn.unit,QNMax:parseFloat(valve.fluid.qn.max.toString())||0,QNNor:parseFloat(valve.fluid.qn.normal.toString())||0,QNMin:parseFloat(valve.fluid.qn.min.toString())||0,IsP2:valve.isP2,IsDensity:valve.isDensity,PressureUnit:valve.fluid.pressureUnit,InletPressureMaxQ:parseFloat(valve.fluid.p1.max.toString())||0,InletPressureNorQ:parseFloat(valve.fluid.p1.normal.toString())||0,InletPressureMinQ:parseFloat(valve.fluid.p1.min.toString())||0,OutletPressureMaxQ:parseFloat(valve.fluid.p2.max.toString())||0,OutletPressureNorQ:parseFloat(valve.fluid.p2.normal.toString())||0,OutletPressureMinQ:parseFloat(valve.fluid.p2.min.toString())||0,DifferentialPressureMaxQ:parseFloat(valve.fluid.dp.max.toString())||0,DifferentialPressureNorQ:parseFloat(valve.fluid.dp.normal.toString())||0,DifferentialPressureMinQ:parseFloat(valve.fluid.dp.min.toString())||0,TemperatureUnit:valve.fluid.temperatureUnit,InletTemperatureQ:parseFloat(valve.fluid.t1.max.toString())||0,InletTemperatureNorQ:parseFloat(valve.fluid.t1.normal.toString())||0,InletTemperatureMinQ:parseFloat(valve.fluid.t1.min.toString())||0,DensityUnit:'kg/mÂ³',Density:parseFloat(valve.fluid.density)||0,MolecularWeightUnit:'g/mol',MolecularWeight:parseFloat(valve.fluid.molecular)||0,BodySizeUnit:valve.body.sizeUnit||null,BodySize:getBodySizeCode(valve.body.size,valve.body.sizeUnit),BodyMat:getBodyMatCode(valve.body.materialBody),TrimMat:getTrimMatCode(valve.body.materialTrim),TrimOption:getTrimOptionCode(valve.body.option),// [ìˆ˜ì •] bodyRating -> BodyRating (bë¥¼ ëŒ€ë¬¸ì Bë¡œ)\nBodyRating:valve.body.rating,// [ìˆ˜ì •] bodyRatingUnit -> BodyRatingUnit (b, uë¥¼ ëŒ€ë¬¸ì B, Uë¡œ)\nBodyRatingUnit:valve.body.ratingUnit,ActType:valve.actuator.type,IsHW:valve.actuator.hw==='Yes'};// IsPositioner ë¡œì§ ìˆ˜ì •: Typeì— ê°’ì´ ìˆì„ ë•Œë§Œ true\nif(valve.accessory.positioner.type){tagNoData.IsPositioner=true;tagNoData.PositionerType=valve.accessory.positioner.type;}else{tagNoData.IsPositioner=false;tagNoData.PositionerType=null;}tagNoData.ExplosionProof=valve.accessory.explosionProof||null;tagNoData.TransmitterType=valve.accessory.transmitter.type||null;tagNoData.IsSolenoid=valve.accessory.solenoidValve.exists;tagNoData.IsLimSwitch=valve.accessory.limitSwitch.exists;tagNoData.IsAirSet=valve.accessory.airSet.exists;tagNoData.IsVolumeBooster=valve.accessory.volumeBooster.exists;tagNoData.IsAirOperated=valve.accessory.airOperatedValve.exists;tagNoData.IsLockUp=valve.accessory.lockupValve.exists;tagNoData.IsSnapActingRelay=valve.accessory.snapActingRelay.exists;return tagNoData;});const typeSelections=types.map(type=>{const typeValves=allTagNos.filter(valve=>valve.ValveSeriesCode===type.code)// [ìˆ˜ì •] valveSeriesCode -> ValveSeriesCode\n.map(valve=>{// ValveSeriesCodeëŠ” ë°±ì—”ë“œ ì „ì†¡ ì‹œ í•„ìš” ì—†ìœ¼ë¯€ë¡œ ì œê±°\nconst{ValveSeriesCode}=valve,rest=_objectWithoutProperties(valve,_excluded);// [ìˆ˜ì •] valveSeriesCode -> ValveSeriesCode\nreturn{ValveName:valve.Tagno,// [ìˆ˜ì •] tagno -> Tagno\nValveSeriesCode:valve.ValveSeriesCode,// [ìˆ˜ì •] valveSeriesCode -> ValveSeriesCode\nTagNos:[rest]};});return{Type:type.name,Valves:typeValves};});return{TypeSelections:typeSelections,Project:projectName,CustomerRequirement:customerRequirement,CustomerID:(selectedCustomer===null||selectedCustomer===void 0?void 0:selectedCustomer.userID)||(currentUser===null||currentUser===void 0?void 0:currentUser.userId)||'admin',WriterID:(currentUser===null||currentUser===void 0?void 0:currentUser.userId)||'admin',Attachments:[]};},[types,valves,projectName,customerRequirement,selectedCustomer,currentUser,bodySizeList,bodyMatList,trimMatList,trimOptionList,bodyRatingList]);// ì„ì‹œì €ì¥ ê¸°ëŠ¥\nconst handleSaveDraft=async()=>{// TempEstimateNoê°€ ì—†ìœ¼ë©´ ë¨¼ì € ìƒì„±\nlet currentTempEstimateNo=tempEstimateNo;if(!currentTempEstimateNo){try{const response=await axios.post('http://192.168.0.14:5135/api/estimate/generate-temp-no',null,{params:{currentUserId:(currentUser===null||currentUser===void 0?void 0:currentUser.userId)||'admin'}});currentTempEstimateNo=response.data.tempEstimateNo;setTempEstimateNo(currentTempEstimateNo);}catch(error){console.error('TempEstimateNo ìƒì„± ì‹¤íŒ¨:',error);alert('TempEstimateNo ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');return;}}// ì‹¤ì œ ì…ë ¥ëœ ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸\nif(types.length===0){alert('ìµœì†Œ í•˜ë‚˜ì˜ Typeì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.');return;}if(valves.length===0){alert('ìµœì†Œ í•˜ë‚˜ì˜ TagNoë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.');return;}try{const submitData=createSavePayload();console.log('Submit Data - CustomerRequirement:',submitData.CustomerRequirement);console.log('Submit Data ì „ì²´:',JSON.stringify(submitData,null,2));await axios.post(\"http://192.168.0.14:5135/api/estimate/sheets/\".concat(currentTempEstimateNo,\"/save-draft\"),submitData);// ì„±ê³µ ì‹œ ì„ì‹œì €ì¥ í”Œë˜ê·¸ ì œê±°\nlocalStorage.removeItem(\"saved_\".concat(currentTempEstimateNo));alert('ì„ì‹œì €ì¥ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');navigate('/dashboard/estimate-requests');}catch(error){console.error('ê²¬ì ìš”ì²­ ì‹¤íŒ¨:',error);alert('ê²¬ì ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');}};// ê²¬ì ìš”ì²­ ê¸°ëŠ¥\nconst handleSubmitEstimate=async()=>{// TempEstimateNoê°€ ì—†ìœ¼ë©´ ë¨¼ì € ìƒì„±\nlet currentTempEstimateNo=tempEstimateNo;if(!currentTempEstimateNo){try{const response=await axios.post('http://192.168.0.14:5135/api/estimate/generate-temp-no',{});currentTempEstimateNo=response.data.tempEstimateNo;setTempEstimateNo(currentTempEstimateNo);}catch(error){console.error('TempEstimateNo ìƒì„± ì‹¤íŒ¨:',error);alert('TempEstimateNo ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');return;}}// ì‹¤ì œ ì…ë ¥ëœ ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸\nif(types.length===0){alert('ìµœì†Œ í•˜ë‚˜ì˜ Typeì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.');return;}if(valves.length===0){alert('ìµœì†Œ í•˜ë‚˜ì˜ TagNoë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.');return;}try{const submitData=createSavePayload();// StaffComment ì¶”ê°€\nconst finalSubmitData=_objectSpread(_objectSpread({},submitData),{},{StaffComment:staffComment// createSavePayload ë°–ì—ì„œ staffComment ì‚¬ìš©\n});console.log('Submit Data - CustomerRequirement:',finalSubmitData.CustomerRequirement);console.log('Submit Data ì „ì²´:',JSON.stringify(finalSubmitData,null,2));await axios.post(\"http://192.168.0.14:5135/api/estimate/sheets/\".concat(currentTempEstimateNo,\"/submit\"),finalSubmitData);// ì„±ê³µ ì‹œ ì„ì‹œì €ì¥ í”Œë˜ê·¸ ì œê±°\nlocalStorage.removeItem(\"saved_\".concat(currentTempEstimateNo));alert('ê²¬ì ìš”ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');navigate('/dashboard/estimate-requests');}catch(error){console.error('ê²¬ì ìš”ì²­ ì‹¤íŒ¨:',error);alert('ê²¬ì ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');}};const handleValveClick=valve=>{setCurrentValve(valve);// Step 3ë¡œ ìŠ¤í¬ë¡¤ ì´ë™\n// setTimeout(() => {\n//if (specSectionRef.current) {\n//specSectionRef.current.scrollIntoView({ \n//behavior: 'smooth', \n//block: 'start' \n//});\n//}\n//}, 100);\n};// ì…ë ¥ í•„ë“œ ê°’ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\nconst updateValveData=useCallback((valveId,path,value)=>{setValves(prevValves=>{const updatedValve=prevValves.find(v=>v.id===valveId);if(!updatedValve)return prevValves;// ì¤‘ì²©ëœ ê²½ë¡œ ì²˜ë¦¬ (ì˜ˆ: body.sizeUnit, accessory.positioner.type)\nconst pathParts=path.split('.');let newValve=_objectSpread({},updatedValve);if(pathParts.length===2){const[parent,child]=pathParts;const parentObj=updatedValve[parent];newValve=_objectSpread(_objectSpread({},updatedValve),{},{[parent]:_objectSpread(_objectSpread({},parentObj),{},{[child]:value})});}else if(pathParts.length===3){const[parent,child,grandchild]=pathParts;const parentObj=updatedValve[parent];const childObj=parentObj[child];newValve=_objectSpread(_objectSpread({},updatedValve),{},{[parent]:_objectSpread(_objectSpread({},parentObj),{},{[child]:_objectSpread(_objectSpread({},childObj),{},{[grandchild]:value})})});// Positioner íŠ¹ë³„ ì²˜ë¦¬\nif(path==='accessory.positioner.type'){const newType=value;const newExists=newType!=='';newValve.accessory.positioner.exists=newExists;}}else{newValve=_objectSpread(_objectSpread({},updatedValve),{},{[path]:value});}const updatedValves=prevValves.map(v=>v.id===valveId?newValve:v);// currentValveë„ í•¨ê»˜ ì—…ë°ì´íŠ¸\nif(currentValve&&currentValve.id===valveId){setCurrentValve(newValve);}return updatedValves;});},[currentValve]);// ì…ë ¥ í•„ë“œ ê°’ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\nconst handleBodyChange=useCallback((field,value)=>{if(!currentValve)return;updateValveData(currentValve.id,\"body.\".concat(field),value);},[currentValve,updateValveData]);// ì…ë ¥ í•„ë“œ ê°’ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\nconst handleActuatorChange=useCallback((field,value)=>{if(!currentValve)return;updateValveData(currentValve.id,\"actuator.\".concat(field),value);},[currentValve,updateValveData]);// ì…ë ¥ í•„ë“œ ê°’ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\nconst handleAccessoryChange=useCallback((field,value)=>{if(!currentValve)return;updateValveData(currentValve.id,\"accessory.\".concat(field),value);},[currentValve,updateValveData]);// ë¼ë””ì˜¤ ë²„íŠ¼ í•¸ë“¤ëŸ¬ë“¤\nconst handleRadioChange=useCallback((field,value)=>{if(!currentValve)return;setValves(prevValves=>{const updatedValves=prevValves.map(valve=>valve.id===currentValve.id?_objectSpread(_objectSpread({},valve),{},{[field]:value}):valve);// currentValveë„ í•¨ê»˜ ì—…ë°ì´íŠ¸\nconst updatedCurrentValve=updatedValves.find(valve=>valve.id===currentValve.id);if(updatedCurrentValve){setCurrentValve(updatedCurrentValve);}return updatedValves;});},[currentValve]);// molecular/density ì¤‘ í•˜ë‚˜ë§Œ ì…ë ¥ë˜ë„ë¡ í•˜ëŠ” í•¸ë“¤ëŸ¬\nconst handleFluidFieldChange=useCallback((field,value)=>{if(!currentValve)return;setValves(prevValves=>{const updatedValves=prevValves.map(valve=>valve.id===currentValve.id?_objectSpread(_objectSpread({},valve),{},{fluid:_objectSpread(_objectSpread(_objectSpread({},valve.fluid),{},{[field]:value},field==='molecular'&&value!==''?{density:''}:{}),field==='density'&&value!==''?{molecular:''}:{})}):valve);// currentValve ì—…ë°ì´íŠ¸ëŠ” í•œ ë²ˆë§Œ ìˆ˜í–‰\nconst updatedCurrentValve=updatedValves.find(valve=>valve.id===currentValve.id);if(updatedCurrentValve){setCurrentValve(updatedCurrentValve);}return updatedValves;});},[currentValve]);// Fluid ì¡°ê±´ í•„ë“œ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\nconst handleFluidConditionChange=useCallback((condition,field,value)=>{if(!currentValve)return;setValves(prevValves=>{const updatedValves=prevValves.map(valve=>valve.id===currentValve.id?_objectSpread(_objectSpread({},valve),{},{fluid:_objectSpread(_objectSpread({},valve.fluid),{},{[condition]:_objectSpread(_objectSpread({},valve.fluid[condition]),{},{[field]:value})})}):valve);// currentValveë„ í•¨ê»˜ ì—…ë°ì´íŠ¸\nconst updatedCurrentValve=updatedValves.find(valve=>valve.id===currentValve.id);if(updatedCurrentValve){setCurrentValve(updatedCurrentValve);}return updatedValves;});},[currentValve]);// í†µí•©ëœ ë‹¨ìœ„ í•„ë“œ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\nconst handleUnitChange=useCallback((field,value)=>{if(!currentValve)return;setValves(prevValves=>{const updatedValves=prevValves.map(valve=>valve.id===currentValve.id?_objectSpread(_objectSpread({},valve),{},{fluid:_objectSpread(_objectSpread({},valve.fluid),{},{[field]:value})}):valve);// currentValveë„ í•¨ê»˜ ì—…ë°ì´íŠ¸\nconst updatedCurrentValve=updatedValves.find(valve=>valve.id===currentValve.id);if(updatedCurrentValve){setCurrentValve(updatedCurrentValve);}return updatedValves;});},[currentValve]);const TypeSection=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"type-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"type-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Step 1: Type \\uC120\\uC815\"}),/*#__PURE__*/_jsx(\"p\",{className:\"step-description-req\",children:\"\\uACAC\\uC801\\uC5D0 \\uD544\\uC694\\uD55C \\uBC38\\uBE0C \\uD0C0\\uC785\\uC744 \\uC120\\uD0DD\\uD558\\uACE0 \\uAD00\\uB9AC\\uD569\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"type-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAddType,children:\"\\uCD94\\uAC00\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>selectedType&&handleRemoveType(types.findIndex(type=>type.id===selectedType)),children:\"\\uC0AD\\uC81C\"})]})]}),/*#__PURE__*/_jsx(DndContext,{sensors:sensors,collisionDetection:closestCenter,onDragEnd:handleTypeDragEnd,children:/*#__PURE__*/_jsx(SortableContext,{items:types.map(item=>item.id),strategy:verticalListSortingStrategy,children:types.map((item,index)=>/*#__PURE__*/_jsx(SortableItem,{id:item.id,children:/*#__PURE__*/_jsx(\"div\",{className:\"type-item \".concat(selectedType===item.id?'selected':''),onClick:e=>{e.preventDefault();e.stopPropagation();setSelectedType(item.id);},onMouseDown:e=>{e.preventDefault();e.stopPropagation();},style:{cursor:'pointer',userSelect:'none',pointerEvents:'auto'},children:/*#__PURE__*/_jsxs(\"span\",{children:[item.name,\" (\",valves.filter(valve=>valve.body.type===item.name).reduce((sum,valve)=>sum+valve.qty,0),\")\"]})})},item.id))})}),showValveDropdown&&/*#__PURE__*/_jsx(\"div\",{className:\"valve-dropdown\",style:{position:'relative',backgroundColor:'white',border:'2px solid #007bff',borderRadius:'4px',boxShadow:'0 2px 8px rgba(0, 0, 0, 0.15)',maxHeight:'150px',overflowY:'auto',marginTop:'5px'},children:bodyValveList.map(valve=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>handleValveSelect(valve),style:{padding:'8px 12px',cursor:'pointer',borderBottom:'1px solid #eee',fontSize:'14px'},onMouseEnter:e=>e.currentTarget.style.backgroundColor='#f5f5f5',onMouseLeave:e=>e.currentTarget.style.backgroundColor='white',children:valve.valveSeries},valve.valveSeriesCode))})]});// Valve ì¶”ê°€ ì„¹ì…˜\nconst ValveSection=()=>{// ì„ íƒëœ Typeì— í•´ë‹¹í•˜ëŠ” TagNoë§Œ í•„í„°ë§\nconst filteredValves=selectedType?valves.filter(valve=>{const selectedTypeData=types.find(t=>t.id===selectedType);return selectedTypeData&&valve.body.type===selectedTypeData.name;}):[];return/*#__PURE__*/_jsxs(\"div\",{className:\"valve-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"valve-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"valve-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAddValve,disabled:!selectedType||isReadOnly,children:\"\\uCD94\\uAC00\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>currentValve&&handleDeleteValve(currentValve.id),disabled:!currentValve||isReadOnly,children:\"\\uC0AD\\uC81C\"})]})}),!selectedType?/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',textAlign:'center',color:'#666',backgroundColor:'#f9f9f9',borderRadius:'8px',margin:'10px 0'},children:\"Step 1\\uC5D0\\uC11C Type\\uC744 \\uC120\\uD0DD\\uD558\\uBA74 \\uD574\\uB2F9 Type\\uC758 TagNo\\uB97C \\uCD94\\uAC00\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}):/*#__PURE__*/_jsx(DndContext,{sensors:sensors,collisionDetection:closestCenter,onDragEnd:handleValveDragEnd,children:/*#__PURE__*/_jsx(SortableContext,{items:filteredValves.map(item=>item.id),strategy:verticalListSortingStrategy,children:filteredValves.map(item=>/*#__PURE__*/_jsx(SortableItem,{id:item.id,children:/*#__PURE__*/_jsx(\"div\",{className:\"valve-item \".concat((currentValve===null||currentValve===void 0?void 0:currentValve.id)===item.id?'selected':''),onClick:e=>{e.preventDefault();e.stopPropagation();handleValveClick(item);},onMouseDown:e=>{e.preventDefault();e.stopPropagation();},style:{cursor:'pointer',pointerEvents:'auto'},children:/*#__PURE__*/_jsxs(\"span\",{children:[\"TagNo: \",item.tagNo,\" (Qty: \",item.qty,\")\"]})})},item.id))})}),/*#__PURE__*/_jsx(\"div\",{ref:specSectionRef,style:{height:'1px',marginTop:'20px'}})]});};// ìƒì„¸ ì‚¬ì–‘ ì…ë ¥ ì„¹ì…˜\nconst SpecificationSection=()=>{const handleTagNoClick=()=>{//if (tagNoRef.current) {\n//tagNoRef.current.scrollIntoView({ behavior: 'smooth' });\n//}\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"spec-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Step 3: \\uC0C1\\uC138\\uC0AC\\uC591 \\uC785\\uB825\"}),/*#__PURE__*/_jsx(\"p\",{className:\"step-description-req\",children:\"\\uC120\\uD0DD\\uB41C TagNo\\uC758 \\uC0C1\\uC138 \\uC0AC\\uC591\\uC744 \\uC785\\uB825\\uD569\\uB2C8\\uB2E4.\"}),currentValve?/*#__PURE__*/_jsxs(\"div\",{className:\"spec-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"spec-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tag-info\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tag-no\",children:\"Tag No\"}),/*#__PURE__*/_jsx(\"input\",{id:\"tag-no\",name:\"tagNo\",type:\"text\",value:currentValve.tagNo,onChange:e=>{if(!currentValve)return;const newTagNo=e.target.value;setValves(prevValves=>prevValves.map(valve=>valve.id===currentValve.id?_objectSpread(_objectSpread({},valve),{},{tagNo:newTagNo}):valve));// currentValveë„ í•¨ê»˜ ì—…ë°ì´íŠ¸\nsetCurrentValve(prev=>prev?_objectSpread(_objectSpread({},prev),{},{tagNo:newTagNo}):null);},ref:tagNoRef,onClick:handleTagNoClick})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-info\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"quantity\",children:\"Q'ty\"}),/*#__PURE__*/_jsx(\"input\",{id:\"quantity\",name:\"quantity\",type:\"number\",value:currentValve.qty===0?'':currentValve.qty,min:\"1\",onChange:e=>{if(!currentValve)return;const value=parseInt(e.target.value);const newQty=isNaN(value)?0:Math.max(1,value);setValves(prevValves=>prevValves.map(valve=>valve.id===currentValve.id?_objectSpread(_objectSpread({},valve),{},{qty:newQty}):valve));// currentValveë„ í•¨ê»˜ ì—…ë°ì´íŠ¸\nsetCurrentValve(prev=>prev?_objectSpread(_objectSpread({},prev),{},{qty:newQty}):null);}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"spec-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fluid-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fluid-row\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Fluid\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Medium:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"fluid-medium\",name:\"fluidMedium\",type:\"text\",value:currentValve.fluid.medium,onChange:e=>handleFluidFieldChange('medium',e.target.value),disabled:isReadOnly})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fluid-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fluid:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"fluid-type\",name:\"fluidType\",value:currentValve.fluid.fluid,onChange:e=>handleFluidFieldChange('fluid',e.target.value),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"}),fluidOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option,children:option},option))]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fluid-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"radio-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"radio-label\",children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"densityType\",value:\"Density\",checked:currentValve.isDensity,onChange:e=>handleRadioChange('isDensity',e.target.checked),disabled:isReadOnly})})}),/*#__PURE__*/_jsx(\"label\",{children:\"Density:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"fluid-density\",name:\"fluidDensity\",type:\"text\",value:currentValve.fluid.density,onChange:e=>handleFluidFieldChange('density',e.target.value),placeholder:!currentValve.isDensity?'Molecular ì„ íƒ ì‹œ ì‚¬ìš© ë¶ˆê°€':'',disabled:!currentValve.isDensity||isReadOnly,className:!currentValve.isDensity?'disabled-input':''})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"fluid-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"radio-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"radio-label\",children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"densityType\",value:\"Molecular\",checked:!currentValve.isDensity,onChange:e=>handleRadioChange('isDensity',!e.target.checked),disabled:isReadOnly})})}),/*#__PURE__*/_jsx(\"label\",{children:\"Molecular:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"fluid-molecular\",name:\"fluidMolecular\",type:\"text\",value:currentValve.fluid.molecular,onChange:e=>handleFluidFieldChange('molecular',e.target.value),placeholder:currentValve.isDensity?'Density ì„ íƒ ì‹œ ì‚¬ìš© ë¶ˆê°€':'',disabled:currentValve.isDensity||isReadOnly,className:currentValve.isDensity?'disabled-input':''})]})}),/*#__PURE__*/_jsx(\"h4\",{children:\"Fluid Conditions\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"fluid-conditions-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(\"th\",{children:\"Max\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Normal\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Min\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Unit\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"t1\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"t1-max\",name:\"t1Max\",type:\"number\",value:currentValve.fluid.t1.max===0?'':currentValve.fluid.t1.max,onChange:e=>handleFluidConditionChange('t1','max',parseFloat(e.target.value)||0),disabled:isReadOnly})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"t1-normal\",name:\"t1Normal\",type:\"number\",value:currentValve.fluid.t1.normal===0?'':currentValve.fluid.t1.normal,onChange:e=>handleFluidConditionChange('t1','normal',parseFloat(e.target.value)||0),disabled:isReadOnly})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"t1-min\",name:\"t1Min\",type:\"number\",value:currentValve.fluid.t1.min===0?'':currentValve.fluid.t1.min,onChange:e=>handleFluidConditionChange('t1','min',parseFloat(e.target.value)||0),disabled:isReadOnly})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{id:\"t1-unit\",name:\"t1Unit\",value:currentValve.fluid.temperatureUnit,onChange:e=>handleUnitChange('temperatureUnit',e.target.value),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\xB0C\",children:\"\\xB0C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"K\",children:\"K\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\xB0F\",children:\"\\xB0F\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\xB0Reaumur\",children:\"\\xB0Reaumur\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\xB0Rankine\",children:\"\\xB0Rankine\"})]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"p1\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"p1-max\",name:\"p1Max\",type:\"number\",value:currentValve.fluid.p1.max===0?'':currentValve.fluid.p1.max,onChange:e=>handleFluidConditionChange('p1','max',parseFloat(e.target.value)||0),disabled:isReadOnly})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"p1-normal\",name:\"p1Normal\",type:\"number\",value:currentValve.fluid.p1.normal===0?'':currentValve.fluid.p1.normal,onChange:e=>handleFluidConditionChange('p1','normal',parseFloat(e.target.value)||0),disabled:isReadOnly})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"p1-min\",name:\"p1Min\",type:\"number\",value:currentValve.fluid.p1.min===0?'':currentValve.fluid.p1.min,onChange:e=>handleFluidConditionChange('p1','min',parseFloat(e.target.value)||0),disabled:isReadOnly})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{id:\"p1-unit\",name:\"p1Unit\",value:currentValve.fluid.pressureUnit,onChange:e=>handleUnitChange('pressureUnit',e.target.value),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"bar(a)\",children:\"bar(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mbar(a)\",children:\"mbar(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pa(a)\",children:\"Pa(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kPa(a)\",children:\"kPa(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MPa(a)\",children:\"MPa(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"at(a)\",children:\"at(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"atm(a)\",children:\"atm(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kp/cm\\xB2(a)\",children:\"kp/cm\\xB2(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"N/m\\xB2(a)\",children:\"N/m\\xB2(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"N/mm\\xB2(a)\",children:\"N/mm\\xB2(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Torr(a)\",children:\"Torr(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mmHg(a)\",children:\"mmHg(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mmH2O(a)\",children:\"mmH2O(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"psi(a)\",children:\"psi(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ftH2O(a)\",children:\"ftH2O(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inHg(a)\",children:\"inHg(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inH2O(a)\",children:\"inH2O(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"lbf/ft\\xB2(a)\",children:\"lbf/ft\\xB2(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bar(g)\",children:\"bar(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mbar(g)\",children:\"mbar(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pa(g)\",children:\"Pa(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kPa(g)\",children:\"kPa(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MPa(g)\",children:\"MPa(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"at(g)\",children:\"at(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"atm(g)\",children:\"atm(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kp/cm\\xB2(g)\",children:\"kp/cm\\xB2(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"N/m\\xB2(g)\",children:\"N/m\\xB2(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"N/mm\\xB2(g)\",children:\"N/mm\\xB2(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Torr(g)\",children:\"Torr(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mmHg(g)\",children:\"mmHg(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mmH2O(g)\",children:\"mmH2O(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"psi(g)\",children:\"psi(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ftH2O(g)\",children:\"ftH2O(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inHg(g)\",children:\"inHg(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inH2O(g)\",children:\"inH2O(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"lbf/ft\\xB2(g)\",children:\"lbf/ft\\xB2(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kgf/cm\\xB2(a)\",children:\"kgf/cm\\xB2(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kgf/cm\\xB2(g)\",children:\"kgf/cm\\xB2(g)\"})]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'5px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'10px'},children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"p2Type\",value:\"P2\",checked:currentValve.isP2,onChange:e=>handleRadioChange('isP2',e.target.checked),disabled:isReadOnly})})}),\"p2\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"p2-max\",name:\"p2Max\",type:\"number\",value:currentValve.fluid.p2.max===0?'':currentValve.fluid.p2.max,onChange:e=>handleFluidConditionChange('p2','max',parseFloat(e.target.value)||0),disabled:!currentValve.isP2||isReadOnly,className:!currentValve.isP2?'disabled-input':''})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"p2-normal\",name:\"p2Normal\",type:\"number\",value:currentValve.fluid.p2.normal===0?'':currentValve.fluid.p2.normal,onChange:e=>handleFluidConditionChange('p2','normal',parseFloat(e.target.value)||0),disabled:!currentValve.isP2||isReadOnly,className:!currentValve.isP2?'disabled-input':''})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"p2-min\",name:\"p2Min\",type:\"number\",value:currentValve.fluid.p2.min===0?'':currentValve.fluid.p2.min,onChange:e=>handleFluidConditionChange('p2','min',parseFloat(e.target.value)||0),disabled:!currentValve.isP2||isReadOnly,className:!currentValve.isP2?'disabled-input':''})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{id:\"p2-unit\",name:\"p2Unit\",value:currentValve.fluid.pressureUnit,onChange:e=>handleUnitChange('pressureUnit',e.target.value),disabled:!currentValve.isP2||isReadOnly,className:!currentValve.isP2?'disabled-input':'',children:[/*#__PURE__*/_jsx(\"option\",{value:\"bar(a)\",children:\"bar(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mbar(a)\",children:\"mbar(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pa(a)\",children:\"Pa(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kPa(a)\",children:\"kPa(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MPa(a)\",children:\"MPa(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"at(a)\",children:\"at(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"atm(a)\",children:\"atm(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kp/cm\\xB2(a)\",children:\"kp/cm\\xB2(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"N/m\\xB2(a)\",children:\"N/m\\xB2(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"N/mm\\xB2(a)\",children:\"N/mm\\xB2(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Torr(a)\",children:\"Torr(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mmHg(a)\",children:\"mmHg(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mmH2O(a)\",children:\"mmH2O(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"psi(a)\",children:\"psi(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ftH2O(a)\",children:\"ftH2O(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inHg(a)\",children:\"inHg(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inH2O(a)\",children:\"inH2O(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"lbf/ft\\xB2(a)\",children:\"lbf/ft\\xB2(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bar(g)\",children:\"bar(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mbar(g)\",children:\"mbar(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pa(g)\",children:\"Pa(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kPa(g)\",children:\"kPa(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MPa(g)\",children:\"MPa(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"at(g)\",children:\"at(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"atm(g)\",children:\"atm(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kp/cm\\xB2(g)\",children:\"kp/cm\\xB2(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"N/m\\xB2(g)\",children:\"N/m\\xB2(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"N/mm\\xB2(g)\",children:\"N/mm\\xB2(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Torr(g)\",children:\"Torr(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mmHg(g)\",children:\"mmHg(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mmH2O(g)\",children:\"mmH2O(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"psi(g)\",children:\"psi(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ftH2O(g)\",children:\"ftH2O(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inHg(g)\",children:\"inHg(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inH2O(g)\",children:\"inH2O(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"lbf/ft\\xB2(g)\",children:\"lbf/ft\\xB2(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kgf/cm\\xB2(a)\",children:\"kgf/cm\\xB2(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kgf/cm\\xB2(g)\",children:\"kgf/cm\\xB2(g)\"})]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"radio-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"radio-label\",children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"dpType\",value:\"DP\",checked:!currentValve.isP2,onChange:e=>handleRadioChange('isP2',!e.target.checked),disabled:isReadOnly})})}),\"\\u0394p\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"dp-max\",name:\"dpMax\",type:\"number\",value:currentValve.fluid.dp.max===0?'':currentValve.fluid.dp.max,onChange:e=>handleFluidConditionChange('dp','max',parseFloat(e.target.value)||0),disabled:currentValve.isP2||isReadOnly,className:currentValve.isP2?'disabled-input':''})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"dp-normal\",name:\"dpNormal\",type:\"number\",value:currentValve.fluid.dp.normal===0?'':currentValve.fluid.dp.normal,onChange:e=>handleFluidConditionChange('dp','normal',parseFloat(e.target.value)||0),disabled:currentValve.isP2||isReadOnly,className:currentValve.isP2?'disabled-input':''})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"dp-min\",name:\"dpMin\",type:\"number\",value:currentValve.fluid.dp.min===0?'':currentValve.fluid.dp.min,onChange:e=>handleFluidConditionChange('dp','min',parseFloat(e.target.value)||0),disabled:currentValve.isP2||isReadOnly,className:currentValve.isP2?'disabled-input':''})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{id:\"dp-unit\",name:\"dpUnit\",value:currentValve.fluid.pressureUnit,onChange:e=>handleUnitChange('pressureUnit',e.target.value),disabled:currentValve.isP2||isReadOnly,className:currentValve.isP2?'disabled-input':'',children:[/*#__PURE__*/_jsx(\"option\",{value:\"bar(a)\",children:\"bar(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mbar(a)\",children:\"mbar(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pa(a)\",children:\"Pa(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kPa(a)\",children:\"kPa(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MPa(a)\",children:\"MPa(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"at(a)\",children:\"at(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"atm(a)\",children:\"atm(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kp/cm\\xB2(a)\",children:\"kp/cm\\xB2(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"N/m\\xB2(a)\",children:\"N/m\\xB2(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"N/mm\\xB2(a)\",children:\"N/mm\\xB2(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Torr(a)\",children:\"Torr(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mmHg(a)\",children:\"mmHg(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mmH2O(a)\",children:\"mmH2O(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"psi(a)\",children:\"psi(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ftH2O(a)\",children:\"ftH2O(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inHg(a)\",children:\"inHg(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inH2O(a)\",children:\"inH2O(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"lbf/ft\\xB2(a)\",children:\"lbf/ft\\xB2(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bar(g)\",children:\"bar(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mbar(g)\",children:\"mbar(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pa(g)\",children:\"Pa(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kPa(g)\",children:\"kPa(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MPa(g)\",children:\"MPa(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"at(g)\",children:\"at(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"atm(g)\",children:\"atm(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kp/cm\\xB2(g)\",children:\"kp/cm\\xB2(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"N/m\\xB2(g)\",children:\"N/m\\xB2(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"N/mm\\xB2(g)\",children:\"N/mm\\xB2(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Torr(g)\",children:\"Torr(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mmHg(g)\",children:\"mmHg(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mmH2O(g)\",children:\"mmH2O(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"psi(g)\",children:\"psi(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ftH2O(g)\",children:\"ftH2O(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inHg(g)\",children:\"inHg(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inH2O(g)\",children:\"inH2O(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"lbf/ft\\xB2(g)\",children:\"lbf/ft\\xB2(g)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kgf/cm\\xB2(a)\",children:\"kgf/cm\\xB2(a)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kgf/cm\\xB2(g)\",children:\"kgf/cm\\xB2(g)\"})]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'5px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'10px'},children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"qmType\",value:\"Qm\",checked:currentValve.isQM,onChange:e=>handleRadioChange('isQM',e.target.checked),disabled:isReadOnly})})}),\"qm\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"qm-max\",name:\"qmMax\",type:\"number\",value:currentValve.fluid.qm.max===0?'':currentValve.fluid.qm.max,onChange:e=>handleFluidConditionChange('qm','max',parseFloat(e.target.value)||0),disabled:!currentValve.isQM||isReadOnly,className:!currentValve.isQM?'disabled-input':''})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"qm-normal\",name:\"qmNormal\",type:\"number\",value:currentValve.fluid.qm.normal===0?'':currentValve.fluid.qm.normal,onChange:e=>handleFluidConditionChange('qm','normal',parseFloat(e.target.value)||0),disabled:!currentValve.isQM||isReadOnly,className:!currentValve.isQM?'disabled-input':''})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"qm-min\",name:\"qmMin\",type:\"number\",value:currentValve.fluid.qm.min===0?'':currentValve.fluid.qm.min,onChange:e=>handleFluidConditionChange('qm','min',parseFloat(e.target.value)||0),disabled:!currentValve.isQM||isReadOnly,className:!currentValve.isQM?'disabled-input':''})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{id:\"qm-unit\",name:\"qmUnit\",value:currentValve.fluid.qm.unit,onChange:e=>handleFluidConditionChange('qm','unit',e.target.value),disabled:!currentValve.isQM||isReadOnly,className:!currentValve.isQM?'disabled-input':'',children:[/*#__PURE__*/_jsx(\"option\",{value:\"m\\xB3/h\",children:\"m\\xB3/h\"}),/*#__PURE__*/_jsx(\"option\",{value:\"m\\xB3/s\",children:\"m\\xB3/s\"}),/*#__PURE__*/_jsx(\"option\",{value:\"m\\xB3/d\",children:\"m\\xB3/d\"}),/*#__PURE__*/_jsx(\"option\",{value:\"l/h\",children:\"l/h\"}),/*#__PURE__*/_jsx(\"option\",{value:\"l/s\",children:\"l/s\"}),/*#__PURE__*/_jsx(\"option\",{value:\"l/min\",children:\"l/min\"}),/*#__PURE__*/_jsx(\"option\",{value:\"GPH(US)\",children:\"GPH(US)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"GPM(US)\",children:\"GPM(US)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MMSCFD\",children:\"MMSCFD\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MSCFD\",children:\"MSCFD\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MMSCFH\",children:\"MMSCFH\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MSCFH\",children:\"MSCFH\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SCFH\",children:\"SCFH\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MMSCFM\",children:\"MMSCFM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MSCFM\",children:\"MSCFM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SCFM\",children:\"SCFM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"GPH(UK)\",children:\"GPH(UK)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"GPM(UK)\",children:\"GPM(UK)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"dm\\xB3/h\",children:\"dm\\xB3/h\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MMSCMD\",children:\"MMSCMD\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MSCMD\",children:\"MSCMD\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MMSCMH\",children:\"MMSCMH\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MSCMH\",children:\"MSCMH\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MMSCMM\",children:\"MMSCMM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MSCMM\",children:\"MSCMM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bbl/d(US)\",children:\"bbl/d(US)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bbl/d(oil)\",children:\"bbl/d(oil)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bbl/d(UK)\",children:\"bbl/d(UK)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bbl/h(US)\",children:\"bbl/h(US)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bbl/h(oil)\",children:\"bbl/h(oil)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bbl/h(UK)\",children:\"bbl/h(UK)\"})]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"radio-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"radio-label\",children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"qnType\",value:\"Qn\",checked:!currentValve.isQM,onChange:e=>handleRadioChange('isQM',!e.target.checked),disabled:isReadOnly})})}),\"qn\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"qn-max\",name:\"qnMax\",type:\"number\",value:currentValve.fluid.qn.max===0?'':currentValve.fluid.qn.max,onChange:e=>handleFluidConditionChange('qn','max',parseFloat(e.target.value)||0),disabled:currentValve.isQM||isReadOnly,className:currentValve.isQM?'disabled-input':''})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"qn-normal\",name:\"qnNormal\",type:\"number\",value:currentValve.fluid.qn.normal===0?'':currentValve.fluid.qn.normal,onChange:e=>handleFluidConditionChange('qn','normal',parseFloat(e.target.value)||0),disabled:currentValve.isQM||isReadOnly,className:currentValve.isQM?'disabled-input':''})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"qn-min\",name:\"qnMin\",type:\"number\",value:currentValve.fluid.qn.min===0?'':currentValve.fluid.qn.min,onChange:e=>handleFluidConditionChange('qn','min',parseFloat(e.target.value)||0),disabled:currentValve.isQM||isReadOnly,className:currentValve.isQM?'disabled-input':''})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{id:\"qn-unit\",name:\"qnUnit\",value:currentValve.fluid.qn.unit,onChange:e=>handleFluidConditionChange('qn','unit',e.target.value),disabled:currentValve.isQM||isReadOnly,className:currentValve.isQM?'disabled-input':'',children:[/*#__PURE__*/_jsx(\"option\",{value:\"m\\xB3/h\",children:\"m\\xB3/h\"}),/*#__PURE__*/_jsx(\"option\",{value:\"GPM(US)\",children:\"GPM(US)\"})]})})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"specification-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"spec-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"BODY\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"body-spec-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"body-spec-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"input\",{id:\"body-type\",name:\"bodyType\",type:\"text\",value:currentValve.body.type,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"spec-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Size\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"size-selection-group\",children:[/*#__PURE__*/_jsxs(\"select\",{id:\"body-size-unit\",name:\"bodySizeUnit\",value:currentValve.body.sizeUnit,onChange:e=>{handleBodyChange('sizeUnit',e.target.value);// ë‹¨ìœ„ê°€ ë³€ê²½ë˜ë©´ size ì´ˆê¸°í™”\nhandleBodyChange('size','');},disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uB2E8\\uC704\"}),bodySizeUnits&&bodySizeUnits.length>0?bodySizeUnits.map(unit=>{// Unit ì½”ë“œë¥¼ ì‚¬ìš©ì ì¹œí™”ì ì¸ ì´ë¦„ìœ¼ë¡œ ë³€í™˜\nlet displayName=unit.name;if(unit.code==='A')displayName='DN';if(unit.code==='I')displayName='inch';if(unit.code==='N')displayName='None';if(unit.code==='Z')displayName='SPECIAL';return/*#__PURE__*/_jsx(\"option\",{value:unit.code,children:displayName},unit.code);}):/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"\\uB85C\\uB529 \\uC911...\"})]}),/*#__PURE__*/_jsxs(\"select\",{id:\"body-size\",name:\"bodySize\",value:currentValve.body.size,onChange:e=>handleBodyChange('size',e.target.value),disabled:!currentValve.body.sizeUnit||isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"}),filteredSizeList&&filteredSizeList.length>0?filteredSizeList.map(item=>/*#__PURE__*/_jsx(\"option\",{value:item.bodySizeCode,children:item.bodySize},\"\".concat(item.sizeUnitCode,\"-\").concat(item.bodySizeCode))):/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"Size Unit\\uC744 \\uBA3C\\uC800 \\uC120\\uD0DD\\uD558\\uC138\\uC694\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"body-spec-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Material Body\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"body-material-body\",name:\"bodyMaterialBody\",value:currentValve.body.materialBody,onChange:e=>handleBodyChange('materialBody',e.target.value),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"}),bodyMatList.map(item=>/*#__PURE__*/_jsx(\"option\",{value:item.bodyMatCode,children:item.bodyMat},item.bodyMatCode))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"spec-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Rating\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rating-selection-group\",children:[/*#__PURE__*/_jsxs(\"select\",{id:\"body-rating-unit\",name:\"bodyRatingUnit\",value:currentValve.body.ratingUnit,onChange:e=>{handleBodyChange('ratingUnit',e.target.value);handleBodyChange('rating','');},disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uB2E8\\uC704\"}),uniqueRatingUnits.map(unit=>/*#__PURE__*/_jsx(\"option\",{value:unit.code,children:unit.name},unit.code))]}),/*#__PURE__*/_jsxs(\"select\",{id:\"body-rating\",name:\"bodyRating\",value:currentValve.body.rating,onChange:e=>handleBodyChange('rating',e.target.value),disabled:!currentValve.body.ratingUnit||isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uB4F1\\uAE09\"}),filteredRatingList.map(item=>/*#__PURE__*/_jsx(\"option\",{value:item.ratingCode,children:item.ratingName},item.id))]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"spec-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Trim\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"spec-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"spec-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Material Trim\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"trim-material-trim\",name:\"trimMaterialTrim\",value:currentValve.body.materialTrim,onChange:e=>handleBodyChange('materialTrim',e.target.value),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"}),trimMatList.map(item=>/*#__PURE__*/_jsx(\"option\",{value:item.trimMatCode,children:item.trimMat},item.trimMatCode))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"spec-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Option\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"trim-option\",name:\"trimOption\",value:currentValve.body.option,onChange:e=>handleBodyChange('option',e.target.value),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"}),trimOptionList.map(item=>/*#__PURE__*/_jsx(\"option\",{value:item.trimOptionCode,children:item.trimOption},item.trimOptionCode))]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"spec-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"ACT\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"spec-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"spec-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Type\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"actuator-type\",name:\"actuatorType\",value:currentValve.actuator.type,onChange:e=>handleActuatorChange('type',e.target.value),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"}),actuatorTypeOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option,children:option},option))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"spec-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"H/W\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"actuator-hw\",name:\"actuatorHw\",value:currentValve.actuator.hw,onChange:e=>handleActuatorChange('hw',e.target.value),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"}),hwOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option,children:option},option))]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"accessory-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Accessory\"}),/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Positioner\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{id:\"accessory-positioner\",name:\"accessoryPositioner\",value:currentValve.accessory.positioner.type,onChange:e=>handleAccessoryChange('positioner.type',e.target.value),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"}),positionerTypeOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option,children:option},option))]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Explosion proof\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{id:\"accessory-explosion-proof\",name:\"accessoryExplosionProof\",value:currentValve.accessory.explosionProof,onChange:e=>handleAccessoryChange('explosionProof',e.target.value),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"}),explosionProofOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option,children:option},option))]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Transmitter\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{id:\"accessory-transmitter\",name:\"accessoryTransmitter\",value:currentValve.accessory.transmitter.type,onChange:e=>handleAccessoryChange('transmitter.type',e.target.value),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"}),transmitterTypeOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option,children:option},option))]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Solenoid Valve\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{id:\"accessory-solenoid-valve\",name:\"accessorySolenoidValve\",value:currentValve.accessory.solenoidValve.exists?'Yes':'No',onChange:e=>handleAccessoryChange('solenoidValve.exists',e.target.value==='Yes'),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"No\",children:\"No\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Yes\",children:\"Yes\"})]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Limit Switch\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{id:\"accessory-limit-switch\",name:\"accessoryLimitSwitch\",value:currentValve.accessory.limitSwitch.exists?'Yes':'No',onChange:e=>handleAccessoryChange('limitSwitch.exists',e.target.value==='Yes'),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"No\",children:\"No\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Yes\",children:\"Yes\"})]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Air-set\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{id:\"accessory-air-set\",name:\"accessoryAirSet\",value:currentValve.accessory.airSet.exists?'Yes':'No',onChange:e=>handleAccessoryChange('airSet.exists',e.target.value==='Yes'),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"No\",children:\"No\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Yes\",children:\"Yes\"})]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Volume booster\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{id:\"accessory-volume-booster\",name:\"accessoryVolumeBooster\",value:currentValve.accessory.volumeBooster.exists?'Yes':'No',onChange:e=>handleAccessoryChange('volumeBooster.exists',e.target.value==='Yes'),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"No\",children:\"No\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Yes\",children:\"Yes\"})]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Air Operated Valve\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{id:\"accessory-air-operated-valve\",name:\"accessoryAirOperatedValve\",value:currentValve.accessory.airOperatedValve.exists?'Yes':'No',onChange:e=>handleAccessoryChange('airOperatedValve.exists',e.target.value==='Yes'),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"No\",children:\"No\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Yes\",children:\"Yes\"})]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Lockup Valve\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{id:\"accessory-lockup-valve\",name:\"accessoryLockupValve\",value:currentValve.accessory.lockupValve.exists?'Yes':'No',onChange:e=>handleAccessoryChange('lockupValve.exists',e.target.value==='Yes'),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"No\",children:\"No\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Yes\",children:\"Yes\"})]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Snap-acting relay\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{id:\"accessory-snap-acting-relay\",name:\"accessorySnapActingRelay\",value:currentValve.accessory.snapActingRelay.exists?'Yes':'No',onChange:e=>handleAccessoryChange('snapActingRelay.exists',e.target.value==='Yes'),disabled:isReadOnly,children:[/*#__PURE__*/_jsx(\"option\",{value:\"No\",children:\"No\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Yes\",children:\"Yes\"})]})})]})]})})]})]})]}):/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',textAlign:'center',color:'#666',backgroundColor:'#f9f9f9',borderRadius:'8px',margin:'10px 0'},children:\"Step 2\\uC5D0\\uC11C TagNo\\uB97C \\uC120\\uD0DD\\uD558\\uBA74 \\uC0C1\\uC138 \\uC0AC\\uC591\\uC744 \\uC785\\uB825\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"})]});};// ì²¨ë¶€íŒŒì¼ ì„¹ì…˜ (ë©”ëª¨ì´ì œì´ì…˜ìœ¼ë¡œ ë¶„ë¦¬)\nconst AttachmentSection=/*#__PURE__*/React.memo(()=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"attachment-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"attachment-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uCCA8\\uBD80\\uD30C\\uC77C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-upload-container\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"file-upload\",name:\"fileUpload\",type:\"file\",multiple:true,onChange:e=>{if(e.target.files){handleFileUpload(e.target.files);}},accept:\".pdf,.xls,.xlsx,.doc,.docx,.hwp,.jpg,.jpeg,.png,.gif,.bmp,.tiff,.webp,.txt,.zip,.rar,.7z\",style:{display:'none'}}),/*#__PURE__*/_jsx(\"button\",{className:\"upload-btn\",onClick:()=>{var _document$getElementB;return(_document$getElementB=document.getElementById('file-upload'))===null||_document$getElementB===void 0?void 0:_document$getElementB.click();},disabled:uploadingFiles,children:uploadingFiles?'ì—…ë¡œë“œ ì¤‘...':'íŒŒì¼ ì„ íƒ'})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"attachment-list\",children:fileAttachments.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-files\",children:\"\\uCCA8\\uBD80\\uB41C \\uD30C\\uC77C\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"file-list\",children:fileAttachments.map((file,index)=>{console.log('ğŸ” ì²¨ë¶€íŒŒì¼ ë Œë”ë§ - ê°„ë‹¨ í…ŒìŠ¤íŠ¸:',index,file.name);return/*#__PURE__*/_jsxs(\"div\",{className:\"file-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"file-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"file-name\",children:file.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"file-size\",children:[\"(\",(()=>{console.log('File size for',file.name,':',file.size,typeof file.size);const fileSize=parseInt(file.size)||0;if(fileSize===0)return'0.00';const sizeInMB=fileSize/1024/1024;return sizeInMB.toFixed(2);})(),\" MB)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:()=>{alert('ì‚­ì œ ë²„íŠ¼ í´ë¦­ë¨!');console.log('ğŸ—‘ï¸ ì‚­ì œ ë²„íŠ¼ í´ë¦­ë¨ - ê°„ë‹¨ í…ŒìŠ¤íŠ¸');},children:\"\\uC0AD\\uC81C\"})})]},\"\".concat(file.id||file.uniqueId||file.attachmentId,\"-\").concat(index));})})})]});});// íŒŒì¼ ë³€ê²½ í•¸ë“¤ëŸ¬\nconst handleFileChange=useCallback(e=>{if(e.target.files){const newFiles=Array.from(e.target.files);setAttachments(prev=>[...prev,...newFiles]);}},[]);// íŒŒì¼ ì‚­ì œ í•¸ë“¤ëŸ¬\nconst handleRemoveFile=useCallback(index=>{setAttachments(prev=>prev.filter((_,i)=>i!==index));},[]);// Ratingê³¼ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ, bodySizeListê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ê³ ìœ í•œ Size Unit ëª©ë¡ì„ ìƒì„±í•©ë‹ˆë‹¤.\nconst bodySizeUnits=useMemo(()=>{console.log('ğŸ” bodySizeUnits ìƒì„± ì‹œì‘ - bodySizeList ê¸¸ì´:',bodySizeList===null||bodySizeList===void 0?void 0:bodySizeList.length);console.log('ğŸ” bodySizeList ì²« ë²ˆì§¸ í•­ëª©:',bodySizeList===null||bodySizeList===void 0?void 0:bodySizeList[0]);if(!bodySizeList||bodySizeList.length===0){console.log('âŒ bodySizeListê°€ ë¹„ì–´ìˆìŒ');return[];}const unitMap=new Map();bodySizeList.forEach((item,index)=>{if(index<3){// ì²˜ìŒ 3ê°œë§Œ ë¡œê·¸ ì¶œë ¥\nconsole.log(\"\\uD83D\\uDD0D item[\".concat(index,\"]:\"),item);}// item.sizeUnitCodeì™€ item.sizeUnitì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸\nif(item.sizeUnitCode&&item.sizeUnit&&!unitMap.has(item.sizeUnitCode)){unitMap.set(item.sizeUnitCode,item.sizeUnit);console.log(\"\\u2705 Unit \\uCD94\\uAC00: \".concat(item.sizeUnitCode,\" -> \").concat(item.sizeUnit));}else{console.log(\"\\u274C Unit \\uCD94\\uAC00 \\uC2E4\\uD328: sizeUnitCode=\".concat(item.sizeUnitCode,\", sizeUnit=\").concat(item.sizeUnit));}});// Ratingê³¼ ë™ì¼í•œ { code, name } í˜•íƒœë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.\nconst units=Array.from(unitMap,_ref10=>{let[code,name]=_ref10;return{code,name};});console.log('ğŸ” ìƒì„±ëœ bodySizeUnits:',units);console.log('ğŸ” bodySizeUnits ê¸¸ì´:',units.length);const sortedUnits=units.sort((a,b)=>customSort(a.name,b.name));console.log('ğŸ” ì •ë ¬ëœ bodySizeUnits:',sortedUnits);return sortedUnits;},[bodySizeList]);// Ratingê³¼ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ, ì„ íƒëœ Size Unitì— í•´ë‹¹í•˜ëŠ” Size ëª©ë¡ì„ í•„í„°ë§í•©ë‹ˆë‹¤.\nconst filteredSizeList=useMemo(()=>{if(!currentValve||!currentValve.body.sizeUnit){// sizeUnitì€ ì´ì œ ì½”ë“œì…ë‹ˆë‹¤.\nreturn[];}return bodySizeList.filter(item=>item.sizeUnitCode===currentValve.body.sizeUnit);},[currentValve,bodySizeList]);// Size ì„¹ì…˜ ë””ë²„ê¹…ì„ ìœ„í•œ useEffect\nuseEffect(()=>{if(currentValve){var _currentValve$body,_currentValve$body2;console.log('ğŸ” Size ì„¹ì…˜ ìƒíƒœ í™•ì¸:',{hasCurrentValve:!!currentValve,bodySizeUnits:bodySizeUnits,filteredSizeList:filteredSizeList,currentSizeUnit:currentValve===null||currentValve===void 0?void 0:(_currentValve$body=currentValve.body)===null||_currentValve$body===void 0?void 0:_currentValve$body.sizeUnit,currentSize:currentValve===null||currentValve===void 0?void 0:(_currentValve$body2=currentValve.body)===null||_currentValve$body2===void 0?void 0:_currentValve$body2.size});}},[currentValve,bodySizeUnits,filteredSizeList]);useEffect(()=>{const userStr=localStorage.getItem('user');if(userStr){setCurrentUser(JSON.parse(userStr));}// ì„ íƒëœ ê³ ê° ì •ë³´ ê°€ì ¸ì˜¤ê¸°\nconst customerStr=localStorage.getItem('selectedCustomer');if(customerStr){setSelectedCustomer(JSON.parse(customerStr));}// readonly ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° í™•ì¸\nconst readonlyParam=searchParams.get('readonly');console.log('NewEstimateRequestPage - readonlyParam:',readonlyParam);console.log('NewEstimateRequestPage - searchParams:',Object.fromEntries(searchParams.entries()));if(readonlyParam==='true'){setIsReadOnly(true);console.log('NewEstimateRequestPage - isReadOnly set to true');}else{setIsReadOnly(false);console.log('NewEstimateRequestPage - isReadOnly set to false');}},[searchParams]);return/*#__PURE__*/_jsxs(\"div\",{className:\"new-estimate-request-page dashboard-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"back-button\",onClick:()=>navigate(-1),children:[\"\\u2190 \",isReadOnly?'ê²¬ì ìš”ì²­ ì¡°íšŒ':'ê²¬ì ìš”ì²­']}),/*#__PURE__*/_jsx(\"h1\",{children:isReadOnly?'ê²¬ì  ìƒì„¸ ì¡°íšŒ':'ê²¬ì  ìš”ì²­'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"status-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"project-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uD504\\uB85C\\uC81D\\uD2B8\\uBA85:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:projectName,onChange:e=>setProjectName(e.target.value),placeholder:\"\\uD504\\uB85C\\uC81D\\uD2B8\\uBA85\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",className:\"project-input\",disabled:isReadOnly})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"top-two-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mini-card estimate-summary\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mini-card-header\",children:\"\\uACAC\\uC801 \\uC138\\uBD80 \\uC815\\uBCF4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mini-card-body summary-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"\\uACAC\\uC801\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"strong\",{className:\"value\",children:tempEstimateNo||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"\\uC0C1\\uD0DC\"}),/*#__PURE__*/_jsx(\"strong\",{className:\"value\",children:uiStatusText})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"\\uD68C\\uC0AC\\uBA85\"}),/*#__PURE__*/_jsx(\"strong\",{className:\"value\",children:(selectedCustomer===null||selectedCustomer===void 0?void 0:selectedCustomer.companyName)||(selectedCustomer===null||selectedCustomer===void 0?void 0:selectedCustomer.name)||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"\\uC218\\uB7C9\"}),/*#__PURE__*/_jsx(\"strong\",{className:\"value\",children:totalQty})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"\\uC694\\uCCAD\\uC790\"}),/*#__PURE__*/_jsx(\"strong\",{className:\"value\",children:(currentUser===null||currentUser===void 0?void 0:currentUser.name)||(currentUser===null||currentUser===void 0?void 0:currentUser.userName)||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"\\uC694\\uCCAD\\uC77C\\uC790\"}),/*#__PURE__*/_jsx(\"strong\",{className:\"value\",children:new Date().toISOString().slice(0,10).replaceAll('-','.')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"\\uB2F4\\uB2F9\\uC790\"}),/*#__PURE__*/_jsx(\"strong\",{className:\"value\",children:\"-\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"\\uC644\\uB8CC\\uC77C\\uC790\"}),/*#__PURE__*/_jsx(\"strong\",{className:\"value\",children:\"-\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mini-card manager-files\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mini-card-header\",children:\"\\uAD00\\uB9AC \\uCCA8\\uBD80\\uD30C\\uC77C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mini-card-body\",children:(()=>{// ì™„ë£Œ/ì£¼ë¬¸ë§Œ íŒŒì¼ í‘œì‹œ, ê·¸ ì™¸ ìƒíƒœëŠ” ì•ˆë‚´ ë¬¸êµ¬\n// í˜„ì¬ í˜ì´ì§€ëŠ” ì‹ ê·œ/ìš”ì²­ íë¦„ì´ë¼ ë°±ì—”ë“œ statusê°€ ì—†ìœ¼ë¯€ë¡œ, ê°„ë‹¨í•œ í…ìŠ¤íŠ¸ ê¸°ì¤€ìœ¼ë¡œ ë¶„ê¸°\nconst statusCode=backendStatus;if(statusCode===4||statusCode===5){return managerAttachments&&managerAttachments.length>0?/*#__PURE__*/_jsx(\"ul\",{className:\"mini-file-list\",children:managerAttachments.map(f=>{var _f$attachmentID;return/*#__PURE__*/_jsxs(\"li\",{className:\"mini-file-item\",title:f.fileName,children:[/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:f.fileName}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link btn-xs\",onClick:()=>handleDownloadManagerFile(f),children:\"\\uB2E4\\uC6B4\"})]},(_f$attachmentID=f.attachmentID)!==null&&_f$attachmentID!==void 0?_f$attachmentID:\"\".concat(f.fileName,\"-\").concat(f.filePath));})}):/*#__PURE__*/_jsx(\"div\",{className:\"mini-empty\",children:\"\\uD30C\\uC77C \\uC5C6\\uC74C\"});}if(statusCode===3){return/*#__PURE__*/_jsx(\"div\",{className:\"mini-empty\",children:\"\\uB2F4\\uB2F9\\uC790 \\uBC30\\uC815\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4. \\uACAC\\uC801\\uC11C \\uC791\\uC131\\uC911\\uC785\\uB2C8\\uB2E4.\"});}// 1, 2 ë˜ëŠ” ìƒíƒœê°’ì´ ì—†ì„ ë•Œ ê¸°ë³¸ ë¬¸êµ¬\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"mini-empty\",children:\"\\uACAC\\uC801 \\uC694\\uCCAD\\uC11C \\uC791\\uC131\\uC744 \\uBA3C\\uC800 \\uBD80\\uD0C1\\uB4DC\\uB9BD\\uB2C8\\uB2E4. \\uC774\\uD6C4 \\uB2F4\\uB2F9\\uC790 \\uBC30\\uC815 \\uB3C4\\uC640\\uB4DC\\uB9AC\\uACA0\\uC2B5\\uB2C8\\uB2E4.\"});})()})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"main-content-detail\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"steps-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"step-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-header\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\uACAC\\uC801 \\uC0C1\\uC138 \\uC815\\uBCF4\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-subsection\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Step 1: Type \\uC120\\uC815\"}),/*#__PURE__*/_jsx(\"p\",{className:\"step-description-req\",children:\"\\uACAC\\uC801\\uC5D0 \\uD544\\uC694\\uD55C \\uBC38\\uBE0C \\uD0C0\\uC785\\uC744 \\uC120\\uD0DD\\uD558\\uACE0 \\uAD00\\uB9AC\\uD569\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"type-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"type-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAddType,disabled:isReadOnly,children:\"\\uCD94\\uAC00\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>selectedType&&handleRemoveType(types.findIndex(type=>type.id===selectedType)),disabled:isReadOnly,children:\"\\uC0AD\\uC81C\"})]})}),/*#__PURE__*/_jsx(DndContext,{sensors:sensors,collisionDetection:closestCenter,onDragEnd:handleTypeDragEnd,children:/*#__PURE__*/_jsx(SortableContext,{items:types.map(item=>item.id),strategy:verticalListSortingStrategy,children:types.map((item,index)=>/*#__PURE__*/_jsx(SortableItem,{id:item.id,children:/*#__PURE__*/_jsx(\"div\",{className:\"type-item \".concat(selectedType===item.id?'selected':''),onClick:e=>{e.preventDefault();e.stopPropagation();setSelectedType(item.id);},onMouseDown:e=>{e.preventDefault();e.stopPropagation();},style:{cursor:'pointer',userSelect:'none',pointerEvents:'auto'},children:/*#__PURE__*/_jsxs(\"span\",{children:[item.name,\" (\",valves.filter(valve=>valve.body.type===item.name).reduce((sum,valve)=>sum+valve.qty,0),\")\"]})})},item.id))})}),showValveDropdown&&/*#__PURE__*/_jsx(\"div\",{className:\"valve-dropdown\",style:{position:'relative',backgroundColor:'white',border:'2px solid #007bff',borderRadius:'4px',boxShadow:'0 2px 8px rgba(0, 0, 0, 0.15)',maxHeight:'150px',overflowY:'auto',marginTop:'5px'},children:bodyValveList.map(valve=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>handleValveSelect(valve),style:{padding:'8px 12px',cursor:'pointer',borderBottom:'1px solid #eee',fontSize:'14px'},onMouseEnter:e=>e.currentTarget.style.backgroundColor='#f5f5f5',onMouseLeave:e=>e.currentTarget.style.backgroundColor='white',children:valve.valveSeries},valve.valveSeriesCode))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-subsection\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Step 2: TagNo \\uCD94\\uAC00\"}),/*#__PURE__*/_jsx(\"p\",{className:\"step-description-req\",children:\"\\uC120\\uD0DD\\uB41C1 \\uD0C0\\uC785\\uC5D0 \\uB530\\uB77C TagNo\\uB97C \\uCD94\\uAC00\\uD558\\uACE0 \\uAD00\\uB9AC\\uD569\\uB2C8\\uB2E4.\"}),ValveSection()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-subsection\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Step 3: \\uC0C1\\uC138\\uC0AC\\uC591 \\uC785\\uB825\"}),/*#__PURE__*/_jsx(\"p\",{className:\"step-description-req\",children:\"BODY, Trim, ACT, Accessory\\uC758 \\uC0C1\\uC138 \\uC0AC\\uC591\\uC744 \\uC785\\uB825\\uD569\\uB2C8\\uB2E4.\"}),SpecificationSection()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-section compact-two-panel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"compact-box other-requests-compact\",children:/*#__PURE__*/_jsx(CustomerRequirementComponent,{value:customerRequirement,onChange:setCustomerRequirement,isReadOnly:isReadOnly})}),/*#__PURE__*/_jsxs(\"div\",{className:\"compact-box attachments-compact\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"compact-label\",children:\"\\uCCA8\\uBD80\\uD30C\\uC77C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-upload-container compact\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"file-upload\",name:\"fileUpload\",type:\"file\",multiple:true,onChange:e=>{if(e.target.files){handleFileUpload(e.target.files);}},accept:\".pdf,.xls,.xlsx,.doc,.docx,.hwp,.jpg,.jpeg,.png,.gif,.bmp,.tiff,.webp,.txt,.zip,.rar,.7z\",style:{display:'none'}}),/*#__PURE__*/_jsx(\"button\",{className:\"upload-btn compact\",onClick:()=>{var _document$getElementB2;return(_document$getElementB2=document.getElementById('file-upload'))===null||_document$getElementB2===void 0?void 0:_document$getElementB2.click();},disabled:uploadingFiles,children:uploadingFiles?'ì—…ë¡œë“œ ì¤‘...':'íŒŒì¼ ì„ íƒ'}),/*#__PURE__*/_jsxs(\"span\",{className:\"file-count\",children:[(attachments===null||attachments===void 0?void 0:attachments.length)||0,\"\\uAC1C\"]})]}),attachments&&attachments.length>0&&/*#__PURE__*/_jsxs(\"ul\",{className:\"compact-file-list\",children:[attachments.slice(0,5).map((f,idx)=>/*#__PURE__*/_jsxs(\"li\",{title:f.name,children:[f.isPending?'â³ ':'',f.name]},(f.id||f.uniqueId||f.attachmentId||idx)+'-compact')),attachments.length>5&&/*#__PURE__*/_jsxs(\"li\",{className:\"more\",children:[\"\\uC678 \",attachments.length-5,\"\\uAC1C\\u2026\"]})]})]})]})]})}),!isReadOnly?/*#__PURE__*/_jsx(\"div\",{className:\"bottom-actions\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:()=>navigate('/dashboard/estimate-requests'),children:\"\\uBAA9\\uB85D\\uC73C\\uB85C\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:handleSaveDraft,children:\"\\uC784\\uC2DC\\uC800\\uC7A5\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:handleSubmitEstimate,children:\"\\uACAC\\uC801\\uC694\\uCCAD\"})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"bottom-actions\",children:/*#__PURE__*/_jsx(\"div\",{className:\"action-buttons\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:()=>navigate('/dashboard/estimate-inquiry'),children:\"\\uBAA9\\uB85D\\uC73C\\uB85C\"})})})]});};export default NewEstimateRequestPage;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useMemo","useNavigate","useSearchParams","axios","DndContext","closestCenter","KeyboardSensor","PointerSensor","useSensor","useSensors","arrayMove","SortableContext","sortableKeyboardCoordinates","verticalListSortingStrategy","useSortable","CSS","jsx","_jsx","jsxs","_jsxs","isManagerFile","filePath","normalizedPath","replace","managerFilePatterns","some","pattern","includes","extractManagerFileType","pathParts","split","resultFilesIndex","findIndex","part","length","isCustomerFile","customerFilePatterns","isResultCustomerFile","toLowerCase","SortableItem","_ref","children","id","attributes","listeners","setNodeRef","transform","transition","isDragging","style","Transform","toString","opacity","_objectSpread","ref","CustomerRequirementComponent","memo","_ref2","value","onChange","isReadOnly","localValue","setLocalValue","handleChange","e","newValue","target","className","name","placeholder","disabled","NewEstimateRequestPage","navigate","searchParams","tempEstimateNo","setTempEstimateNo","isDataLoaded","projectName","setProjectName","selectedType","setSelectedType","types","setTypes","valves","setValves","currentValve","setCurrentValve","attachments","setAttachments","customerRequirement","setCustomerRequirement","otherRequests","setOtherRequests","setIsReadOnly","backendStatusText","setBackendStatusText","backendStatus","setBackendStatus","staffComment","setStaffComment","isInitialized","setIsInitialized","selectedTypeId","setSelectedTypeId","selectedValveId","setSelectedValveId","totalQty","reduce","sum","v","Number","qty","statusText","uiStatusText","managerAttachments","setManagerAttachments","bodyValveList","setBodyValveList","showValveDropdown","setShowValveDropdown","specSectionRef","tagNoRef","currentUser","setCurrentUser","selectedCustomer","setSelectedCustomer","bodyMatList","setBodyMatList","trimMatList","setTrimMatList","trimOptionList","setTrimOptionList","actSizeList","setActSizeList","actHWList","setActHWList","bodyRatingList","setBodyRatingList","nameToCodeCache","Map","codeToNameCache","trimPortSizeList","setTrimPortSizeList","customSort","a","b","isNumberA","isNaN","parseFloat","isNumberB","toUpperCase","localeCompare","undefined","numeric","uniqueRatingUnits","unitMap","forEach","item","ratingUnitCode","has","set","ratingUnit","units","Array","from","_ref3","code","sort","filteredRatingList","body","filter","userStr","localStorage","getItem","JSON","parse","customerStr","readonlyParam","get","console","log","Object","fromEntries","entries","fetchBodyValveList","fetchBodyRatingList","isManager","roleId","isWriter","sensors","activationConstraint","distance","coordinateGetter","response","data","error","loadParam","current","loadExistingData","handleTypeDragEnd","event","active","over","items","oldIndex","newIndex","newItems","map","index","order","setTimeout","updateAllSheetNumbers","handleAddType","handleRemoveType","prevTypes","newTypes","_","i","type","handleTypeChange","field","handleValveSelect","valve","isDuplicate","valveSeries","alert","timestamp","Date","now","newType","concat","valveSeriesCode","count","typeId","prev","handleValveDragEnd","activeValve","find","sameTypeItems","otherTypeItems","reorderedSameType","updatedSameType","_types$find","_types$find2","typeOrderA","t","typeOrderB","currentValves","globalSheetNo","_types$find3","_types$find4","handleAddValve","selectedTypeData","sameTypeValves","nextOrder","newSheetID","Math","max","sheetID","newValve","tagNo","String","getNextTagNo","padStart","fluid","medium","density","molecular","t1","normal","min","p1","p2","dp","qm","unit","qn","pressureUnit","temperatureUnit","typeCode","size","sizeUnit","materialBody","materialTrim","option","rating","actuator","hw","accessory","positioner","exists","maker","model","explosionProof","transmitter","solenoidValve","limitSwitch","airSet","volumeBooster","airOperatedValve","lockupValve","snapActingRelay","isQM","isP2","isN1","isDensity","isHW","fluidOptions","actuatorTypeOptions","positionerTypeOptions","explosionProofOptions","transmitterTypeOptions","hwOptions","flowTypeOptions","pressureOptions","temperatureOptions","densityOptions","bodySizeList","setBodySizeList","getSizeUnitFromSize","getNameToCode","list","nameField","codeField","getBodySizeCode","getBodyMatCode","getTrimMatCode","getTrimOptionCode","getBodyRatingCode","ratingName","ratingCode","getBodyRatingName","getBodyRatingUnitNameByCode","unitCode","getBodyRatingUnit","getBodyRatingUnitCode","getBodySizeName","bodySizeCode","sizeUnitCode","bodySize","getBodyRatingUnitByCode","fileAttachments","setFileAttachments","uploadingFiles","setUploadingFiles","pendingFiles","setPendingFiles","attachmentFiles","att","path","attachmentId","uniqueId","isPending","prevString","stringify","newString","f","handleDeleteValve","valveId","handleFileUpload","files","newFiles","uploadUserID","userId","file","push","isPendingDuplicate","pendingFile","isExactDuplicate","newAttachment","random","fileName","fileType","formData","FormData","append","fetch","method","ok","uploadedFile","json","attachmentID","updated","newAttachmentForAttachments","status","errorText","text","handleDeleteAttachment","fileId","attachment","delete","filtered","serverError","_serverError$response","_serverError$response2","loadManagerAttachments","customerResultFiles","p","managerFileType","ManagerFileType","handleDownloadAttachment","responseType","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","appendChild","click","remove","revokeObjectURL","handleDownloadManagerFile","endsWith","blob","download","removeChild","getValveSeriesName","hardcodedMapping","loadTempEstimateNo","_ref4","_existingData$statusT","_existingData$estimat","_existingData$status","_existingData$estimat2","_existingData$estimat3","_existingData$attachm","ratingList","getBodyRatingNameLocal","getBodyRatingUnitLocal","existingData","project","statusTextServer","estimateSheet","statusCodeServer","trim","estimateRequests","_existingData$estimat4","loadedTypes","loadedValves","isNewStructure","tagNos","valveTypeOrder","req","sheetNos","sheetNo","Boolean","minSheetNo","valveType","sortedValveTypes","_ref5","_ref6","_ref7","valveSeriesName","typeData","tagIndex","_tagNo$density","_tagNo$molecularWeigh","_tagNo$isDensity","valveData","molecularWeight","inletTemperatureQ","inletTemperatureNorQ","inletTemperatureMinQ","inletPressureMaxQ","inletPressureNorQ","inletPressureMinQ","outletPressureMaxQ","outletPressureNorQ","outletPressureMinQ","differentialPressureMaxQ","differentialPressureNorQ","differentialPressureMinQ","qmMax","qmNor","qmMin","qmUnit","qnMax","qnNor","qnMin","qnUnit","bodySizeUnit","bodyMat","trimMat","trimOption","bodyRating","bodyRatingUnit","actType","isPositioner","positionerType","transmitterType","isSolenoid","isLimSwitch","isAirSet","isVolumeBooster","isAirOperated","isLockUp","isSnapActingRelay","groupedByValveType","acc","_ref8","requests","_ref9","_ref0","_ref1","_req$density","_req$molecularWeight","_req$isDensity","tagno","loadedAttachments","fileSize","generateTempEstimateNo","initializeData","Promise","all","fetchMasterData","sizeRes","matRes","trimMatRes","optionRes","ratingRes","portSizeRes","post","params","currentUserId","createSavePayload","sortedValves","_types$find5","_types$find6","allTagNos","tagNoData","SheetID","SheetNo","Tagno","ValveSeriesCode","Qty","Medium","Fluid","IsQM","QMUnit","QMMax","QMNor","QMMin","QNUnit","QNMax","QNNor","QNMin","IsP2","IsDensity","PressureUnit","InletPressureMaxQ","InletPressureNorQ","InletPressureMinQ","OutletPressureMaxQ","OutletPressureNorQ","OutletPressureMinQ","DifferentialPressureMaxQ","DifferentialPressureNorQ","DifferentialPressureMinQ","TemperatureUnit","InletTemperatureQ","InletTemperatureNorQ","InletTemperatureMinQ","DensityUnit","Density","MolecularWeightUnit","MolecularWeight","BodySizeUnit","BodySize","BodyMat","TrimMat","TrimOption","BodyRating","BodyRatingUnit","ActType","IsHW","IsPositioner","PositionerType","ExplosionProof","TransmitterType","IsSolenoid","IsLimSwitch","IsAirSet","IsVolumeBooster","IsAirOperated","IsLockUp","IsSnapActingRelay","typeSelections","typeValves","rest","_objectWithoutProperties","_excluded","ValveName","TagNos","Type","Valves","TypeSelections","Project","CustomerRequirement","CustomerID","userID","WriterID","Attachments","handleSaveDraft","currentTempEstimateNo","submitData","removeItem","handleSubmitEstimate","finalSubmitData","StaffComment","handleValveClick","updateValveData","prevValves","updatedValve","parent","child","parentObj","grandchild","childObj","newExists","updatedValves","handleBodyChange","handleActuatorChange","handleAccessoryChange","handleRadioChange","updatedCurrentValve","handleFluidFieldChange","handleFluidConditionChange","condition","handleUnitChange","TypeSection","onClick","collisionDetection","onDragEnd","strategy","preventDefault","stopPropagation","onMouseDown","cursor","userSelect","pointerEvents","position","backgroundColor","border","borderRadius","boxShadow","maxHeight","overflowY","marginTop","padding","borderBottom","fontSize","onMouseEnter","currentTarget","onMouseLeave","ValveSection","filteredValves","textAlign","color","margin","height","SpecificationSection","handleTagNoClick","htmlFor","newTagNo","parseInt","newQty","checked","display","alignItems","gap","readOnly","bodySizeUnits","displayName","filteredSizeList","bodyMatCode","trimMatCode","trimOptionCode","AttachmentSection","multiple","accept","_document$getElementB","getElementById","sizeInMB","toFixed","handleFileChange","handleRemoveFile","_ref10","sortedUnits","_currentValve$body","_currentValve$body2","hasCurrentValve","currentSizeUnit","currentSize","companyName","userName","toISOString","slice","replaceAll","statusCode","_f$attachmentID","title","_document$getElementB2","idx"],"sources":["/Users/simjimin/Downloads/final_develop/projec/frontend/src/pages/Dashboard/NewEstimateRequestPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport axios from 'axios';\nimport {\n  DndContext,\n  closestCenter,\n  KeyboardSensor,\n  PointerSensor,\n  useSensor,\n  useSensors,\n  DragEndEvent,\n} from '@dnd-kit/core';\nimport {\n  arrayMove,\n  SortableContext,\n  sortableKeyboardCoordinates,\n  verticalListSortingStrategy,\n} from '@dnd-kit/sortable';\nimport {\n  useSortable,\n} from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport './DashboardPages.css';\nimport './NewEstimateRequest.css';\n\n// í¬ë¡œìŠ¤í”Œë«í¼ ê²½ë¡œ ì²˜ë¦¬ë¥¼ ìœ„í•œ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\nconst isManagerFile = (filePath: string): boolean => {\n  if (!filePath) return false;\n  \n  // Windowsì™€ Unix ê²½ë¡œ ëª¨ë‘ ì§€ì›\n  const normalizedPath = filePath.replace(/\\\\/g, '/'); // Windows ë°±ìŠ¬ë˜ì‹œë¥¼ ìŠ¬ë˜ì‹œë¡œ ë³€í™˜\n  \n  // ë‹¤ì–‘í•œ ê²½ë¡œ íŒ¨í„´ ì§€ì›\n  const managerFilePatterns = [\n    '/ResultFiles/',\n    '\\\\ResultFiles\\\\',\n    'ResultFiles/',\n    'ResultFiles\\\\'\n  ];\n  \n  return managerFilePatterns.some(pattern => normalizedPath.includes(pattern));\n};\n\n// ê²½ë¡œì—ì„œ managerFileType ì¶”ì¶œí•˜ëŠ” í¬ë¡œìŠ¤í”Œë«í¼ í•¨ìˆ˜\nconst extractManagerFileType = (filePath: string): string | null => {\n  if (!filePath) return null;\n  \n  const normalizedPath = filePath.replace(/\\\\/g, '/');\n  const pathParts = normalizedPath.split('/');\n  const resultFilesIndex = pathParts.findIndex(part => part === 'ResultFiles');\n  \n  if (resultFilesIndex !== -1 && resultFilesIndex + 1 < pathParts.length) {\n    return pathParts[resultFilesIndex + 1];\n  }\n  \n  return null;\n};\n\n// CustomerRequest íŒŒì¼ì¸ì§€ í™•ì¸í•˜ëŠ” í¬ë¡œìŠ¤í”Œë«í¼ í•¨ìˆ˜\nconst isCustomerFile = (filePath: string): boolean => {\n  if (!filePath) return false;\n  \n  const normalizedPath = filePath.replace(/\\\\/g, '/');\n  \n  const customerFilePatterns = [\n    '/CustomerRequest/',\n    '\\\\CustomerRequest\\\\',\n    'CustomerRequest/',\n    'CustomerRequest\\\\'\n  ];\n  \n  return customerFilePatterns.some(pattern => normalizedPath.includes(pattern));\n};\n\n// ResultFiles/customer íŒŒì¼ì¸ì§€ í™•ì¸ (ê³ ê°ì—ê²Œ ì œê³µë˜ëŠ” ê²°ê³¼ ë¬¸ì„œ)\nconst isResultCustomerFile = (filePath: string): boolean => {\n  if (!filePath) return false;\n  const normalizedPath = filePath.replace(/\\\\/g, '/').toLowerCase();\n  // íŠ¸ë ˆì¼ë§ ìŠ¬ë˜ì‹œ ìœ ë¬´ì™€ ëŒ€ì†Œë¬¸ì ì°¨ì´ í—ˆìš©\n  return normalizedPath.includes('/resultfiles/customer');\n};\n\n// ë‹¨ìœ„/ì‚¬ì´ì¦ˆ ë§ˆìŠ¤í„° ë°ì´í„° íƒ€ì…\ninterface BodySizeUnit {\n  unitCode: string;\n  unitName: string;\n}\n\ninterface BodySizeListDto {\n  sizeUnitCode: string;  // RatingUnitCodeì™€ ë™ì¼í•œ íŒ¨í„´\n  bodySizeCode: string;\n  bodySize: string;\n  sizeUnit: string;      // RatingUnitê³¼ ë™ì¼í•œ íŒ¨í„´\n}\n\ninterface TrimPortSizeListDto {\n  portSizeCode: string;\n  unitCode: string;\n  portSize: string;\n  unitName: string;  // ë‹¨ìœ„ëª… (inch, mm ë“±)\n}\n\ninterface ValveData {\n  id: string;  // ë“œë˜ê·¸ì•¤ë“œë¡­ìš© ê³ ìœ  ID\n  tagNo: string;\n  qty: number;\n  order: number;  // ìˆœì„œ ì •ë³´\n  sheetID: number;  // DBì˜ SheetIDì™€ ì—°ê²°\n  typeId: string;  // ì—°ê²°ëœ Typeì˜ ID\n  fluid: {\n    medium: string;\n    fluid: string;\n    density: string;\n    molecular: string;\n    t1: { max: number; normal: number; min: number; };\n    p1: { max: number; normal: number; min: number; };\n    p2: { max: number; normal: number; min: number; };\n    dp: { max: number; normal: number; min: number; };\n                qm: { max: number; normal: number; min: number; unit: string; };\n            qn: { max: number; normal: number; min: number; unit: string; };\n    pressureUnit: string;\n    temperatureUnit: string;\n  };\n  body: {\n    type: string;\n    typeCode: string; // ValveSeriesCode\n    size: string;\n    sizeUnit: string;\n    materialBody: string;\n    materialTrim: string;\n    option: string;\n    rating: string;\n    ratingUnit: string;\n  };\n  actuator: {\n    type: string;\n    hw: string;\n  };\n  accessory: {\n    positioner: { exists: boolean; type: string; maker: string; model: string; };\n    explosionProof: string;\n    transmitter: { exists: boolean; type: string; };\n    solenoidValve: { exists: boolean; type: string; maker: string; model: string; };\n    limitSwitch: { exists: boolean; type: string; maker: string; model: string; };\n    airSet: { exists: boolean; type: string; maker: string; model: string; };\n    volumeBooster: { exists: boolean; type: string; maker: string; model: string; };\n    airOperatedValve: { exists: boolean; type: string; maker: string; model: string; };\n    lockupValve: { exists: boolean; type: string; maker: string; model: string; };\n    snapActingRelay: { exists: boolean; type: string; maker: string; model: string; };\n  };\n  // ë¼ë””ì˜¤ ë²„íŠ¼ ìƒíƒœë“¤\n  isQM: boolean;\n  isP2: boolean;\n  isN1: boolean;\n  isDensity: boolean;\n  isHW: boolean;\n\n}\n\ninterface TypeData {\n  id: string;\n  name: string;\n  code: string; // ValveSeriesCode ì¶”ê°€\n  count: number;\n  order: number;\n  typeId: string; // ì¶”ê°€\n}\n\ninterface BodyValveData {\n  valveSeries: string;\n  valveSeriesCode: string;\n}\n\n// ë“œë˜ê·¸ ê°€ëŠ¥í•œ ì•„ì´í…œ ì»´í¬ë„ŒíŠ¸\nconst SortableItem = ({ children, id }: { children: React.ReactNode; id: string }) => {\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging,\n  } = useSortable({ id });\n\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.5 : 1,\n  };\n\n  return (\n    <div ref={setNodeRef} style={style} {...attributes}>\n      <div {...listeners}>\n        {children}\n      </div>\n    </div>\n  );\n};\n\n// ê¸°íƒ€ ìš”ì²­ì‚¬í•­ ì»´í¬ë„ŒíŠ¸ (ì™„ì „íˆ ë…ë¦½ì )\nconst CustomerRequirementComponent = React.memo(({ \n  value, \n  onChange,\n  isReadOnly = false\n}: { \n  value: string; \n  onChange: (value: string) => void; \n  isReadOnly?: boolean;\n}) => {\n  const [localValue, setLocalValue] = useState(value);\n  \n  // ì™¸ë¶€ ê°’ì´ ë³€ê²½ë˜ë©´ ë™ê¸°í™”\n  useEffect(() => {\n    setLocalValue(value);\n  }, [value]);\n  \n  const handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const newValue = e.target.value;\n    setLocalValue(newValue);\n    onChange(newValue);\n  };\n  \n  return (\n    <div className=\"requirement-section\">\n      <h4>ê¸°íƒ€ìš”ì²­ì‚¬í•­</h4>\n      <textarea \n        id=\"customer-requirement\"\n        name=\"customerRequirement\"\n        value={localValue}\n        onChange={handleChange}\n        placeholder=\"ê¸°íƒ€ ìš”ì²­ì‚¬í•­ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\"\n        disabled={isReadOnly}\n      />\n    </div>\n  );\n});\n\nconst NewEstimateRequestPage: React.FC = () => {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const [tempEstimateNo, setTempEstimateNo] = useState<string>('');\n  const isDataLoaded = useRef<boolean>(false); // ë°ì´í„° ë¡œë”© ìƒíƒœ ì¶”ì \n  const [projectName, setProjectName] = useState('');\n  const [selectedType, setSelectedType] = useState<string>('');\n  const [types, setTypes] = useState<TypeData[]>([]);\n  const [valves, setValves] = useState<ValveData[]>([]);\n  const [currentValve, setCurrentValve] = useState<ValveData | null>(null);\n  const [attachments, setAttachments] = useState<any[]>([]);\n  const [customerRequirement, setCustomerRequirement] = useState('');\n  const [otherRequests, setOtherRequests] = useState<any[]>([]);\n  const [isReadOnly, setIsReadOnly] = useState<boolean>(false); // READONLY ëª¨ë“œ ìƒíƒœ\n  const [backendStatusText, setBackendStatusText] = useState<string>(''); // ë°±ì—”ë“œ ìƒíƒœ í…ìŠ¤íŠ¸\n  const [backendStatus, setBackendStatus] = useState<number | null>(null);   // ë°±ì—”ë“œ ìƒíƒœ ì½”ë“œ (1~5)\n  const [staffComment, setStaffComment] = useState('');\n  const [isInitialized, setIsInitialized] = useState(false);\n\n  // í˜„ì¬ ì„ íƒëœ Typeê³¼ Valveì˜ IDë¥¼ ì €ì¥í•˜ëŠ” ìƒíƒœ\n  const [selectedTypeId, setSelectedTypeId] = useState<string | null>(null);\n  const [selectedValveId, setSelectedValveId] = useState<string | null>(null);\n\n  // ìš”ì•½ ì¹´ë“œ í‘œì‹œìš© íŒŒìƒ ê°’ë“¤\n  const totalQty = useMemo(() => valves.reduce((sum, v) => sum + (Number(v.qty) || 0), 0), [valves]);\n  const statusText = useMemo(() => (isReadOnly ? 'ì¡°íšŒ' : (valves.length > 0 ? 'ì‘ì„±ì¤‘' : 'ì‹ ê·œ')), [isReadOnly, valves.length]);\n  const uiStatusText = useMemo(() => backendStatusText || statusText, [backendStatusText, statusText]);\n  \n  // ğŸ”‘ ê´€ë¦¬ ì²¨ë¶€íŒŒì¼ ìƒíƒœ ì¶”ê°€\n  const [managerAttachments, setManagerAttachments] = useState<any[]>([]);\n\n  const [bodyValveList, setBodyValveList] = useState<any[]>([]);\n  const [showValveDropdown, setShowValveDropdown] = useState(false);\n  const specSectionRef = useRef<HTMLDivElement>(null);\n  const tagNoRef = useRef<HTMLInputElement>(null);\n\n  // í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°\n  const [currentUser, setCurrentUser] = useState<any>(null);\n  const [selectedCustomer, setSelectedCustomer] = useState<any>(null);\n\n  const [bodyMatList, setBodyMatList] = useState<any[]>([]);\n  const [trimMatList, setTrimMatList] = useState<any[]>([]);\n  const [trimOptionList, setTrimOptionList] = useState<any[]>([]);\n  const [actSizeList, setActSizeList] = useState<any[]>([]);\n  const [actHWList, setActHWList] = useState<any[]>([]);\n  const [bodyRatingList, setBodyRatingList] = useState<any[]>([]);\n\n  const nameToCodeCache = useRef(new Map());\n  const codeToNameCache = useRef(new Map());\n\n  const [trimPortSizeList, setTrimPortSizeList] = useState<TrimPortSizeListDto[]>([]);\n\n  // EstimateDetailPageì™€ ë™ì¼í•œ ì •ë ¬ ë° Unit ëª©ë¡ ìƒì„± ë¡œì§ ì¶”ê°€\n  const customSort = (a: string, b: string) => {\n    const isNumberA = !isNaN(parseFloat(a));\n    const isNumberB = !isNaN(parseFloat(b));\n\n    if (isNumberA && !isNumberB) return -1;\n    if (!isNumberA && isNumberB) return 1;\n\n    if (a.toUpperCase() === 'SPECIAL' && b.toUpperCase() !== 'SPECIAL') return 1;\n    if (a.toUpperCase() !== 'SPECIAL' && b.toUpperCase() === 'SPECIAL') return -1;\n\n    return a.localeCompare(b, undefined, { numeric: true });\n  };\n\n  const uniqueRatingUnits = useMemo(() => {\n    if (!bodyRatingList || bodyRatingList.length === 0) {\n      return [];\n    }\n    const unitMap = new Map<string, string>();\n    bodyRatingList.forEach(item => {\n      if (item.ratingUnitCode && !unitMap.has(item.ratingUnitCode)) {\n        unitMap.set(item.ratingUnitCode, item.ratingUnit);\n      }\n    });\n    // { code, name } í˜•íƒœì˜ ê°ì²´ ë°°ì—´ë¡œ ë³€í™˜\n    const units = Array.from(unitMap, ([code, name]) => ({ code, name }));\n    return units.sort((a, b) => customSort(a.name, b.name));\n  }, [bodyRatingList]);\n\n  const filteredRatingList = useMemo(() => {\n    if (!currentValve || !currentValve.body.ratingUnit) { // ratingUnitì€ ì´ì œ ì½”ë“œì…ë‹ˆë‹¤.\n      return [];\n    }\n    return bodyRatingList.filter(item => item.ratingUnitCode === currentValve.body.ratingUnit);\n  }, [currentValve, bodyRatingList]);\n\n\n\n  useEffect(() => {\n    const userStr = localStorage.getItem('user');\n    if (userStr) {\n      setCurrentUser(JSON.parse(userStr));\n    }\n    \n    // ì„ íƒëœ ê³ ê° ì •ë³´ ê°€ì ¸ì˜¤ê¸°\n    const customerStr = localStorage.getItem('selectedCustomer');\n    if (customerStr) {\n      setSelectedCustomer(JSON.parse(customerStr));\n    }\n\n    // readonly ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° í™•ì¸\n    const readonlyParam = searchParams.get('readonly');\n    console.log('NewEstimateRequestPage - readonlyParam:', readonlyParam);\n    console.log('NewEstimateRequestPage - searchParams:', Object.fromEntries(searchParams.entries()));\n    \n    if (readonlyParam === 'true') {\n      setIsReadOnly(true);\n      console.log('NewEstimateRequestPage - isReadOnly set to true');\n    } else {\n      setIsReadOnly(false);\n      console.log('NewEstimateRequestPage - isReadOnly set to false');\n    }\n  }, [searchParams]);\n\n  useEffect(() => {\n    fetchBodyValveList(); // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ë°¸ë¸Œ ëª©ë¡ ë¡œë“œ\n    fetchBodyRatingList();\n  }, []); // ë¹ˆ ë°°ì—´: í•œ ë²ˆë§Œ ì‹¤í–‰\n\n  // ë§¤ë‹ˆì € ë˜ëŠ” ì‘ì„±ìì¸ì§€ í™•ì¸\n  const isManager = currentUser?.roleId === 2;\n  const isWriter = currentUser?.roleId === 3;\n\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: {\n        distance: 8, // 8px ì´ìƒ ë“œë˜ê·¸í•´ì•¼ ë“œë˜ê·¸ ì‹œì‘\n      },\n    }),\n    useSensor(KeyboardSensor, {\n      coordinateGetter: sortableKeyboardCoordinates,\n    })\n  );\n\n  // BodyValveList ê°€ì ¸ì˜¤ê¸° (í•¨ìˆ˜ ì •ì˜ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€)\n  const fetchBodyValveList = async () => {\n    try {\n      const response = await axios.get('/api/estimate/body-valve-list');\n      setBodyValveList(response.data);\n    } catch (error) {\n      console.error('Error fetching body valve list:', error);\n    }\n  };\n\n  // BodyRatingList ê°€ì ¸ì˜¤ê¸°\n  const fetchBodyRatingList = async () => {\n    try {\n      const response = await axios.get('/api/estimate/body-rating-list');\n      setBodyRatingList(response.data);\n    } catch (error) {\n      console.error('Error fetching body rating list:', error);\n    }\n  };\n\n  // ê¸°ì¡´ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° useEffect (ì˜ì¡´ì„± ìˆ˜ì •)\n  useEffect(() => {\n    if (bodyRatingList.length > 0) { // bodyValveList -> bodyRatingList\n      const userStr = localStorage.getItem('user');\n      if (userStr) {\n        setCurrentUser(JSON.parse(userStr));\n      }\n      \n      const customerStr = localStorage.getItem('selectedCustomer');\n      if (customerStr) {\n        setSelectedCustomer(JSON.parse(customerStr));\n      }\n\n      const loadParam = searchParams.get('load');\n      if (loadParam && !isDataLoaded.current) {\n        loadExistingData(loadParam); // ë‘ ë²ˆì§¸ ì¸ì ì œê±°\n        isDataLoaded.current = true;\n      }\n    }\n  }, [searchParams, bodyRatingList]); // ì˜ì¡´ì„± ë°°ì—´ì„ bodyRatingListë¡œ ë³€ê²½\n\n  // Type ë“œë˜ê·¸ì•¤ë“œë¡­ í•¸ë“¤ëŸ¬\n  const handleTypeDragEnd = useCallback((event: DragEndEvent) => {\n    const { active, over } = event;\n\n    if (active.id !== over?.id) {\n      setTypes((items) => {\n        const oldIndex = items.findIndex((item) => item.id === active.id);\n        const newIndex = items.findIndex((item) => item.id === over?.id);\n\n        const newItems = arrayMove(items, oldIndex, newIndex);\n        \n        // order ì—…ë°ì´íŠ¸\n        return newItems.map((item, index) => ({\n          ...item,\n          order: index + 1\n        }));\n      });\n      \n      // Type ìˆœì„œê°€ ë°”ë€Œë©´ ì „ì²´ Valveì˜ SheetNo ì¬ê³„ì‚°\n      setTimeout(() => {\n        updateAllSheetNumbers();\n      }, 0);\n    }\n  }, []);\n\n  // Type ì¶”ê°€/ì‚­ì œ ê¸°ëŠ¥\n  const handleAddType = useCallback(() => {\n    setShowValveDropdown(true);\n  }, []);\n\n  // Type ì‚­ì œ ê¸°ëŠ¥\n  const handleRemoveType = useCallback((index: number) => {\n    setTypes(prevTypes => {\n      const newTypes = prevTypes.filter((_, i) => i !== index);\n      // order ì¬ì •ë ¬\n      return newTypes.map((type, i) => ({\n        ...type,\n        order: i + 1\n      }));\n    });\n  }, []);\n\n  // Type ë³€ê²½ í•¸ë“¤ëŸ¬\n  const handleTypeChange = useCallback((index: number, field: keyof TypeData, value: any) => {\n    setTypes(prevTypes => {\n      const newTypes = [...prevTypes];\n      newTypes[index] = {\n        ...newTypes[index],\n        [field]: value\n      };\n      return newTypes;\n    });\n  }, []);\n\n  const handleValveSelect = useCallback((valve: BodyValveData) => {\n    // ì¤‘ë³µ ì²´í¬\n    const isDuplicate = types.some(type => type.name === valve.valveSeries);\n    if (isDuplicate) {\n      alert('ì´ë¯¸ ì¶”ê°€ëœ Typeì…ë‹ˆë‹¤.');\n      return;\n    }\n\n    const timestamp = Date.now();\n    const newType: TypeData = {\n      id: `type-${timestamp}`,\n      name: valve.valveSeries,\n      code: valve.valveSeriesCode, // ValveSeriesCode ì €ì¥\n      count: 0,\n      order: types.length + 1,\n      typeId: `type-${timestamp}` // ì¶”ê°€\n    };\n    console.log('--- Debugging handleValveSelect ---');\n    console.log('Selected Valve (BodyValveData):', valve);\n    console.log('New Type (TypeData):', newType);\n    console.log('-----------------------------------');\n\n    console.log('ìƒˆë¡œìš´ íƒ€ì… ì¶”ê°€:', newType); // ë””ë²„ê¹…ìš©\n    setTypes(prev => {\n      const newTypes = [...prev, newType];\n      console.log('ì—…ë°ì´íŠ¸ëœ types:', newTypes); // ë””ë²„ê¹…ìš©\n      return newTypes;\n    });\n    \n    // ìƒˆë¡œ ì¶”ê°€ëœ íƒ€ì…ì„ ìë™ìœ¼ë¡œ ì„ íƒ\n    setSelectedType(newType.id);\n    console.log('selectedType ì„¤ì •:', newType.id); // ë””ë²„ê¹…ìš©\n    \n    setShowValveDropdown(false);\n  }, [types]);\n\n  // Valve ë“œë˜ê·¸ì•¤ë“œë¡­ í•¸ë“¤ëŸ¬\n  const handleValveDragEnd = useCallback((event: DragEndEvent) => {\n    const { active, over } = event;\n\n    if (active.id !== over?.id) {\n      const activeValve = valves.find(v => v.id === active.id);\n      if (!activeValve) return;\n      \n      // ê°™ì€ Type ë‚´ì—ì„œë§Œ ë“œë˜ê·¸ í—ˆìš©\n      setValves((items) => {\n        const sameTypeItems = items.filter(item => item.typeId === activeValve.typeId);\n        const otherTypeItems = items.filter(item => item.typeId !== activeValve.typeId);\n        \n        const oldIndex = sameTypeItems.findIndex((item) => item.id === active.id);\n        const newIndex = sameTypeItems.findIndex((item) => item.id === over?.id);\n\n        const reorderedSameType = arrayMove(sameTypeItems, oldIndex, newIndex);\n        \n        // ê°™ì€ Type ë‚´ì—ì„œ order ì¬ì •ë ¬ (1ë¶€í„° ì‹œì‘)\n        const updatedSameType = reorderedSameType.map((item, index) => ({\n          ...item,\n          order: index + 1\n        }));\n        \n        // ì „ì²´ ë°°ì—´ ì¬êµ¬ì„±\n        return [...otherTypeItems, ...updatedSameType].sort((a, b) => {\n          // Type ìˆœì„œëŒ€ë¡œ, ê·¸ ë‹¤ìŒ order ìˆœì„œëŒ€ë¡œ ì •ë ¬\n          const typeOrderA = types.find(t => t.id === a.typeId)?.order || 0;\n          const typeOrderB = types.find(t => t.id === b.typeId)?.order || 0;\n          \n          if (typeOrderA !== typeOrderB) {\n            return typeOrderA - typeOrderB;\n          }\n          return a.order - b.order;\n        });\n      });\n    }\n  }, [valves, types]);\n\n  // ì „ì²´ SheetNo ì¬ê³„ì‚° í•¨ìˆ˜\n  const updateAllSheetNumbers = useCallback(() => {\n    setValves((currentValves) => {\n      let globalSheetNo = 1;\n      \n      return currentValves\n        .sort((a, b) => {\n          // Type ìˆœì„œëŒ€ë¡œ, ê·¸ ë‹¤ìŒ order ìˆœì„œëŒ€ë¡œ ì •ë ¬\n          const typeOrderA = types.find(t => t.id === a.typeId)?.order || 0;\n          const typeOrderB = types.find(t => t.id === b.typeId)?.order || 0;\n          \n          if (typeOrderA !== typeOrderB) {\n            return typeOrderA - typeOrderB;\n          }\n          return a.order - b.order;\n        })\n        .map((valve) => ({\n          ...valve,\n          // ì „ì—­ SheetNo í• ë‹¹ (Type ìˆœì„œ â†’ TagNo ìˆœì„œ)\n        }));\n    });\n  }, [types]);\n\n  // Valve ì¶”ê°€/ì‚­ì œ ê¸°ëŠ¥\n  const handleAddValve = useCallback(() => {\n    if (!selectedType) {\n      alert('ë¨¼ì € Step 1ì—ì„œ Typeì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    const selectedTypeData = types.find(t => t.id === selectedType);\n    if (!selectedTypeData) return;\n\n    // ê°™ì€ Typeì˜ TagNo ê°œìˆ˜ í™•ì¸\n    const sameTypeValves = valves.filter(v => v.typeId === selectedType);\n    const nextOrder = sameTypeValves.length + 1; // 1ë¶€í„° ì‹œì‘\n    \n    // ìƒˆë¡œìš´ ê³ ìœ  SheetID ìƒì„± (í•œ ë²ˆ í• ë‹¹ë˜ë©´ ë³€í•˜ì§€ ì•ŠìŒ)\n    const newSheetID = Math.max(...valves.map(v => v.sheetID), 0) + 1;\n    \n    const newValve: ValveData = {\n      id: `valve-${Date.now()}`,\n      tagNo: `Tag-${String(getNextTagNo()).padStart(4, '0')}`, // ê¸°ë³¸ê°’ì´ì§€ë§Œ ì‚¬ìš©ìê°€ ìˆ˜ì • ê°€ëŠ¥\n      qty: 0,\n      order: nextOrder,\n      sheetID: newSheetID, // ê³ ìœ  ID, ì ˆëŒ€ ë³€í•˜ì§€ ì•ŠìŒ\n      typeId: selectedType,\n      fluid: {\n      medium: '',\n        fluid: '',\n        density: '',\n        molecular: '',\n        t1: { max: 0, normal: 0, min: 0 },\n        p1: { max: 0, normal: 0, min: 0 },\n        p2: { max: 0, normal: 0, min: 0 },\n        dp: { max: 0, normal: 0, min: 0 },\n        qm: { max: 0, normal: 0, min: 0, unit: 'mÂ³/h' },\n        qn: { max: 0, normal: 0, min: 0, unit: 'mÂ³/h' },\n        pressureUnit: 'Mpa(g)',\n        temperatureUnit: 'Â°C'\n      },\n      body: {\n        type: selectedTypeData.name,\n        typeCode: selectedTypeData.code, // Step 1ì—ì„œ ì €ì¥í•œ ValveSeriesCode ì‚¬ìš©\n        size: '',\n        sizeUnit: '',\n        materialBody: '',\n        materialTrim: '',\n        option: '',\n        rating: '',\n        ratingUnit: ''\n      },\n      actuator: {\n        type: '',\n        hw: ''\n      },\n      accessory: {\n        positioner: { exists: false, type: '', maker: '', model: '' },\n        explosionProof: '',\n        transmitter: { exists: false, type: '' },\n        solenoidValve: { exists: false, type: '', maker: '', model: '' },\n        limitSwitch: { exists: false, type: '', maker: '', model: '' },\n        airSet: { exists: false, type: '', maker: '', model: '' },\n        volumeBooster: { exists: false, type: '', maker: '', model: '' },\n        airOperatedValve: { exists: false, type: '', maker: '', model: '' },\n        lockupValve: { exists: false, type: '', maker: '', model: '' },\n        snapActingRelay: { exists: false, type: '', maker: '', model: '' }\n      },\n      // ë¼ë””ì˜¤ ë²„íŠ¼ ìƒíƒœë“¤\n      isQM: false,\n      isP2: false,\n      isN1: false,\n      isDensity: false,\n      isHW: false\n    };\n\n    setValves(prev => [...prev, newValve]);\n  }, [selectedType, types, valves.length]);\n\n  // TagNo ìƒì„±ì„ ìœ„í•œ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\n  const getNextTagNo = useCallback(() => {\n    return valves.length + 1;\n  }, [valves]);\n\n  // í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì •ì˜í•  ë“œë¡­ë‹¤ìš´ ë°°ì—´ë“¤\n  const fluidOptions = ['Liquid', 'Vaporous', 'Gaseous'];\n  const actuatorTypeOptions = ['Pneumatic', 'Electric', 'Hydraulic', 'No'];\n  const positionerTypeOptions = ['P.P', 'E.P', 'Smart'];\n  const explosionProofOptions = ['ë‚´ì••ë°©í­', 'ë³¸ì§ˆì•ˆì „ë°©í­', 'ìˆ˜ì†Œë°©í­'];\n  const transmitterTypeOptions = ['Pressure', 'Temperature', 'Flow', 'No'];\n  const hwOptions = ['Yes', 'No'];\n\n  // ë¼ë””ì˜¤ ë²„íŠ¼ ì˜µì…˜ë“¤\n  const flowTypeOptions = ['Qm', 'Qn'];\n  const pressureOptions = ['P1', 'P2'];\n  const temperatureOptions = ['T1', 'N1'];\n  const densityOptions = ['Density', 'Molecular'];\n\n  // DBì—ì„œ ê°€ì ¸ì˜¬ ë§ˆìŠ¤í„° ë°ì´í„° ìƒíƒœ\n  const [bodySizeList, setBodySizeList] = useState<BodySizeListDto[]>([]);\n \n\n\n\n  // Size ê°’ìœ¼ë¡œë¶€í„° Unitì„ ìœ ì¶”í•˜ëŠ” í•¨ìˆ˜\n  const getSizeUnitFromSize = (size: string): string => {\n    if (!size) return '';\n    \n    // inch ë‹¨ìœ„ (1/2\", 1\", 2\" ë“±)\n    if (size.includes('\"') || size.includes('â€³')) {\n      return 'I';\n    }\n    \n    // DN ë‹¨ìœ„ (15A, 20A, 25A ë“±) - í•˜ì§€ë§Œ í˜„ì¬ëŠ” F, G, H ë“±ìœ¼ë¡œ ì €ì¥ë¨\n    if (size === 'F') return 'A';  // FëŠ” 20Aì— í•´ë‹¹\n    if (size === 'G') return 'A';  // GëŠ” 25Aì— í•´ë‹¹\n    if (size === 'H') return 'A';  // HëŠ” 32Aì— í•´ë‹¹\n    if (size === 'I') return 'A';  // IëŠ” 40Aì— í•´ë‹¹\n    if (size === 'J') return 'A';  // JëŠ” 50Aì— í•´ë‹¹\n    if (size === 'K') return 'A';  // KëŠ” 65Aì— í•´ë‹¹\n    if (size === 'L') return 'A';  // LëŠ” 80Aì— í•´ë‹¹\n    if (size === 'M') return 'A';  // MëŠ” 100Aì— í•´ë‹¹\n    if (size === 'N') return 'A';  // NëŠ” 125Aì— í•´ë‹¹\n    if (size === 'O') return 'A';  // OëŠ” 150Aì— í•´ë‹¹\n    if (size === 'P') return 'A';  // PëŠ” 200Aì— í•´ë‹¹\n    if (size === 'Q') return 'A';  // QëŠ” 250Aì— í•´ë‹¹\n    if (size === 'R') return 'A';  // RëŠ” 300Aì— í•´ë‹¹\n    if (size === 'S') return 'A';  // SëŠ” 350Aì— í•´ë‹¹\n    if (size === 'T') return 'A';  // TëŠ” 400Aì— í•´ë‹¹\n    if (size === 'U') return 'A';  // UëŠ” 450Aì— í•´ë‹¹\n    if (size === 'V') return 'A';  // VëŠ” 500Aì— í•´ë‹¹\n    if (size === 'W') return 'A';  // WëŠ” 550Aì— í•´ë‹¹\n    if (size === 'X') return 'A';  // XëŠ” 600Aì— í•´ë‹¹\n    if (size === 'Y') return 'A';  // YëŠ” 900Aì— í•´ë‹¹\n    \n    // None\n    if (size === 'None') {\n      return 'N';\n    }\n    \n    // SPECIAL\n    if (size === 'SPECIAL') {\n      return 'Z';\n    }\n    \n    return '';\n  };\n\n  // ì´ë¦„ì„ ì½”ë“œë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜ë“¤\n  const getNameToCode = (list: any[], name: string, nameField: string, codeField: string): string => {\n    const item = list.find(item => item[nameField] === name);\n    return item ? item[codeField] : '';\n  };\n\n  const getBodySizeCode = (size: string, unit: string): string => {\n    // UIì—ì„œ ì´ë¯¸ ì½”ë“œë¥¼ ì„ íƒí•˜ë¯€ë¡œ ê·¸ëŒ€ë¡œ ë°˜í™˜\n    return size;\n  };\n\n  const getBodyMatCode = (name: string): string => {\n    // UIì—ì„œ ì´ë¯¸ ì½”ë“œë¥¼ ì„ íƒí•˜ë¯€ë¡œ ê·¸ëŒ€ë¡œ ë°˜í™˜\n    return name;\n  };\n\n  const getTrimMatCode = (name: string): string => {\n    // UIì—ì„œ ì´ë¯¸ ì½”ë“œë¥¼ ì„ íƒí•˜ë¯€ë¡œ ê·¸ëŒ€ë¡œ ë°˜í™˜\n    return name;\n  };\n\n  const getTrimOptionCode = (name: string): string => {\n    // UIì—ì„œ ì´ë¯¸ ì½”ë“œë¥¼ ì„ íƒí•˜ë¯€ë¡œ ê·¸ëŒ€ë¡œ ë°˜í™˜\n    return name;\n  };\n\n  const getBodyRatingCode = (name: string): string => {\n    const item = bodyRatingList.find(item => item.ratingName === name);\n    return item ? item.ratingCode : '';\n  };\n\n  const getBodyRatingName = (code: string): string => {\n    const item = bodyRatingList.find(item => item.ratingCode === code);\n    return item ? item.ratingName : '';\n  };\n  const getBodyRatingUnitNameByCode = (unitCode: string): string => {\n    const item = bodyRatingList.find(item => item.ratingUnitCode === unitCode);\n    return item ? item.ratingUnit : ''; // unitCodeê°€ ì•„ë‹Œ unit(ì´ë¦„)ì„ ë°˜í™˜\n  };\n\n  const getBodyRatingUnit = (code: string): string => {\n    // ratingCodeê°€ ì•„ë‹Œ ratingUnitCodeë¡œ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.\n    const item = bodyRatingList.find(item => item.ratingUnitCode === code);\n    // ratingUnitCodeê°€ ì•„ë‹Œ ratingUnit(ì´ë¦„)ì„ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.\n    return item ? item.ratingUnit : '';\n  };\n\n  const getBodyRatingUnitCode = (ratingCode: string): string => {\n    const item = bodyRatingList.find(item => item.ratingCode === ratingCode);\n    return item ? item.ratingUnitCode : '';\n  };\n\n  const getBodySizeName = (code: string, unitCode: string): string => {\n    const item = bodySizeList.find(item => item.bodySizeCode === code && item.sizeUnitCode === unitCode);\n    return item ? item.bodySize : '';\n  };\n  \n  \n  \n  const getBodyRatingUnitByCode = (unitCode: string): string => {\n    // bodyRatingListì—ì„œ unitCodeì— í•´ë‹¹í•˜ëŠ” unit ì´ë¦„ì„ ì°¾ìŠµë‹ˆë‹¤.\n    const item = bodyRatingList.find(item => item.ratingUnitCode === unitCode);\n    return item ? item.ratingUnit : ''; \n  };\n\n  // ì²¨ë¶€íŒŒì¼ ê´€ë ¨ ìƒíƒœ\n  const [fileAttachments, setFileAttachments] = useState<any[]>([]);\n  const [uploadingFiles, setUploadingFiles] = useState<boolean>(false);\n  const [pendingFiles, setPendingFiles] = useState<File[]>([]); // ì„ì‹œ ì €ì¥í•  íŒŒì¼ë“¤\n  \n  // ì²¨ë¶€íŒŒì¼ì„ attachments ìƒíƒœì™€ ë™ê¸°í™” (ì„ì‹œ ì„ íƒ íŒŒì¼ë„ í‘œì‹œ)\n  useEffect(() => {\n    console.log('ğŸ”„ fileAttachments ë³€ê²½ë¨:', fileAttachments);\n    \n    const attachmentFiles = fileAttachments.map(att => ({\n        name: att.name,\n        size: att.size,\n      path: att.filePath || att.path || '',\n      id: att.attachmentId || att.id || att.uniqueId,\n      isPending: !!att.isPending,\n      }));\n    \n    console.log('ğŸ’¾ attachmentsë¡œ ë³€í™˜ë¨:', attachmentFiles);\n    \n    setAttachments(prev => {\n      const prevString = JSON.stringify(prev);\n      const newString = JSON.stringify(attachmentFiles);\n      if (prevString === newString) {\n        console.log('ğŸ”„ attachments ìƒíƒœ ë™ì¼, ì—…ë°ì´íŠ¸ ìƒëµ');\n        return prev;\n      }\n      console.log('ğŸ”„ attachments ìƒíƒœ ë³€ê²½ë¨ - fileAttachmentsì—ì„œ ë™ê¸°í™”');\n      return attachmentFiles;\n    });\n  }, [fileAttachments]);\n\n  // attachments ìƒíƒœ ë³€ê²½ ì‹œ ë¡œê¹… (ë¬´í•œ ë£¨í”„ ë°©ì§€)\n  useEffect(() => {\n    console.log('ğŸ“‹ attachments ìƒíƒœ ë³€ê²½ë¨:', attachments);\n  }, [attachments]);\n\n  // attachments ìƒíƒœ ë³€ê²½ ì‹œ ë¡œê¹…\n  useEffect(() => {\n    console.log('ğŸ“‹ attachments ìƒíƒœ ë³€ê²½ë¨:', attachments);\n  }, [attachments]);\n\n  // pendingFiles ìƒíƒœ ë³€í™” ì¶”ì \n  useEffect(() => {\n    console.log('ğŸ”„ pendingFiles ìƒíƒœ ë³€ê²½ë¨:', pendingFiles);\n    console.log('ğŸ”„ pendingFiles ê°œìˆ˜:', pendingFiles.length);\n    console.log('ğŸ”„ pendingFiles íŒŒì¼ëª…ë“¤:', pendingFiles.map(f => f.name));\n  }, [pendingFiles]);\n\n  const handleDeleteValve = useCallback((valveId: string) => {\n    setValves(prev => prev.filter(valve => valve.id !== valveId));\n    if (currentValve?.id === valveId) {\n      setCurrentValve(null);\n    }\n  }, [currentValve]);\n\n    // ì²¨ë¶€íŒŒì¼ ì—…ë¡œë“œ í•¨ìˆ˜ (ì¦‰ì‹œ ë°±ì—”ë“œ ì—…ë¡œë“œ)\n  const handleFileUpload = useCallback(async (files: FileList) => {\n    console.log('ğŸš€ handleFileUpload í˜¸ì¶œë¨!');\n    console.log('ğŸ“ ì—…ë¡œë“œí•  íŒŒì¼ë“¤:', files);\n    console.log('ğŸ”‘ í˜„ì¬ tempEstimateNo:', tempEstimateNo);\n    \n    setUploadingFiles(true);\n    const newFiles: File[] = [];\n\n    try {\n      console.log('íŒŒì¼ ì—…ë¡œë“œ ì‹œì‘:', files.length, 'ê°œ íŒŒì¼');\n      \n      // í˜„ì¬ ì‚¬ìš©ì ID ê°€ì ¸ì˜¤ê¸° (í•¨ìˆ˜ ì‹œì‘ ì‹œì ì—)\n      const userStr = localStorage.getItem('user');\n      const currentUser = userStr ? JSON.parse(userStr) : null;\n      const uploadUserID = currentUser?.userId || 'admin';\n      \n      for (let i = 0; i < files.length; i++) {\n        const file = files[i];\n        console.log('íŒŒì¼ ì •ë³´:', file.name, 'í¬ê¸°:', file.size, 'íƒ€ì…:', file.type);\n        newFiles.push(file);\n      }\n\n      // ìƒˆë¡œ ì„ íƒëœ íŒŒì¼ë“¤ì„ pendingFilesì— ì €ì¥ (ê²¬ì ìš”ì²­ ì‹œì ì— ì—…ë¡œë“œ)\n      for (const file of newFiles) {\n        try {\n          console.log('ìƒˆ íŒŒì¼ì„ pendingFilesì— ì €ì¥:', file.name);\n          \n          // ğŸ”‘ ì¤‘ë³µ ì²´í¬: ì´ë¯¸ fileAttachmentsì— ìˆëŠ” íŒŒì¼ì¸ì§€ í™•ì¸\n          const isDuplicate = fileAttachments.some(att => att.name === file.name);\n          if (isDuplicate) {\n            console.log('âš ï¸ ì¤‘ë³µ íŒŒì¼ ê°ì§€, pendingFilesì— ì¶”ê°€í•˜ì§€ ì•ŠìŒ:', file.name);\n            continue;\n          }\n          \n          // ğŸ”‘ ì¶”ê°€ ì¤‘ë³µ ì²´í¬: pendingFilesì—ë„ ì´ë¯¸ ìˆëŠ”ì§€ í™•ì¸\n          const isPendingDuplicate = pendingFiles.some(pendingFile => pendingFile.name === file.name);\n          if (isPendingDuplicate) {\n            console.log('âš ï¸ pendingFiles ì¤‘ë³µ ê°ì§€, ì¶”ê°€í•˜ì§€ ì•ŠìŒ:', file.name);\n            continue;\n          }\n          \n          // ğŸ”‘ íŒŒì¼ í¬ê¸°ì™€ ì´ë¦„ìœ¼ë¡œ ë” ì •í™•í•œ ì¤‘ë³µ ì²´í¬\n          const isExactDuplicate = pendingFiles.some(pendingFile => \n            pendingFile.name === file.name && pendingFile.size === file.size\n          );\n          if (isExactDuplicate) {\n            console.log('âš ï¸ ì •í™•í•œ ì¤‘ë³µ íŒŒì¼ ê°ì§€, ì¶”ê°€í•˜ì§€ ì•ŠìŒ:', file.name, file.size);\n            continue;\n          }\n          \n          const newAttachment = {\n            name: file.name,\n            size: file.size,\n            uniqueId: Date.now() + Math.random(),\n            isPending: true\n          };\n          \n          setFileAttachments(prev => [...prev, newAttachment]);\n          setPendingFiles(prev => [...prev, file]); // ğŸ”‘ ìƒˆ íŒŒì¼ë§Œ pendingFilesì— ì¶”ê°€\n          console.log('âœ… ìƒˆ íŒŒì¼ì´ pendingFilesì— ì¶”ê°€ë¨:', file.name);\n          continue;\n          \n          // uploadUserIDëŠ” ì´ë¯¸ ìœ„ì—ì„œ ì„ ì–¸ë¨\n          \n          console.log('íŒŒì¼ ì—…ë¡œë“œ ì‹œë„:', {\n            fileName: file.name,\n            tempEstimateNo,\n            uploadUserID,\n            fileType: 'customer'\n          });\n          \n          const formData = new FormData();\n          formData.append('file', file);\n          formData.append('tempEstimateNo', tempEstimateNo);\n          formData.append('fileType', 'customer');\n          \n          const response = await fetch(`/api/estimate/sheets/${tempEstimateNo}/attachments?uploadUserID=${uploadUserID}&fileType=customer`, {\n            method: 'POST',\n            body: formData\n          });\n          \n          if (response.ok) {\n            const uploadedFile = await response.json();\n            console.log('âœ… íŒŒì¼ ì—…ë¡œë“œ ì„±ê³µ:', uploadedFile);\n            \n            // ì—…ë¡œë“œëœ íŒŒì¼ ì •ë³´ë¥¼ fileAttachmentsì— ì¶”ê°€\n            const newAttachment = {\n              name: file.name,\n              size: file.size,\n              uniqueId: Date.now() + Math.random(),\n              isPending: false,\n              attachmentId: uploadedFile.attachmentID,\n              filePath: uploadedFile.filePath\n            };\n            \n            console.log('ğŸ“ ìƒˆë¡œìš´ ì²¨ë¶€íŒŒì¼ ê°ì²´ ìƒì„±:', newAttachment);\n            setFileAttachments(prev => {\n              const updated = [...prev, newAttachment];\n              console.log('ğŸ”„ fileAttachments ìƒíƒœ ì—…ë°ì´íŠ¸:', updated);\n              console.log('ğŸ” isPending=falseì¸ íŒŒì¼ë“¤:', updated.filter(att => !att.isPending));\n              return updated;\n            });\n            \n            // ì¦‰ì‹œ attachments ìƒíƒœì—ë„ ì¶”ê°€\n            setAttachments(prev => {\n              const newAttachmentForAttachments = {\n                name: file.name,\n                size: file.size,\n                path: uploadedFile.filePath,\n                id: uploadedFile.attachmentID\n              };\n              const updated = [...prev, newAttachmentForAttachments];\n              console.log('ğŸ“ attachments ìƒíƒœ ì¦‰ì‹œ ì—…ë°ì´íŠ¸:', updated);\n              return updated;\n            });\n          } else {\n            console.error('âŒ íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨:', response.status);\n            const errorText = await response.text();\n            console.error('âŒ ì˜¤ë¥˜ ë‚´ìš©:', errorText);\n            \n            // ì‹¤íŒ¨í•œ íŒŒì¼ì€ ì„ì‹œë¡œë§Œ í‘œì‹œ\n            const newAttachment = {\n              name: file.name,\n              size: file.size,\n              uniqueId: Date.now() + Math.random(),\n              isPending: true\n            };\n            setFileAttachments(prev => [...prev, newAttachment]);\n          }\n        } catch (error) {\n          console.error('íŒŒì¼ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜:', error);\n          // ì˜¤ë¥˜ ë°œìƒ ì‹œ ì„ì‹œë¡œë§Œ í‘œì‹œ\n          const newAttachment = {\n            name: file.name,\n            size: file.size,\n            uniqueId: Date.now() + Math.random(),\n            isPending: true\n          };\n          setFileAttachments(prev => [...prev, newAttachment]);\n        }\n      }\n    } catch (error: any) {\n      console.error('íŒŒì¼ ì„ì‹œ ì €ì¥ ì‹¤íŒ¨:', error);\n      alert('íŒŒì¼ ì„ì‹œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n    } finally {\n      setUploadingFiles(false);\n    }\n  }, []);\n\n  // ì²¨ë¶€íŒŒì¼ ì‚­ì œ í•¨ìˆ˜ (ì¦‰ì‹œ ë°±ì—”ë“œ API í˜¸ì¶œ)\n  const handleDeleteAttachment = useCallback(async (fileId: string | number, filePath?: string) => {\n    try {\n      console.log('ğŸ—‘ï¸ ì‚­ì œ ì‹œë„ - fileId:', fileId, 'filePath:', filePath);\n      console.log('ğŸ” í˜„ì¬ fileAttachments:', fileAttachments);\n      \n      // ì²¨ë¶€íŒŒì¼ ì°¾ê¸° (id, uniqueId, attachmentId ëª¨ë‘ í™•ì¸)\n      const attachment = fileAttachments.find(att => \n        att.id === fileId || att.uniqueId === fileId || att.attachmentId === fileId\n      );\n      \n      if (!attachment) {\n        console.error('âŒ ì‚­ì œí•  ì²¨ë¶€íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', fileId);\n        console.log('ğŸ” fileAttachmentsì—ì„œ ì°¾ì„ ìˆ˜ ìˆëŠ” IDë“¤:', fileAttachments.map(att => ({ id: att.id, uniqueId: att.uniqueId, attachmentId: att.attachmentId })));\n        return;\n      }\n      \n      console.log('âœ… ì°¾ì€ ì²¨ë¶€íŒŒì¼:', attachment);\n      \n      if (attachment.isPending) {\n        // ì„ì‹œ íŒŒì¼ì¸ ê²½ìš° pendingFilesì—ì„œë§Œ ì œê±° (ë°±ì—”ë“œ í˜¸ì¶œ ë¶ˆí•„ìš”)\n        setPendingFiles(prev => prev.filter(file => file.name !== attachment.name));\n        console.log('âœ… ì„ì‹œ íŒŒì¼ ì‚­ì œë¨:', attachment.name);\n      } else if (attachment.attachmentId) {\n        // ì—…ë¡œë“œëœ íŒŒì¼ì¸ ê²½ìš° ì¦‰ì‹œ ë°±ì—”ë“œì—ì„œ ì‚­ì œ\n        try {\n          console.log('ğŸ—‘ï¸ ë°±ì—”ë“œ ì‚­ì œ API ì¦‰ì‹œ í˜¸ì¶œ:', attachment.attachmentId, attachment.name);\n          console.log('ğŸŒ ì‚­ì œ API URL:', `/api/estimate/attachments/${attachment.attachmentId}`);\n          \n          const response = await axios.delete(`/api/estimate/attachments/${attachment.attachmentId}`);\n          console.log('âœ… ë°±ì—”ë“œì—ì„œ íŒŒì¼ ì‚­ì œ ì„±ê³µ:', attachment.name, 'ì‘ë‹µ:', response);\n          \n          // ë°±ì—”ë“œ ì‚­ì œ ì„±ê³µ ì‹œì—ë§Œ ë¡œì»¬ ìƒíƒœì—ì„œ ì œê±°\n          setFileAttachments(prev => {\n            const filtered = prev.filter(att => \n              att.id !== fileId && att.uniqueId !== fileId && att.attachmentId !== fileId\n            );\n            console.log('ğŸ—‘ï¸ fileAttachments ìƒíƒœì—ì„œ ì‚­ì œë¨:', attachment.name, 'ë‚¨ì€ íŒŒì¼:', filtered.length);\n            return filtered;\n          });\n          \n          setAttachments(prev => {\n            const filtered = prev.filter(att => \n              att.id !== fileId && att.uniqueId !== fileId && att.attachmentId !== fileId\n            );\n            console.log('ğŸ—‘ï¸ attachments ìƒíƒœì—ì„œ ì‚­ì œë¨:', attachment.name, 'ë‚¨ì€ íŒŒì¼:', filtered.length);\n            return filtered;\n          });\n          \n          console.log('âœ… ì²¨ë¶€íŒŒì¼ ì‚­ì œ ì™„ë£Œ (ë°±ì—”ë“œ + í”„ë¡ íŠ¸ì—”ë“œ):', attachment.name);\n          \n        } catch (serverError: any) {\n          console.error('âŒ ë°±ì—”ë“œ ì‚­ì œ ì‹¤íŒ¨:', serverError);\n          console.error('âŒ ì„œë²„ ì˜¤ë¥˜ ìƒì„¸:', serverError.response?.data);\n          console.error('âŒ ì„œë²„ ìƒíƒœ ì½”ë“œ:', serverError.response?.status);\n          \n          // ë°±ì—”ë“œ ì‚­ì œ ì‹¤íŒ¨ ì‹œ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼\n          alert(`íŒŒì¼ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ${attachment.name}`);\n          return; // ë¡œì»¬ ìƒíƒœ ë³€ê²½í•˜ì§€ ì•ŠìŒ\n        }\n      } else {\n        console.log('âš ï¸ attachmentIdê°€ ì—†ì–´ì„œ ë°±ì—”ë“œ ì‚­ì œ ë¶ˆê°€:', attachment);\n        alert('íŒŒì¼ ì •ë³´ê°€ ì˜¬ë°”ë¥´ì§€ ì•Šì•„ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\n        return;\n      }\n      \n    } catch (error) {\n      console.error('íŒŒì¼ ì‚­ì œ ì¤‘ ì˜¤ë¥˜:', error);\n      alert('íŒŒì¼ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n    }\n  }, [fileAttachments]);\n\n  // ğŸ”‘ ê´€ë¦¬ ì²¨ë¶€íŒŒì¼ ë¡œë“œ í•¨ìˆ˜\n  const loadManagerAttachments = useCallback(async () => {\n    if (!tempEstimateNo) return;\n    try {\n      console.log('ğŸ”„ loadManagerAttachments ì‹œì‘ - tempEstimateNo:', tempEstimateNo);\n      const response = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/attachments`);\n      console.log('ğŸ“¡ API ì‘ë‹µ ìƒíƒœ:', response.status, response.ok);\n      \n      if (response.ok) {\n        const attachments = await response.json();\n        // ResultFiles/customerë§Œ ë‚¨ê¹€ (ê²½ë¡œ/managerFileType ëª¨ë‘ ê³ ë ¤)\n        const customerResultFiles = (attachments || []).filter((att: any) => {\n          const p = att.path || att.filePath;\n          const type = (att.managerFileType || att.ManagerFileType || '').toString().toLowerCase();\n          return isResultCustomerFile(p) || type === 'customer';\n        });\n        setManagerAttachments(customerResultFiles);\n        console.log('âœ… ê´€ë¦¬ ì²¨ë¶€íŒŒì¼(ê³ ê°ìš©) ë¡œë“œ ì™„ë£Œ:', customerResultFiles.length, 'ê°œ');\n      } else {\n        console.error('âŒ API ì‘ë‹µ ì‹¤íŒ¨:', response.status, response.statusText);\n      }\n    } catch (error) {\n      console.error('ê´€ë¦¬ ì²¨ë¶€íŒŒì¼ ë¡œë“œ ì˜¤ë¥˜:', error);\n    }\n  }, [tempEstimateNo]);\n\n  // ì²¨ë¶€íŒŒì¼ ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜\n  const handleDownloadAttachment = useCallback(async (attachmentId: number, fileName: string) => {\n    try {\n      const response = await axios.get(`/api/estimate/attachments/${attachmentId}/download`, {\n        responseType: 'blob'\n      });\n\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', fileName);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      window.URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error('íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨:', error);\n      alert('íŒŒì¼ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n    }\n  }, []);\n\n  // ğŸ”‘ ê´€ë¦¬ ì²¨ë¶€íŒŒì¼ ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜ (ê³ ê°ìš© - PDFë§Œ)\n  const handleDownloadManagerFile = useCallback(async (file: any) => {\n    try {\n      if (!file.fileName.toLowerCase().endsWith('.pdf')) {\n        alert('PDF íŒŒì¼ë§Œ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');\n        return;\n      }\n      const response = await fetch(`http://192.168.0.14:5135/api/estimate/attachments/${file.attachmentID}/download`);\n      if (response.ok) {\n        const blob = await response.blob();\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = file.fileName;\n        document.body.appendChild(a);\n        a.click();\n        window.URL.revokeObjectURL(url);\n        document.body.removeChild(a);\n      } else {\n        alert('íŒŒì¼ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n      }\n    } catch (error) {\n      console.error('íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜:', error);\n      alert('íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n    }\n  }, []);\n\n  // ValveSeriesCodeë¡œ ì‹¤ì œ ì´ë¦„ ì°¾ê¸°\n  const getValveSeriesName = (code: string): string => {\n    // bodyValveListì—ì„œ ì°¾ê¸° (ë¡œë“œëœ ê²½ìš°)\n    if (bodyValveList.length > 0) {\n      const valve = bodyValveList.find(v => v.valveSeriesCode === code);\n      if (valve) {\n        return valve.valveSeries;\n      }\n    }\n    \n    // ì„ì‹œ í•˜ë“œì½”ë”© ë§¤í•‘ (bodyValveListê°€ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì€ ê²½ìš°)\n    const hardcodedMapping: { [key: string]: string } = {\n      'G': '2-Way Ball',\n      'A': '2-way Globe',\n      'B': '3-way Globe', \n      'C': 'Angle',\n      'N': '3-Way Ball'\n    };\n    \n    return hardcodedMapping[code] || code;\n  };\n\n  // ê¸°ì¡´ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° í•¨ìˆ˜\n  const loadExistingData = async (loadTempEstimateNo: string) => {\n    try {\n      const ratingList = bodyRatingList; // state ì§ì ‘ ì‚¬ìš©\n      \n      // loadExistingData ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•  ë¡œì»¬ í•¨ìˆ˜ë“¤ ì •ì˜\n      const getBodyRatingNameLocal = (code: string): string => {\n        const item = ratingList.find(item => item.ratingCode === code);\n        return item ? item.ratingName : '';\n      };\n      \n      const getBodyRatingUnitLocal = (code: string): string => {\n        const item = ratingList.find(item => item.ratingUnitCode === code);\n        return item ? item.ratingUnit : '';\n      };\n      \n      // ê¸°ì¡´ ê²¬ì  ë°ì´í„° ì¡°íšŒ\n      const response = await axios.get(`http://192.168.0.14:5135/api/estimate/sheets/${loadTempEstimateNo}`);\n      const existingData = response.data;\n      \n      // ê¸°ë³¸ ì •ë³´ ì„¤ì •\n      setTempEstimateNo(loadTempEstimateNo);\n      setProjectName(existingData.project || '');\n      // ìƒíƒœ í…ìŠ¤íŠ¸/ì½”ë“œ ì €ì¥ (ìµœìƒìœ„ ë˜ëŠ” estimateSheet ë‚´ë¶€ ëª¨ë‘ ëŒ€ì‘)\n      const statusTextServer = existingData?.statusText ?? existingData?.estimateSheet?.statusText ?? '';\n      const statusCodeServer = existingData?.status ?? existingData?.estimateSheet?.status;\n      if (statusTextServer) setBackendStatusText(statusTextServer);\n      if (typeof statusCodeServer === 'number') {\n        setBackendStatus(statusCodeServer);\n      } else if (statusTextServer) {\n        const map: Record<string, number> = {\n          'ì„ì‹œì €ì¥': 1,\n          'ê²¬ì ìš”ì²­': 2,\n          'ê²¬ì ì²˜ë¦¬ì¤‘': 3,\n          'ê²¬ì ì™„ë£Œ': 4,\n          'ì£¼ë¬¸': 5,\n        };\n        const code = map[statusTextServer.trim()];\n        if (code) setBackendStatus(code);\n      }\n      setCustomerRequirement(existingData.customerRequirement || '');\n      \n              // EstimateRequest ë°ì´í„°ê°€ ìˆìœ¼ë©´ ë³µì›\n        console.log('ğŸ” loadExistingData - existingData í™•ì¸:', existingData);\n        console.log('ğŸ” estimateRequests ì¡´ì¬ ì—¬ë¶€:', !!existingData.estimateRequests);\n        console.log('ğŸ” estimateRequests ê¸¸ì´:', existingData.estimateRequests?.length);\n        \n        if (existingData.estimateRequests && existingData.estimateRequests.length > 0) {\n        \n        // EstimateRequest ë°ì´í„°ë¥¼ typesì™€ valvesë¡œ ë³€í™˜\n        const loadedTypes: TypeData[] = [];\n        const loadedValves: ValveData[] = [];\n        \n        // ë°±ì—”ë“œ ì‘ë‹µ êµ¬ì¡° í™•ì¸ (ìƒˆë¡œìš´ êµ¬ì¡° vs ì´ì „ êµ¬ì¡°)\n        const isNewStructure = existingData.estimateRequests.length > 0 && existingData.estimateRequests[0].tagNos;\n        \n        // ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€\n        console.log('ğŸ” êµ¬ì¡° í™•ì¸:');\n        console.log('estimateRequests[0]:', existingData.estimateRequests[0]);\n        console.log('estimateRequests[0].tagNos:', existingData.estimateRequests[0]?.tagNos);\n        console.log('isNewStructure:', isNewStructure);\n        \n        if (isNewStructure) {\n          // ìƒˆë¡œìš´ êµ¬ì¡°: { valveType, tagNos[] }\n          // ë°¸ë¸Œ íƒ€ì…ë³„ë¡œ SheetNo ìˆœì„œ ê³„ì‚° (ìˆ˜ì •ëœ ë²„ì „)\n          const valveTypeOrder = new Map<string, number>();\n          \n          existingData.estimateRequests.forEach((req: any) => {\n            if (req.tagNos && req.tagNos.length > 0) {\n              // ê° ë°¸ë¸Œ íƒ€ì…ì˜ ëª¨ë“  TagNoì˜ SheetNoë¥¼ í™•ì¸í•˜ì—¬ ê°€ì¥ ì‘ì€ ê°’ ì‚¬ìš©\n              const sheetNos = req.tagNos.map((tagNo: any) => tagNo.sheetNo).filter(Boolean);\n              if (sheetNos.length > 0) {\n                const minSheetNo = Math.min(...sheetNos);\n                valveTypeOrder.set(req.valveType, minSheetNo);\n              }\n            }\n          });\n          \n          // ë°¸ë¸Œ íƒ€ì…ì„ SheetNo ìˆœì„œëŒ€ë¡œ ì •ë ¬\n          const sortedValveTypes = Array.from(valveTypeOrder.entries())\n            .sort(([, a], [, b]) => a - b);\n          \n          // ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€\n          console.log('ğŸ” ë°¸ë¸Œ íƒ€ì… ì •ë ¬ ì •ë³´:');\n          console.log('valveTypeOrder:', valveTypeOrder);\n          console.log('sortedValveTypes:', sortedValveTypes);\n          \n          // ì •ë ¬ëœ ìˆœì„œëŒ€ë¡œ Type ë°ì´í„° ìƒì„±\n          sortedValveTypes.forEach(([valveType, sheetNo], index) => {\n            const valveSeriesName = getValveSeriesName(valveType);\n            const typeData: TypeData = {\n              id: `type-${index}`,\n              name: valveSeriesName,\n              code: valveType,\n              count: existingData.estimateRequests.filter((req: any) => req.valveType === valveType).length,\n              order: sheetNo,  // SheetNo ê¸°ì¤€ ìˆœì„œ\n              typeId: `type-${index}`\n            };\n            loadedTypes.push(typeData);\n          });\n          \n          // TagNo ë°ì´í„°ë¥¼ Valve ë°ì´í„°ë¡œ ë³€í™˜\n          existingData.estimateRequests.forEach((req: any) => {\n            if (req.tagNos && req.tagNos.length > 0) {\n              req.tagNos.forEach((tagNo: any, tagIndex: number) => {\n                const valveData: ValveData = {\n                  id: `valve-${req.valveType}-${tagIndex}`,\n                  tagNo: tagNo.tagNo || '',\n                  qty: tagNo.qty || 1,\n                  order: tagNo.sheetNo || tagIndex + 1, // SheetNo ì‚¬ìš©, ì—†ìœ¼ë©´ tagIndex + 1\n                  sheetID: tagNo.sheetID || 0,\n                fluid: {\n                  medium: tagNo.medium || '',\n                  fluid: tagNo.fluid || '',\n                  density: tagNo.density?.toString() || '',\n                  molecular: tagNo.molecularWeight?.toString() || '',\n                  t1: { \n                    max: tagNo.inletTemperatureQ || 0, \n                    normal: tagNo.inletTemperatureNorQ || 0, \n                    min: tagNo.inletTemperatureMinQ || 0\n                  },\n                  p1: { \n                    max: tagNo.inletPressureMaxQ || 0, \n                    normal: tagNo.inletPressureNorQ || 0, \n                    min: tagNo.inletPressureMinQ || 0\n                  },\n                  p2: { \n                    max: tagNo.outletPressureMaxQ || 0, \n                    normal: tagNo.outletPressureNorQ || 0, \n                    min: tagNo.outletPressureMinQ || 0\n                  },\n                  dp: { \n                    max: tagNo.differentialPressureMaxQ || 0, \n                    normal: tagNo.differentialPressureNorQ || 0, \n                    min: tagNo.differentialPressureMinQ || 0\n                  },\n                  qm: { \n                    max: tagNo.qmMax || 0, \n                    normal: tagNo.qmNor || 0, \n                    min: tagNo.qmMin || 0, \n                    unit: tagNo.qmUnit || 'mÂ³/h' \n                  },\n                  qn: { \n                    max: tagNo.qnMax || 0, \n                    normal: tagNo.qnNor || 0, \n                    min: tagNo.qnMin || 0, \n                    unit: tagNo.qnUnit || 'mÂ³/h' \n                  },\n                  pressureUnit: tagNo.pressureUnit || 'Mpa(g)',\n                  temperatureUnit: tagNo.temperatureUnit || 'â„ƒ'\n                },\n                body: {\n                  type: getValveSeriesName(req.valveType || ''),\n                  typeCode: req.valveType || '',\n                  size: tagNo.bodySize,\n                  sizeUnit: tagNo.bodySizeUnit,\n                  materialBody: tagNo.bodyMat,\n                  materialTrim: tagNo.trimMat,\n                  option: tagNo.trimOption,\n                  rating: tagNo.bodyRating,\n                  ratingUnit: tagNo.bodyRatingUnit\n                },\n                actuator: {\n                  type: tagNo.actType || 'None',\n                  hw: tagNo.isHW ? 'Yes' : 'No'\n                },\n                accessory: {\n                  positioner: { exists: tagNo.isPositioner || false, type: tagNo.positionerType || '', maker: '', model: '' },\n                  explosionProof: tagNo.explosionProof || '',\n                  transmitter: { exists: tagNo.transmitterType ? true : false, type: tagNo.transmitterType || '' },\n                  solenoidValve: { exists: tagNo.isSolenoid || false, type: '', maker: '', model: '' },\n                  limitSwitch: { exists: tagNo.isLimSwitch || false, type: '', maker: '', model: '' },\n                  airSet: { exists: tagNo.isAirSet || false, type: '', maker: '', model: '' },\n                  volumeBooster: { exists: tagNo.isVolumeBooster || false, type: '', maker: '', model: '' },\n                  airOperatedValve: { exists: tagNo.isAirOperated || false, type: '', maker: '', model: '' },\n                  lockupValve: { exists: tagNo.isLockUp || false, type: '', maker: '', model: '' },\n                  snapActingRelay: { exists: tagNo.isSnapActingRelay || false, type: '', maker: '', model: '' }\n                },\n                isQM: tagNo.isQM || false,\n                isP2: tagNo.isP2 || false,\n                isN1: false,\n                isDensity: tagNo.isDensity ?? false,\n                isHW: tagNo.isHW || false,\n                typeId: `type-${req.valveType}`\n              };\n                loadedValves.push(valveData);\n              });\n            }\n          });\n        } else {\n          // ì´ì „ êµ¬ì¡°: ê°œë³„ EstimateRequest ë°°ì—´ (í˜„ì¬ API ì‘ë‹µ)\n          // ValveTypeë³„ë¡œ ì‹¤ì œ ê·¸ë£¹í•‘\n          const groupedByValveType = existingData.estimateRequests.reduce((acc: any, req: any) => {\n            const valveType = req.valveType || 'Unknown';\n            if (!acc[valveType]) {\n              acc[valveType] = [];\n            }\n            acc[valveType].push(req);\n            return acc;\n          }, {});\n          \n          console.log('ê·¸ë£¹í•‘ëœ ValveType:', groupedByValveType);\n          \n          // ë°¸ë¸Œ íƒ€ì…ë³„ë¡œ SheetNo ìˆœì„œ ê³„ì‚° (ì´ì „ êµ¬ì¡°ìš©)\n          const valveTypeOrder = new Map<string, number>();\n          \n          Object.entries(groupedByValveType).forEach(([valveType, requests]: [string, any]) => {\n            // ê° ë°¸ë¸Œ íƒ€ì…ì˜ ëª¨ë“  requestì˜ SheetNoë¥¼ í™•ì¸í•˜ì—¬ ê°€ì¥ ì‘ì€ ê°’ ì‚¬ìš©\n            const sheetNos = requests.map((req: any) => req.sheetNo).filter(Boolean);\n            if (sheetNos.length > 0) {\n              const minSheetNo = Math.min(...sheetNos);\n              valveTypeOrder.set(valveType, minSheetNo);\n            }\n          });\n          \n          // ë°¸ë¸Œ íƒ€ì…ì„ SheetNo ìˆœì„œëŒ€ë¡œ ì •ë ¬\n          const sortedValveTypes = Array.from(valveTypeOrder.entries())\n            .sort(([, a], [, b]) => a - b);\n          \n          // ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€\n          console.log('ğŸ” ì´ì „ êµ¬ì¡° - ë°¸ë¸Œ íƒ€ì… ì •ë ¬ ì •ë³´:');\n          console.log('valveTypeOrder:', valveTypeOrder);\n          console.log('sortedValveTypes:', sortedValveTypes);\n          \n          // ì •ë ¬ëœ ìˆœì„œëŒ€ë¡œ Type ë°ì´í„° ìƒì„±\n          sortedValveTypes.forEach(([valveType, sheetNo], index) => {\n            const valveSeriesName = getValveSeriesName(valveType);\n            const requests = groupedByValveType[valveType];\n            \n            // Type ë°ì´í„° ìƒì„±\n            const typeData: TypeData = {\n              id: `type-${index}`,\n              name: valveSeriesName,\n              code: valveType,\n              count: requests.length,\n              order: sheetNo,  // SheetNo ê¸°ì¤€ ìˆœì„œ\n              typeId: `type-${index}` // ì¶”ê°€\n            };\n            loadedTypes.push(typeData);\n            \n            // ê° requestë¥¼ Valve ë°ì´í„°ë¡œ ë³€í™˜\n            requests.forEach((req: any, tagIndex: number) => {\n              // ë°±ì—”ë“œ ì‘ë‹µ êµ¬ì¡° ë””ë²„ê¹…\n              console.log('ğŸ” ë°±ì—”ë“œ ì‘ë‹µ êµ¬ì¡° í™•ì¸:');\n              console.log('req.bodySizeUnit:', req.bodySizeUnit);\n              console.log('req.bodySize:', req.bodySize);\n              console.log('req ì „ì²´ êµ¬ì¡°:', req);\n              \n              // Size ë°ì´í„° ë³µì› í™•ì¸\n              console.log('ğŸ” Size ë°ì´í„° ë³µì›:');\n              console.log('ë³µì›ëœ sizeUnit:', req.bodySizeUnit || getSizeUnitFromSize(req.bodySize) || '');\n              console.log('ë³µì›ëœ size:', req.bodySize || '');\n              \n              // loadExistingData í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ\n              const valveData: ValveData = {\n                id: `valve-${valveType}-${tagIndex}`,\n                tagNo: req.tagno || '',\n                qty: req.qty || 1,\n                order: req.sheetNo || tagIndex + 1, // SheetNo ì‚¬ìš©, ì—†ìœ¼ë©´ tagIndex + 1\n                sheetID: req.sheetID || 0,\n                fluid: {\n                  medium: req.medium || '',\n                  fluid: req.fluid || '',\n                  density: req.density?.toString() || '',\n                  molecular: req.molecularWeight?.toString() || '',\n                  t1: { \n                    max: req.inletTemperatureQ || 0, \n                    normal: req.inletTemperatureNorQ || 0, \n                    min: req.inletTemperatureMinQ || 0\n                  },\n                  p1: { \n                    max: req.inletPressureMaxQ || 0, \n                    normal: req.inletPressureNorQ || 0, \n                    min: req.inletPressureMinQ || 0\n                  },\n                  p2: { \n                    max: req.outletPressureMaxQ || 0, \n                    normal: req.outletPressureNorQ || 0, \n                    min: req.outletPressureMinQ || 0\n                  },\n                  dp: { \n                    max: req.differentialPressureMaxQ || 0, \n                    normal: req.differentialPressureNorQ || 0, \n                    min: req.differentialPressureMinQ || 0\n                  },\n                  qm: { \n                    max: req.qmMax || 0, \n                    normal: req.qmNor || 0, \n                    min: req.qmMin || 0, \n                    unit: req.qmUnit || 'mÂ³/h' \n                  },\n                  qn: { \n                    max: req.qnMax || 0, \n                    normal: req.qnNor || 0, \n                    min: req.qnMin || 0, \n                    unit: req.qnUnit || 'mÂ³/h' \n                  },\n                  pressureUnit: req.pressureUnit || 'Mpa(g)',\n                  temperatureUnit: req.temperatureUnit || 'â„ƒ'\n                },\n                body: {\n                  type: valveSeriesName,\n                  typeCode: valveType,\n                  size: req.bodySize || '',  // ê¸°ì¡´ ì €ì¥ëœ Size ê°’ ë³µì›\n                  sizeUnit: req.bodySizeUnit || getSizeUnitFromSize(req.bodySize) || '',  // ê¸°ì¡´ ì €ì¥ëœ Size Unit ë³µì› ë˜ëŠ” Size ê°’ìœ¼ë¡œë¶€í„° ìœ ì¶”\n                  materialBody: req.bodyMat || '',\n                  materialTrim: req.trimMat || '',\n                  option: req.trimOption || '',\n                  rating: req.bodyRating || '',\n                  ratingUnit: req.bodyRatingUnit || ''\n                },\n                actuator: {\n                  type: req.actType || 'None',\n                  hw: req.isHW ? 'Yes' : 'No'\n                },\n                accessory: {\n                  positioner: { exists: req.isPositioner || false, type: req.positionerType || '', maker: '', model: '' },\n                  explosionProof: req.explosionProof || '',\n                  transmitter: { exists: req.transmitterType ? true : false, type: req.transmitterType || '' },\n                  solenoidValve: { exists: req.isSolenoid || false, type: '', maker: '', model: '' },\n                  limitSwitch: { exists: req.isLimSwitch || false, type: '', maker: '', model: '' },\n                  airSet: { exists: req.isAirSet || false, type: '', maker: '', model: '' },\n                  volumeBooster: { exists: req.isVolumeBooster || false, type: '', maker: '', model: '' },\n                  airOperatedValve: { exists: req.isAirOperated || false, type: '', maker: '', model: '' },\n                  lockupValve: { exists: req.isLockUp || false, type: '', maker: '', model: '' },\n                  snapActingRelay: { exists: req.isSnapActingRelay || false, type: '', maker: '', model: '' }\n                },\n                isQM: req.isQM || false,\n                isP2: req.isP2 || false,\n                isN1: false,\n                isDensity: req.isDensity ?? false,\n                isHW: req.isHW || false,\n                typeId: typeData.id\n              };\n              loadedValves.push(valveData);\n            });\n          });\n        }\n        // loadExistingData í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ\n        // loadedValvesë¥¼ SheetNo ìˆœì„œëŒ€ë¡œ ì •ë ¬\n        loadedValves.sort((a, b) => a.order - b.order);\n        \n        // ìƒíƒœ ì—…ë°ì´íŠ¸\n        setTypes(loadedTypes);\n\n        console.log('setValvesë¥¼ í˜¸ì¶œí•˜ê¸° ì§ì „ì…ë‹ˆë‹¤. loadedValves ë°ì´í„°:', loadedValves);\n        setValves(loadedValves);\n        console.log('setValvesê°€ í˜¸ì¶œë˜ì—ˆìŠµë‹ˆë‹¤.');\n        \n        console.log('ë³µì›ëœ Types:', loadedTypes);\n        console.log('ë³µì›ëœ Valves:', loadedValves);\n        \n        \n        // ë””ë²„ê¹…ì„ ìœ„í•œ ìƒì„¸ ë¡œê·¸\n                    loadedValves.forEach((valve, index) => {\n              console.log(`Valve ${index} ìƒì„¸ ì •ë³´:`, {\n                tagNo: valve.tagNo,\n                actuator: valve.actuator,\n                body: valve.body,\n                isHW: valve.isHW\n              });\n            });\n            \n\n      }\n      \n      // ì²¨ë¶€íŒŒì¼ ë°ì´í„° ë³µì›\n      console.log('ì „ì²´ ì‘ë‹µ ë°ì´í„°:', existingData);\n      console.log('attachments í•„ë“œ:', existingData.attachments);\n      console.log('attachments íƒ€ì…:', typeof existingData.attachments);\n      console.log('attachments ê¸¸ì´:', existingData.attachments?.length);\n      \n      if (existingData.attachments && existingData.attachments.length > 0) {\n        console.log('ì²¨ë¶€íŒŒì¼ ë°ì´í„°:', existingData.attachments);\n        // CustomerRequest í´ë”ì˜ í•­ëª©ë§Œ í•˜ë‹¨ ì²¨ë¶€íŒŒì¼ì— í‘œì‹œ\n        const loadedAttachments = existingData.attachments\n          .filter((att: any) => isCustomerFile(att.filePath || att.path))\n          .map((att: any) => ({\n          id: att.attachmentID,           // ë°±ì—”ë“œ API ì‘ë‹µ: attachmentID\n          name: att.fileName,             // ë°±ì—”ë“œ API ì‘ë‹µ: fileName\n          size: att.fileSize || 0,        // ë°±ì—”ë“œ API ì‘ë‹µ: fileSize\n          isPending: false,\n          attachmentId: att.attachmentID, // ë°±ì—”ë“œ API ì‘ë‹µ: attachmentID\n          filePath: att.filePath          // ë°±ì—”ë“œ API ì‘ë‹µ: filePath\n        }));\n        console.log('ë§¤í•‘ëœ ì²¨ë¶€íŒŒì¼:', loadedAttachments);\n        console.log('ğŸ” setFileAttachments í˜¸ì¶œ ì „ fileAttachments ìƒíƒœ:', fileAttachments);\n        setFileAttachments(loadedAttachments);\n        console.log('ğŸ” setFileAttachments í˜¸ì¶œ ì™„ë£Œ');\n        \n        // ğŸ”‘ ê¸°ì¡´ íŒŒì¼ ë¡œë“œ í›„ pendingFiles ì™„ì „ ì´ˆê¸°í™” (ì¤‘ë³µ ì—…ë¡œë“œ ë°©ì§€)\n        setPendingFiles([]);\n        console.log('âœ… pendingFiles ì™„ì „ ì´ˆê¸°í™”ë¨ (ê¸°ì¡´ íŒŒì¼ ì¤‘ë³µ ì—…ë¡œë“œ ë°©ì§€)');\n      } else {\n        console.log('ì²¨ë¶€íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.');\n        // ğŸ”‘ ì²¨ë¶€íŒŒì¼ì´ ì—†ì–´ë„ pendingFiles ì™„ì „ ì´ˆê¸°í™”\n        setPendingFiles([]);\n        console.log('âœ… pendingFiles ì™„ì „ ì´ˆê¸°í™”ë¨ (ì²¨ë¶€íŒŒì¼ ì—†ìŒ)');\n      }\n      \n      // ğŸ”‘ ì¶”ê°€ ì•ˆì „ì¥ì¹˜: fileAttachmentsë„ ì™„ì „ ì´ˆê¸°í™”\n      console.log('ğŸ” loadExistingData ì™„ë£Œ í›„ pendingFiles ìƒíƒœ:', pendingFiles);\n      \n      // ğŸ”‘ ê´€ë¦¬ ì²¨ë¶€íŒŒì¼ ë¡œë“œ\n      await loadManagerAttachments();\n      \n      alert('ì„ì‹œì €ì¥ëœ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.');\n      \n    } catch (error) {\n      console.error('ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:', error);\n      alert('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n      // ì‹¤íŒ¨ ì‹œ ìƒˆë¡œìš´ TempEstimateNo ìƒì„±\n      generateTempEstimateNo();\n    }\n  };\n\n  // í˜ì´ì§€ ì§„ì… ì‹œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\n  useEffect(() => {\n    const initializeData = async () => {\n      // ë§ˆìŠ¤í„° ë°ì´í„°ë“¤ì„ ë¨¼ì € ëª¨ë‘ ê°€ì ¸ì˜µë‹ˆë‹¤.\n      await Promise.all([\n        fetchMasterData(),\n        fetchBodyValveList()\n      ]);\n      // isInitialized ìƒíƒœë¥¼ trueë¡œ ì„¤ì •í•˜ì—¬ ë§ˆìŠ¤í„° ë°ì´í„° ë¡œë”©ì´ ì™„ë£Œë˜ì—ˆìŒì„ í‘œì‹œí•©ë‹ˆë‹¤.\n      setIsInitialized(true);\n    };\n    \n    initializeData();\n  }, []); // ì´ useEffectëŠ” ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ í•œ ë²ˆë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.\n\n  // ë§ˆìŠ¤í„° ë°ì´í„° ë¡œë”©ì´ ì™„ë£Œëœ í›„, ê²¬ì  ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” useEffect\n  useEffect(() => {\n    // isInitializedê°€ falseì´ë©´ (ë§ˆìŠ¤í„° ë°ì´í„° ë¡œë”© ì „ì´ë©´) ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n    if (!isInitialized) {\n      return;\n    }\n\n    const loadParam = searchParams.get('load');\n    console.log('ğŸ” useEffect - loadParam í™•ì¸:', loadParam);\n    console.log('ğŸ” useEffect - isDataLoaded.current:', isDataLoaded.current);\n    \n    if (loadParam) {\n      console.log('ğŸ” loadExistingData í˜¸ì¶œ ì‹œì‘:', loadParam);\n      console.log('ğŸ” isDataLoaded.current ìƒíƒœ:', isDataLoaded.current);\n      \n      // isDataLoadedë¥¼ ê°•ì œë¡œ falseë¡œ ì„¤ì •í•˜ì—¬ í•­ìƒ ë¡œë“œë˜ë„ë¡ í•¨\n      isDataLoaded.current = false;\n      console.log('ğŸ” isDataLoaded.currentë¥¼ falseë¡œ ê°•ì œ ì„¤ì •');\n      \n      loadExistingData(loadParam);\n      isDataLoaded.current = true;\n    }\n  }, [isInitialized, searchParams]); // isInitializedê°€ trueë¡œ ë°”ë€Œë©´ ì´ useEffectê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.\n\n  // ë§ˆìŠ¤í„° ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\n  const fetchMasterData = async () => {\n    try {\n      // Rating ë°©ì‹ê³¼ ë™ì¼í•˜ê²Œ, size-unit-list API í˜¸ì¶œì„ ì œê±°í•©ë‹ˆë‹¤.\n      const [sizeRes, matRes, trimMatRes, optionRes, ratingRes, portSizeRes] = await Promise.all([\n        axios.get('/api/estimate/body-size-list'),\n        axios.get('/api/estimate/body-mat-list'),\n        axios.get('/api/estimate/trim-mat-list'),\n        axios.get('/api/estimate/trim-option-list'),\n        axios.get('/api/estimate/body-rating-list'),\n        axios.get('/api/estimate/trim-port-size-list')\n      ]);\n      \n      console.log('ğŸ” Size API ì‘ë‹µ:', sizeRes.data);\n      setBodySizeList(sizeRes.data);\n      setBodyMatList(matRes.data);\n      setTrimMatList(trimMatRes.data);\n      setTrimOptionList(optionRes.data);\n      setBodyRatingList(ratingRes.data);\n      setTrimPortSizeList(portSizeRes.data);\n      \n      // bodyRatingList ë°ì´í„°ë¥¼ ë°˜í™˜\n      return ratingRes.data;\n    } catch (error) {\n      console.error('ë§ˆìŠ¤í„° ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);\n      return [];\n    }\n  };\n\n  // TempEstimateNo ìƒì„±\n  const generateTempEstimateNo = async () => {\n    try {\n      const response = await axios.post('http://192.168.0.14:5135/api/estimate/generate-temp-no', null, { params: { currentUserId: currentUser?.userId || 'admin' } });\n      setTempEstimateNo(response.data.tempEstimateNo);\n    } catch (error) {\n      console.error('TempEstimateNo ìƒì„± ì‹¤íŒ¨:', error);\n    }\n  };\n\n  // [After] ì•„ë˜ í•¨ìˆ˜ ì „ì²´ë¥¼ ë³µì‚¬í•´ì„œ ê¸°ì¡´ í•¨ìˆ˜ì™€ êµì²´í•´ì£¼ì„¸ìš”.\n\n  const createSavePayload = useCallback(() => {\n      // ì „ì—­ SheetNo ê³„ì‚°\n      let globalSheetNo = 1;\n      const sortedValves = valves.sort((a, b) => {\n        const typeOrderA = types.find(t => t.id === a.typeId)?.order || 0;\n        const typeOrderB = types.find(t => t.id === b.typeId)?.order || 0;\n        \n        if (typeOrderA !== typeOrderB) {\n          return typeOrderA - typeOrderB;\n        }\n        return a.order - b.order;\n      });\n      \n    const allTagNos = sortedValves.map(valve => {\n      const tagNoData: any = {\n        SheetID: valve.sheetID > 0 ? valve.sheetID : undefined,\n        SheetNo: globalSheetNo++,\n                Tagno: valve.tagNo,\n        ValveSeriesCode: valve.body.typeCode, // [ìˆ˜ì •] valveSeriesCode -> ValveSeriesCode (ë°±ì—”ë“œ ëª¨ë¸ ì´ë¦„ê³¼ ì¼ì¹˜)\n                Qty: valve.qty,\n                Medium: valve.fluid.medium,\n                Fluid: valve.fluid.fluid,\n                IsQM: valve.isQM, \n                QMUnit: valve.fluid.qm.unit,\n        QMMax: parseFloat(valve.fluid.qm.max.toString()) || 0,\n        QMNor: parseFloat(valve.fluid.qm.normal.toString()) || 0,\n        QMMin: parseFloat(valve.fluid.qm.min.toString()) || 0,\n                QNUnit: valve.fluid.qn.unit,\n        QNMax: parseFloat(valve.fluid.qn.max.toString()) || 0,\n        QNNor: parseFloat(valve.fluid.qn.normal.toString()) || 0,\n        QNMin: parseFloat(valve.fluid.qn.min.toString()) || 0,\n                IsP2: valve.isP2,\n                IsDensity: valve.isDensity,\n                PressureUnit: valve.fluid.pressureUnit,\n        InletPressureMaxQ: parseFloat(valve.fluid.p1.max.toString()) || 0,\n        InletPressureNorQ: parseFloat(valve.fluid.p1.normal.toString()) || 0,\n        InletPressureMinQ: parseFloat(valve.fluid.p1.min.toString()) || 0,\n        OutletPressureMaxQ: parseFloat(valve.fluid.p2.max.toString()) || 0,\n        OutletPressureNorQ: parseFloat(valve.fluid.p2.normal.toString()) || 0,\n        OutletPressureMinQ: parseFloat(valve.fluid.p2.min.toString()) || 0,\n        DifferentialPressureMaxQ: parseFloat(valve.fluid.dp.max.toString()) || 0,\n        DifferentialPressureNorQ: parseFloat(valve.fluid.dp.normal.toString()) || 0,\n        DifferentialPressureMinQ: parseFloat(valve.fluid.dp.min.toString()) || 0,\n                TemperatureUnit: valve.fluid.temperatureUnit,\n        InletTemperatureQ: parseFloat(valve.fluid.t1.max.toString()) || 0,\n        InletTemperatureNorQ: parseFloat(valve.fluid.t1.normal.toString()) || 0,\n        InletTemperatureMinQ: parseFloat(valve.fluid.t1.min.toString()) || 0,\n                DensityUnit: 'kg/mÂ³',\n                Density: parseFloat(valve.fluid.density) || 0,\n                MolecularWeightUnit: 'g/mol',\n                MolecularWeight: parseFloat(valve.fluid.molecular) || 0,\n                BodySizeUnit: valve.body.sizeUnit || null,\n                BodySize: getBodySizeCode(valve.body.size, valve.body.sizeUnit),\n                BodyMat: getBodyMatCode(valve.body.materialBody),\n                TrimMat: getTrimMatCode(valve.body.materialTrim),\n                TrimOption: getTrimOptionCode(valve.body.option),\n        // [ìˆ˜ì •] bodyRating -> BodyRating (bë¥¼ ëŒ€ë¬¸ì Bë¡œ)\n        BodyRating: valve.body.rating,\n        // [ìˆ˜ì •] bodyRatingUnit -> BodyRatingUnit (b, uë¥¼ ëŒ€ë¬¸ì B, Uë¡œ)\n        BodyRatingUnit: valve.body.ratingUnit,\n                ActType: valve.actuator.type,\n                IsHW: valve.actuator.hw === 'Yes',\n      };\n\n      // IsPositioner ë¡œì§ ìˆ˜ì •: Typeì— ê°’ì´ ìˆì„ ë•Œë§Œ true\n      if (valve.accessory.positioner.type) {\n        tagNoData.IsPositioner = true;\n        tagNoData.PositionerType = valve.accessory.positioner.type;\n      } else {\n        tagNoData.IsPositioner = false;\n        tagNoData.PositionerType = null;\n      }\n\n      tagNoData.ExplosionProof = valve.accessory.explosionProof || null;\n      tagNoData.TransmitterType = valve.accessory.transmitter.type || null;\n      \n      tagNoData.IsSolenoid = valve.accessory.solenoidValve.exists;\n      tagNoData.IsLimSwitch = valve.accessory.limitSwitch.exists;\n      tagNoData.IsAirSet = valve.accessory.airSet.exists;\n      tagNoData.IsVolumeBooster = valve.accessory.volumeBooster.exists;\n      tagNoData.IsAirOperated = valve.accessory.airOperatedValve.exists;\n      tagNoData.IsLockUp = valve.accessory.lockupValve.exists;\n      tagNoData.IsSnapActingRelay = valve.accessory.snapActingRelay.exists;\n\n      return tagNoData;\n    });\n\n    const typeSelections = types.map(type => {\n      const typeValves = allTagNos\n        .filter(valve => valve.ValveSeriesCode === type.code) // [ìˆ˜ì •] valveSeriesCode -> ValveSeriesCode\n        .map(valve => {\n          // ValveSeriesCodeëŠ” ë°±ì—”ë“œ ì „ì†¡ ì‹œ í•„ìš” ì—†ìœ¼ë¯€ë¡œ ì œê±°\n          const { ValveSeriesCode, ...rest } = valve; // [ìˆ˜ì •] valveSeriesCode -> ValveSeriesCode\n            return {\n            ValveName: valve.Tagno, // [ìˆ˜ì •] tagno -> Tagno\n            ValveSeriesCode: valve.ValveSeriesCode, // [ìˆ˜ì •] valveSeriesCode -> ValveSeriesCode\n            TagNos: [rest]\n            };\n          });\n          \n      return {\n        Type: type.name,\n        Valves: typeValves\n      };\n    });\n\n    return {\n      TypeSelections: typeSelections,\n      Project: projectName,\n      CustomerRequirement: customerRequirement,\n      CustomerID: selectedCustomer?.userID || currentUser?.userId || 'admin',\n      WriterID: currentUser?.userId || 'admin',\n      Attachments: []\n    };\n  }, [types, valves, projectName, customerRequirement, selectedCustomer, currentUser, bodySizeList, bodyMatList, trimMatList, trimOptionList, bodyRatingList]);\n\n  // ì„ì‹œì €ì¥ ê¸°ëŠ¥\n  const handleSaveDraft = async () => {\n    // TempEstimateNoê°€ ì—†ìœ¼ë©´ ë¨¼ì € ìƒì„±\n    let currentTempEstimateNo = tempEstimateNo;\n    if (!currentTempEstimateNo) {\n      try {\n        const response = await axios.post('http://192.168.0.14:5135/api/estimate/generate-temp-no', null, { params: { currentUserId: currentUser?.userId || 'admin' } });\n        currentTempEstimateNo = response.data.tempEstimateNo;\n        setTempEstimateNo(currentTempEstimateNo);\n      } catch (error) {\n        console.error('TempEstimateNo ìƒì„± ì‹¤íŒ¨:', error);\n        alert('TempEstimateNo ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n        return;\n      }\n    }\n\n    // ì‹¤ì œ ì…ë ¥ëœ ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸\n    if (types.length === 0) {\n      alert('ìµœì†Œ í•˜ë‚˜ì˜ Typeì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    if (valves.length === 0) {\n      alert('ìµœì†Œ í•˜ë‚˜ì˜ TagNoë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.');\n      return;\n    }\n    \n    try {\n      const submitData = createSavePayload();\n      console.log('Submit Data - CustomerRequirement:', submitData.CustomerRequirement);\n      console.log('Submit Data ì „ì²´:', JSON.stringify(submitData, null, 2));\n\n      await axios.post(`http://192.168.0.14:5135/api/estimate/sheets/${currentTempEstimateNo}/save-draft`, submitData);\n      \n      // ì„±ê³µ ì‹œ ì„ì‹œì €ì¥ í”Œë˜ê·¸ ì œê±°\n      localStorage.removeItem(`saved_${currentTempEstimateNo}`);\n      \n      alert('ì„ì‹œì €ì¥ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');\n      navigate('/dashboard/estimate-requests');\n    } catch (error) {\n      console.error('ê²¬ì ìš”ì²­ ì‹¤íŒ¨:', error);\n      alert('ê²¬ì ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n    }\n  };\n\n  // ê²¬ì ìš”ì²­ ê¸°ëŠ¥\n  const handleSubmitEstimate = async () => {\n    // TempEstimateNoê°€ ì—†ìœ¼ë©´ ë¨¼ì € ìƒì„±\n    let currentTempEstimateNo = tempEstimateNo;\n    if (!currentTempEstimateNo) {\n      try {\n        const response = await axios.post('http://192.168.0.14:5135/api/estimate/generate-temp-no', {});\n        currentTempEstimateNo = response.data.tempEstimateNo;\n        setTempEstimateNo(currentTempEstimateNo);\n      } catch (error) {\n        console.error('TempEstimateNo ìƒì„± ì‹¤íŒ¨:', error);\n        alert('TempEstimateNo ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n        return;\n      }\n    }\n\n    // ì‹¤ì œ ì…ë ¥ëœ ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸\n    if (types.length === 0) {\n      alert('ìµœì†Œ í•˜ë‚˜ì˜ Typeì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    if (valves.length === 0) {\n      alert('ìµœì†Œ í•˜ë‚˜ì˜ TagNoë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.');\n      return;\n    }\n    \n    try {\n      const submitData = createSavePayload();\n      \n      // StaffComment ì¶”ê°€\n      const finalSubmitData = {\n        ...submitData,\n        StaffComment: staffComment, // createSavePayload ë°–ì—ì„œ staffComment ì‚¬ìš©\n      };\n      \n      console.log('Submit Data - CustomerRequirement:', finalSubmitData.CustomerRequirement);\n      console.log('Submit Data ì „ì²´:', JSON.stringify(finalSubmitData, null, 2));\n\n      await axios.post(`http://192.168.0.14:5135/api/estimate/sheets/${currentTempEstimateNo}/submit`, finalSubmitData);\n      \n      // ì„±ê³µ ì‹œ ì„ì‹œì €ì¥ í”Œë˜ê·¸ ì œê±°\n      localStorage.removeItem(`saved_${currentTempEstimateNo}`);\n      \n      alert('ê²¬ì ìš”ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');\n      navigate('/dashboard/estimate-requests');\n    } catch (error) {\n      console.error('ê²¬ì ìš”ì²­ ì‹¤íŒ¨:', error);\n      alert('ê²¬ì ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n    }\n  };\n\n  const handleValveClick = (valve: ValveData) => {\n    setCurrentValve(valve);\n    // Step 3ë¡œ ìŠ¤í¬ë¡¤ ì´ë™\n   // setTimeout(() => {\n      //if (specSectionRef.current) {\n        //specSectionRef.current.scrollIntoView({ \n          //behavior: 'smooth', \n          //block: 'start' \n        //});\n      //}\n    //}, 100);\n  };\n\n  // ì…ë ¥ í•„ë“œ ê°’ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\n  const updateValveData = useCallback((valveId: string, path: string, value: any) => {\n    setValves(prevValves => {\n      const updatedValve = prevValves.find(v => v.id === valveId);\n      if (!updatedValve) return prevValves;\n\n      // ì¤‘ì²©ëœ ê²½ë¡œ ì²˜ë¦¬ (ì˜ˆ: body.sizeUnit, accessory.positioner.type)\n      const pathParts = path.split('.');\n      let newValve = { ...updatedValve };\n      \n      if (pathParts.length === 2) {\n        const [parent, child] = pathParts;\n        const parentObj = updatedValve[parent as keyof ValveData] as any;\n        newValve = {\n          ...updatedValve,\n          [parent]: {\n            ...parentObj,\n            [child]: value\n          }\n        };\n      } else if (pathParts.length === 3) {\n        const [parent, child, grandchild] = pathParts;\n        const parentObj = updatedValve[parent as keyof ValveData] as any;\n        const childObj = parentObj[child] as any;\n        newValve = {\n          ...updatedValve,\n          [parent]: {\n            ...parentObj,\n            [child]: {\n              ...childObj,\n              [grandchild]: value\n            }\n          }\n        };\n\n        // Positioner íŠ¹ë³„ ì²˜ë¦¬\n        if (path === 'accessory.positioner.type') {\n          const newType = value;\n          const newExists = newType !== '';\n          newValve.accessory.positioner.exists = newExists;\n        }\n\n      } else {\n        newValve = {\n          ...updatedValve,\n          [path]: value\n        };\n      }\n      \n      const updatedValves = prevValves.map(v => v.id === valveId ? newValve : v);\n      \n      // currentValveë„ í•¨ê»˜ ì—…ë°ì´íŠ¸\n      if (currentValve && currentValve.id === valveId) {\n        setCurrentValve(newValve);\n      }\n      \n      return updatedValves;\n    });\n  }, [currentValve]);\n\n  // ì…ë ¥ í•„ë“œ ê°’ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\n  const handleBodyChange = useCallback((field: string, value: string) => {\n    if (!currentValve) return;\n    updateValveData(currentValve.id, `body.${field}`, value);\n  }, [currentValve, updateValveData]);\n\n  // ì…ë ¥ í•„ë“œ ê°’ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\n  const handleActuatorChange = useCallback((field: string, value: string) => {\n    if (!currentValve) return;\n    updateValveData(currentValve.id, `actuator.${field}`, value);\n  }, [currentValve, updateValveData]);\n\n  // ì…ë ¥ í•„ë“œ ê°’ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\n  const handleAccessoryChange = useCallback((field: string, value: any) => {\n    if (!currentValve) return;\n    updateValveData(currentValve.id, `accessory.${field}`, value);\n  }, [currentValve, updateValveData]);\n\n  // ë¼ë””ì˜¤ ë²„íŠ¼ í•¸ë“¤ëŸ¬ë“¤\n  const handleRadioChange = useCallback((field: string, value: boolean) => {\n    if (!currentValve) return;\n    setValves(prevValves => {\n      const updatedValves = prevValves.map(valve => \n        valve.id === currentValve.id \n          ? { ...valve, [field]: value }\n          : valve\n      );\n      \n      // currentValveë„ í•¨ê»˜ ì—…ë°ì´íŠ¸\n      const updatedCurrentValve = updatedValves.find(valve => valve.id === currentValve.id);\n      if (updatedCurrentValve) {\n        setCurrentValve(updatedCurrentValve);\n      }\n      \n      return updatedValves;\n    });\n  }, [currentValve]);\n\n  // molecular/density ì¤‘ í•˜ë‚˜ë§Œ ì…ë ¥ë˜ë„ë¡ í•˜ëŠ” í•¸ë“¤ëŸ¬\n  const handleFluidFieldChange = useCallback((field: string, value: string) => {\n    if (!currentValve) return;\n    \n    setValves(prevValves => {\n      const updatedValves = prevValves.map(valve => \n        valve.id === currentValve.id \n          ? {\n              ...valve,\n              fluid: { \n                ...valve.fluid, \n                [field]: value,\n                // molecularê³¼ density ì¤‘ í•˜ë‚˜ë§Œ ì…ë ¥ë˜ë„ë¡\n                ...(field === 'molecular' && value !== '' ? { density: '' } : {}),\n                ...(field === 'density' && value !== '' ? { molecular: '' } : {})\n              }\n            }\n          : valve\n      );\n      \n      // currentValve ì—…ë°ì´íŠ¸ëŠ” í•œ ë²ˆë§Œ ìˆ˜í–‰\n      const updatedCurrentValve = updatedValves.find(valve => valve.id === currentValve.id);\n      if (updatedCurrentValve) {\n        setCurrentValve(updatedCurrentValve);\n      }\n      \n      return updatedValves;\n    });\n  }, [currentValve]);\n\n  // Fluid ì¡°ê±´ í•„ë“œ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\n  const handleFluidConditionChange = useCallback((condition: string, field: string, value: number | string) => {\n    if (!currentValve) return;\n    setValves(prevValves => {\n      const updatedValves = prevValves.map(valve => \n        valve.id === currentValve.id \n          ? {\n              ...valve,\n              fluid: {\n                ...valve.fluid,\n                [condition]: { ...(valve.fluid as any)[condition], [field]: value }\n              }\n            }\n          : valve\n      );\n      \n      // currentValveë„ í•¨ê»˜ ì—…ë°ì´íŠ¸\n      const updatedCurrentValve = updatedValves.find(valve => valve.id === currentValve.id);\n      if (updatedCurrentValve) {\n        setCurrentValve(updatedCurrentValve);\n      }\n      \n      return updatedValves;\n    });\n  }, [currentValve]);\n\n  // í†µí•©ëœ ë‹¨ìœ„ í•„ë“œ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\n  const handleUnitChange = useCallback((field: string, value: string) => {\n    if (!currentValve) return;\n    setValves(prevValves => {\n      const updatedValves = prevValves.map(valve => \n        valve.id === currentValve.id \n          ? {\n              ...valve,\n              fluid: {\n                ...valve.fluid,\n                [field]: value\n              }\n            }\n          : valve\n      );\n      \n      // currentValveë„ í•¨ê»˜ ì—…ë°ì´íŠ¸\n      const updatedCurrentValve = updatedValves.find(valve => valve.id === currentValve.id);\n      if (updatedCurrentValve) {\n        setCurrentValve(updatedCurrentValve);\n      }\n      \n      return updatedValves;\n    });\n  }, [currentValve]);\n\n  const TypeSection = () => (\n    <div className=\"type-section\">\n      <div className=\"type-header\">\n        <h3>Step 1: Type ì„ ì •</h3>\n        <p className=\"step-description-req\">ê²¬ì ì— í•„ìš”í•œ ë°¸ë¸Œ íƒ€ì…ì„ ì„ íƒí•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.</p>\n        <div className=\"type-actions\">\n          <button onClick={handleAddType}>ì¶”ê°€</button>\n          <button onClick={() => selectedType && handleRemoveType(types.findIndex(type => type.id === selectedType))}>ì‚­ì œ</button>\n        </div>\n      </div>\n      <DndContext\n        sensors={sensors}\n        collisionDetection={closestCenter}\n        onDragEnd={handleTypeDragEnd}\n      >\n        <SortableContext\n          items={types.map(item => item.id)}\n          strategy={verticalListSortingStrategy}\n        >\n          {types.map((item, index) => (\n            <SortableItem key={item.id} id={item.id}>\n              <div \n                className={`type-item ${selectedType === item.id ? 'selected' : ''}`}\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  setSelectedType(item.id);\n                }}\n                onMouseDown={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                }}\n                style={{ \n                  cursor: 'pointer', \n                  userSelect: 'none',\n                  pointerEvents: 'auto'\n                }}\n              >\n                <span>{item.name} ({valves.filter(valve => valve.body.type === item.name).reduce((sum, valve) => sum + valve.qty, 0)})</span>\n              </div>\n            </SortableItem>\n          ))}\n        </SortableContext>\n      </DndContext>\n      \n      {/* ë“œë¡­ë‹¤ìš´ì„ TypeSection ì•ˆì— ë Œë”ë§ */}\n      {showValveDropdown && (\n        <div className=\"valve-dropdown\" style={{ \n          position: 'relative',\n          backgroundColor: 'white', \n          border: '2px solid #007bff',\n          borderRadius: '4px',\n          boxShadow: '0 2px 8px rgba(0, 0, 0, 0.15)',\n          maxHeight: '150px',\n          overflowY: 'auto',\n          marginTop: '5px'\n        }}>\n          {bodyValveList.map((valve) => (\n            <div\n              key={valve.valveSeriesCode}\n              onClick={() => handleValveSelect(valve)}\n              style={{ \n                padding: '8px 12px', \n                cursor: 'pointer',\n                borderBottom: '1px solid #eee',\n                fontSize: '14px'\n              }}\n              onMouseEnter={(e) => e.currentTarget.style.backgroundColor = '#f5f5f5'}\n              onMouseLeave={(e) => e.currentTarget.style.backgroundColor = 'white'}\n            >\n              {valve.valveSeries}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n\n  // Valve ì¶”ê°€ ì„¹ì…˜\n  const ValveSection = () => {\n    // ì„ íƒëœ Typeì— í•´ë‹¹í•˜ëŠ” TagNoë§Œ í•„í„°ë§\n    const filteredValves = selectedType \n      ? valves.filter(valve => {\n          const selectedTypeData = types.find(t => t.id === selectedType);\n          return selectedTypeData && valve.body.type === selectedTypeData.name;\n        })\n      : [];\n\n  return (\n      <div className=\"valve-section\">\n        <div className=\"valve-header\">\n          <div className=\"valve-actions\">\n            <button \n              onClick={handleAddValve} \n              disabled={!selectedType || isReadOnly}\n            >\n              ì¶”ê°€\n          </button>\n            <button \n              onClick={() => currentValve && handleDeleteValve(currentValve.id)}\n              disabled={!currentValve || isReadOnly}\n            >\n              ì‚­ì œ\n            </button>\n        </div>\n      </div>\n\n        {!selectedType ? (\n          <div style={{ \n            padding: '20px', \n            textAlign: 'center', \n            color: '#666',\n            backgroundColor: '#f9f9f9',\n            borderRadius: '8px',\n            margin: '10px 0'\n          }}>\n            Step 1ì—ì„œ Typeì„ ì„ íƒí•˜ë©´ í•´ë‹¹ Typeì˜ TagNoë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n        </div>\n        ) : (\n          <DndContext\n            sensors={sensors}\n            collisionDetection={closestCenter}\n            onDragEnd={handleValveDragEnd}\n          >\n            <SortableContext\n              items={filteredValves.map(item => item.id)}\n              strategy={verticalListSortingStrategy}\n            >\n              {filteredValves.map((item) => (\n                <SortableItem key={item.id} id={item.id}>\n                  <div \n                    className={`valve-item ${currentValve?.id === item.id ? 'selected' : ''}`}\n                    onClick={(e) => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      handleValveClick(item);\n                    }}\n                    onMouseDown={(e) => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                    }}\n                    style={{ \n                      cursor: 'pointer',\n                      pointerEvents: 'auto'\n                    }}\n                  >\n                    <span>TagNo: {item.tagNo} (Qty: {item.qty})</span>\n                  </div>\n                </SortableItem>\n              ))}\n            </SortableContext>\n          </DndContext>\n        )}\n        \n        {/* Step 3 ì˜ì—­ì— ref ì¶”ê°€ */}\n        <div ref={specSectionRef} style={{ height: '1px', marginTop: '20px' }}></div>\n      </div>\n    );\n  };\n\n  // ìƒì„¸ ì‚¬ì–‘ ì…ë ¥ ì„¹ì…˜\n  const SpecificationSection = () => {\n    const handleTagNoClick = () => {\n      //if (tagNoRef.current) {\n        //tagNoRef.current.scrollIntoView({ behavior: 'smooth' });\n      //}\n    };\n\n    return (\n      <div className=\"spec-section\">\n        <h3>Step 3: ìƒì„¸ì‚¬ì–‘ ì…ë ¥</h3>\n        <p className=\"step-description-req\">ì„ íƒëœ TagNoì˜ ìƒì„¸ ì‚¬ì–‘ì„ ì…ë ¥í•©ë‹ˆë‹¤.</p>\n        {currentValve ? (\n          <div className=\"spec-content\">\n            <div className=\"spec-header\">\n              <div className=\"tag-info\">\n                <label htmlFor=\"tag-no\">Tag No</label>\n                  <input\n                  id=\"tag-no\"\n                  name=\"tagNo\"\n                    type=\"text\"\n                  value={currentValve.tagNo} \n                  onChange={(e) => {\n                    if (!currentValve) return;\n                    const newTagNo = e.target.value;\n                    setValves(prevValves => \n                      prevValves.map(valve => \n                        valve.id === currentValve.id \n                          ? { ...valve, tagNo: newTagNo }\n                          : valve\n                      )\n                    );\n                    // currentValveë„ í•¨ê»˜ ì—…ë°ì´íŠ¸\n                    setCurrentValve(prev => prev ? { ...prev, tagNo: newTagNo } : null);\n                  }}\n                  ref={tagNoRef} \n                  onClick={handleTagNoClick} \n                  />\n                </div>\n              <div className=\"quantity-info\">\n                <label htmlFor=\"quantity\">Q'ty</label>\n                <input \n                  id=\"quantity\"\n                  name=\"quantity\"\n                  type=\"number\" \n                  value={currentValve.qty === 0 ? '' : currentValve.qty} \n                  min=\"1\"\n                  onChange={(e) => {\n                    if (!currentValve) return;\n                    const value = parseInt(e.target.value);\n                    const newQty = isNaN(value) ? 0 : Math.max(1, value);\n                    \n                    setValves(prevValves => \n                      prevValves.map(valve => \n                        valve.id === currentValve.id \n                          ? { ...valve, qty: newQty }\n                          : valve\n                      )\n                    );\n                    \n                    // currentValveë„ í•¨ê»˜ ì—…ë°ì´íŠ¸\n                    setCurrentValve(prev => prev ? { ...prev, qty: newQty } : null);\n                  }}\n                  />\n                </div>\n              </div>\n              \n            <div className=\"spec-grid\">\n              <div className=\"fluid-section\">\n                  <div className=\"fluid-row\">\n                  <h4>Fluid</h4>\n                    <label>Medium:</label>\n                    <input\n                      id=\"fluid-medium\" \n                      name=\"fluidMedium\" \n                      type=\"text\"\n                      value={currentValve.fluid.medium}\n                      onChange={(e) => handleFluidFieldChange('medium', e.target.value)}\n                      disabled={isReadOnly}\n                    />\n                  </div>\n                  \n                  <div className=\"fluid-row\">\n                    <label>Fluid:</label>\n                    <select \n                      id=\"fluid-type\" \n                      name=\"fluidType\"\n                      value={currentValve.fluid.fluid}\n                      onChange={(e) => handleFluidFieldChange('fluid', e.target.value)}\n                      disabled={isReadOnly}\n                    >\n                      <option value=\"\">ì„ íƒí•˜ì„¸ìš”</option>\n                      {fluidOptions.map(option => (\n                        <option key={option} value={option}>{option}</option>\n                      ))}\n                    </select>\n                  </div>\n                  \n                  <div className=\"fluid-row\">\n                    <div className=\"radio-group\">\n                      <div className=\"radio-label\">\n                        <label><input type=\"radio\" name=\"densityType\" value=\"Density\" checked={currentValve.isDensity} onChange={(e) => handleRadioChange('isDensity', e.target.checked)} disabled={isReadOnly} /></label>\n                </div>\n                      <label>Density:</label>\n                      <input \n                        id=\"fluid-density\" \n                        name=\"fluidDensity\" \n                        type=\"text\" \n                        value={currentValve.fluid.density}\n                        onChange={(e) => handleFluidFieldChange('density', e.target.value)}\n                        placeholder={!currentValve.isDensity ? 'Molecular ì„ íƒ ì‹œ ì‚¬ìš© ë¶ˆê°€' : ''}\n                        disabled={!currentValve.isDensity || isReadOnly}\n                        className={!currentValve.isDensity ? 'disabled-input' : ''}\n                      />\n              </div>\n            </div>\n\n                  <div className=\"fluid-row\">\n                    <div className=\"radio-group\">\n                      <div className=\"radio-label\">\n                        <label><input type=\"radio\" name=\"densityType\" value=\"Molecular\" checked={!currentValve.isDensity} onChange={(e) => handleRadioChange('isDensity', !e.target.checked)} disabled={isReadOnly} /></label>\n              </div>\n                      <label>Molecular:</label>\n                                <input\n                        id=\"fluid-molecular\" \n                        name=\"fluidMolecular\" \n                                  type=\"text\"\n                        value={currentValve.fluid.molecular}\n                        onChange={(e) => handleFluidFieldChange('molecular', e.target.value)}\n                        placeholder={currentValve.isDensity ? 'Density ì„ íƒ ì‹œ ì‚¬ìš© ë¶ˆê°€' : ''}\n                        disabled={currentValve.isDensity || isReadOnly}\n                        className={currentValve.isDensity ? 'disabled-input' : ''}\n                                />\n                              </div>\n                  </div>\n                  \n                  <h4>Fluid Conditions</h4>\n                  <table className=\"fluid-conditions-table\">\n                    <thead>\n                      <tr>\n                        <th></th>\n                        <th>Max</th>\n                        <th>Normal</th>\n                        <th>Min</th>\n                        <th>Unit</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <tr>\n                        <td>t1</td>\n                        <td><input id=\"t1-max\" name=\"t1Max\" type=\"number\" value={currentValve.fluid.t1.max === 0 ? '' : currentValve.fluid.t1.max} onChange={(e) => handleFluidConditionChange('t1', 'max', parseFloat(e.target.value) || 0)} disabled={isReadOnly} /></td>\n                        <td><input id=\"t1-normal\" name=\"t1Normal\" type=\"number\" value={currentValve.fluid.t1.normal === 0 ? '' : currentValve.fluid.t1.normal} onChange={(e) => handleFluidConditionChange('t1', 'normal', parseFloat(e.target.value) || 0)} disabled={isReadOnly} /></td>\n                        <td><input id=\"t1-min\" name=\"t1Min\" type=\"number\" value={currentValve.fluid.t1.min === 0 ? '' : currentValve.fluid.t1.min} onChange={(e) => handleFluidConditionChange('t1', 'min', parseFloat(e.target.value) || 0)} disabled={isReadOnly} /></td>\n                        <td>\n                          <select \n                            id=\"t1-unit\" \n                            name=\"t1Unit\"\n                            value={currentValve.fluid.temperatureUnit}\n                            onChange={(e) => handleUnitChange('temperatureUnit', e.target.value)}\n                            disabled={isReadOnly}\n                          >\n                            <option value=\"Â°C\">Â°C</option>\n                            <option value=\"K\">K</option>\n                            <option value=\"Â°F\">Â°F</option>\n                            <option value=\"Â°Reaumur\">Â°Reaumur</option>\n                            <option value=\"Â°Rankine\">Â°Rankine</option>\n                          </select>\n                        </td>\n                      </tr>\n                      <tr>\n                        <td>p1</td>\n                        <td><input id=\"p1-max\" name=\"p1Max\" type=\"number\" value={currentValve.fluid.p1.max === 0 ? '' : currentValve.fluid.p1.max} onChange={(e) => handleFluidConditionChange('p1', 'max', parseFloat(e.target.value) || 0)} disabled={isReadOnly} /></td>\n                        <td><input id=\"p1-normal\" name=\"p1Normal\" type=\"number\" value={currentValve.fluid.p1.normal === 0 ? '' : currentValve.fluid.p1.normal} onChange={(e) => handleFluidConditionChange('p1', 'normal', parseFloat(e.target.value) || 0)} disabled={isReadOnly} /></td>\n                        <td><input id=\"p1-min\" name=\"p1Min\" type=\"number\" value={currentValve.fluid.p1.min === 0 ? '' : currentValve.fluid.p1.min} onChange={(e) => handleFluidConditionChange('p1', 'min', parseFloat(e.target.value) || 0)} disabled={isReadOnly} /></td>\n                        <td>\n                          <select \n                            id=\"p1-unit\" \n                            name=\"p1Unit\"\n                            value={currentValve.fluid.pressureUnit}\n                            onChange={(e) => handleUnitChange('pressureUnit', e.target.value)}\n                            disabled={isReadOnly}\n                          >\n                            <option value=\"bar(a)\">bar(a)</option>\n                            <option value=\"mbar(a)\">mbar(a)</option>\n                            <option value=\"Pa(a)\">Pa(a)</option>\n                            <option value=\"kPa(a)\">kPa(a)</option>\n                            <option value=\"MPa(a)\">MPa(a)</option>\n                            <option value=\"at(a)\">at(a)</option>\n                            <option value=\"atm(a)\">atm(a)</option>\n                            <option value=\"kp/cmÂ²(a)\">kp/cmÂ²(a)</option>\n                            <option value=\"N/mÂ²(a)\">N/mÂ²(a)</option>\n                            <option value=\"N/mmÂ²(a)\">N/mmÂ²(a)</option>\n                            <option value=\"Torr(a)\">Torr(a)</option>\n                            <option value=\"mmHg(a)\">mmHg(a)</option>\n                            <option value=\"mmH2O(a)\">mmH2O(a)</option>\n                            <option value=\"psi(a)\">psi(a)</option>\n                            <option value=\"ftH2O(a)\">ftH2O(a)</option>\n                            <option value=\"inHg(a)\">inHg(a)</option>\n                            <option value=\"inH2O(a)\">inH2O(a)</option>\n                            <option value=\"lbf/ftÂ²(a)\">lbf/ftÂ²(a)</option>\n                            <option value=\"bar(g)\">bar(g)</option>\n                            <option value=\"mbar(g)\">mbar(g)</option>\n                            <option value=\"Pa(g)\">Pa(g)</option>\n                            <option value=\"kPa(g)\">kPa(g)</option>\n                            <option value=\"MPa(g)\">MPa(g)</option>\n                            <option value=\"at(g)\">at(g)</option>\n                            <option value=\"atm(g)\">atm(g)</option>\n                            <option value=\"kp/cmÂ²(g)\">kp/cmÂ²(g)</option>\n                            <option value=\"N/mÂ²(g)\">N/mÂ²(g)</option>\n                            <option value=\"N/mmÂ²(g)\">N/mmÂ²(g)</option>\n                            <option value=\"Torr(g)\">Torr(g)</option>\n                            <option value=\"mmHg(g)\">mmHg(g)</option>\n                            <option value=\"mmH2O(g)\">mmH2O(g)</option>\n                            <option value=\"psi(g)\">psi(g)</option>\n                            <option value=\"ftH2O(g)\">ftH2O(g)</option>\n                            <option value=\"inHg(g)\">inHg(g)</option>\n                            <option value=\"inH2O(g)\">inH2O(g)</option>\n                            <option value=\"lbf/ftÂ²(g)\">lbf/ftÂ²(g)</option>\n                            <option value=\"kgf/cmÂ²(a)\">kgf/cmÂ²(a)</option>\n                            <option value=\"kgf/cmÂ²(g)\">kgf/cmÂ²(g)</option>\n                          </select>\n                        </td>\n                      </tr>\n                      <tr>\n                        <td>\n                          <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>\n                            <div style={{ fontSize: '10px' }}>\n                              <label><input type=\"radio\" name=\"p2Type\" value=\"P2\" checked={currentValve.isP2} onChange={(e) => handleRadioChange('isP2', e.target.checked)} disabled={isReadOnly} /></label>\n                            </div>\n                            p2\n                    </div>\n                        </td>\n                        <td><input id=\"p2-max\" name=\"p2Max\" type=\"number\" value={currentValve.fluid.p2.max === 0 ? '' : currentValve.fluid.p2.max} onChange={(e) => handleFluidConditionChange('p2', 'max', parseFloat(e.target.value) || 0)} disabled={!currentValve.isP2 || isReadOnly} className={!currentValve.isP2 ? 'disabled-input' : ''} /></td>\n                        <td><input id=\"p2-normal\" name=\"p2Normal\" type=\"number\" value={currentValve.fluid.p2.normal === 0 ? '' : currentValve.fluid.p2.normal} onChange={(e) => handleFluidConditionChange('p2', 'normal', parseFloat(e.target.value) || 0)} disabled={!currentValve.isP2 || isReadOnly} className={!currentValve.isP2 ? 'disabled-input' : ''} /></td>\n                        <td><input id=\"p2-min\" name=\"p2Min\" type=\"number\" value={currentValve.fluid.p2.min === 0 ? '' : currentValve.fluid.p2.min} onChange={(e) => handleFluidConditionChange('p2', 'min', parseFloat(e.target.value) || 0)} disabled={!currentValve.isP2 || isReadOnly} className={!currentValve.isP2 ? 'disabled-input' : ''} /></td>\n                        <td>\n                          <select \n                            id=\"p2-unit\" \n                            name=\"p2Unit\"\n                            value={currentValve.fluid.pressureUnit}\n                            onChange={(e) => handleUnitChange('pressureUnit', e.target.value)}\n                            disabled={!currentValve.isP2 || isReadOnly}\n                            className={!currentValve.isP2 ? 'disabled-input' : ''}\n                          >\n                            <option value=\"bar(a)\">bar(a)</option>\n                            <option value=\"mbar(a)\">mbar(a)</option>\n                            <option value=\"Pa(a)\">Pa(a)</option>\n                            <option value=\"kPa(a)\">kPa(a)</option>\n                            <option value=\"MPa(a)\">MPa(a)</option>\n                            <option value=\"at(a)\">at(a)</option>\n                            <option value=\"atm(a)\">atm(a)</option>\n                            <option value=\"kp/cmÂ²(a)\">kp/cmÂ²(a)</option>\n                            <option value=\"N/mÂ²(a)\">N/mÂ²(a)</option>\n                            <option value=\"N/mmÂ²(a)\">N/mmÂ²(a)</option>\n                            <option value=\"Torr(a)\">Torr(a)</option>\n                            <option value=\"mmHg(a)\">mmHg(a)</option>\n                            <option value=\"mmH2O(a)\">mmH2O(a)</option>\n                            <option value=\"psi(a)\">psi(a)</option>\n                            <option value=\"ftH2O(a)\">ftH2O(a)</option>\n                            <option value=\"inHg(a)\">inHg(a)</option>\n                            <option value=\"inH2O(a)\">inH2O(a)</option>\n                            <option value=\"lbf/ftÂ²(a)\">lbf/ftÂ²(a)</option>\n                            <option value=\"bar(g)\">bar(g)</option>\n                            <option value=\"mbar(g)\">mbar(g)</option>\n                            <option value=\"Pa(g)\">Pa(g)</option>\n                            <option value=\"kPa(g)\">kPa(g)</option>\n                            <option value=\"MPa(g)\">MPa(g)</option>\n                            <option value=\"at(g)\">at(g)</option>\n                            <option value=\"atm(g)\">atm(g)</option>\n                            <option value=\"kp/cmÂ²(g)\">kp/cmÂ²(g)</option>\n                            <option value=\"N/mÂ²(g)\">N/mÂ²(g)</option>\n                            <option value=\"N/mmÂ²(g)\">N/mmÂ²(g)</option>\n                            <option value=\"Torr(g)\">Torr(g)</option>\n                            <option value=\"mmHg(g)\">mmHg(g)</option>\n                            <option value=\"mmH2O(g)\">mmH2O(g)</option>\n                            <option value=\"psi(g)\">psi(g)</option>\n                            <option value=\"ftH2O(g)\">ftH2O(g)</option>\n                            <option value=\"inHg(g)\">inHg(g)</option>\n                            <option value=\"inH2O(g)\">inH2O(g)</option>\n                            <option value=\"lbf/ftÂ²(g)\">lbf/ftÂ²(g)</option>\n                            <option value=\"kgf/cmÂ²(a)\">kgf/cmÂ²(a)</option>\n                            <option value=\"kgf/cmÂ²(g)\">kgf/cmÂ²(g)</option>\n                          </select>\n                        </td>\n                      </tr>\n                      <tr>\n                        <td>\n                          <div className=\"radio-group\">\n                            <div className=\"radio-label\">\n                              <label><input type=\"radio\" name=\"dpType\" value=\"DP\" checked={!currentValve.isP2} onChange={(e) => handleRadioChange('isP2', !e.target.checked)} disabled={isReadOnly} /></label>\n                            </div>\n                            Î”p\n          </div>\n                        </td>\n                        <td><input id=\"dp-max\" name=\"dpMax\" type=\"number\" value={currentValve.fluid.dp.max === 0 ? '' : currentValve.fluid.dp.max} onChange={(e) => handleFluidConditionChange('dp', 'max', parseFloat(e.target.value) || 0)} disabled={currentValve.isP2 || isReadOnly} className={currentValve.isP2 ? 'disabled-input' : ''} /></td>\n                        <td><input id=\"dp-normal\" name=\"dpNormal\" type=\"number\" value={currentValve.fluid.dp.normal === 0 ? '' : currentValve.fluid.dp.normal} onChange={(e) => handleFluidConditionChange('dp', 'normal', parseFloat(e.target.value) || 0)} disabled={currentValve.isP2 || isReadOnly} className={currentValve.isP2 ? 'disabled-input' : ''} /></td>\n                        <td><input id=\"dp-min\" name=\"dpMin\" type=\"number\" value={currentValve.fluid.dp.min === 0 ? '' : currentValve.fluid.dp.min} onChange={(e) => handleFluidConditionChange('dp', 'min', parseFloat(e.target.value) || 0)} disabled={currentValve.isP2 || isReadOnly} className={currentValve.isP2 ? 'disabled-input' : ''} /></td>\n                        <td>\n                          <select \n                            id=\"dp-unit\" \n                            name=\"dpUnit\"\n                            value={currentValve.fluid.pressureUnit}\n                            onChange={(e) => handleUnitChange('pressureUnit', e.target.value)}\n                            disabled={currentValve.isP2 || isReadOnly}\n                            className={currentValve.isP2 ? 'disabled-input' : ''}\n                          >\n                            <option value=\"bar(a)\">bar(a)</option>\n                            <option value=\"mbar(a)\">mbar(a)</option>\n                            <option value=\"Pa(a)\">Pa(a)</option>\n                            <option value=\"kPa(a)\">kPa(a)</option>\n                            <option value=\"MPa(a)\">MPa(a)</option>\n                            <option value=\"at(a)\">at(a)</option>\n                            <option value=\"atm(a)\">atm(a)</option>\n                            <option value=\"kp/cmÂ²(a)\">kp/cmÂ²(a)</option>\n                            <option value=\"N/mÂ²(a)\">N/mÂ²(a)</option>\n                            <option value=\"N/mmÂ²(a)\">N/mmÂ²(a)</option>\n                            <option value=\"Torr(a)\">Torr(a)</option>\n                            <option value=\"mmHg(a)\">mmHg(a)</option>\n                            <option value=\"mmH2O(a)\">mmH2O(a)</option>\n                            <option value=\"psi(a)\">psi(a)</option>\n                            <option value=\"ftH2O(a)\">ftH2O(a)</option>\n                            <option value=\"inHg(a)\">inHg(a)</option>\n                            <option value=\"inH2O(a)\">inH2O(a)</option>\n                            <option value=\"lbf/ftÂ²(a)\">lbf/ftÂ²(a)</option>\n                            <option value=\"bar(g)\">bar(g)</option>\n                            <option value=\"mbar(g)\">mbar(g)</option>\n                            <option value=\"Pa(g)\">Pa(g)</option>\n                            <option value=\"kPa(g)\">kPa(g)</option>\n                            <option value=\"MPa(g)\">MPa(g)</option>\n                            <option value=\"at(g)\">at(g)</option>\n                            <option value=\"atm(g)\">atm(g)</option>\n                            <option value=\"kp/cmÂ²(g)\">kp/cmÂ²(g)</option>\n                            <option value=\"N/mÂ²(g)\">N/mÂ²(g)</option>\n                            <option value=\"N/mmÂ²(g)\">N/mmÂ²(g)</option>\n                            <option value=\"Torr(g)\">Torr(g)</option>\n                            <option value=\"mmHg(g)\">mmHg(g)</option>\n                            <option value=\"mmH2O(g)\">mmH2O(g)</option>\n                            <option value=\"psi(g)\">psi(g)</option>\n                            <option value=\"ftH2O(g)\">ftH2O(g)</option>\n                            <option value=\"inHg(g)\">inHg(g)</option>\n                            <option value=\"inH2O(g)\">inH2O(g)</option>\n                            <option value=\"lbf/ftÂ²(g)\">lbf/ftÂ²(g)</option>\n                            <option value=\"kgf/cmÂ²(a)\">kgf/cmÂ²(a)</option>\n                            <option value=\"kgf/cmÂ²(g)\">kgf/cmÂ²(g)</option>\n                          </select>\n                        </td>\n                      </tr>\n                      <tr>\n                        <td>\n                          <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>\n                            <div style={{ fontSize: '10px' }}>\n                              <label><input type=\"radio\" name=\"qmType\" value=\"Qm\" checked={currentValve.isQM} onChange={(e) => handleRadioChange('isQM', e.target.checked)} disabled={isReadOnly} /></label>\n                            </div>\n                            qm\n                          </div>\n                        </td>\n                        <td><input id=\"qm-max\" name=\"qmMax\" type=\"number\" value={currentValve.fluid.qm.max === 0 ? '' : currentValve.fluid.qm.max} onChange={(e) => handleFluidConditionChange('qm', 'max', parseFloat(e.target.value) || 0)} disabled={!currentValve.isQM || isReadOnly} className={!currentValve.isQM ? 'disabled-input' : ''} /></td>\n                        <td><input id=\"qm-normal\" name=\"qmNormal\" type=\"number\" value={currentValve.fluid.qm.normal === 0 ? '' : currentValve.fluid.qm.normal} onChange={(e) => handleFluidConditionChange('qm', 'normal', parseFloat(e.target.value) || 0)} disabled={!currentValve.isQM || isReadOnly} className={!currentValve.isQM ? 'disabled-input' : ''} /></td>\n                        <td><input id=\"qm-min\" name=\"qmMin\" type=\"number\" value={currentValve.fluid.qm.min === 0 ? '' : currentValve.fluid.qm.min} onChange={(e) => handleFluidConditionChange('qm', 'min', parseFloat(e.target.value) || 0)} disabled={!currentValve.isQM || isReadOnly} className={!currentValve.isQM ? 'disabled-input' : ''} /></td>\n                        <td>\n                          <select \n                            id=\"qm-unit\" \n                            name=\"qmUnit\"\n                            value={currentValve.fluid.qm.unit}\n                            onChange={(e) => handleFluidConditionChange('qm', 'unit', e.target.value)}\n                            disabled={!currentValve.isQM || isReadOnly}\n                            className={!currentValve.isQM ? 'disabled-input' : ''}\n                          >\n                            <option value=\"mÂ³/h\">mÂ³/h</option>\n                            <option value=\"mÂ³/s\">mÂ³/s</option>\n                            <option value=\"mÂ³/d\">mÂ³/d</option>\n                            <option value=\"l/h\">l/h</option>\n                            <option value=\"l/s\">l/s</option>\n                            <option value=\"l/min\">l/min</option>\n                            <option value=\"GPH(US)\">GPH(US)</option>\n                            <option value=\"GPM(US)\">GPM(US)</option>\n                            <option value=\"MMSCFD\">MMSCFD</option>\n                            <option value=\"MSCFD\">MSCFD</option>\n                            <option value=\"MMSCFH\">MMSCFH</option>\n                            <option value=\"MSCFH\">MSCFH</option>\n                            <option value=\"SCFH\">SCFH</option>\n                            <option value=\"MMSCFM\">MMSCFM</option>\n                            <option value=\"MSCFM\">MSCFM</option>\n                            <option value=\"SCFM\">SCFM</option>\n                            <option value=\"GPH(UK)\">GPH(UK)</option>\n                            <option value=\"GPM(UK)\">GPM(UK)</option>\n                            <option value=\"dmÂ³/h\">dmÂ³/h</option>\n                            <option value=\"MMSCMD\">MMSCMD</option>\n                            <option value=\"MSCMD\">MSCMD</option>\n                            <option value=\"MMSCMH\">MMSCMH</option>\n                            <option value=\"MSCMH\">MSCMH</option>\n                            <option value=\"MMSCMM\">MMSCMM</option>\n                            <option value=\"MSCMM\">MSCMM</option>\n                            <option value=\"bbl/d(US)\">bbl/d(US)</option>\n                            <option value=\"bbl/d(oil)\">bbl/d(oil)</option>\n                            <option value=\"bbl/d(UK)\">bbl/d(UK)</option>\n                            <option value=\"bbl/h(US)\">bbl/h(US)</option>\n                            <option value=\"bbl/h(oil)\">bbl/h(oil)</option>\n                            <option value=\"bbl/h(UK)\">bbl/h(UK)</option>\n                          </select>\n                        </td>\n                      </tr>\n                      <tr>\n                        <td>\n                          <div className=\"radio-group\">\n                            <div className=\"radio-label\">\n                              <label><input type=\"radio\" name=\"qnType\" value=\"Qn\" checked={!currentValve.isQM} onChange={(e) => handleRadioChange('isQM', !e.target.checked)} disabled={isReadOnly} /></label>\n                            </div>\n                            qn\n                          </div>\n                        </td>\n                        <td><input id=\"qn-max\" name=\"qnMax\" type=\"number\" value={currentValve.fluid.qn.max === 0 ? '' : currentValve.fluid.qn.max} onChange={(e) => handleFluidConditionChange('qn', 'max', parseFloat(e.target.value) || 0)} disabled={currentValve.isQM || isReadOnly} className={currentValve.isQM ? 'disabled-input' : ''} /></td>\n                        <td><input id=\"qn-normal\" name=\"qnNormal\" type=\"number\" value={currentValve.fluid.qn.normal === 0 ? '' : currentValve.fluid.qn.normal} onChange={(e) => handleFluidConditionChange('qn', 'normal', parseFloat(e.target.value) || 0)} disabled={currentValve.isQM || isReadOnly} className={currentValve.isQM ? 'disabled-input' : ''} /></td>\n                        <td><input id=\"qn-min\" name=\"qnMin\" type=\"number\" value={currentValve.fluid.qn.min === 0 ? '' : currentValve.fluid.qn.min} onChange={(e) => handleFluidConditionChange('qn', 'min', parseFloat(e.target.value) || 0)} disabled={currentValve.isQM || isReadOnly} className={currentValve.isQM ? 'disabled-input' : ''} /></td>\n                        <td>\n                          <select \n                            id=\"qn-unit\" \n                            name=\"qnUnit\"\n                            value={currentValve.fluid.qn.unit}\n                            onChange={(e) => handleFluidConditionChange('qn', 'unit', e.target.value)}\n                            disabled={currentValve.isQM || isReadOnly}\n                            className={currentValve.isQM ? 'disabled-input' : ''}\n                          >\n                            <option value=\"mÂ³/h\">mÂ³/h</option>\n                            <option value=\"GPM(US)\">GPM(US)</option>\n                          </select>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                  </div>\n                  \n                <div className=\"specification-grid\">\n                  <div className=\"spec-section\">\n                    <h4>BODY</h4>\n                    <div className=\"body-spec-grid\">\n                      <div className=\"body-spec-item\">\n                        <label>Type</label>\n                        <input\n                          id=\"body-type\"\n                          name=\"bodyType\"\n                          type=\"text\"\n                          value={currentValve.body.type}\n                          readOnly\n                        />\n                      </div>\n                      <div className=\"spec-item\">\n                        <label>Size</label>\n                        <div className=\"size-selection-group\">\n                          <select \n                            id=\"body-size-unit\"\n                            name=\"bodySizeUnit\"\n                            value={currentValve.body.sizeUnit}\n                            onChange={(e) => {\n                              handleBodyChange('sizeUnit', e.target.value);\n                              // ë‹¨ìœ„ê°€ ë³€ê²½ë˜ë©´ size ì´ˆê¸°í™”\n                              handleBodyChange('size', '');\n                            }}\n                            disabled={isReadOnly}\n                          >\n                            <option value=\"\">ë‹¨ìœ„</option>\n                            {bodySizeUnits && bodySizeUnits.length > 0 ? bodySizeUnits.map(unit => {\n                              // Unit ì½”ë“œë¥¼ ì‚¬ìš©ì ì¹œí™”ì ì¸ ì´ë¦„ìœ¼ë¡œ ë³€í™˜\n                              let displayName = unit.name;\n                              if (unit.code === 'A') displayName = 'DN';\n                              if (unit.code === 'I') displayName = 'inch';\n                              if (unit.code === 'N') displayName = 'None';\n                              if (unit.code === 'Z') displayName = 'SPECIAL';\n                              \n                              return (\n                                <option key={unit.code} value={unit.code}>\n                                  {displayName}\n                                </option>\n                              );\n                            }) : (\n                              <option value=\"\" disabled>ë¡œë”© ì¤‘...</option>\n                            )}\n                          </select>\n                          <select \n                            id=\"body-size\"\n                            name=\"bodySize\"\n                            value={currentValve.body.size}\n                            onChange={(e) => handleBodyChange('size', e.target.value)}\n                            disabled={!currentValve.body.sizeUnit || isReadOnly}\n                          >\n                            <option value=\"\">ì„ íƒí•˜ì„¸ìš”</option>\n                            {filteredSizeList && filteredSizeList.length > 0 ? filteredSizeList.map(item => (\n                              <option key={`${item.sizeUnitCode}-${item.bodySizeCode}`} value={item.bodySizeCode}>\n                                {item.bodySize}\n                              </option>\n                            )) : (\n                              <option value=\"\" disabled>Size Unitì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”</option>\n                            )}\n                          </select>\n                        </div>\n                      </div>\n                      <div className=\"body-spec-item\">\n                        <label>Material Body</label>\n                        <select \n                          id=\"body-material-body\"\n                          name=\"bodyMaterialBody\"\n                          value={currentValve.body.materialBody}\n                          onChange={(e) => handleBodyChange('materialBody', e.target.value)}\n                          disabled={isReadOnly}\n                        >\n                          <option value=\"\">ì„ íƒí•˜ì„¸ìš”</option>\n                          {bodyMatList.map(item => (\n                            <option key={item.bodyMatCode} value={item.bodyMatCode}>\n                              {item.bodyMat}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n\n                      <div className=\"spec-item\">\n                        <label>Rating</label>\n                        <div className=\"rating-selection-group\">\n                          <select \n                            id=\"body-rating-unit\"\n                            name=\"bodyRatingUnit\"\n                            value={currentValve.body.ratingUnit}\n                            onChange={(e) => {\n                              handleBodyChange('ratingUnit', e.target.value);\n                              handleBodyChange('rating', '');\n                            }}\n                            disabled={isReadOnly}\n                          >\n                            <option value=\"\">ë‹¨ìœ„</option>\n                            {uniqueRatingUnits.map(unit => (\n                              <option key={unit.code} value={unit.code}>\n                                {unit.name}\n                              </option>\n                            ))}\n                          </select>\n                          <select \n                            id=\"body-rating\"\n                            name=\"bodyRating\"\n                            value={currentValve.body.rating}\n                            onChange={(e) => handleBodyChange('rating', e.target.value)}\n                            disabled={!currentValve.body.ratingUnit || isReadOnly}\n                          >\n                            <option value=\"\">ë“±ê¸‰</option>\n                            {filteredRatingList.map(item => (\n                              <option key={item.id} value={item.ratingCode}>\n                                {item.ratingName}\n                              </option>\n                            ))}\n                          </select>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"spec-section\">\n                    <h4>Trim</h4>\n                    <div className=\"spec-grid\">\n                      <div className=\"spec-item\">\n                        <label>Material Trim</label>\n                        <select \n                          id=\"trim-material-trim\"\n                          name=\"trimMaterialTrim\"\n                          value={currentValve.body.materialTrim}\n                          onChange={(e) => handleBodyChange('materialTrim', e.target.value)}\n                          disabled={isReadOnly}\n                        >\n                          <option value=\"\">ì„ íƒí•˜ì„¸ìš”</option>\n                          {trimMatList.map(item => (\n                            <option key={item.trimMatCode} value={item.trimMatCode}>\n                              {item.trimMat}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                      <div className=\"spec-item\">\n                        <label>Option</label>\n                        <select \n                          id=\"trim-option\"\n                          name=\"trimOption\"\n                          value={currentValve.body.option}\n                          onChange={(e) => handleBodyChange('option', e.target.value)}\n                          disabled={isReadOnly}\n                        >\n                          <option value=\"\">ì„ íƒí•˜ì„¸ìš”</option>\n                          {trimOptionList.map(item => (\n                            <option key={item.trimOptionCode} value={item.trimOptionCode}>\n                              {item.trimOption}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"spec-section\">\n                    <h4>ACT</h4>\n                    <div className=\"spec-grid\">\n                      <div className=\"spec-item\">\n                        <label>Type</label>\n                        <select \n                          id=\"actuator-type\"\n                          name=\"actuatorType\"\n                          value={currentValve.actuator.type}\n                          onChange={(e) => handleActuatorChange('type', e.target.value)}\n                          disabled={isReadOnly}\n                        >\n                          <option value=\"\">ì„ íƒí•˜ì„¸ìš”</option>\n                          {actuatorTypeOptions.map(option => (\n                            <option key={option} value={option}>{option}</option>\n                          ))}\n                        </select>\n                      </div>\n\n                      <div className=\"spec-item\">\n                        <label>H/W</label>\n                        <select \n                          id=\"actuator-hw\"\n                          name=\"actuatorHw\"\n                          value={currentValve.actuator.hw}\n                          onChange={(e) => handleActuatorChange('hw', e.target.value)}\n                          disabled={isReadOnly}\n                        >\n                          <option value=\"\">ì„ íƒí•˜ì„¸ìš”</option>\n                          {hwOptions.map(option => (\n                            <option key={option} value={option}>{option}</option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              \n              <div className=\"accessory-section\">\n                <h4>Accessory</h4>\n                <table>\n                  <tbody>\n                    <tr>\n                      <td>Positioner</td>\n                      <td>\n                        <select \n                          id=\"accessory-positioner\"\n                          name=\"accessoryPositioner\"\n                          value={currentValve.accessory.positioner.type}\n                          onChange={(e) => handleAccessoryChange('positioner.type', e.target.value)}\n                          disabled={isReadOnly}\n                        >\n                          <option value=\"\">ì„ íƒí•˜ì„¸ìš”</option>\n                          {positionerTypeOptions.map(option => (\n                            <option key={option} value={option}>{option}</option>\n                          ))}\n                        </select>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>Explosion proof</td>\n                      <td>\n                        <select \n                          id=\"accessory-explosion-proof\"\n                          name=\"accessoryExplosionProof\"\n                          value={currentValve.accessory.explosionProof}\n                          onChange={(e) => handleAccessoryChange('explosionProof', e.target.value)}\n                          disabled={isReadOnly}\n                        >\n                          <option value=\"\">ì„ íƒí•˜ì„¸ìš”</option>\n                          {explosionProofOptions.map(option => (\n                            <option key={option} value={option}>{option}</option>\n                          ))}\n                        </select>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>Transmitter</td>\n                      <td>\n                        <select \n                          id=\"accessory-transmitter\"\n                          name=\"accessoryTransmitter\"\n                          value={currentValve.accessory.transmitter.type}\n                          onChange={(e) => handleAccessoryChange('transmitter.type', e.target.value)}\n                          disabled={isReadOnly}\n                        >\n                          <option value=\"\">ì„ íƒí•˜ì„¸ìš”</option>\n                          {transmitterTypeOptions.map(option => (\n                            <option key={option} value={option}>{option}</option>\n                          ))}\n                        </select>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>Solenoid Valve</td>\n                      <td>\n                        <select \n                          id=\"accessory-solenoid-valve\"\n                          name=\"accessorySolenoidValve\"\n                          value={currentValve.accessory.solenoidValve.exists ? 'Yes' : 'No'}\n                          onChange={(e) => handleAccessoryChange('solenoidValve.exists', e.target.value === 'Yes')}\n                          disabled={isReadOnly}\n                        >\n                          <option value=\"No\">No</option>\n                          <option value=\"Yes\">Yes</option>\n                        </select>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>Limit Switch</td>\n                      <td>\n                        <select \n                          id=\"accessory-limit-switch\"\n                          name=\"accessoryLimitSwitch\"\n                          value={currentValve.accessory.limitSwitch.exists ? 'Yes' : 'No'}\n                          onChange={(e) => handleAccessoryChange('limitSwitch.exists', e.target.value === 'Yes')}\n                          disabled={isReadOnly}\n                        >\n                          <option value=\"No\">No</option>\n                          <option value=\"Yes\">Yes</option>\n                        </select>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>Air-set</td>\n                      <td>\n                        <select \n                          id=\"accessory-air-set\"\n                          name=\"accessoryAirSet\"\n                          value={currentValve.accessory.airSet.exists ? 'Yes' : 'No'}\n                          onChange={(e) => handleAccessoryChange('airSet.exists', e.target.value === 'Yes')}\n                          disabled={isReadOnly}\n                        >\n                          <option value=\"No\">No</option>\n                          <option value=\"Yes\">Yes</option>\n                        </select>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>Volume booster</td>\n                      <td>\n                        <select \n                          id=\"accessory-volume-booster\"\n                          name=\"accessoryVolumeBooster\"\n                          value={currentValve.accessory.volumeBooster.exists ? 'Yes' : 'No'}\n                          onChange={(e) => handleAccessoryChange('volumeBooster.exists', e.target.value === 'Yes')}\n                          disabled={isReadOnly}\n                        >\n                          <option value=\"No\">No</option>\n                          <option value=\"Yes\">Yes</option>\n                        </select>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>Air Operated Valve</td>\n                      <td>\n                        <select \n                          id=\"accessory-air-operated-valve\"\n                          name=\"accessoryAirOperatedValve\"\n                          value={currentValve.accessory.airOperatedValve.exists ? 'Yes' : 'No'}\n                          onChange={(e) => handleAccessoryChange('airOperatedValve.exists', e.target.value === 'Yes')}\n                          disabled={isReadOnly}\n                        >\n                          <option value=\"No\">No</option>\n                          <option value=\"Yes\">Yes</option>\n                        </select>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>Lockup Valve</td>\n                      <td>\n                        <select \n                          id=\"accessory-lockup-valve\"\n                          name=\"accessoryLockupValve\"\n                          value={currentValve.accessory.lockupValve.exists ? 'Yes' : 'No'}\n                          onChange={(e) => handleAccessoryChange('lockupValve.exists', e.target.value === 'Yes')}\n                          disabled={isReadOnly}\n                        >\n                          <option value=\"No\">No</option>\n                          <option value=\"Yes\">Yes</option>\n                        </select>\n                      </td>\n                    </tr>\n                    <tr>\n                      <td>Snap-acting relay</td>\n                      <td>\n                        <select \n                          id=\"accessory-snap-acting-relay\"\n                          name=\"accessorySnapActingRelay\"\n                          value={currentValve.accessory.snapActingRelay.exists ? 'Yes' : 'No'}\n                          onChange={(e) => handleAccessoryChange('snapActingRelay.exists', e.target.value === 'Yes')}\n                          disabled={isReadOnly}\n                        >\n                          <option value=\"No\">No</option>\n                          <option value=\"Yes\">Yes</option>\n                        </select>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n            </div>\n          </div>\n          </div>\n        ) : (\n          <div style={{ \n            padding: '20px', \n            textAlign: 'center', \n            color: '#666',\n            backgroundColor: '#f9f9f9',\n            borderRadius: '8px',\n            margin: '10px 0'\n          }}>\n            Step 2ì—ì„œ TagNoë¥¼ ì„ íƒí•˜ë©´ ìƒì„¸ ì‚¬ì–‘ì„ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // ì²¨ë¶€íŒŒì¼ ì„¹ì…˜ (ë©”ëª¨ì´ì œì´ì…˜ìœ¼ë¡œ ë¶„ë¦¬)\n  const AttachmentSection = React.memo(() => {\n    return (\n      <div className=\"attachment-section\">\n        <div className=\"attachment-header\">\n          <h4>ì²¨ë¶€íŒŒì¼</h4>\n          <div className=\"file-upload-container\">\n          <input\n              id=\"file-upload\"\n              name=\"fileUpload\"\n            type=\"file\"\n              multiple \n              onChange={(e) => {\n                if (e.target.files) {\n                  handleFileUpload(e.target.files);\n                }\n              }}\n              accept=\".pdf,.xls,.xlsx,.doc,.docx,.hwp,.jpg,.jpeg,.png,.gif,.bmp,.tiff,.webp,.txt,.zip,.rar,.7z\"\n              style={{ display: 'none' }}\n          />\n          <button \n              className=\"upload-btn\"\n              onClick={() => document.getElementById('file-upload')?.click()}\n              disabled={uploadingFiles}\n            >\n              {uploadingFiles ? 'ì—…ë¡œë“œ ì¤‘...' : 'íŒŒì¼ ì„ íƒ'}\n          </button>\n        </div>\n        </div>\n        <div className=\"attachment-list\">\n          {fileAttachments.length === 0 ? (\n            <div className=\"no-files\">\n              ì²¨ë¶€ëœ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\n            </div>\n          ) : (\n            <div className=\"file-list\">\n              {fileAttachments.map((file, index) => {\n                console.log('ğŸ” ì²¨ë¶€íŒŒì¼ ë Œë”ë§ - ê°„ë‹¨ í…ŒìŠ¤íŠ¸:', index, file.name);\n                return (\n                  <div key={`${file.id || file.uniqueId || file.attachmentId}-${index}`} className=\"file-item\">\n                    <div className=\"file-info\">\n                      <span className=\"file-name\">{file.name}</span>\n                      <span className=\"file-size\">({(() => {\n                        console.log('File size for', file.name, ':', file.size, typeof file.size);\n                        const fileSize = parseInt(file.size) || 0;\n                        if (fileSize === 0) return '0.00';\n                        const sizeInMB = fileSize / 1024 / 1024;\n                        return sizeInMB.toFixed(2);\n                      })()} MB)</span>\n                    </div>\n                    <div className=\"file-actions\">\n                      <button \n                        className=\"delete-btn\"\n                        onClick={() => {\n                          alert('ì‚­ì œ ë²„íŠ¼ í´ë¦­ë¨!');\n                          console.log('ğŸ—‘ï¸ ì‚­ì œ ë²„íŠ¼ í´ë¦­ë¨ - ê°„ë‹¨ í…ŒìŠ¤íŠ¸');\n                        }}\n                      >\n                        ì‚­ì œ\n                      </button>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  });\n\n  // íŒŒì¼ ë³€ê²½ í•¸ë“¤ëŸ¬\n  const handleFileChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files) {\n      const newFiles = Array.from(e.target.files);\n      setAttachments(prev => [...prev, ...newFiles]);\n    }\n  }, []);\n\n  // íŒŒì¼ ì‚­ì œ í•¸ë“¤ëŸ¬\n  const handleRemoveFile = useCallback((index: number) => {\n    setAttachments(prev => prev.filter((_, i) => i !== index));\n  }, []);\n\n  // Ratingê³¼ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ, bodySizeListê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ê³ ìœ í•œ Size Unit ëª©ë¡ì„ ìƒì„±í•©ë‹ˆë‹¤.\n  const bodySizeUnits = useMemo(() => {\n    console.log('ğŸ” bodySizeUnits ìƒì„± ì‹œì‘ - bodySizeList ê¸¸ì´:', bodySizeList?.length);\n    console.log('ğŸ” bodySizeList ì²« ë²ˆì§¸ í•­ëª©:', bodySizeList?.[0]);\n    \n    if (!bodySizeList || bodySizeList.length === 0) {\n      console.log('âŒ bodySizeListê°€ ë¹„ì–´ìˆìŒ');\n      return [];\n    }\n    \n    const unitMap = new Map<string, string>();\n    bodySizeList.forEach((item, index) => {\n      if (index < 3) { // ì²˜ìŒ 3ê°œë§Œ ë¡œê·¸ ì¶œë ¥\n        console.log(`ğŸ” item[${index}]:`, item);\n      }\n      \n      // item.sizeUnitCodeì™€ item.sizeUnitì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸\n      if (item.sizeUnitCode && item.sizeUnit && !unitMap.has(item.sizeUnitCode)) {\n        unitMap.set(item.sizeUnitCode, item.sizeUnit);\n        console.log(`âœ… Unit ì¶”ê°€: ${item.sizeUnitCode} -> ${item.sizeUnit}`);\n      } else {\n        console.log(`âŒ Unit ì¶”ê°€ ì‹¤íŒ¨: sizeUnitCode=${item.sizeUnitCode}, sizeUnit=${item.sizeUnit}`);\n      }\n    });\n    \n    // Ratingê³¼ ë™ì¼í•œ { code, name } í˜•íƒœë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.\n    const units = Array.from(unitMap, ([code, name]) => ({ code, name }));\n    console.log('ğŸ” ìƒì„±ëœ bodySizeUnits:', units);\n    console.log('ğŸ” bodySizeUnits ê¸¸ì´:', units.length);\n    \n    const sortedUnits = units.sort((a, b) => customSort(a.name, b.name));\n    console.log('ğŸ” ì •ë ¬ëœ bodySizeUnits:', sortedUnits);\n    \n    return sortedUnits;\n  }, [bodySizeList]);\n\n  // Ratingê³¼ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ, ì„ íƒëœ Size Unitì— í•´ë‹¹í•˜ëŠ” Size ëª©ë¡ì„ í•„í„°ë§í•©ë‹ˆë‹¤.\n  const filteredSizeList = useMemo(() => {\n    if (!currentValve || !currentValve.body.sizeUnit) { // sizeUnitì€ ì´ì œ ì½”ë“œì…ë‹ˆë‹¤.\n      return [];\n    }\n    return bodySizeList.filter(item => item.sizeUnitCode === currentValve.body.sizeUnit);\n  }, [currentValve, bodySizeList]);\n\n  // Size ì„¹ì…˜ ë””ë²„ê¹…ì„ ìœ„í•œ useEffect\n  useEffect(() => {\n    if (currentValve) {\n      console.log('ğŸ” Size ì„¹ì…˜ ìƒíƒœ í™•ì¸:', {\n        hasCurrentValve: !!currentValve,\n        bodySizeUnits: bodySizeUnits,\n        filteredSizeList: filteredSizeList,\n        currentSizeUnit: currentValve?.body?.sizeUnit,\n        currentSize: currentValve?.body?.size\n      });\n    }\n  }, [currentValve, bodySizeUnits, filteredSizeList]);\n\n  useEffect(() => {\n    const userStr = localStorage.getItem('user');\n    if (userStr) {\n      setCurrentUser(JSON.parse(userStr));\n    }\n    \n    // ì„ íƒëœ ê³ ê° ì •ë³´ ê°€ì ¸ì˜¤ê¸°\n    const customerStr = localStorage.getItem('selectedCustomer');\n    if (customerStr) {\n      setSelectedCustomer(JSON.parse(customerStr));\n    }\n\n    // readonly ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° í™•ì¸\n    const readonlyParam = searchParams.get('readonly');\n    console.log('NewEstimateRequestPage - readonlyParam:', readonlyParam);\n    console.log('NewEstimateRequestPage - searchParams:', Object.fromEntries(searchParams.entries()));\n    \n    if (readonlyParam === 'true') {\n      setIsReadOnly(true);\n      console.log('NewEstimateRequestPage - isReadOnly set to true');\n    } else {\n      setIsReadOnly(false);\n      console.log('NewEstimateRequestPage - isReadOnly set to false');\n    }\n  }, [searchParams]);\n\n  return (\n    <div className=\"new-estimate-request-page dashboard-page\">\n      {/* í—¤ë” */}\n      <div className=\"page-header\">\n        <button className=\"back-button\" onClick={() => navigate(-1)}>\n          â† {isReadOnly ? 'ê²¬ì ìš”ì²­ ì¡°íšŒ' : 'ê²¬ì ìš”ì²­'}\n        </button>\n        <h1>{isReadOnly ? 'ê²¬ì  ìƒì„¸ ì¡°íšŒ' : 'ê²¬ì  ìš”ì²­'}</h1>\n\n      </div>\n\n      {/* í”„ë¡œì íŠ¸ ì •ë³´ */}\n      <div className=\"status-section\">\n        <div className=\"project-group\">\n          <label>í”„ë¡œì íŠ¸ëª…:</label>\n          <input \n            type=\"text\" \n            value={projectName} \n            onChange={(e) => setProjectName(e.target.value)}\n            placeholder=\"í”„ë¡œì íŠ¸ëª…ì„ ì…ë ¥í•˜ì„¸ìš”\"\n            className=\"project-input\" \n            disabled={isReadOnly}\n          />\n        </div>\n      </div>\n\n      {/* ë©”ì¸ ì½˜í…ì¸  */}\n      {/* ìƒë‹¨ 2ì—´ íŒ¨ë„: ê²¬ì  ìƒì„¸ ì •ë³´ + ê´€ë¦¬ ì²¨ë¶€íŒŒì¼ */}\n      <div className=\"top-two-panel\">\n        {/* ê²¬ì  ìƒì„¸ ì •ë³´ */}\n        <div className=\"mini-card estimate-summary\">\n          <div className=\"mini-card-header\">ê²¬ì  ì„¸ë¶€ ì •ë³´</div>\n          <div className=\"mini-card-body summary-grid\">\n            <div className=\"summary-item\"><span className=\"label\">ê²¬ì ë²ˆí˜¸</span><strong className=\"value\">{tempEstimateNo || '-'}</strong></div>\n            <div className=\"summary-item\"><span className=\"label\">ìƒíƒœ</span><strong className=\"value\">{uiStatusText}</strong></div>\n            <div className=\"summary-item\"><span className=\"label\">íšŒì‚¬ëª…</span><strong className=\"value\">{selectedCustomer?.companyName || selectedCustomer?.name || '-'}</strong></div>\n            <div className=\"summary-item\"><span className=\"label\">ìˆ˜ëŸ‰</span><strong className=\"value\">{totalQty}</strong></div>\n            <div className=\"summary-item\"><span className=\"label\">ìš”ì²­ì</span><strong className=\"value\">{currentUser?.name || currentUser?.userName || '-'}</strong></div>\n            <div className=\"summary-item\"><span className=\"label\">ìš”ì²­ì¼ì</span><strong className=\"value\">{new Date().toISOString().slice(0,10).replaceAll('-','.')}</strong></div>\n            <div className=\"summary-item\"><span className=\"label\">ë‹´ë‹¹ì</span><strong className=\"value\">-</strong></div>\n            <div className=\"summary-item\"><span className=\"label\">ì™„ë£Œì¼ì</span><strong className=\"value\">-</strong></div>\n          </div>\n        </div>\n\n        {/* ê´€ë¦¬ ì²¨ë¶€íŒŒì¼ (ê³ ê°ìš© ë‹¤ìš´ë¡œë“œ) */}\n        <div className=\"mini-card manager-files\">\n          <div className=\"mini-card-header\">ê´€ë¦¬ ì²¨ë¶€íŒŒì¼</div>\n          <div className=\"mini-card-body\">\n            {/* ìƒíƒœë³„ ì•ˆë‚´/í‘œì‹œ */}\n            {(() => {\n              // ì™„ë£Œ/ì£¼ë¬¸ë§Œ íŒŒì¼ í‘œì‹œ, ê·¸ ì™¸ ìƒíƒœëŠ” ì•ˆë‚´ ë¬¸êµ¬\n              // í˜„ì¬ í˜ì´ì§€ëŠ” ì‹ ê·œ/ìš”ì²­ íë¦„ì´ë¼ ë°±ì—”ë“œ statusê°€ ì—†ìœ¼ë¯€ë¡œ, ê°„ë‹¨í•œ í…ìŠ¤íŠ¸ ê¸°ì¤€ìœ¼ë¡œ ë¶„ê¸°\n              const statusCode = backendStatus;\n              if (statusCode === 4 || statusCode === 5) {\n                return (\n                  managerAttachments && managerAttachments.length > 0 ? (\n                    <ul className=\"mini-file-list\">\n                      {managerAttachments.map((f: any) => (\n                        <li key={f.attachmentID ?? `${f.fileName}-${f.filePath}`}\n                            className=\"mini-file-item\"\n                            title={f.fileName}>\n                          <span className=\"name\">{f.fileName}</span>\n                          <button className=\"btn btn-link btn-xs\" onClick={() => handleDownloadManagerFile(f)}>ë‹¤ìš´</button>\n                        </li>\n                      ))}\n                    </ul>\n                  ) : (\n                    <div className=\"mini-empty\">íŒŒì¼ ì—†ìŒ</div>\n                  )\n                );\n              }\n              if (statusCode === 3) {\n                return <div className=\"mini-empty\">ë‹´ë‹¹ì ë°°ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ê²¬ì ì„œ ì‘ì„±ì¤‘ì…ë‹ˆë‹¤.</div>;\n              }\n              // 1, 2 ë˜ëŠ” ìƒíƒœê°’ì´ ì—†ì„ ë•Œ ê¸°ë³¸ ë¬¸êµ¬\n              return <div className=\"mini-empty\">ê²¬ì  ìš”ì²­ì„œ ì‘ì„±ì„ ë¨¼ì € ë¶€íƒë“œë¦½ë‹ˆë‹¤. ì´í›„ ë‹´ë‹¹ì ë°°ì • ë„ì™€ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</div>;\n            })()}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"main-content-detail\">\n        <div className=\"steps-container\">\n          {/* Step 1, 2, 3 í†µí•© ì„¹ì…˜ */}\n          <div className=\"step-section\">\n            <div className=\"step-header\">\n              <h3>ê²¬ì  ìƒì„¸ ì •ë³´</h3>\n            </div>\n            \n            {/* Step 1: Type ì„ ì • */}\n            <div className=\"step-subsection\">\n              <h4>Step 1: Type ì„ ì •</h4>\n              <p className=\"step-description-req\">ê²¬ì ì— í•„ìš”í•œ ë°¸ë¸Œ íƒ€ì…ì„ ì„ íƒí•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.</p>\n              <div className=\"type-header\">\n                <div className=\"type-actions\">\n                  <button onClick={handleAddType} disabled={isReadOnly}>ì¶”ê°€</button>\n                  <button onClick={() => selectedType && handleRemoveType(types.findIndex(type => type.id === selectedType))} disabled={isReadOnly}>ì‚­ì œ</button>\n                </div>\n              </div>\n              <DndContext\n                sensors={sensors}\n                collisionDetection={closestCenter}\n                onDragEnd={handleTypeDragEnd}\n              >\n                <SortableContext\n                  items={types.map(item => item.id)}\n                  strategy={verticalListSortingStrategy}\n                >\n                  {types.map((item, index) => (\n                    <SortableItem key={item.id} id={item.id}>\n                      <div \n                        className={`type-item ${selectedType === item.id ? 'selected' : ''}`}\n                        onClick={(e) => {\n                          e.preventDefault();\n                          e.stopPropagation();\n                          setSelectedType(item.id);\n                        }}\n                        onMouseDown={(e) => {\n                          e.preventDefault();\n                          e.stopPropagation();\n                        }}\n                        style={{ \n                          cursor: 'pointer', \n                          userSelect: 'none',\n                          pointerEvents: 'auto'\n                        }}\n                      >\n                        <span>{item.name} ({valves.filter(valve => valve.body.type === item.name).reduce((sum, valve) => sum + valve.qty, 0)})</span>\n                      </div>\n                    </SortableItem>\n                  ))}\n                </SortableContext>\n              </DndContext>\n              \n              {/* ë“œë¡­ë‹¤ìš´ì„ TypeSection ì•ˆì— ë Œë”ë§ */}\n              {showValveDropdown && (\n                <div className=\"valve-dropdown\" style={{ \n                  position: 'relative',\n                  backgroundColor: 'white', \n                  border: '2px solid #007bff',\n                  borderRadius: '4px',\n                  boxShadow: '0 2px 8px rgba(0, 0, 0, 0.15)',\n                  maxHeight: '150px',\n                  overflowY: 'auto',\n                  marginTop: '5px'\n                }}>\n                  {bodyValveList.map((valve) => (\n                    <div\n                      key={valve.valveSeriesCode}\n                      onClick={() => handleValveSelect(valve)}\n                      style={{ \n                        padding: '8px 12px', \n                        cursor: 'pointer',\n                        borderBottom: '1px solid #eee',\n                        fontSize: '14px'\n                      }}\n                      onMouseEnter={(e) => e.currentTarget.style.backgroundColor = '#f5f5f5'}\n                      onMouseLeave={(e) => e.currentTarget.style.backgroundColor = 'white'}\n                    >\n                      {valve.valveSeries}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/* Step 2: TagNo ì¶”ê°€ */}\n            <div className=\"step-subsection\">\n              <h4>Step 2: TagNo ì¶”ê°€</h4>\n              <p className=\"step-description-req\">ì„ íƒëœ1 íƒ€ì…ì— ë”°ë¼ TagNoë¥¼ ì¶”ê°€í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.</p>\n              {ValveSection()}\n            </div>\n\n            {/* Step 3: ìƒì„¸ì‚¬ì–‘ ì…ë ¥ */}\n            <div className=\"step-subsection\">\n              <h4>Step 3: ìƒì„¸ì‚¬ì–‘ ì…ë ¥</h4>\n              <p className=\"step-description-req\">BODY, Trim, ACT, Accessoryì˜ ìƒì„¸ ì‚¬ì–‘ì„ ì…ë ¥í•©ë‹ˆë‹¤.</p>\n              {SpecificationSection()}\n            </div>\n          </div>\n\n          {/* ê¸°íƒ€ìš”ì²­ì‚¬í•­ + ì²¨ë¶€íŒŒì¼ (2ì—´ ì»´íŒ©íŠ¸) */}\n          <div className=\"step-section compact-two-panel\">\n            <div className=\"compact-box other-requests-compact\">\n              <CustomerRequirementComponent\n                value={customerRequirement}\n                onChange={setCustomerRequirement}\n                isReadOnly={isReadOnly}\n              />\n          </div>\n\n            <div className=\"compact-box attachments-compact\">\n              <span className=\"compact-label\">ì²¨ë¶€íŒŒì¼</span>\n              <div className=\"file-upload-container compact\">\n                <input\n                  id=\"file-upload\"\n                  name=\"fileUpload\"\n                  type=\"file\"\n                  multiple \n                  onChange={(e) => {\n                    if (e.target.files) {\n                      handleFileUpload(e.target.files);\n                    }\n                  }}\n                  accept=\".pdf,.xls,.xlsx,.doc,.docx,.hwp,.jpg,.jpeg,.png,.gif,.bmp,.tiff,.webp,.txt,.zip,.rar,.7z\"\n                  style={{ display: 'none' }}\n                />\n                <button \n                  className=\"upload-btn compact\"\n                  onClick={() => document.getElementById('file-upload')?.click()}\n                  disabled={uploadingFiles}\n                >\n                  {uploadingFiles ? 'ì—…ë¡œë“œ ì¤‘...' : 'íŒŒì¼ ì„ íƒ'}\n                </button>\n                <span className=\"file-count\">{attachments?.length || 0}ê°œ</span>\n              </div>\n              {/* ìƒë‹¨ ìš”ì•½ ì˜ì—­ì—ì„œë„ íŒŒì¼ëª… ê°„ë‹¨ í‘œì‹œ */}\n              {attachments && attachments.length > 0 && (\n                <ul className=\"compact-file-list\">\n                  {attachments.slice(0, 5).map((f: any, idx: number) => (\n                    <li key={(f.id || f.uniqueId || f.attachmentId || idx) + '-compact'} title={f.name}>\n                      {f.isPending ? 'â³ ' : ''}{f.name}\n                    </li>\n                  ))}\n                  {attachments.length > 5 && (\n                    <li className=\"more\">ì™¸ {attachments.length - 5}ê°œâ€¦</li>\n                  )}\n                </ul>\n              )}\n            </div>\n          </div>\n\n          {/* í•˜ë‹¨ ê´€ë¦¬ ì²¨ë¶€íŒŒì¼ ì„¹ì…˜ ì œê±°ë¨ */}\n        </div>\n      </div>\n\n      {/* í•˜ë‹¨ ì•¡ì…˜ ë²„íŠ¼ë“¤ */}\n      {!isReadOnly ? (\n        <div className=\"bottom-actions\">\n          <div className=\"action-buttons\">\n            <button \n              type=\"button\" \n              className=\"btn btn-secondary\"\n              onClick={() => navigate('/dashboard/estimate-requests')}\n            >\n              ëª©ë¡ìœ¼ë¡œ\n            </button>\n            <button \n              type=\"button\" \n              className=\"btn btn-secondary\"\n              onClick={handleSaveDraft}\n            >\n              ì„ì‹œì €ì¥\n            </button>\n            <button \n              type=\"button\" \n              className=\"btn btn-primary\"\n              onClick={handleSubmitEstimate}\n            >\n              ê²¬ì ìš”ì²­\n            </button>\n          </div>\n        </div>\n      ) : (\n        <div className=\"bottom-actions\">\n          <div className=\"action-buttons\">\n            <button \n              type=\"button\" \n              className=\"btn btn-secondary\"\n              onClick={() => navigate('/dashboard/estimate-inquiry')}\n            >\n              ëª©ë¡ìœ¼ë¡œ\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default NewEstimateRequestPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}