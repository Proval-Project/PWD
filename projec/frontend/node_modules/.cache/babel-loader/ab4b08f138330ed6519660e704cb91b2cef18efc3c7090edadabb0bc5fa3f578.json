{"ast":null,"code":"var _jsxFileName = \"/Users/simjimin/Downloads/final_develop/projec/frontend/src/pages/Dashboard/EstimateDetailPage.tsx\",\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useRef, useMemo } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { getEstimateDetail, assignEstimate } from '../../api/estimateRequest';\nimport './DashboardPages.css';\nimport './EstimateDetailPage.css';\n\n// Îã®ÏúÑ/ÏÇ¨Ïù¥Ï¶à ÎßàÏä§ÌÑ∞ Îç∞Ïù¥ÌÑ∞ ÌÉÄÏûÖ\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// ÌÅ¨Î°úÏä§ÌîåÎû´Ìèº Í≤ΩÎ°ú Ï≤òÎ¶¨Î•º ÏúÑÌïú Ïú†Ìã∏Î¶¨Ìã∞ Ìï®Ïàò\nconst isManagerFile = filePath => {\n  if (!filePath) return false;\n\n  // WindowsÏôÄ Unix Í≤ΩÎ°ú Î™®Îëê ÏßÄÏõê\n  const normalizedPath = filePath.replace(/\\\\/g, '/'); // Windows Î∞±Ïä¨ÎûòÏãúÎ•º Ïä¨ÎûòÏãúÎ°ú Î≥ÄÌôò\n\n  // Îã§ÏñëÌïú Í≤ΩÎ°ú Ìå®ÌÑ¥ ÏßÄÏõê\n  const managerFilePatterns = ['/ResultFiles/', '\\\\ResultFiles\\\\', 'ResultFiles/', 'ResultFiles\\\\'];\n  return managerFilePatterns.some(pattern => normalizedPath.includes(pattern));\n};\n\n// Í≤ΩÎ°úÏóêÏÑú managerFileType Ï∂îÏ∂úÌïòÎäî ÌÅ¨Î°úÏä§ÌîåÎû´Ìèº Ìï®Ïàò\nconst extractManagerFileType = filePath => {\n  if (!filePath) return null;\n  const normalizedPath = filePath.replace(/\\\\/g, '/');\n  const pathParts = normalizedPath.split('/');\n  const resultFilesIndex = pathParts.findIndex(part => part === 'ResultFiles');\n  if (resultFilesIndex !== -1 && resultFilesIndex + 1 < pathParts.length) {\n    return pathParts[resultFilesIndex + 1];\n  }\n  return null;\n};\n\n// CustomerRequest ÌååÏùºÏù∏ÏßÄ ÌôïÏù∏ÌïòÎäî ÌÅ¨Î°úÏä§ÌîåÎû´Ìèº Ìï®Ïàò (ÌïòÏúÑ Í≥†Í∞ùÏöîÏ≤≠ Ï≤®Î∂Ä ÏòÅÏó≠Ïóê ÏÇ¨Ïö©)\nconst isCustomerFile = filePath => {\n  if (!filePath) return false;\n  const normalizedPath = filePath.replace(/\\\\/g, '/');\n  const customerFilePatterns = ['/CustomerRequest/', '\\\\CustomerRequest\\\\', 'CustomerRequest/', 'CustomerRequest\\\\'];\n  return customerFilePatterns.some(pattern => normalizedPath.includes(pattern));\n};\n\n// ResultFiles/customer ÌååÏùºÏù∏ÏßÄ ÌôïÏù∏ (ÏÉÅÎã® \"Í≥†Í∞ù Ï†úÏ∂ú Î¨∏ÏÑú ÏóÖÎ°úÎìú\" Ï†ÑÏö©)\nconst isResultCustomerFile = filePath => {\n  if (!filePath) return false;\n  const normalizedPath = filePath.replace(/\\\\/g, '/').toLowerCase();\n  return normalizedPath.includes('/resultfiles/customer/');\n};\n\n// üîë ÌååÏùº Í¥ÄÎ†® ÌÉÄÏûÖ Ï∂îÍ∞Ä\n\nconst EstimateDetailPage = () => {\n  _s2();\n  var _s = $RefreshSig$();\n  const navigate = useNavigate();\n  const {\n    tempEstimateNo\n  } = useParams();\n\n  // ÏÉÅÌÉú Í¥ÄÎ¶¨\n  const [types, setTypes] = useState([]);\n  const [valves, setValves] = useState([]);\n  const [selectedValve, setSelectedValve] = useState(null);\n  const [selectedType, setSelectedType] = useState('');\n\n  // ÎßàÏä§ÌÑ∞ Îç∞Ïù¥ÌÑ∞\n  const [bodyValveList, setBodyValveList] = useState([]);\n  const [bodySizeList, setBodySizeList] = useState([]);\n  const [bodyMatList, setBodyMatList] = useState([]);\n  const [trimMatList, setTrimMatList] = useState([]);\n  const [trimOptionList, setTrimOptionList] = useState([]);\n  const [bodyRatingList, setBodyRatingList] = useState([]);\n\n  // Step 3 ÎßàÏä§ÌÑ∞ Îç∞Ïù¥ÌÑ∞\n  const [bodyBonnetList, setBodyBonnetList] = useState([]);\n  const [bodyConnectionList, setBodyConnectionList] = useState([]);\n  const [trimTypeList, setTrimTypeList] = useState([]);\n  const [trimSeriesList, setTrimSeriesList] = useState([]);\n  const [trimPortSizeList, setTrimPortSizeList] = useState([]);\n  const [trimFormList, setTrimFormList] = useState([]);\n  const [actTypeList, setActTypeList] = useState([]);\n  const [actSeriesList, setActSeriesList] = useState([]);\n  const [actSizeList, setActSizeList] = useState([]);\n  const [actHWList, setActHWList] = useState([]);\n  const [accMakerList, setAccMakerList] = useState([]);\n  const [accModelList, setAccModelList] = useState([]);\n\n  // Í∏∞ÌÉÄ Îç∞Ïù¥ÌÑ∞\n  const [customerRequirement, setCustomerRequirement] = useState(''); // Í≥†Í∞ù ÏöîÏ≤≠ÏÇ¨Ìï≠\n  const [staffComment, setStaffComment] = useState(''); // Í¥ÄÎ¶¨Ïûê ÏΩîÎ©òÌä∏\n  const [attachments, setAttachments] = useState([]);\n  const [customerAttachments, setCustomerAttachments] = useState([]); // Í≥†Í∞ù ÏöîÏ≤≠ Ï≤®Î∂ÄÌååÏùº\n  const [managerAttachments, setManagerAttachments] = useState([]); // Í¥ÄÎ¶¨ Ï≤®Î∂ÄÌååÏùº\n  const [currentStatus, setCurrentStatus] = useState('Í≤¨Ï†ÅÏöîÏ≤≠');\n  const [isReadOnly, setIsReadOnly] = useState(false); // ÏùΩÍ∏∞ Ï†ÑÏö© ÏÉÅÌÉú \n\n  // üîë ÌååÏùº Í¥ÄÎ¶¨ ÏÉÅÌÉú Ï∂îÍ∞Ä\n  const [managerFiles, setManagerFiles] = useState([]);\n  const [customerFiles, setCustomerFiles] = useState([]);\n  const [isLoadingFiles, setIsLoadingFiles] = useState(false);\n\n  // üîë PDF ÏóÖÎ°úÎìú Í¥ÄÎ†® state Ï∂îÍ∞Ä\n  const [selectedPdfFiles, setSelectedPdfFiles] = useState({\n    datasheet: null,\n    cvlist: null,\n    vllist: null,\n    singlequote: null,\n    multiquote: null\n  });\n\n  // üîë PDF Î∑∞Ïñ¥Î•º ÏúÑÌïú state Ï∂îÍ∞Ä\n  const [uploadedPdfUrls, setUploadedPdfUrls] = useState({\n    datasheet: null,\n    cvlist: null,\n    vllist: null,\n    singlequote: null,\n    multiquote: null\n  });\n\n  // Í≤¨Ï†Å ÏãúÏûë Ïó¨Î∂Ä(UI ÌÜ†Í∏Ä)\n  const [quoteStarted, setQuoteStarted] = useState(false);\n  // ÏÑúÎ•ò Î∞úÍ∏â ÏÉùÏÑ±/Îã§Ïö¥Î°úÎìú ÏßÑÌñâ ÏÉÅÌÉú\n  const [docGenerating, setDocGenerating] = useState({});\n  // ÏöîÏïΩÏπ¥Îìú ÌëúÏãúÍ∞í ÏÉÅÌÉú\n  const [summaryEstimateNo, setSummaryEstimateNo] = useState('-');\n  const [summaryCompanyName, setSummaryCompanyName] = useState('-');\n  const [summaryRequesterName, setSummaryRequesterName] = useState('-');\n  const [summaryRequestDate, setSummaryRequestDate] = useState('-');\n  const [summaryManager, setSummaryManager] = useState('-');\n  const [summaryCompletedDate, setSummaryCompletedDate] = useState('-');\n\n  // üîë ÌååÏùº ÏûÖÎ†• ref Ï∂îÍ∞Ä\n  const fileInputRefs = useRef({\n    datasheet: null,\n    cvlist: null,\n    vllist: null,\n    singlequote: null,\n    multiquote: null\n  });\n\n  // Í≥†Í∞ù Ï≤®Î∂Ä Îã§Ï§ë ÏóÖÎ°úÎìúÏö© ÏÉÅÌÉú\n  const [selectedCustomerFiles, setSelectedCustomerFiles] = useState([]);\n  const customerAddInputRef = useRef(null);\n\n  // ACC ÏÑπÏÖò ÏÑ†ÌÉù ÏÉÅÌÉú Í¥ÄÎ¶¨\n  const [accSelections, setAccSelections] = useState({\n    // Í∞Å ÏïÖÏÑ∏ÏÇ¨Î¶¨Ïùò typeCodeÎ•º ÌïòÎìúÏΩîÎî©Îêú Í∞íÏúºÎ°ú Ï¥àÍ∏∞Ìôî\n    positioner: {\n      typeCode: 'A',\n      makerCode: '',\n      modelCode: '',\n      specification: ''\n    },\n    solenoid: {\n      typeCode: 'B',\n      makerCode: '',\n      modelCode: '',\n      specification: ''\n    },\n    limiter: {\n      typeCode: 'C',\n      makerCode: '',\n      modelCode: '',\n      specification: ''\n    },\n    airSupply: {\n      typeCode: 'D',\n      makerCode: '',\n      modelCode: '',\n      specification: ''\n    },\n    volumeBooster: {\n      typeCode: 'E',\n      makerCode: '',\n      modelCode: '',\n      specification: ''\n    },\n    airOperator: {\n      typeCode: 'F',\n      makerCode: '',\n      modelCode: '',\n      specification: ''\n    },\n    lockUp: {\n      typeCode: 'G',\n      makerCode: '',\n      modelCode: '',\n      specification: ''\n    },\n    snapActingRelay: {\n      typeCode: 'H',\n      makerCode: '',\n      modelCode: '',\n      specification: ''\n    }\n  });\n\n  // Î™®Îì† ÏÉÅÌÉú Î≥ÄÏàò ÏÑ†Ïñ∏ ÌõÑ, Î†åÎçîÎßÅ Ïãú accSelections ÏÉÅÌÉú Î°úÍπÖ\n  //console.log('EstimateDetailPage render - accSelections:', accSelections);\n\n  // TagNoÎ≥Ñ ÏÇ¨Ïö©Ïûê ÏÑ†ÌÉùÍ∞í ÏûÑÏãú Ï†ÄÏû• (TagNo Î≥ÄÍ≤Ω Ïãú Î≥µÏõêÏö©)\n  const [tempSelections, setTempSelections] = useState({});\n  // ÌååÏùº ÎÇ¥ Ìï®ÏàòÎì§ ÏÇ¨Ïù¥ ÏïÑÎ¨¥ Í≥≥Ïóê Ï∂îÍ∞Ä\n  const buildSaveSpecFromSelections = sel => {\n    var _sel$body, _sel$body2, _sel$body3, _sel$body4, _sel$body5, _sel$body6, _sel$body7, _sel$trim, _sel$trim2, _sel$trim3, _sel$trim4, _sel$trim5, _sel$trim6, _sel$trim7, _sel$trim8, _sel$act, _sel$act2, _sel$act3, _sel$act4, _sel$acc, _sel$acc$positioner, _sel$acc2, _sel$acc2$positioner, _sel$acc3, _sel$acc3$solenoid, _sel$acc4, _sel$acc4$solenoid, _sel$acc5, _sel$acc5$limiter, _sel$acc6, _sel$acc6$limiter, _sel$acc7, _sel$acc7$airSupply, _sel$acc8, _sel$acc8$airSupply, _sel$acc9, _sel$acc9$volumeBoost, _sel$acc0, _sel$acc0$volumeBoost, _sel$acc1, _sel$acc1$airOperator, _sel$acc10, _sel$acc10$airOperato, _sel$acc11, _sel$acc11$lockUp, _sel$acc12, _sel$acc12$lockUp, _sel$acc13, _sel$acc13$snapActing, _sel$acc14, _sel$acc14$snapActing;\n    return {\n      valveId: sel.valveTypeCode || '',\n      body: {\n        bonnetType: ((_sel$body = sel.body) === null || _sel$body === void 0 ? void 0 : _sel$body.bonnetType) || '',\n        materialBody: ((_sel$body2 = sel.body) === null || _sel$body2 === void 0 ? void 0 : _sel$body2.materialBody) || '',\n        rating: ((_sel$body3 = sel.body) === null || _sel$body3 === void 0 ? void 0 : _sel$body3.ratingCode) || '',\n        ratingUnit: ((_sel$body4 = sel.body) === null || _sel$body4 === void 0 ? void 0 : _sel$body4.ratingUnitCode) || '',\n        connection: ((_sel$body5 = sel.body) === null || _sel$body5 === void 0 ? void 0 : _sel$body5.connection) || '',\n        sizeUnit: ((_sel$body6 = sel.body) === null || _sel$body6 === void 0 ? void 0 : _sel$body6.sizeBodyUnitCode) || '',\n        size: ((_sel$body7 = sel.body) === null || _sel$body7 === void 0 ? void 0 : _sel$body7.sizeBodyCode) || ''\n      },\n      trim: {\n        type: ((_sel$trim = sel.trim) === null || _sel$trim === void 0 ? void 0 : _sel$trim.trimType) || '',\n        series: ((_sel$trim2 = sel.trim) === null || _sel$trim2 === void 0 ? void 0 : _sel$trim2.trimSeries) || '',\n        portSize: ((_sel$trim3 = sel.trim) === null || _sel$trim3 === void 0 ? void 0 : _sel$trim3.sizePortCode) || '',\n        portSizeUnit: ((_sel$trim4 = sel.trim) === null || _sel$trim4 === void 0 ? void 0 : _sel$trim4.sizePortUnitCode) || '',\n        form: ((_sel$trim5 = sel.trim) === null || _sel$trim5 === void 0 ? void 0 : _sel$trim5.formCode) || ((_sel$trim6 = sel.trim) === null || _sel$trim6 === void 0 ? void 0 : _sel$trim6.form) || '',\n        materialTrim: ((_sel$trim7 = sel.trim) === null || _sel$trim7 === void 0 ? void 0 : _sel$trim7.materialTrim) || '',\n        option: ((_sel$trim8 = sel.trim) === null || _sel$trim8 === void 0 ? void 0 : _sel$trim8.option) || ''\n      },\n      actuator: {\n        type: ((_sel$act = sel.act) === null || _sel$act === void 0 ? void 0 : _sel$act.actionType) || '',\n        series: ((_sel$act2 = sel.act) === null || _sel$act2 === void 0 ? void 0 : _sel$act2.series) || '',\n        size: ((_sel$act3 = sel.act) === null || _sel$act3 === void 0 ? void 0 : _sel$act3.size) || '',\n        hw: ((_sel$act4 = sel.act) === null || _sel$act4 === void 0 ? void 0 : _sel$act4.hw) || ''\n      },\n      accessories: {\n        PosCode: ((_sel$acc = sel.acc) === null || _sel$acc === void 0 ? void 0 : (_sel$acc$positioner = _sel$acc.positioner) === null || _sel$acc$positioner === void 0 ? void 0 : _sel$acc$positioner.modelCode) || null,\n        PosMakerCode: ((_sel$acc2 = sel.acc) === null || _sel$acc2 === void 0 ? void 0 : (_sel$acc2$positioner = _sel$acc2.positioner) === null || _sel$acc2$positioner === void 0 ? void 0 : _sel$acc2$positioner.makerCode) || null,\n        SolCode: ((_sel$acc3 = sel.acc) === null || _sel$acc3 === void 0 ? void 0 : (_sel$acc3$solenoid = _sel$acc3.solenoid) === null || _sel$acc3$solenoid === void 0 ? void 0 : _sel$acc3$solenoid.modelCode) || null,\n        SolMakerCode: ((_sel$acc4 = sel.acc) === null || _sel$acc4 === void 0 ? void 0 : (_sel$acc4$solenoid = _sel$acc4.solenoid) === null || _sel$acc4$solenoid === void 0 ? void 0 : _sel$acc4$solenoid.makerCode) || null,\n        LimCode: ((_sel$acc5 = sel.acc) === null || _sel$acc5 === void 0 ? void 0 : (_sel$acc5$limiter = _sel$acc5.limiter) === null || _sel$acc5$limiter === void 0 ? void 0 : _sel$acc5$limiter.modelCode) || null,\n        LimMakerCode: ((_sel$acc6 = sel.acc) === null || _sel$acc6 === void 0 ? void 0 : (_sel$acc6$limiter = _sel$acc6.limiter) === null || _sel$acc6$limiter === void 0 ? void 0 : _sel$acc6$limiter.makerCode) || null,\n        ASCode: ((_sel$acc7 = sel.acc) === null || _sel$acc7 === void 0 ? void 0 : (_sel$acc7$airSupply = _sel$acc7.airSupply) === null || _sel$acc7$airSupply === void 0 ? void 0 : _sel$acc7$airSupply.modelCode) || null,\n        ASMakerCode: ((_sel$acc8 = sel.acc) === null || _sel$acc8 === void 0 ? void 0 : (_sel$acc8$airSupply = _sel$acc8.airSupply) === null || _sel$acc8$airSupply === void 0 ? void 0 : _sel$acc8$airSupply.makerCode) || null,\n        VolCode: ((_sel$acc9 = sel.acc) === null || _sel$acc9 === void 0 ? void 0 : (_sel$acc9$volumeBoost = _sel$acc9.volumeBooster) === null || _sel$acc9$volumeBoost === void 0 ? void 0 : _sel$acc9$volumeBoost.modelCode) || null,\n        VolMakerCode: ((_sel$acc0 = sel.acc) === null || _sel$acc0 === void 0 ? void 0 : (_sel$acc0$volumeBoost = _sel$acc0.volumeBooster) === null || _sel$acc0$volumeBoost === void 0 ? void 0 : _sel$acc0$volumeBoost.makerCode) || null,\n        AirOpCode: ((_sel$acc1 = sel.acc) === null || _sel$acc1 === void 0 ? void 0 : (_sel$acc1$airOperator = _sel$acc1.airOperator) === null || _sel$acc1$airOperator === void 0 ? void 0 : _sel$acc1$airOperator.modelCode) || null,\n        AirOpMakerCode: ((_sel$acc10 = sel.acc) === null || _sel$acc10 === void 0 ? void 0 : (_sel$acc10$airOperato = _sel$acc10.airOperator) === null || _sel$acc10$airOperato === void 0 ? void 0 : _sel$acc10$airOperato.makerCode) || null,\n        LockupCode: ((_sel$acc11 = sel.acc) === null || _sel$acc11 === void 0 ? void 0 : (_sel$acc11$lockUp = _sel$acc11.lockUp) === null || _sel$acc11$lockUp === void 0 ? void 0 : _sel$acc11$lockUp.modelCode) || null,\n        LockupMakerCode: ((_sel$acc12 = sel.acc) === null || _sel$acc12 === void 0 ? void 0 : (_sel$acc12$lockUp = _sel$acc12.lockUp) === null || _sel$acc12$lockUp === void 0 ? void 0 : _sel$acc12$lockUp.makerCode) || null,\n        SnapActCode: ((_sel$acc13 = sel.acc) === null || _sel$acc13 === void 0 ? void 0 : (_sel$acc13$snapActing = _sel$acc13.snapActingRelay) === null || _sel$acc13$snapActing === void 0 ? void 0 : _sel$acc13$snapActing.modelCode) || null,\n        SnapActMakerCode: ((_sel$acc14 = sel.acc) === null || _sel$acc14 === void 0 ? void 0 : (_sel$acc14$snapActing = _sel$acc14.snapActingRelay) === null || _sel$acc14$snapActing === void 0 ? void 0 : _sel$acc14$snapActing.makerCode) || null\n      }\n    };\n  };\n\n  // ÌòÑÏû¨ ÏÑ†ÌÉùÍ∞íÏùÑ tempSelectionsÏóê Ï†ÄÏû•ÌïòÎäî Ìï®Ïàò\n  const saveCurrentSelections = sheetID => {\n    if (sheetID) {\n      setTempSelections(prev => ({\n        ...prev,\n        [sheetID]: {\n          body: {\n            ...bodySelections\n          },\n          trim: {\n            ...trimSelections\n          },\n          act: {\n            ...actSelections\n          },\n          acc: {\n            ...accSelections\n          }\n        }\n      }));\n      //console.log(`${sheetID}Ïùò ÏÑ†ÌÉùÍ∞íÎì§ÏùÑ ÏûÑÏãú Ï†ÄÏû•ÌñàÏäµÎãàÎã§.`);\n    }\n  };\n\n  // valve ÏÑ†ÌÉù Ïãú Ìò∏Ï∂úÎêòÎäî Ìï®Ïàò\n  const handleValveSelection = valve => {\n    // ÌòÑÏû¨ ÌÉúÍ∑∏ÏóêÏÑú Îñ†ÎÇòÍ∏∞ Ï†Ñ, ÌòÑÏû¨ ÏÑ†ÌÉùÍ∞í ÏûÑÏãú Ï†ÄÏû•\n    if (selectedValve) {\n      setTempSelections(prev => ({\n        ...prev,\n        [selectedValve.sheetID]: {\n          body: {\n            ...bodySelections\n          },\n          trim: {\n            ...trimSelections\n          },\n          act: {\n            ...actSelections\n          },\n          acc: {\n            ...accSelections\n          }\n        }\n      }));\n    }\n    setSelectedValve(valve);\n\n    // ÏÉà ÌÉúÍ∑∏Ïóê ÎåÄÌï¥: ÏûÑÏãúÍ∞í ÏûàÏúºÎ©¥ Í∑∏Í±∏ Î≥µÏõê, ÏóÜÏúºÎ©¥ ÏÑúÎ≤Ñ Ï¥àÍ∏∞Í∞í Î°úÎìú\n    if (tempSelections[valve.sheetID]) {\n      const saved = tempSelections[valve.sheetID];\n      // Î≥µÏõê(Í∞Å selections set Ìï®Ïàò Ìò∏Ï∂ú)\n      setBodySelections(saved.body || {});\n      setTrimSelections(saved.trim || {});\n      setActSelections(saved.act || {});\n      setAccSelections(saved.acc || {});\n    } else {\n      loadInitialSpecification(valve.sheetID);\n    }\n  };\n  const handleTypeSelection = type => {\n    setSelectedType(type.id);\n    setSelectedValve(null); // TypeÏùÑ Î≥ÄÍ≤ΩÌïòÎ©¥ ÏÑ†ÌÉùÎêú ValveÎäî Ï¥àÍ∏∞ÌôîÎê©ÎãàÎã§.\n  };\n\n  // Body ÏÑπÏÖò ÏÑ†ÌÉù ÏÉÅÌÉú Í¥ÄÎ¶¨\n  const [bodySelections, setBodySelections] = useState({\n    bonnetType: '',\n    bonnetTypeCode: '',\n    // Code Í∞í Ï∂îÍ∞Ä\n    materialBody: '',\n    materialBodyCode: '',\n    // Code Í∞í Ï∂îÍ∞Ä\n    sizeBodyUnit: '',\n    sizeBody: '',\n    sizeBodyUnitCode: '',\n    // Code Í∞í Ï∂îÍ∞Ä\n    sizeBodyCode: '',\n    // Code Í∞í Ï∂îÍ∞Ä\n    ratingUnit: '',\n    rating: '',\n    ratingUnitCode: '',\n    // Code Í∞í Ï∂îÍ∞Ä\n    ratingCode: '',\n    // Code Í∞í Ï∂îÍ∞Ä\n    connection: '',\n    connectionCode: '' // Code Í∞í Ï∂îÍ∞Ä\n  });\n\n  // Trim ÏÑπÏÖò ÏÑ†ÌÉù ÏÉÅÌÉú Í¥ÄÎ¶¨\n  const [trimSelections, setTrimSelections] = useState({\n    trimType: '',\n    trimTypeCode: '',\n    // Code Í∞í Ï∂îÍ∞Ä\n    trimSeries: '',\n    trimSeriesCode: '',\n    // Code Í∞í Ï∂îÍ∞Ä\n    materialTrim: '',\n    materialTrimCode: '',\n    // Code Í∞í Ï∂îÍ∞Ä\n    sizePortUnit: '',\n    sizePort: '',\n    sizePortUnitCode: '',\n    // Code Í∞í Ï∂îÍ∞Ä\n    sizePortCode: '',\n    // Code Í∞í Ï∂îÍ∞Ä\n    form: '',\n    formCode: '',\n    // Code Í∞í Ï∂îÍ∞Ä\n    option: '' // Trim Option ÌïÑÎìú Ï∂îÍ∞Ä\n  });\n\n  // ACT ÏÑπÏÖò ÏÑ†ÌÉù ÏÉÅÌÉú Í¥ÄÎ¶¨\n  const [actSelections, setActSelections] = useState({\n    actionType: '',\n    actionTypeCode: '',\n    // Code Í∞í Ï∂îÍ∞Ä\n    series: '',\n    seriesCode: '',\n    // Code Í∞í Ï∂îÍ∞Ä\n    size: '',\n    sizeCode: '',\n    // Code Í∞í Ï∂îÍ∞Ä\n    hw: '',\n    hwCode: '' // Code Í∞í Ï∂îÍ∞Ä\n  });\n\n  // ÏÉÅÌÉú Î∞è ÌîÑÎ°úÏ†ùÌä∏ Ï†ïÎ≥¥\n  const [projectName, setProjectName] = useState('');\n\n  // BodyValveList Í∞ÄÏ†∏Ïò§Í∏∞\n  const fetchBodyValveList = async () => {\n    try {\n      const response = await fetch('http://192.168.0.14:5135/api/estimate/body-valve-list');\n      if (!response.ok) {\n        console.error('body-valve-list ÏöîÏ≤≠ Ïã§Ìå®:', response.status, response.statusText);\n        setBodyValveList([]);\n        return;\n      }\n      const data = await response.json();\n      setBodyValveList(data !== null && data !== void 0 ? data : []);\n    } catch (error) {\n      console.error('BodyValveList Í∞ÄÏ†∏Ïò§Í∏∞ Ïã§Ìå®:', error);\n    }\n  };\n\n  // ACT Size Î™©Î°ù Í∞ÄÏ†∏Ïò§Í∏∞\n  const fetchActSizeList = async actSeriesCode => {\n    try {\n      console.log('fetchActSizeList ÏãúÏûë:', actSeriesCode);\n      const response = await fetch(`http://192.168.0.14:5135/api/masterdata/act/size?actSeriesCode=${actSeriesCode}`);\n      const data = await response.json();\n      console.log('ACT Size API ÏùëÎãµ:', data);\n      setActSizeList(data || []);\n    } catch (error) {\n      console.error('ACT Size Î™©Î°ù Í∞ÄÏ†∏Ïò§Í∏∞ Ïã§Ìå®:', error);\n      setActSizeList([]);\n    }\n  };\n\n  // üîë ÌååÏùº Í¥ÄÎ¶¨ Ìï®ÏàòÎì§ Ï∂îÍ∞Ä\n  const fetchManagerFiles = async () => {\n    if (!tempEstimateNo) return [];\n    try {\n      setIsLoadingFiles(true);\n      console.log('üîÑ fetchManagerFiles ÏãúÏûë - tempEstimateNo:', tempEstimateNo);\n      const response = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/attachments`);\n      console.log('üì° API ÏùëÎãµ ÏÉÅÌÉú:', response.status, response.ok);\n      if (response.ok) {\n        const attachments = await response.json();\n        console.log('üì• API ÏùëÎãµ Îç∞Ïù¥ÌÑ∞:', attachments);\n        console.log('üì• API ÏùëÎãµ Îç∞Ïù¥ÌÑ∞ Í∏∏Ïù¥:', attachments.length);\n\n        // üîë ResultFiles Í≤ΩÎ°úÏùò Î™®Îì† ÌååÏùº Í∞ÄÏ†∏Ïò§Í∏∞ (ÏóëÏÖÄ + PDF)\n        const allManagerFiles = attachments.filter(att => {\n          const filePath = att.path || att.filePath;\n          const isManagerFileResult = filePath && isManagerFile(filePath);\n          console.log('üîç ÌååÏùº ÌïÑÌÑ∞ÎßÅ Ï≤¥ÌÅ¨:', att.name || att.fileName, 'Í≤ΩÎ°ú:', filePath, 'Í¥ÄÎ¶¨ÌååÏùºÏó¨Î∂Ä:', isManagerFileResult);\n          return isManagerFileResult;\n        }).map(att => {\n          // Í≤ΩÎ°úÏóêÏÑú managerFileType Ï∂îÏ∂ú (ÌÅ¨Î°úÏä§ÌîåÎû´Ìèº)\n          const filePath = att.path || att.filePath;\n          att.managerFileType = extractManagerFileType(filePath);\n          console.log('üè∑Ô∏è Ï∂îÏ∂úÎêú managerFileType:', att.managerFileType);\n          return att;\n        });\n        setManagerFiles(allManagerFiles);\n        console.log('‚úÖ Í¥ÄÎ¶¨Ïûê ÌååÏùº Î™©Î°ù Î°úÎìú ÏôÑÎ£å:', allManagerFiles.length, 'Í∞ú');\n        console.log('üîç ÌïÑÌÑ∞ÎßÅÎêú Í¥ÄÎ¶¨ ÌååÏùºÎì§:', allManagerFiles);\n        return allManagerFiles;\n      } else {\n        console.error('‚ùå API ÏùëÎãµ Ïã§Ìå®:', response.status, response.statusText);\n        return [];\n      }\n    } catch (error) {\n      console.error('Í¥ÄÎ¶¨Ïûê ÌååÏùº Î™©Î°ù Ï°∞Ìöå Ï§ë Ïò§Î•ò:', error);\n      return [];\n    } finally {\n      setIsLoadingFiles(false);\n    }\n  };\n  const fetchCustomerFiles = async () => {\n    if (!tempEstimateNo) return;\n    try {\n      setIsLoadingFiles(true);\n      console.log('üîÑ fetchCustomerFiles ÏãúÏûë - tempEstimateNo:', tempEstimateNo);\n      const response = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/attachments`);\n      console.log('üì° API ÏùëÎãµ ÏÉÅÌÉú:', response.status, response.ok);\n      if (response.ok) {\n        const files = await response.json();\n        const onlyResultCustomer = (files || []).filter(att => isResultCustomerFile(att.filePath || att.path));\n        setCustomerFiles(onlyResultCustomer);\n        console.log('‚úÖ Í≥†Í∞ù ÌååÏùº Î™©Î°ù Î°úÎìú ÏôÑÎ£å (ResultFiles/customer ÌïúÏ†ï):', onlyResultCustomer.length, 'Í∞ú');\n      } else {\n        console.error('‚ùå API ÏùëÎãµ Ïã§Ìå®:', response.status, response.statusText);\n      }\n    } catch (error) {\n      console.error('Í≥†Í∞ù ÌååÏùº Î™©Î°ù Ï°∞Ìöå Ï§ë Ïò§Î•ò:', error);\n    } finally {\n      setIsLoadingFiles(false);\n    }\n  };\n  const deleteFile = async managerFileType => {\n    if (!tempEstimateNo) return;\n    if (!window.confirm('Ï†ïÎßêÎ°ú Ïù¥ ÌååÏùºÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {\n      return;\n    }\n    try {\n      const response = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/files/${managerFileType}`, {\n        method: 'DELETE'\n      });\n      if (response.ok) {\n        // ÌååÏùº Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ®\n        await fetchManagerFiles();\n        alert('ÌååÏùºÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.');\n      } else {\n        alert('ÌååÏùº ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n      }\n    } catch (error) {\n      console.error('ÌååÏùº ÏÇ≠Ï†ú Ï§ë Ïò§Î•ò:', error);\n      alert('ÌååÏùº ÏÇ≠Ï†ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n\n  // Í∞úÎ≥Ñ Ï≤®Î∂ÄÌååÏùº ÏÇ≠Ï†ú(attachmentID Í∏∞Ï§Ä) - Í≥†Í∞ù Îã§Ï§ë ÌååÏùº ÎåÄÏùë\n  const deleteAttachmentById = async attachmentID => {\n    if (!tempEstimateNo) return;\n    if (!window.confirm('Ï†ïÎßêÎ°ú Ïù¥ ÌååÏùºÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) return;\n    try {\n      const response = await fetch(`http://192.168.0.14:5135/api/estimate/attachments/${attachmentID}`, {\n        method: 'DELETE'\n      });\n      if (response.ok) {\n        await fetchCustomerFiles();\n        await fetchManagerFiles();\n      } else {\n        alert('ÌååÏùº ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n      }\n    } catch (e) {\n      console.error('Ï≤®Î∂ÄÌååÏùº ÏÇ≠Ï†ú Ïò§Î•ò:', e);\n      alert('ÌååÏùº ÏÇ≠Ï†ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n  const downloadFile = async (filePath, fileName) => {\n    try {\n      // üîë ÌååÏùº Îã§Ïö¥Î°úÎìú API ÏàòÏ†ï - ÏÉàÎ°ú Ï∂îÍ∞ÄÎêú API ÏÇ¨Ïö©\n      const response = await fetch(`http://192.168.0.14:5135/api/estimate/attachments/download?filePath=${encodeURIComponent(filePath)}`);\n      if (response.ok) {\n        const blob = await response.blob();\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = fileName;\n        document.body.appendChild(a);\n        a.click();\n        window.URL.revokeObjectURL(url);\n        document.body.removeChild(a);\n      } else {\n        // üîë Îã§Ïö¥Î°úÎìú Ïã§Ìå® Ïãú ÏÉÅÏÑ∏ ÏóêÎü¨ Ï†ïÎ≥¥ ÌëúÏãú\n        const errorText = await response.text();\n        console.error('ÌååÏùº Îã§Ïö¥Î°úÎìú Ïã§Ìå®:', response.status, errorText);\n        alert(`ÌååÏùº Îã§Ïö¥Î°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. (${response.status})\\n${errorText}`);\n      }\n    } catch (error) {\n      console.error('ÌååÏùº Îã§Ïö¥Î°úÎìú Ï§ë Ïò§Î•ò:', error);\n      alert('ÌååÏùº Îã§Ïö¥Î°úÎìú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n  const getFileTypeDisplayName = managerFileType => {\n    const typeMap = {\n      'cvlist': 'CV List',\n      'vllist': 'VL List',\n      'datasheet': 'DataSheet',\n      'singlequote': 'Îã®ÌíàÍ≤¨Ï†ÅÏÑú',\n      'multiquote': 'Îã§ÏàòÎüâÍ≤¨Ï†ÅÏÑú'\n    };\n    return typeMap[managerFileType] || managerFileType;\n  };\n  const formatFileSize = (bytes, decimals = 2) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(decimals)) + ' ' + sizes[i];\n  };\n  const formatDate = dateString => {\n    return new Date(dateString).toLocaleString('ko-KR');\n  };\n\n  // üîë PDF ÏóÖÎ°úÎìú Í¥ÄÎ†® Ìï®ÏàòÎì§ Ï∂îÍ∞Ä\n  const handlePdfUpload = (event, fileType) => {\n    var _event$target$files;\n    // üîë ÌôîÎ©¥ Ïù¥Îèô Î∞©ÏßÄ\n    event.preventDefault();\n    const file = (_event$target$files = event.target.files) === null || _event$target$files === void 0 ? void 0 : _event$target$files[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        alert('PDF ÌååÏùºÎßå ÏóÖÎ°úÎìú Í∞ÄÎä•Ìï©ÎãàÎã§.');\n        return;\n      }\n\n      // üîë ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏Î•º ÎπÑÎèôÍ∏∞Î°ú Ï≤òÎ¶¨ÌïòÏó¨ ÌôîÎ©¥ Ïù¥Îèô Î∞©ÏßÄ\n      setTimeout(() => {\n        setSelectedPdfFiles(prev => ({\n          ...prev,\n          [fileType]: file\n        }));\n      }, 0);\n    }\n  };\n\n  // üîë ÌååÏùº ÏÑ†ÌÉùÏùÑ ÏúÑÌïú Î≥ÑÎèÑ Ìï®Ïàò Ï∂îÍ∞Ä\n  const handleFileSelect = fileType => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    // Í≥†Í∞ù/Í¥ÄÎ¶¨Ïûê Í≥µÌÜµ ÏÑ†ÌÉùÍ∏∞: Î¨∏ÏÑú/ÏïïÏ∂ï Ìè¨Ìï® Í¥ëÎ≤îÏúÑ ÌóàÏö©\n    input.accept = '.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.hwp,.txt,.zip,.rar,.7z,.csv,.json';\n    input.style.display = 'none';\n    input.onchange = e => {\n      const target = e.target;\n      if (target.files && target.files[0]) {\n        const file = target.files[0];\n        // Í≥†Í∞ù ÏóÖÎ°úÎìú/Î≤îÏö© ÏÑ†ÌÉù: ÌååÏùº ÌÉÄÏûÖ Ï†úÌïú ÏôÑÌôî (ÏÑúÎ≤ÑÏóêÏÑú ÏµúÏ¢Ö Í≤ÄÏ¶ù)\n\n        setSelectedPdfFiles(prev => ({\n          ...prev,\n          [fileType]: file\n        }));\n      }\n    };\n    document.body.appendChild(input);\n    input.click();\n    document.body.removeChild(input);\n  };\n\n  // Body ÏÑπÏÖò Ïù¥Î≤§Ìä∏ Ìï∏Îì§Îü¨Îì§\n  const handleBodyChange = (field, value) => {\n    setBodySelections(prev => {\n      const newSelections = {\n        ...prev,\n        [field]: value\n      };\n\n      // Bonnet Type Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n      if (field === 'bonnetType') {\n        const selectedItem = bodyBonnetList.find(item => item.bonnetCode === value);\n        if (selectedItem) {\n          newSelections.bonnetTypeCode = selectedItem.bonnetCode;\n        }\n      }\n\n      // Material Body Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n      if (field === 'materialBody') {\n        const selectedItem = bodyMatList.find(item => item.bodyMatCode === value);\n        if (selectedItem) {\n          newSelections.materialBodyCode = selectedItem.bodyMatCode;\n        }\n      }\n\n      // Connection Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n      if (field === 'connection') {\n        const selectedItem = bodyConnectionList.find(item => item.connectionCode === value);\n        if (selectedItem) {\n          newSelections.connectionCode = selectedItem.connectionCode;\n        }\n      }\n\n      // UnitÏù¥ Î≥ÄÍ≤ΩÎêòÎ©¥ Ìï¥ÎãπÌïòÎäî Í∞í Ï¥àÍ∏∞Ìôî\n      if (field === 'sizeBodyUnit') {\n        newSelections.sizeBody = '';\n        newSelections.sizeBodyCode = '';\n      }\n      if (field === 'ratingUnit') {\n        newSelections.rating = '';\n        newSelections.ratingCode = '';\n      }\n      return newSelections;\n    });\n  };\n\n  // Trim ÏÑπÏÖò Ïù¥Î≤§Ìä∏ Ìï∏Îì§Îü¨Îì§\n  const handleTrimChange = (field, value) => {\n    setTrimSelections(prev => {\n      const newSelections = {\n        ...prev,\n        [field]: value\n      };\n\n      // Trim Type Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n      if (field === 'trimType') {\n        const selectedItem = trimTypeList.find(item => item.trimTypeCode === value);\n        if (selectedItem) {\n          newSelections.trimTypeCode = selectedItem.trimTypeCode;\n        }\n      }\n\n      // Trim Series Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n      if (field === 'trimSeries') {\n        const selectedItem = trimSeriesList.find(item => item.trimSeriesCode === value);\n        if (selectedItem) {\n          newSelections.trimSeriesCode = selectedItem.trimSeriesCode;\n        }\n      }\n\n      // Material Trim Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n      if (field === 'materialTrim') {\n        const selectedItem = trimMatList.find(item => item.trimMatCode === value);\n        if (selectedItem) {\n          newSelections.materialTrimCode = selectedItem.trimMatCode;\n        }\n      }\n\n      // Form Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n      if (field === 'form') {\n        const selectedItem = trimFormList.find(item => item.trimFormCode === value);\n        if (selectedItem) {\n          newSelections.formCode = selectedItem.trimFormCode;\n        }\n      }\n\n      // UnitÏù¥ Î≥ÄÍ≤ΩÎêòÎ©¥ Ìï¥ÎãπÌïòÎäî Í∞í Ï¥àÍ∏∞Ìôî\n      if (field === 'sizePortUnit') {\n        newSelections.sizePort = '';\n        newSelections.sizePortCode = '';\n      }\n      return newSelections;\n    });\n  };\n\n  // ACT ÏÑπÏÖò Ïù¥Î≤§Ìä∏ Ìï∏Îì§Îü¨Îì§\n  const handleActChange = (field, value) => {\n    //console.log('ACT Change:', field, value);\n    setActSelections(prev => {\n      const newSelections = {\n        ...prev,\n        [field]: value\n      };\n\n      // Action Type Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n      if (field === 'actionType') {\n        const selectedItem = actTypeList.find(item => item.actTypeCode === value);\n        if (selectedItem) {\n          newSelections.actionTypeCode = selectedItem.actTypeCode;\n        }\n      }\n\n      // Series Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n      if (field === 'series') {\n        const selectedItem = actSeriesList.find(item => item.actSeriesCode === value);\n        if (selectedItem) {\n          newSelections.seriesCode = selectedItem.actSeriesCode;\n        }\n        newSelections.size = '';\n        //console.log('Series Î≥ÄÍ≤ΩÎê®:', value);\n        // SeriesÍ∞Ä ÏÑ†ÌÉùÎêòÎ©¥ Ìï¥ÎãπÌïòÎäî Size Î™©Î°ù Í∞ÄÏ†∏Ïò§Í∏∞\n        if (value) {\n          //console.log('fetchActSizeList Ìò∏Ï∂ú:', value);\n          fetchActSizeList(value);\n        } else {\n          //console.log('actSizeList Ï¥àÍ∏∞Ìôî');\n          setActSizeList([]);\n        }\n      }\n\n      // Size Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n      if (field === 'size') {\n        const selectedItem = actSizeList.find(item => item.actSizeCode === value);\n        if (selectedItem) {\n          newSelections.sizeCode = selectedItem.actSizeCode;\n        }\n      }\n\n      // H.W Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n      if (field === 'hw') {\n        const selectedItem = actHWList.find(item => item.hwCode === value);\n        if (selectedItem) {\n          newSelections.hwCode = selectedItem.hwCode;\n        }\n      }\n      return newSelections;\n    });\n  };\n\n  // ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞ (Ïû¨ÏãúÎèÑ Î°úÏßÅ Ìè¨Ìï®)\n  const fetchAccessoryData = async (retryCount = 0) => {\n    const maxRetries = 3;\n    try {\n      console.log(`ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏãúÎèÑ ${retryCount + 1}/${maxRetries + 1}...`);\n      const accSearchRes = await fetch('http://192.168.0.14:5135/api/masterdata/acc/search');\n      if (accSearchRes.ok) {\n        const accSearchData = await accSearchRes.json();\n        console.log('ÏïÖÏÑ∏ÏÇ¨Î¶¨ Í≤ÄÏÉâ Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏÑ±Í≥µ:', accSearchData.length, 'Í∞ú');\n\n        // Î∞±ÏóîÎìú ÏùëÎãµ Îç∞Ïù¥ÌÑ∞ Íµ¨Ï°∞ ÌôïÏù∏\n        if (accSearchData.length > 0) {\n          console.log('üîç Î∞±ÏóîÎìú ÏùëÎãµ Îç∞Ïù¥ÌÑ∞ Ï≤´ Î≤àÏß∏ Ìï≠Î™© Íµ¨Ï°∞:', accSearchData[0]);\n          console.log('üîç Î∞±ÏóîÎìú ÏùëÎãµ Îç∞Ïù¥ÌÑ∞ Ï≤´ Î≤àÏß∏ Ìï≠Î™©Ïùò Î™®Îì† ÌÇ§:', Object.keys(accSearchData[0]));\n        }\n\n        // Î©îÏù¥Ïª§ÏôÄ Î™®Îç∏ Îç∞Ïù¥ÌÑ∞ Î∂ÑÎ¶¨ - ÏïÖÏÑ∏ÏÇ¨Î¶¨ ÌÉÄÏûÖÎ≥ÑÎ°ú Íµ¨Î∂Ñ\n        const allAccMakerData = [];\n        const allAccModelData = [];\n\n        // ÏïÖÏÑ∏ÏÇ¨Î¶¨ ÌÉÄÏûÖÎ≥ÑÎ°ú Îç∞Ïù¥ÌÑ∞ Í∑∏Î£πÌôî\n        const groupedByType = accSearchData.reduce((acc, item) => {\n          if (!acc[item.accTypeCode]) {\n            acc[item.accTypeCode] = [];\n          }\n          acc[item.accTypeCode].push(item);\n          return acc;\n        }, {});\n\n        // Í∞Å ÌÉÄÏûÖÎ≥ÑÎ°ú Î©îÏù¥Ïª§ÏôÄ Î™®Îç∏ Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨\n        Object.entries(groupedByType).forEach(([typeCode, items]) => {\n          const typeItems = items;\n\n          // Î©îÏù¥Ïª§ Îç∞Ïù¥ÌÑ∞ (ÌÉÄÏûÖÎ≥ÑÎ°ú Ï§ëÎ≥µ Ï†úÍ±∞)\n          typeItems.forEach(item => {\n            const existingMaker = allAccMakerData.find(maker => maker.accMakerCode === item.accMakerCode && maker.accTypeCode === typeCode);\n            if (!existingMaker) {\n              allAccMakerData.push({\n                accMakerCode: item.accMakerCode,\n                accMakerName: item.accMakerName,\n                accTypeCode: typeCode\n              });\n            }\n          });\n\n          // Î™®Îç∏ Îç∞Ïù¥ÌÑ∞\n          typeItems.forEach(item => {\n            console.log(`üîç ${typeCode} ÌÉÄÏûÖ Î™®Îç∏ Îç∞Ïù¥ÌÑ∞:`, {\n              accMakerCode: item.accMakerCode,\n              accModelCode: item.accModelCode,\n              accModelName: item.accModelName,\n              accSize: item.accSize,\n              accTypeCode: typeCode\n            });\n            allAccModelData.push({\n              accMakerCode: item.accMakerCode,\n              accModelCode: item.accModelCode,\n              accModelName: item.accModelName,\n              accSize: item.accSize,\n              accTypeCode: typeCode // item.accTypeCode ÎåÄÏã† Í∑∏Î£πÌôîÎêú typeCode ÏÇ¨Ïö©\n            });\n          });\n        });\n        console.log('üîç ÏïÖÏÑ∏ÏÇ¨Î¶¨ ÌÉÄÏûÖÎ≥Ñ Îç∞Ïù¥ÌÑ∞ Í∑∏Î£πÌôî Í≤∞Í≥º:', groupedByType);\n        console.log('üîç Î∂ÑÎ¶¨Îêú Î©îÏù¥Ïª§ Îç∞Ïù¥ÌÑ∞:', allAccMakerData);\n        console.log('üîç Î∂ÑÎ¶¨Îêú Î™®Îç∏ Îç∞Ïù¥ÌÑ∞:', allAccModelData);\n\n        // Í∞Å ÌÉÄÏûÖÎ≥Ñ Îç∞Ïù¥ÌÑ∞ Í∞úÏàò ÌôïÏù∏\n        Object.entries(groupedByType).forEach(([typeCode, items]) => {\n          console.log(`üîç ${typeCode} ÌÉÄÏûÖ: ${items.length}Í∞ú`);\n          const uniqueMakers = new Set(items.map(item => item.accMakerCode));\n          console.log(`  - Í≥†Ïú† Î©îÏù¥Ïª§ Ïàò: ${uniqueMakers.size}`);\n          console.log(`  - Î©îÏù¥Ïª§ ÏΩîÎìúÎì§:`, Array.from(uniqueMakers));\n\n          // ÌÉÄÏûÖÎ≥Ñ Î©îÏù¥Ïª§ Î™©Î°ù ÌôïÏù∏\n          const typeMakers = allAccMakerData.filter(maker => maker.accTypeCode === typeCode);\n          console.log(`  - ÌÉÄÏûÖÎ≥Ñ Î©îÏù¥Ïª§ Î™©Î°ù:`, typeMakers);\n        });\n        setAccMakerList(allAccMakerData);\n        setAccModelList(allAccModelData);\n        console.log('ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ ÏÑ§Ï†ï ÏôÑÎ£å - Î©îÏù¥Ïª§:', allAccMakerData.length, 'Í∞ú, Î™®Îç∏:', allAccModelData.length, 'Í∞ú');\n\n        // accMakerList Íµ¨Ï°∞ ÏÉÅÏÑ∏ ÌôïÏù∏\n        console.log('üîç accMakerList ÏÉÅÏÑ∏ Íµ¨Ï°∞:');\n        allAccMakerData.forEach((maker, index) => {\n          console.log(`  [${index}] ${maker.accTypeCode} - ${maker.accMakerCode}: ${maker.accMakerName}`);\n        });\n\n        // ÌÉÄÏûÖÎ≥Ñ Î©îÏù¥Ïª§ Í∞úÏàò ÌôïÏù∏\n        const makerCountByType = allAccMakerData.reduce((acc, maker) => {\n          if (!acc[maker.accTypeCode]) acc[maker.accTypeCode] = 0;\n          acc[maker.accTypeCode]++;\n          return acc;\n        }, {});\n        console.log('üîç ÌÉÄÏûÖÎ≥Ñ Î©îÏù¥Ïª§ Í∞úÏàò:', makerCountByType);\n\n        // ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏôÑÎ£å ÌõÑ accSelections Ï¥àÍ∏∞Ìôî\n        const initialAccSelections = {\n          positioner: {\n            typeCode: 'Positioner',\n            makerCode: '',\n            modelCode: '',\n            specification: ''\n          },\n          solenoid: {\n            typeCode: 'Solenoid',\n            makerCode: '',\n            modelCode: '',\n            specification: ''\n          },\n          limiter: {\n            typeCode: 'Limit',\n            makerCode: '',\n            modelCode: '',\n            specification: ''\n          },\n          airSupply: {\n            typeCode: 'Airset',\n            makerCode: '',\n            modelCode: '',\n            specification: ''\n          },\n          volumeBooster: {\n            typeCode: 'Volume',\n            makerCode: '',\n            modelCode: '',\n            specification: ''\n          },\n          airOperator: {\n            typeCode: 'Airoperate',\n            makerCode: '',\n            modelCode: '',\n            specification: ''\n          },\n          lockUp: {\n            typeCode: 'Lockup',\n            makerCode: '',\n            modelCode: '',\n            specification: ''\n          },\n          snapActingRelay: {\n            typeCode: 'Snapacting',\n            makerCode: '',\n            modelCode: '',\n            specification: ''\n          }\n        };\n        setAccSelections(initialAccSelections);\n        return true; // ÏÑ±Í≥µ\n      } else {\n        console.error('ÏïÖÏÑ∏ÏÇ¨Î¶¨ Í≤ÄÏÉâ API ÏùëÎãµ Ïã§Ìå®:', accSearchRes.status, accSearchRes.statusText);\n        return false; // Ïã§Ìå®\n      }\n    } catch (error) {\n      console.error('ÏïÖÏÑ∏ÏÇ¨Î¶¨ Í≤ÄÏÉâ Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïã§Ìå®:', error);\n      return false; // Ïã§Ìå®\n    }\n  };\n\n  // ÎßàÏä§ÌÑ∞ Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞\n  const fetchMasterData = async () => {\n    try {\n      // Step 1, 2 ÎßàÏä§ÌÑ∞ Îç∞Ïù¥ÌÑ∞ (EstimateController)\n      const [sizeRes, matRes, trimMatRes, optionRes, ratingRes] = await Promise.all([fetch('http://192.168.0.14:5135/api/estimate/body-size-list'), fetch('http://192.168.0.14:5135/api/estimate/body-mat-list'), fetch('http://192.168.0.14:5135/api/estimate/trim-mat-list'), fetch('http://192.168.0.14:5135/api/estimate/trim-option-list'), fetch('http://192.168.0.14:5135/api/estimate/body-rating-list')]);\n      const [sizeData, matData, trimMatData, optionData, ratingData] = await Promise.all([sizeRes.json(), matRes.json(), trimMatRes.json(), optionRes.json(), ratingRes.json()]);\n      setBodySizeList(sizeData || []);\n      setBodyMatList(matData || []);\n      setTrimMatList(trimMatData || []);\n      setTrimOptionList(optionData || []);\n      setBodyRatingList(ratingData || []);\n      //console.log('BodyRatingList Î°úÎìúÎê®:', ratingData); // ÎîîÎ≤ÑÍπÖ Î°úÍ∑∏ Ï∂îÍ∞Ä\n\n      // Step 3 ÎßàÏä§ÌÑ∞ Îç∞Ïù¥ÌÑ∞ (MasterDataController)\n      const [bodyBonnetRes, bodyConnectionRes, trimTypeRes, trimSeriesRes, trimPortSizeRes, trimFormRes, actTypeRes, actSeriesRes, actHWRes] = await Promise.all([fetch('http://192.168.0.14:5135/api/masterdata/body/bonnet'), fetch('http://192.168.0.14:5135/api/masterdata/body/connection'), fetch('http://192.168.0.14:5135/api/masterdata/trim-type'), fetch('http://192.168.0.14:5135/api/masterdata/trim/series'), fetch('http://192.168.0.14:5135/api/masterdata/trim/port-size'), fetch('http://192.168.0.14:5135/api/masterdata/trim/form'), fetch('http://192.168.0.14:5135/api/masterdata/act/type'), fetch('http://192.168.0.14:5135/api/masterdata/act/series'), fetch('http://192.168.0.14:5135/api/masterdata/act/hw')]);\n\n      // ÎìúÎûòÍ∑∏ Ïï§ ÎìúÎ°≠ Ìï∏Îì§Îü¨ (Ï∂îÍ∞Ä)\n      const onDragStart = (e, index, listKey) => {\n        e.dataTransfer.setData('text/plain', JSON.stringify({\n          index,\n          listKey\n        }));\n      };\n      const onDragOver = e => {\n        e.preventDefault();\n      };\n      const onDrop = (e, dropIndex, listKey) => {\n        e.preventDefault();\n        const {\n          index\n        } = JSON.parse(e.dataTransfer.getData('text/plain') || '{\"index\":-1}');\n        if (index < 0) return;\n        if (listKey === 'types') {\n          setTypes(prev => {\n            const arr = [...prev];\n            const [moved] = arr.splice(index, 1);\n            arr.splice(dropIndex, 0, moved);\n            return arr;\n          });\n        } else {\n          setValves(prev => {\n            const arr = [...prev];\n            const [moved] = arr.splice(index, 1);\n            arr.splice(dropIndex, 0, moved);\n            // Î≥¥Í∏∞Ïö© sheetNo Ïû¨Î∂ÄÏó¨(1Î∂ÄÌÑ∞)\n            return arr.map((it, i) => ({\n              ...it,\n              sheetNo: i + 1\n            }));\n          });\n        }\n      };\n\n      // Í∞Å API ÏùëÎãµÏùÑ Í∞úÎ≥ÑÏ†ÅÏúºÎ°ú Ï≤òÎ¶¨ÌïòÏó¨ ÏóêÎü¨ Î∞úÏÉù ÏãúÏóêÎèÑ Îã§Î•∏ Îç∞Ïù¥ÌÑ∞Îäî Î°úÎìúÌï† Ïàò ÏûàÎèÑÎ°ù Ìï®\n      let bodyBonnetData = [],\n        bodyConnectionData = [],\n        trimTypeData = [],\n        trimSeriesData = [],\n        trimPortSizeData = [],\n        trimFormData = [],\n        actTypeData = [],\n        actSeriesData = [],\n        actHWData = [];\n      try {\n        bodyBonnetData = await bodyBonnetRes.json();\n        //console.log('Body Bonnet Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', bodyBonnetData.length);\n      } catch (e) {\n        console.error('Body Bonnet Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n      try {\n        bodyConnectionData = await bodyConnectionRes.json();\n        //console.log('Body Connection Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', bodyConnectionData.length);\n      } catch (e) {\n        console.error('Body Connection Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n      try {\n        trimTypeData = await trimTypeRes.json();\n        //console.log('Trim Type Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', trimTypeData.length);\n      } catch (e) {\n        console.error('Trim Type Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n      try {\n        trimSeriesData = await trimSeriesRes.json();\n        //console.log('Trim Series Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', trimSeriesData.length);\n      } catch (e) {\n        console.error('Trim Series Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n      try {\n        trimPortSizeData = await trimPortSizeRes.json();\n        //console.log('Trim Port Size Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', trimPortSizeData.length);\n      } catch (e) {\n        console.error('Trim Port Size Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n      try {\n        trimFormData = await trimFormRes.json();\n        //console.log('Trim Form Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', trimFormData.length);\n      } catch (e) {\n        console.error('Trim Form Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n      try {\n        actTypeData = await actTypeRes.json();\n        //console.log('Act Type Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', actTypeData.length);\n      } catch (e) {\n        console.error('Act Type Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n      try {\n        actSeriesData = await actSeriesRes.json();\n        //console.log('Act Series Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', actSeriesData.length);\n      } catch (e) {\n        console.error('Act Series Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n      try {\n        actHWData = await actHWRes.json();\n        //console.log('Act HW Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', actHWData.length);\n      } catch (e) {\n        console.error('Act HW Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n\n      // ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ Î°úÎî©ÏùÄ Î≥ÑÎèÑ Ìï®ÏàòÎ°ú Î∂ÑÎ¶¨ÌïòÏó¨ Ïû¨ÏãúÎèÑ Í∞ÄÎä•ÌïòÎèÑÎ°ù Ìï®\n      await fetchAccessoryData();\n      setBodyBonnetList(bodyBonnetData || []);\n      setBodyConnectionList(bodyConnectionData || []);\n      setTrimTypeList(trimTypeData || []);\n      setTrimSeriesList(trimSeriesData || []);\n      setTrimPortSizeList(trimPortSizeData || []);\n      setTrimFormList(trimFormData || []);\n      setActTypeList(actTypeData || []);\n      setActSeriesList(actSeriesData || []);\n      setActHWList(actHWData || []);\n    } catch (error) {\n      console.error('ÎßàÏä§ÌÑ∞ Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞ Ïã§Ìå®:', error);\n\n      // Í∞úÎ≥Ñ API ÏùëÎãµ ÏÉÅÌÉú ÌôïÏù∏ÏùÑ ÏúÑÌïú Î°úÍπÖ Ï∂îÍ∞Ä\n      //console.log('ÎßàÏä§ÌÑ∞ Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏÉÅÌÉú:');\n      //console.log('- Body Size:', bodySizeList.length);\n      //console.log('- Body Material:', bodyMatList.length);\n      //console.log('- Trim Material:', trimMatList.length);\n      //\n\n      // ÏóêÎü¨ Î∞úÏÉù Ïãú Îπà Î∞∞Ïó¥Î°ú ÏÑ§Ï†ï\n      setBodySizeList([]);\n      setBodyMatList([]);\n      setTrimMatList([]);\n      setTrimOptionList([]);\n      setBodyRatingList([]);\n      setBodyBonnetList([]);\n      setBodyConnectionList([]);\n      setTrimTypeList([]);\n      setTrimSeriesList([]);\n      setTrimPortSizeList([]);\n      setTrimFormList([]);\n      setActTypeList([]);\n      setActSeriesList([]);\n      setActHWList([]);\n      setAccMakerList([]);\n      setAccModelList([]);\n    }\n  };\n\n  // ÌíàÎ≤à ÏÉùÏÑ± Ìï®Ïàò - ÏÑπÏÖòÎ≥ÑÎ°ú Íµ¨Î∂Ñ\n  const generatePartNumber = useMemo(() => {\n    try {\n      // BODY ÏÑπÏÖò (6ÏûêÎ¶¨) - ÏΩîÎìú ÏÇ¨Ïö©\n      const bodySection = [bodySelections.bonnetTypeCode || '0', '2',\n      // valveSeries Í∏∞Î≥∏Í∞í\n      bodySelections.materialBodyCode || '0', bodySelections.sizeBodyCode || '0', bodySelections.ratingCode || '0', bodySelections.connectionCode || '0'].join('');\n\n      // TRIM ÏÑπÏÖò (6ÏûêÎ¶¨) - ÏΩîÎìú ÏÇ¨Ïö©\n      const trimSection = [trimSelections.trimTypeCode || '0', trimSelections.trimSeriesCode || '0', trimSelections.materialTrimCode || '0', trimSelections.sizePortCode || '0', trimSelections.sizePortCode || '0',\n      // Ï§ëÎ≥µ\n      trimSelections.formCode || '0'].join('');\n\n      // ACT ÏÑπÏÖò (4ÏûêÎ¶¨) - ÏΩîÎìú ÏÇ¨Ïö©\n      const actSection = [actSelections.actionTypeCode || '0', actSelections.seriesCode || '0', actSelections.sizeCode || '0', actSelections.hwCode || '0'].join('');\n\n      // ACC ÏÑπÏÖò (11ÏûêÎ¶¨)\n      const accSection = [accSelections.positioner.makerCode || '0', accSelections.positioner.modelCode || '0', accSelections.solenoid.makerCode || '0', accSelections.solenoid.modelCode || '0', accSelections.limiter.makerCode || '0', accSelections.limiter.modelCode || '0', accSelections.airSupply.modelCode || '0', accSelections.volumeBooster.modelCode || '0', accSelections.airOperator.modelCode || '0', accSelections.lockUp.modelCode || '0', accSelections.snapActingRelay.modelCode || '0'].join('');\n\n      // ÏÑπÏÖòÏùÑ '-'Î°ú Íµ¨Î∂ÑÌïòÏó¨ Î∞òÌôò\n      return `${bodySection}-${trimSection}-${actSection}-${accSection}`;\n    } catch (error) {\n      console.error('ÌíàÎ≤à ÏÉùÏÑ± Ï§ë Ïò§Î•ò:', error);\n      return '000000-000000-0000-00000000000';\n    }\n  }, [bodySelections, trimSelections, actSelections, accSelections]);\n\n  // Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞ Î°úÎìú\n  const loadExistingData = useCallback(async () => {\n    if (!tempEstimateNo) return;\n\n    //console.log('ÌòÑÏû¨ tempEstimateNo:', tempEstimateNo); // tempEstimateNo Î°úÍ∑∏ Ï∂îÍ∞Ä\n\n    try {\n      var _ref, _es$curEstimateNo, _data$estimateSheet, _data$estimateSheet2;\n      // ÌòÑÏû¨ Î°úÍ∑∏Ïù∏Ìïú ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞\n      const userStr = localStorage.getItem('user');\n      const currentUser = userStr ? JSON.parse(userStr) : null;\n\n      // currentUserIdÎäî ÏûÑÏãúÎ°ú 'admin' ÏÇ¨Ïö© (Ïã§Ï†úÎ°úÎäî Î°úÍ∑∏Ïù∏Îêú ÏÇ¨Ïö©Ïûê IDÎ•º ÏÇ¨Ïö©Ìï¥Ïïº Ìï®)\n      const response = await getEstimateDetail(tempEstimateNo, (currentUser === null || currentUser === void 0 ? void 0 : currentUser.userId) || 'admin'); // Ïã§Ï†ú ÏÇ¨Ïö©Ïûê ID ÏÇ¨Ïö©\n      const data = response;\n\n      //console.log('Í≤¨Ï†Å ÏÉÅÏÑ∏ Îç∞Ïù¥ÌÑ∞:', data);\n\n      // ÌîÑÎ°úÏ†ùÌä∏Î™Ö ÏÑ§Ï†ï\n      if (data.estimateSheet && data.estimateSheet.project) {\n        setProjectName(data.estimateSheet.project);\n      }\n\n      // ÌòÑÏû¨ ÏÉÅÌÉú ÏÑ§Ï†ï + Í≤¨Ï†ÅÏãúÏûë ÌÜ†Í∏Ä\n      if (data.estimateSheet && data.estimateSheet.statusText) {\n        setCurrentStatus(data.estimateSheet.statusText);\n      }\n      // status === 3(Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë) Ïù¥Î©¥ Î≤ÑÌäºÏùÑ Î≥¥ÎùºÏÉâ ÏÉÅÌÉúÎ°ú ÌÜ†Í∏Ä\n      if (data.estimateSheet && typeof data.estimateSheet.status === 'number') {\n        setQuoteStarted(data.estimateSheet.status === 3);\n      }\n      // ÏöîÏïΩ Ïπ¥Îìú ÌëúÏãúÍ∞í ÏÑ§Ï†ï\n      const es = data.estimateSheet || {};\n      const tempNo = es.tempEstimateNo || es.TempEstimateNo || '';\n      const curNo = (_ref = (_es$curEstimateNo = es.curEstimateNo) !== null && _es$curEstimateNo !== void 0 ? _es$curEstimateNo : es.CurEstimateNo) !== null && _ref !== void 0 ? _ref : null;\n      const customerName = es.customerName || es.CustomerName || '-';\n      const customerUserName = es.customerUserName || es.CustomerUserName || customerName;\n      const managerId = es.managerID || es.ManagerID || '-';\n      const managerName = es.managerName || es.ManagerName || managerId;\n      const parseFromTemp = no => {\n        const m = /TEMP(\\d{4})(\\d{2})(\\d{2})/.exec(no || '');\n        return m ? `${m[1]}.${m[2]}.${m[3]}` : '-';\n      };\n      const parseFromCur = no => {\n        if (!no) return '-';\n        const m = /YA(\\d{4})(\\d{2})(\\d{2})-(\\d{3})/.exec(no);\n        return m ? `${m[1]}.${m[2]}.${m[3]}` : '-';\n      };\n      setSummaryEstimateNo(curNo !== null && curNo !== void 0 ? curNo : '-');\n      setSummaryCompanyName(customerName);\n      setSummaryRequesterName(customerUserName); // ÏöîÏ≤≠Ïûê = User.Name\n      setSummaryRequestDate(parseFromTemp(tempNo));\n      setSummaryManager(managerName || managerId || '-');\n      setSummaryCompletedDate(parseFromCur(curNo));\n\n      // ÏùΩÍ∏∞ Ï†ÑÏö© ÏÉÅÌÉú ÏÑ§Ï†ï\n      const isStatusThree = ((_data$estimateSheet = data.estimateSheet) === null || _data$estimateSheet === void 0 ? void 0 : _data$estimateSheet.status) === 3; // ÏÉÅÌÉúÍ∞Ä 3 (Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë)Ïù∏ÏßÄ\n      const isCurrentUserManager = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.userId) === ((_data$estimateSheet2 = data.estimateSheet) === null || _data$estimateSheet2 === void 0 ? void 0 : _data$estimateSheet2.managerID); // ÌòÑÏû¨ ÏÇ¨Ïö©ÏûêÍ∞Ä Îã¥ÎãπÏûêÏù∏ÏßÄ\n\n      const shouldBeReadOnly = !(isStatusThree && isCurrentUserManager); // Îëò Îã§ Ï∞∏Ïùº ÎïåÎßå false (ÏàòÏ†ï Í∞ÄÎä•)\n      setIsReadOnly(shouldBeReadOnly);\n      //console.log('EstimateDetailPage isReadOnly ÏÑ§Ï†ïÎê®:', shouldBeReadOnly);\n      //console.log('  status:', data.estimateSheet?.status, '(3Ïù¥Î©¥ Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë)');\n      //console.log('  managerID:', data.estimateSheet?.managerID);\n      //console.log('  currentUser.userId:', currentUser?.userId);\n\n      // EstimateRequest Îç∞Ïù¥ÌÑ∞Î•º Í∏∞Î∞òÏúºÎ°ú typesÏôÄ valves ÏÑ§Ï†ï\n      if (data.estimateRequests && data.estimateRequests.length > 0) {\n        var _data$estimateRequest;\n        // ÎîîÎ≤ÑÍπÖ: Ïã§Ï†ú Îç∞Ïù¥ÌÑ∞ Íµ¨Ï°∞ ÌôïÏù∏\n        console.log('üîç EstimateDetailPage - API ÏùëÎãµ Îç∞Ïù¥ÌÑ∞ Íµ¨Ï°∞:');\n        console.log('data.estimateRequests:', data.estimateRequests);\n        console.log('Ï≤´ Î≤àÏß∏ estimateRequest:', data.estimateRequests[0]);\n        if ((_data$estimateRequest = data.estimateRequests[0]) !== null && _data$estimateRequest !== void 0 && _data$estimateRequest.tagNos) {\n          var _data$estimateRequest2, _data$estimateRequest3;\n          console.log('Ï≤´ Î≤àÏß∏ tagNos:', data.estimateRequests[0].tagNos);\n          console.log('Ï≤´ Î≤àÏß∏ tagNoÏùò ÌïÑÎìúÎì§:', Object.keys(data.estimateRequests[0].tagNos[0] || {}));\n          console.log('Ï≤´ Î≤àÏß∏ tagNoÏùò sheetNo:', (_data$estimateRequest2 = data.estimateRequests[0].tagNos[0]) === null || _data$estimateRequest2 === void 0 ? void 0 : _data$estimateRequest2.sheetNo);\n          console.log('Ï≤´ Î≤àÏß∏ tagNoÏùò sheetID:', (_data$estimateRequest3 = data.estimateRequests[0].tagNos[0]) === null || _data$estimateRequest3 === void 0 ? void 0 : _data$estimateRequest3.sheetID);\n        }\n        // Type Ï†ïÎ≥¥ ÏÑ§Ï†ï\n        const typeMap = new Map();\n        data.estimateRequests.forEach(req => {\n          const valveType = req.valveType;\n          if (typeMap.has(valveType)) {\n            typeMap.get(valveType).count += req.tagNos.reduce((sum, tag) => sum + tag.qty, 0);\n          } else {\n            const totalQty = req.tagNos.reduce((sum, tag) => sum + tag.qty, 0);\n            typeMap.set(valveType, {\n              count: totalQty,\n              order: typeMap.size + 1\n            });\n          }\n        });\n\n        // typesDataÎ•º SheetNo Í∏∞Ï§ÄÏúºÎ°ú Ï†ïÎ†¨\n        const typesData = Array.from(typeMap.entries()).map(([code, info]) => {\n          // bodyValveListÍ∞Ä Î°úÎìúÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞Î•º ÎåÄÎπÑÌïòÏó¨ Í∏∞Î≥∏Í∞í ÏÑ§Ï†ï\n          const valveInfo = bodyValveList.find(v => v.valveSeriesCode === code);\n          return {\n            id: code,\n            name: valveInfo ? valveInfo.valveSeries : `Valve Type ${code}`,\n            code: code,\n            count: info.count,\n            order: info.order\n          };\n        });\n\n        // Î∞∏Î∏å ÌÉÄÏûÖÏùÑ SheetNo ÏàúÏÑúÎåÄÎ°ú Ï†ïÎ†¨\n        const sortedTypesData = typesData.sort((a, b) => {\n          var _data$estimateRequest4, _data$estimateRequest5, _data$estimateRequest6, _data$estimateRequest7;\n          // Í∞Å Î∞∏Î∏å ÌÉÄÏûÖÏùò Ï≤´ Î≤àÏß∏ TagNoÏùò SheetNoÎ•º Í∏∞Ï§ÄÏúºÎ°ú Ï†ïÎ†¨\n          const aFirstTag = (_data$estimateRequest4 = data.estimateRequests.find(req => req.valveType === a.code)) === null || _data$estimateRequest4 === void 0 ? void 0 : (_data$estimateRequest5 = _data$estimateRequest4.tagNos) === null || _data$estimateRequest5 === void 0 ? void 0 : _data$estimateRequest5[0];\n          const bFirstTag = (_data$estimateRequest6 = data.estimateRequests.find(req => req.valveType === b.code)) === null || _data$estimateRequest6 === void 0 ? void 0 : (_data$estimateRequest7 = _data$estimateRequest6.tagNos) === null || _data$estimateRequest7 === void 0 ? void 0 : _data$estimateRequest7[0];\n\n          // sheetNo ÎòêÎäî sheetID ÏÇ¨Ïö© (ÌÉÄÏûÖ ÏïàÏ†ÑÏÑ± ÌôïÎ≥¥)\n          const aSheetNo = (aFirstTag === null || aFirstTag === void 0 ? void 0 : aFirstTag.sheetNo) || (aFirstTag === null || aFirstTag === void 0 ? void 0 : aFirstTag.sheetID) || 999;\n          const bSheetNo = (bFirstTag === null || bFirstTag === void 0 ? void 0 : bFirstTag.sheetNo) || (bFirstTag === null || bFirstTag === void 0 ? void 0 : bFirstTag.sheetID) || 999;\n          return aSheetNo - bSheetNo;\n        });\n        setTypes(sortedTypesData);\n\n        // Valve Ï†ïÎ≥¥ ÏÑ§Ï†ï - TagNoDetailDtoÎ•º Í∏∞Î∞òÏúºÎ°ú Î≥ÄÌôò\n        const valvesData = [];\n        data.estimateRequests.forEach(req => {\n          req.tagNos.forEach(tag => {\n            var _tag$sheetNo;\n            // Body Type Ïù¥Î¶Ñ Í∞ÄÏ†∏Ïò§Í∏∞\n            const valveInfo = bodyValveList.find(v => v.valveSeriesCode === req.valveType);\n            const bodyTypeName = valveInfo ? valveInfo.valveSeries : `Valve Type ${req.valveType}`;\n\n            // Rating Unit Í∞ÄÏ†∏Ïò§Í∏∞ (bodyRatingListÏóêÏÑú Ï∞æÍ∏∞)\n            const ratingInfo = bodyRatingList.find(r => r.ratingCode === tag.bodyRating);\n            const ratingUnit = ratingInfo ? ratingInfo.ratingUnit : '';\n            valvesData.push({\n              id: `${tag.sheetID}`,\n              tagNo: tag.tagNo,\n              qty: tag.qty,\n              order: (_tag$sheetNo = tag.sheetNo) !== null && _tag$sheetNo !== void 0 ? _tag$sheetNo : tag.sheetID,\n              sheetID: tag.sheetID,\n              typeId: req.valveType,\n              fluid: {\n                medium: tag.medium || '',\n                fluid: tag.fluid || '',\n                density: tag.density || '',\n                molecular: tag.molecularWeight || '',\n                t1: {\n                  max: tag.inletTemperatureQ || 0,\n                  normal: tag.inletTemperatureNorQ || 0,\n                  min: tag.inletTemperatureMinQ || 0\n                },\n                p1: {\n                  max: tag.inletPressureMaxQ || 0,\n                  normal: tag.inletPressureNorQ || 0,\n                  min: tag.inletPressureMinQ || 0\n                },\n                p2: {\n                  max: tag.outletPressureMaxQ || 0,\n                  normal: tag.outletPressureNorQ || 0,\n                  min: tag.outletPressureMinQ || 0\n                },\n                dp: {\n                  max: tag.differentialPressureMaxQ || 0,\n                  normal: tag.differentialPressureNorQ || 0,\n                  min: tag.differentialPressureMinQ || 0\n                },\n                qm: {\n                  max: tag.qmMax || 0,\n                  normal: tag.qmNor || 0,\n                  min: tag.qmMin || 0,\n                  unit: tag.qmUnit || ''\n                },\n                qn: {\n                  max: tag.qnMax || 0,\n                  normal: tag.qnNor || 0,\n                  min: tag.qnMin || 0,\n                  unit: tag.qnUnit || ''\n                },\n                pressureUnit: tag.pressureUnit || '',\n                temperatureUnit: tag.temperatureUnit || ''\n              },\n              body: {\n                type: bodyTypeName,\n                // Body Type Ïù¥Î¶Ñ ÏÑ§Ï†ï\n                typeCode: req.valveType || '',\n                size: tag.bodySize || '',\n                sizeUnit: tag.bodySizeUnit || '',\n                materialBody: tag.bodyMat || '',\n                materialTrim: tag.trimMat || '',\n                option: tag.trimOption || '',\n                rating: tag.bodyRating || '',\n                ratingUnit: ratingUnit // Rating Unit ÏÑ§Ï†ï\n              },\n              actuator: {\n                type: tag.actType || '',\n                hw: tag.isHW ? 'Yes' : 'No'\n              },\n              accessory: {\n                positioner: {\n                  type: tag.positionerType || '',\n                  exists: tag.isPositioner || false\n                },\n                explosionProof: tag.explosionProof || '',\n                transmitter: {\n                  type: tag.transmitterType || '',\n                  exists: !!tag.transmitterType\n                },\n                solenoidValve: tag.isSolenoid || false,\n                limitSwitch: tag.isLimSwitch || false,\n                airSet: tag.isAirSet || false,\n                volumeBooster: tag.isVolumeBooster || false,\n                airOperatedValve: tag.isAirOperated || false,\n                lockupValve: tag.isLockUp || false,\n                snapActingRelay: tag.isSnapActingRelay || false\n              },\n              isQM: tag.isQM || false,\n              isP2: tag.isP2 || false,\n              isN1: false,\n              // EstimateRequestDetailDtoÏóêÎäî isN1Ïù¥ ÏóÜÏùå\n              isDensity: tag.isDensity || false,\n              isHW: tag.isHW || false\n            });\n          });\n        });\n        // sheetNo Í∏∞Ï§ÄÏúºÎ°ú Ïò§Î¶ÑÏ∞®Ïàú Ï†ïÎ†¨\n        valvesData.sort((a, b) => a.order - b.order);\n\n        // Ï†ïÎ†¨Îêú Í≤∞Í≥ºÎ°ú ÏÉÅÌÉú Î∞òÏòÅ\n        setValves(valvesData);\n\n        // Ï≤´ Î≤àÏß∏ valveÎ•º Í∏∞Î≥∏ ÏÑ†ÌÉù\n        // if (valvesData.length > 0) {\n        //   setSelectedValve(valvesData[0]);\n        // }\n      }\n\n      // Í∏∞ÌÉÄ ÏöîÏ≤≠ÏÇ¨Ìï≠ ÏÑ§Ï†ï\n      if (data.estimateSheet && data.estimateSheet.customerRequirement) {\n        setCustomerRequirement(data.estimateSheet.customerRequirement);\n      }\n\n      // Í¥ÄÎ¶¨Ïûê ÏΩîÎ©òÌä∏ ÏÑ§Ï†ï\n      if (data.estimateSheet && data.estimateSheet.staffComment) {\n        setStaffComment(data.estimateSheet.staffComment);\n      }\n\n      // Ï≤®Î∂ÄÌååÏùº ÏÑ§Ï†ï - Í≥†Í∞ù ÏöîÏ≤≠Í≥º Í¥ÄÎ¶¨ Ï≤®Î∂ÄÌååÏùº Î∂ÑÎ¶¨\n      if (data.attachments && data.attachments.length > 0) {\n        const customerFiles = [];\n        const managerFiles = [];\n        data.attachments.forEach(att => {\n          if (att.filePath && isCustomerFile(att.filePath)) {\n            customerFiles.push(att);\n          } else if (att.filePath && isManagerFile(att.filePath)) {\n            managerFiles.push(att);\n          }\n        });\n        setCustomerAttachments(customerFiles);\n        setManagerAttachments(managerFiles);\n\n        // Í∏∞Ï°¥ Ìò∏ÌôòÏÑ± Ïú†ÏßÄ\n        const fileList = data.attachments.map(att => ({\n          name: att.fileName || 'Unknown',\n          size: att.fileSize || 0\n        }));\n        setAttachments(fileList);\n      }\n    } catch (error) {\n      console.error('Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïã§Ìå®:', error);\n    }\n  }, [tempEstimateNo, bodyValveList, bodyRatingList]);\n\n  // ÏÉÅÌÉú Î≥ÄÍ≤Ω Ï≤òÎ¶¨\n  const handleStatusChange = async newStatus => {\n    try {\n      // ÏÉÅÌÉú ÌÖçÏä§Ìä∏Î•º Ïà´Ïûê ÏΩîÎìúÎ°ú Î≥ÄÌôòÌïòÎäî Ìó¨Ìçº Ìï®Ïàò\n      const getStatusCodeFromText = statusText => {\n        switch (statusText) {\n          case 'ÏûÑÏãúÏ†ÄÏû•':\n            return 1;\n          case 'Í≤¨Ï†ÅÏöîÏ≤≠':\n            return 2;\n          case 'Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë':\n            return 3;\n          case 'Í≤¨Ï†ÅÏôÑÎ£å':\n            return 4;\n          case 'Ï£ºÎ¨∏':\n            return 5;\n          default:\n            return -1;\n          // Ïïå Ïàò ÏóÜÎäî ÏÉÅÌÉú\n        }\n      };\n      const newStatusCode = getStatusCodeFromText(newStatus);\n\n      // ÌòÑÏû¨ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ÏôÄ Í≤¨Ï†Å Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞\n      const userStr = localStorage.getItem('user');\n      const currentUser = userStr ? JSON.parse(userStr) : null;\n\n      // Í≤¨Ï†Å ÏÉÅÏÑ∏ Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞ (isReadOnly Í≥ÑÏÇ∞ÏùÑ ÏúÑÌï¥)\n      if (!tempEstimateNo) {\n        throw new Error('tempEstimateNoÍ∞Ä ÏóÜÏäµÎãàÎã§.');\n      }\n      const estimateResponse = await getEstimateDetail(tempEstimateNo, (currentUser === null || currentUser === void 0 ? void 0 : currentUser.userId) || 'admin');\n      const estimateData = estimateResponse;\n\n      // Í≤¨Ï†ÅÏöîÏ≤≠ ÏÉÅÌÉú(2)ÏóêÏÑúÎßå Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë(3)ÏúºÎ°ú Î≥ÄÍ≤Ω Í∞ÄÎä•\n      // if (currentStatusCode === 2 && newStatusCode === 3) {\n      // ÏÉÅÌÉú Î≥ÄÍ≤Ω API Ìò∏Ï∂ú\n      const response = await fetch(`/api/estimate/sheets/${tempEstimateNo}/status`, {\n        // API Í≤ΩÎ°ú ÏàòÏ†ï\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          status: newStatusCode\n        }) // Ïà´Ïûê ÏÉÅÌÉú ÏΩîÎìúÎ°ú Ï†ÑÏÜ°\n      });\n      if (response.ok) {\n        var _estimateData$estimat;\n        setCurrentStatus(newStatus); // UI ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏ (Î¨∏ÏûêÏó¥Î°ú Ïú†ÏßÄ)\n\n        // ÏÉÅÌÉú Î≥ÄÍ≤Ω ÌõÑ isReadOnly Ïû¨Í≥ÑÏÇ∞\n        const newStatusCode = getStatusCodeFromText(newStatus);\n        const isStatusThree = newStatusCode === 3; // ÏÉÅÌÉúÍ∞Ä 3 (Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë)Ïù∏ÏßÄ\n        const isCurrentUserManager = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.userId) === ((_estimateData$estimat = estimateData.estimateSheet) === null || _estimateData$estimat === void 0 ? void 0 : _estimateData$estimat.managerID); // ÌòÑÏû¨ ÏÇ¨Ïö©ÏûêÍ∞Ä Îã¥ÎãπÏûêÏù∏ÏßÄ\n        const shouldBeReadOnly = !(isStatusThree && isCurrentUserManager); // Îëò Îã§ Ï∞∏Ïùº ÎïåÎßå false (ÏàòÏ†ï Í∞ÄÎä•)\n        setIsReadOnly(shouldBeReadOnly);\n        alert('ÏÉÅÌÉúÍ∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§.'); // Î©îÏãúÏßÄ ÏùºÎ∞òÌôî\n        // ÏÉÅÌÉú Î≥ÄÍ≤Ω ÌõÑ ÏÉÅÏÑ∏ Ï†ïÎ≥¥Î•º Îã§Ïãú Î∂àÎü¨Ïò§Îäî Î°úÏßÅÏù¥ ÌïÑÏöîÌï† Ïàò ÏûàÏäµÎãàÎã§.\n        // loadEstimateDetail(); // ÏÉÅÏÑ∏ Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò§Îäî Ìï®ÏàòÍ∞Ä ÏûàÎã§Î©¥ Ìò∏Ï∂ú\n      } else {\n        // ÏùëÎãµ Î≥∏Î¨∏ÏùÑ ÏùΩÏñ¥ÏÑú Îçî ÏûêÏÑ∏Ìïú Ïò§Î•ò Î©îÏãúÏßÄ ÌôïÏù∏\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'ÏÉÅÌÉú Î≥ÄÍ≤ΩÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n      }\n      // } else { // Ïù¥ else Î∏îÎ°ùÎèÑ Ï†úÍ±∞Ìï©ÎãàÎã§.\n      //   alert('Í≤¨Ï†ÅÏöîÏ≤≠ ÏÉÅÌÉúÏóêÏÑúÎßå Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ëÏúºÎ°ú Î≥ÄÍ≤ΩÌï† Ïàò ÏûàÏäµÎãàÎã§.');\n      // }\n    } catch (error) {\n      console.error('ÏÉÅÌÉú Î≥ÄÍ≤Ω Ïã§Ìå®:', error.message);\n      alert(`ÏÉÅÌÉú Î≥ÄÍ≤ΩÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§: ${error.message}`);\n    }\n  };\n\n  // Ï≤®Î∂ÄÌååÏùº Í¥ÄÎ†® Ìï®ÏàòÎì§\n  const handleDownloadFile = async (file, type) => {\n    try {\n      if (type === 'customer' && !file.fileName.toLowerCase().endsWith('.pdf')) {\n        alert('Í≥†Í∞ùÏùÄ PDF ÌååÏùºÎßå Îã§Ïö¥Î°úÎìúÌï† Ïàò ÏûàÏäµÎãàÎã§.');\n        return;\n      }\n\n      // ÌååÏùº Îã§Ïö¥Î°úÎìú API Ìò∏Ï∂ú\n      const response = await fetch(`/api/estimate/attachments/${file.attachmentID}/download`);\n      if (response.ok) {\n        const blob = await response.blob();\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = file.fileName;\n        document.body.appendChild(a);\n        a.click();\n        window.URL.revokeObjectURL(url);\n        document.body.removeChild(a);\n      } else {\n        alert('ÌååÏùº Îã§Ïö¥Î°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n      }\n    } catch (error) {\n      console.error('ÌååÏùº Îã§Ïö¥Î°úÎìú Ïò§Î•ò:', error);\n      alert('ÌååÏùº Îã§Ïö¥Î°úÎìú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n  const handleUploadManagerFile = async fileType => {\n    const file = selectedPdfFiles[fileType];\n    if (!file) {\n      alert('ÏóÖÎ°úÎìúÌï† PDF ÌååÏùºÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');\n      return;\n    }\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n\n      // üîë ÏøºÎ¶¨ ÌååÎùºÎØ∏ÌÑ∞Î°ú Ï†ÑÏÜ°ÌïòÎèÑÎ°ù ÏàòÏ†ï\n      const response = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/attachments?uploadUserID=admin&fileType=manager&managerFileType=${fileType}`, {\n        method: 'POST',\n        body: formData\n      });\n      if (response.ok) {\n        alert('PDF ÌååÏùºÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏóÖÎ°úÎìúÎêòÏóàÏäµÎãàÎã§.');\n\n        // üîë ÌååÏùº Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ® - Îçî ÌôïÏã§ÌïòÍ≤å Ï≤òÎ¶¨\n        console.log('üîÑ ÌååÏùº ÏóÖÎ°úÎìú ÏôÑÎ£å, Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ® ÏãúÏûë');\n        await fetchManagerFiles();\n        await fetchCustomerFiles();\n\n        // üîë Ï∂îÍ∞ÄÎ°ú Ïû†Ïãú ÌõÑ Ìïú Î≤à Îçî ÏÉàÎ°úÍ≥†Ïπ® (Î∞±ÏóîÎìú Ï≤òÎ¶¨ ÏßÄÏó∞ Í≥†Î†§)\n        setTimeout(async () => {\n          console.log('üîÑ ÏßÄÏó∞ ÏÉàÎ°úÍ≥†Ïπ® Ïã§Ìñâ');\n          await fetchManagerFiles();\n          await fetchCustomerFiles();\n        }, 1000);\n\n        // üîë ÏóëÏÖÄ ÌååÏùºÎèÑ Ìï®Íªò ÏÉàÎ°úÍ≥†Ïπ® (Î∞±ÏóîÎìú ÍµêÏ≤¥ Î°úÏßÅ Î¨∏Ï†ú Ìï¥Í≤∞)\n        setTimeout(async () => {\n          console.log('üîÑ ÏóëÏÖÄ ÌååÏùº ÏÉàÎ°úÍ≥†Ïπ® Ïã§Ìñâ');\n          await fetchManagerFiles();\n          await fetchCustomerFiles();\n        }, 2000);\n\n        // ÏÑ†ÌÉùÎêú ÌååÏùº Ï¥àÍ∏∞Ìôî\n        setSelectedPdfFiles(prev => ({\n          ...prev,\n          [fileType]: null\n        }));\n\n        // ÌååÏùº ÏûÖÎ†• Ï¥àÍ∏∞Ìôî - Ìï¥Îãπ IDÏùò ÏûÖÎ†•Îßå Ï¥àÍ∏∞Ìôî\n        const fileInput = document.getElementById(`pdf-${fileType}`);\n        if (fileInput) fileInput.value = '';\n      } else {\n        const error = await response.json();\n        alert(`PDF ÏóÖÎ°úÎìú Ïã§Ìå®: ${error.message}`);\n      }\n    } catch (error) {\n      console.error('PDF ÏóÖÎ°úÎìú Ï§ë Ïò§Î•ò:', error);\n      alert('PDF ÏóÖÎ°úÎìú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n\n  // Í≥†Í∞ù Ï≤®Î∂Ä Îã§Ï§ë ÏÑ†ÌÉù\n  const handleCustomerFileSelect = async e => {\n    var _e$target$files;\n    const files = Array.from((_e$target$files = e.target.files) !== null && _e$target$files !== void 0 ? _e$target$files : []);\n    if (files.length === 0) return;\n    setSelectedCustomerFiles(files);\n    await uploadCustomerFiles(files);\n    if (customerAddInputRef.current) customerAddInputRef.current.value = '';\n  };\n\n  // Í≥†Í∞ù Ï≤®Î∂Ä Îã§Ï§ë ÏóÖÎ°úÎìú (ResultFiles/customerÏóê ÏóÖÎ°úÎìú)\n  const uploadCustomerFiles = async files => {\n    if (files.length === 0) {\n      alert('ÏóÖÎ°úÎìúÌï† ÌååÏùºÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');\n      return;\n    }\n    try {\n      for (const file of files) {\n        const formData = new FormData();\n        formData.append('file', file);\n\n        // manager ÏóÖÎ°úÎìú + managerFileType=customer Î°ú ÏóÖÎ°úÎìú ‚Üí ResultFiles/customerÏóê Ï†ÄÏû•ÎêòÎèÑÎ°ù Î∞±ÏóîÎìú Í∑úÏïΩ ÏÇ¨Ïö©\n        const response = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/attachments?uploadUserID=admin&fileType=manager&managerFileType=customer`, {\n          method: 'POST',\n          body: formData\n        });\n        if (!response.ok) {\n          let msg = 'Í≥†Í∞ù ÌååÏùº ÏóÖÎ°úÎìú Ïã§Ìå®';\n          try {\n            const er = await response.json();\n            msg = er.message || msg;\n          } catch {}\n          console.error(msg);\n        }\n      }\n      alert('Í≥†Í∞ù ÌååÏùº ÏóÖÎ°úÎìúÍ∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.');\n      await fetchCustomerFiles();\n      setSelectedCustomerFiles([]);\n    } catch (err) {\n      console.error('Í≥†Í∞ù ÌååÏùº ÏóÖÎ°úÎìú Ï§ë Ïò§Î•ò:', err);\n      alert('Í≥†Í∞ù ÌååÏùº ÏóÖÎ°úÎìú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n  const handleUploadCustomerFiles = async () => uploadCustomerFiles(selectedCustomerFiles);\n  const handleGenerateDatasheet = async () => {\n    try {\n      // TODO: ÏÇ¨Ïö©ÏûêÍ∞Ä ÎÇòÏ§ëÏóê Ï†úÍ≥µÌï† Datasheet ÏÉùÏÑ± Î°úÏßÅ\n      alert('Datasheet ÏÉùÏÑ± Í∏∞Îä•ÏùÄ Ï§ÄÎπÑ Ï§ëÏûÖÎãàÎã§.');\n    } catch (error) {\n      console.error('Datasheet ÏÉùÏÑ± Ïò§Î•ò:', error);\n      alert('Datasheet ÏÉùÏÑ± Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n\n  // ÏÑúÎ•ò ÏÉùÏÑ± ÌõÑ Îã§Ïö¥Î°úÎìú (ÌîÑÎ°†Ìä∏ÎßåÏúºÎ°ú Ï≤òÎ¶¨)\n  const generateAndDownload = async (type, endpoint) => {\n    if (!tempEstimateNo) return;\n    setDocGenerating(prev => ({\n      ...prev,\n      [type]: true\n    }));\n    try {\n      const resp = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/${endpoint}`, {\n        method: 'POST'\n      });\n      if (!resp.ok) {\n        const er = await resp.json().catch(() => ({}));\n        throw new Error(er.message || 'ÏÉùÏÑ± Ïã§Ìå®');\n      }\n      const pickLatest = list => list.filter(f => f.managerFileType === type).sort((a, b) => new Date(b.uploadDate).getTime() - new Date(a.uploadDate).getTime())[0];\n\n      // ÏµúÏ¥à ÏãúÎèÑ\n      let list = await fetchManagerFiles();\n      let target = pickLatest(list);\n\n      // ÏÉùÏÑ± ÏßÅÌõÑ Ïù∏Îç±Ïã± ÏßÄÏó∞ ÎåÄÎπÑ Ìè¥ÎßÅ(ÏµúÎåÄ 5Ìöå, 600ms Í∞ÑÍ≤©)\n      let retries = 5;\n      while (!target && retries-- > 0) {\n        await new Promise(r => setTimeout(r, 600));\n        list = await fetchManagerFiles();\n        target = pickLatest(list);\n      }\n      if (!target) throw new Error('ÏÉùÏÑ±Îêú ÌååÏùºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§. ÏÉàÎ°úÍ≥†Ïπ® ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');\n      await downloadFile(target.filePath, target.fileName);\n    } catch (e) {\n      alert(e.message || 'ÏÉùÏÑ± Ï§ë Ïò§Î•ò');\n    } finally {\n      setDocGenerating(prev => ({\n        ...prev,\n        [type]: false\n      }));\n    }\n  };\n\n  // Í≤¨Ï†Å ÏÑ∏Î∂Ä Ï†ïÎ≥¥ ÎØ∏Îãà Ïπ¥Îìú\n  const EstimateSummaryCard = () => {\n    const totalQty = (valves || []).reduce((sum, v) => sum + (Number(v === null || v === void 0 ? void 0 : v.qty) || 0), 0);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"step-section-detail estimate-summary-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-header-detail\",\n        style: {\n          marginBottom: 4\n        },\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uACAC\\uC801 \\uC138\\uBD80 \\uC815\\uBCF4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1662,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1661,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"summary-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"k\",\n            children: \"\\uACAC\\uC801\\uBC88\\uD638\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1665,\n            columnNumber: 40\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"v\",\n            children: summaryEstimateNo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1665,\n            columnNumber: 71\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"k\",\n            children: \"\\uC0C1\\uD0DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1665,\n            columnNumber: 117\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"v\",\n            children: currentStatus || '-'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1665,\n            columnNumber: 146\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1665,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"k\",\n            children: \"\\uD68C\\uC0AC\\uBA85\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1666,\n            columnNumber: 40\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"v\",\n            children: summaryCompanyName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1666,\n            columnNumber: 70\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"k\",\n            children: \"\\uC218\\uB7C9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1666,\n            columnNumber: 117\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"v\",\n            children: totalQty || '-'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1666,\n            columnNumber: 146\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1666,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"k\",\n            children: \"\\uC694\\uCCAD\\uC790\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1667,\n            columnNumber: 40\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"v\",\n            children: summaryRequesterName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1667,\n            columnNumber: 70\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"k\",\n            children: \"\\uC694\\uCCAD\\uC77C\\uC790\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1667,\n            columnNumber: 119\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"v\",\n            children: summaryRequestDate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1667,\n            columnNumber: 150\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1667,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"k\",\n            children: \"\\uB2F4\\uB2F9\\uC790\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1668,\n            columnNumber: 40\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"v\",\n            children: summaryManager\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1668,\n            columnNumber: 70\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"k\",\n            children: \"\\uC644\\uB8CC\\uC77C\\uC790\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1668,\n            columnNumber: 113\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"v\",\n            children: summaryCompletedDate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1668,\n            columnNumber: 144\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1668,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1664,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1660,\n      columnNumber: 7\n    }, this);\n  };\n  const handleStartQuote = async () => {\n    try {\n      const userStr = localStorage.getItem('user');\n      const currentUser = userStr ? JSON.parse(userStr) : null;\n      const currentUserId = currentUser === null || currentUser === void 0 ? void 0 : currentUser.userId;\n      if (!tempEstimateNo || !currentUserId) {\n        alert('Î°úÍ∑∏Ïù∏ Ï†ïÎ≥¥ ÎòêÎäî Í≤¨Ï†ÅÎ≤àÌò∏Í∞Ä ÏóÜÏäµÎãàÎã§.');\n        return;\n      }\n      const res = await assignEstimate(tempEstimateNo, currentUserId);\n      if (res && (res.message || '').includes('ÏôÑÎ£å')) {\n        // ÏÉÅÌÉú ÌÖçÏä§Ìä∏ Í∞±Ïã†\n        setCurrentStatus('Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë');\n        setQuoteStarted(true);\n        // ÏÉÅÏÑ∏ Ï†ïÎ≥¥ Ïû¨Ï°∞ÌöåÎ°ú ÌôîÎ©¥ ÏµúÏã†Ìôî\n        await loadExistingData();\n      } else {\n        alert('Í≤¨Ï†Å ÏãúÏûë Ï≤òÎ¶¨Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n      }\n    } catch (e) {\n      console.error(e);\n      alert('Í≤¨Ï†Å ÏãúÏûë Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n  const handleEndQuote = () => {\n    alert('Í≤¨Ï†Å ÎßàÍ∞ê');\n  };\n\n  // Í≤¨Ï†ÅÏôÑÎ£å: CurEstimateNo ÏÉùÏÑ± + ÏÉÅÌÉú Î≥ÄÍ≤Ω\n  const handleCompleteQuote = async () => {\n    if (!tempEstimateNo) return;\n    try {\n      const resp = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/complete`, {\n        method: 'POST'\n      });\n      if (!resp.ok) {\n        const er = await resp.json().catch(() => ({\n          message: 'Ï≤òÎ¶¨ Ïã§Ìå®'\n        }));\n        alert(er.message || 'Ï≤òÎ¶¨ Ïã§Ìå®');\n        return;\n      }\n      const data = await resp.json();\n      const curNo = data.curEstimateNo;\n      setSummaryEstimateNo(curNo || '-');\n      setSummaryCompletedDate((() => {\n        const m = /YA(\\d{4})(\\d{2})(\\d{2})-(\\d{3})/.exec(curNo || '');\n        return m ? `${m[1]}.${m[2]}.${m[3]}` : '-';\n      })());\n      setCurrentStatus('Í≤¨Ï†ÅÏôÑÎ£å');\n    } catch (e) {\n      alert('Ï≤òÎ¶¨ Ï§ë Ïò§Î•ò');\n    }\n  };\n\n  // ÏôÑÎ£å Ï∑®ÏÜå(ÏßÑÌñâÏ§ëÏúºÎ°ú ÎêòÎèåÎ¶¨Í∏∞)\n  const handleCancelComplete = async () => {\n    if (!tempEstimateNo) return;\n    try {\n      const resp = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/complete/cancel`, {\n        method: 'POST'\n      });\n      if (!resp.ok) throw new Error('ÏôÑÎ£åÏ∑®ÏÜå Ïã§Ìå®');\n      setCurrentStatus('Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë');\n    } catch (e) {\n      alert('ÏôÑÎ£åÏ∑®ÏÜå Ï§ë Ïò§Î•ò');\n    }\n  };\n\n  // Ï£ºÎ¨∏ ÌôïÏ†ï\n  const handleConfirmOrder = async () => {\n    if (!tempEstimateNo) return;\n    try {\n      const resp = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/order/confirm`, {\n        method: 'POST'\n      });\n      if (!resp.ok) throw new Error('Ï£ºÎ¨∏ÌôïÏ†ï Ïã§Ìå®');\n      setCurrentStatus('Ï£ºÎ¨∏');\n    } catch (e) {\n      alert('Ï£ºÎ¨∏ÌôïÏ†ï Ï§ë Ïò§Î•ò');\n    }\n  };\n  const handleGenerateFile = async managerFileType => {\n    try {\n      let apiEndpoint = '';\n      let fileTypeName = '';\n      switch (managerFileType) {\n        case 'cvlist':\n          apiEndpoint = `http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/generate-cv`;\n          fileTypeName = 'CV Î¶¨Ïä§Ìä∏';\n          break;\n        case 'vllist':\n          apiEndpoint = `http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/generate-vl`;\n          fileTypeName = 'VL Î¶¨Ïä§Ìä∏';\n          break;\n        case 'datasheet':\n          apiEndpoint = `http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/generate-datasheet`;\n          fileTypeName = 'DataSheet';\n          break;\n        case 'singlequote':\n          apiEndpoint = `http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/generate-single-quote`;\n          fileTypeName = 'Îã®ÌíàÍ≤¨Ï†ÅÏÑú';\n          break;\n        case 'multiquote':\n          apiEndpoint = `http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/generate-multi-quote`;\n          fileTypeName = 'Îã§ÏàòÎüâÍ≤¨Ï†ÅÏÑú';\n          break;\n        default:\n          alert('ÏßÄÏõêÌïòÏßÄ ÏïäÎäî ÌååÏùº ÌÉÄÏûÖÏûÖÎãàÎã§.');\n          return;\n      }\n      console.log(`${fileTypeName} ÏÉùÏÑ± ÏãúÏûë:`, tempEstimateNo);\n      const response = await fetch(apiEndpoint, {\n        method: 'POST'\n      });\n      if (response.ok) {\n        const result = await response.json();\n        alert(`${fileTypeName}Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§!\\n\\nÏÉùÏÑ±Îêú ÌååÏùº:\\n${result.fileName}`);\n        console.log(`${fileTypeName} ÏÉùÏÑ± ÏÑ±Í≥µ:`, result);\n\n        // üîë ÌååÏùº ÏÉùÏÑ± ÏôÑÎ£å ÌõÑ ÏûêÎèô ÏÉàÎ°úÍ≥†Ïπ® Ï∂îÍ∞Ä\n        await fetchManagerFiles();\n        await fetchCustomerFiles();\n\n        // Í∏∞Ï°¥ Ï≤®Î∂ÄÌååÏùº Î™©Î°ùÎèÑ ÏÉàÎ°úÍ≥†Ïπ®\n        loadExistingData();\n      } else {\n        const error = await response.json();\n        alert(`${fileTypeName} ÏÉùÏÑ± Ïã§Ìå®: ${error.message}`);\n        console.error(`${fileTypeName} ÏÉùÏÑ± Ïã§Ìå®:`, error);\n      }\n    } catch (error) {\n      console.error('ÌååÏùº ÏÉùÏÑ± Ïò§Î•ò:', error);\n      alert('ÌååÏùº ÏÉùÏÑ± Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n  // ÏÑ†ÌÉùÍ∞íÏù¥ Î∞îÎÄî ÎïåÎßàÎã§ ÌòÑÏû¨ ÌÉúÍ∑∏(sheetID)Î°ú ÏûÑÏãú Ï†ÄÏû•\n  useEffect(() => {\n    if (!selectedValve) return;\n    setTempSelections(prev => ({\n      ...prev,\n      [selectedValve.sheetID]: {\n        body: {\n          ...bodySelections\n        },\n        trim: {\n          ...trimSelections\n        },\n        act: {\n          ...actSelections\n        },\n        acc: {\n          ...accSelections\n        }\n      }\n    }));\n  }, [selectedValve === null || selectedValve === void 0 ? void 0 : selectedValve.sheetID, bodySelections, trimSelections, actSelections, accSelections]);\n  useEffect(() => {\n    var _selectedValve$body, _accSelections$positi, _accSelections$positi2, _accSelections$soleno, _accSelections$soleno2, _accSelections$limite, _accSelections$limite2, _accSelections$airSup, _accSelections$airSup2, _accSelections$volume, _accSelections$volume2, _accSelections$airOpe, _accSelections$airOpe2, _accSelections$lockUp, _accSelections$lockUp2, _accSelections$snapAc, _accSelections$snapAc2;\n    if (!selectedValve) return;\n    const dto = {\n      valveId: (selectedValve === null || selectedValve === void 0 ? void 0 : (_selectedValve$body = selectedValve.body) === null || _selectedValve$body === void 0 ? void 0 : _selectedValve$body.typeCode) || '',\n      body: {\n        bonnetType: bodySelections.bonnetType || '',\n        materialBody: bodySelections.materialBody || '',\n        rating: bodySelections.ratingCode || '',\n        ratingUnit: bodySelections.ratingUnitCode || '',\n        connection: bodySelections.connection || '',\n        sizeUnit: bodySelections.sizeBodyUnitCode || '',\n        size: bodySelections.sizeBodyCode || ''\n      },\n      trim: {\n        type: trimSelections.trimType || '',\n        series: trimSelections.trimSeries || '',\n        portSize: trimSelections.sizePortCode || '',\n        portSizeUnit: trimSelections.sizePortUnitCode || '',\n        form: trimSelections.form || '',\n        materialTrim: trimSelections.materialTrim || '',\n        option: trimSelections.option || ''\n      },\n      actuator: {\n        type: actSelections.actionType || '',\n        series: actSelections.series || '',\n        size: actSelections.size || '',\n        hw: actSelections.hw || ''\n      },\n      accessories: {\n        PosCode: ((_accSelections$positi = accSelections.positioner) === null || _accSelections$positi === void 0 ? void 0 : _accSelections$positi.modelCode) || null,\n        PosMakerCode: ((_accSelections$positi2 = accSelections.positioner) === null || _accSelections$positi2 === void 0 ? void 0 : _accSelections$positi2.makerCode) || null,\n        SolCode: ((_accSelections$soleno = accSelections.solenoid) === null || _accSelections$soleno === void 0 ? void 0 : _accSelections$soleno.modelCode) || null,\n        SolMakerCode: ((_accSelections$soleno2 = accSelections.solenoid) === null || _accSelections$soleno2 === void 0 ? void 0 : _accSelections$soleno2.makerCode) || null,\n        LimCode: ((_accSelections$limite = accSelections.limiter) === null || _accSelections$limite === void 0 ? void 0 : _accSelections$limite.modelCode) || null,\n        LimMakerCode: ((_accSelections$limite2 = accSelections.limiter) === null || _accSelections$limite2 === void 0 ? void 0 : _accSelections$limite2.makerCode) || null,\n        ASCode: ((_accSelections$airSup = accSelections.airSupply) === null || _accSelections$airSup === void 0 ? void 0 : _accSelections$airSup.modelCode) || null,\n        ASMakerCode: ((_accSelections$airSup2 = accSelections.airSupply) === null || _accSelections$airSup2 === void 0 ? void 0 : _accSelections$airSup2.makerCode) || null,\n        VolCode: ((_accSelections$volume = accSelections.volumeBooster) === null || _accSelections$volume === void 0 ? void 0 : _accSelections$volume.modelCode) || null,\n        VolMakerCode: ((_accSelections$volume2 = accSelections.volumeBooster) === null || _accSelections$volume2 === void 0 ? void 0 : _accSelections$volume2.makerCode) || null,\n        AirOpCode: ((_accSelections$airOpe = accSelections.airOperator) === null || _accSelections$airOpe === void 0 ? void 0 : _accSelections$airOpe.modelCode) || null,\n        AirOpMakerCode: ((_accSelections$airOpe2 = accSelections.airOperator) === null || _accSelections$airOpe2 === void 0 ? void 0 : _accSelections$airOpe2.makerCode) || null,\n        LockupCode: ((_accSelections$lockUp = accSelections.lockUp) === null || _accSelections$lockUp === void 0 ? void 0 : _accSelections$lockUp.modelCode) || null,\n        LockupMakerCode: ((_accSelections$lockUp2 = accSelections.lockUp) === null || _accSelections$lockUp2 === void 0 ? void 0 : _accSelections$lockUp2.makerCode) || null,\n        SnapActCode: ((_accSelections$snapAc = accSelections.snapActingRelay) === null || _accSelections$snapAc === void 0 ? void 0 : _accSelections$snapAc.modelCode) || null,\n        SnapActMakerCode: ((_accSelections$snapAc2 = accSelections.snapActingRelay) === null || _accSelections$snapAc2 === void 0 ? void 0 : _accSelections$snapAc2.makerCode) || null\n      }\n    };\n    setSpecBySheetId(prev => ({\n      ...prev,\n      [selectedValve.sheetID]: dto\n    }));\n  }, [selectedValve === null || selectedValve === void 0 ? void 0 : selectedValve.sheetID, bodySelections, trimSelections, actSelections, accSelections]);\n  const handleDeleteManagerFile = async file => {\n    try {\n      if (window.confirm('Ï†ïÎßêÎ°ú Ïù¥ ÌååÏùºÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {\n        const response = await fetch(`/api/estimate/attachments/${file.attachmentID}`, {\n          method: 'DELETE'\n        });\n        if (response.ok) {\n          alert('ÌååÏùºÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.');\n          loadExistingData(); // Ï≤®Î∂ÄÌååÏùº Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ®\n        } else {\n          alert('ÌååÏùº ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n        }\n      }\n    } catch (error) {\n      console.error('ÌååÏùº ÏÇ≠Ï†ú Ïò§Î•ò:', error);\n      alert('ÌååÏùº ÏÇ≠Ï†ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n\n  // ÏÇ¨Ïñë Ï†ÄÏû• Ìï®Ïàò\n  // ÌÉúÍ∑∏Î≥Ñ ÏÑúÎ°ú Îã§Î•∏ ÏûÖÎ†•ÏùÑ ÏàòÏßëÌïòÍ∏∞ ÏúÑÌïú ÏÉÅÌÉú\n  const [specBySheetId, setSpecBySheetId] = useState({});\n\n  // selectedValve, bodySelections, trimSelections, actSelections, accSelections Î≥ÄÍ≤Ω Ïãú Ï†ÄÏû•\n  useEffect(() => {\n    var _selectedValve$body2;\n    if (!selectedValve) return;\n    const dto = buildSaveSpecFromSelections({\n      body: bodySelections,\n      trim: trimSelections,\n      act: actSelections,\n      acc: accSelections,\n      valveTypeCode: (selectedValve === null || selectedValve === void 0 ? void 0 : (_selectedValve$body2 = selectedValve.body) === null || _selectedValve$body2 === void 0 ? void 0 : _selectedValve$body2.typeCode) || ''\n    });\n    setSpecBySheetId(prev => ({\n      ...prev,\n      [selectedValve.sheetID]: dto\n    }));\n  }, [selectedValve === null || selectedValve === void 0 ? void 0 : selectedValve.sheetID, bodySelections, trimSelections, actSelections, accSelections]);\n  const handleSaveValveOrder = async () => {\n    const sheetIDs = valves.map(v => v.sheetID); // ÌòÑÏû¨ ÌôîÎ©¥ ÏàúÏÑúÎåÄÎ°ú\n    const resp = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/requests/order`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(sheetIDs)\n    });\n    if (resp.ok) {\n      // Î°úÏª¨ Î≥¥Í∏∞Ïö© sheetNo Ïã±ÌÅ¨\n      setValves(prev => prev.map((v, i) => ({\n        ...v,\n        sheetNo: i + 1\n      })));\n      alert('ÏàúÏÑúÍ∞Ä Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.');\n    } else {\n      alert('ÏàúÏÑú Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n    }\n  };\n\n  // ÏàúÏÑú Ï†ÄÏû•: ÌôîÎ©¥Ïùò valves ÏàúÏÑúÎ•º SheetNoÎ°ú Î∞òÏòÅ\n  const saveValveOrder = async () => {\n    if (!tempEstimateNo) return;\n    const sheetIDs = valves.map(v => v.sheetID); // Ï†ÑÏ≤¥ Î™©Î°ùÏùò ÌòÑÏû¨ ÏàúÏÑú\n    await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/requests/order`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(sheetIDs)\n    });\n  };\n  const handleSaveSpecification = useCallback(async () => {\n    try {\n      var _selectedValve$body3;\n      // 0) ÏàúÏÑú Î®ºÏ†Ä Ï†ÄÏû• ‚Üí SheetNo DB Î∞òÏòÅ\n      await saveValveOrder();\n\n      // 1) ÏùºÍ¥Ñ Ï†ÄÏû• ÎåÄÏÉÅ Í≤∞Ï†ï(Ï†ÑÏ≤¥)\n      const template = buildSaveSpecFromSelections({\n        body: bodySelections,\n        trim: trimSelections,\n        act: actSelections,\n        acc: accSelections,\n        valveTypeCode: (selectedValve === null || selectedValve === void 0 ? void 0 : (_selectedValve$body3 = selectedValve.body) === null || _selectedValve$body3 === void 0 ? void 0 : _selectedValve$body3.typeCode) || ''\n      });\n      const items = valves.map(v => {\n        var _specBySheetId$v$shee;\n        return {\n          sheetID: v.sheetID,\n          specification: (_specBySheetId$v$shee = specBySheetId[v.sheetID]) !== null && _specBySheetId$v$shee !== void 0 ? _specBySheetId$v$shee : tempSelections[v.sheetID] ? buildSaveSpecFromSelections({\n            body: tempSelections[v.sheetID].body,\n            trim: tempSelections[v.sheetID].trim,\n            act: tempSelections[v.sheetID].act,\n            acc: tempSelections[v.sheetID].acc\n          }) : template\n        };\n      });\n\n      // 2) ÏùºÍ¥Ñ ÏÇ¨Ïñë Ï†ÄÏû•\n      const resp = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/specification/bulk`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          items\n        })\n      });\n      if (resp.ok) alert('Î™®Îì† ÌÉúÍ∑∏Ïóê ÏÇ¨ÏñëÏù¥ ÏùºÍ¥Ñ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.');else alert('ÏÇ¨Ïñë ÏùºÍ¥Ñ Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n    } catch (e) {\n      console.error(e);\n      alert('ÏÇ¨Ïñë ÏùºÍ¥Ñ Ï†ÄÏû• Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n    // ÏùòÏ°¥ÏÑ±: valves, specBySheetId, tempSelections, bodySelections, trimSelections, actSelections, accSelections, selectedValve, tempEstimateNo\n  }, [valves, specBySheetId, tempSelections, bodySelections, trimSelections, actSelections, accSelections, selectedValve, tempEstimateNo]);\n  const AccessorySelector = ({\n    accTypeKey,\n    accSelections,\n    setAccSelections,\n    accMakerList,\n    accModelList\n  }) => {\n    _s();\n    const [makerSearchTerm, setMakerSearchTerm] = useState('');\n    const [modelSearchTerm, setModelSearchTerm] = useState('');\n    const [specSearchTerm, setSpecSearchTerm] = useState('');\n    const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n    const [isSelected, setIsSelected] = useState(false); // ÏÑ†ÌÉù Ïó¨Î∂Ä ÏÉÅÌÉú Ï∂îÍ∞Ä\n    const dropdownRef = useRef(null);\n    const currentAcc = accSelections[accTypeKey];\n    const typeCode = currentAcc === null || currentAcc === void 0 ? void 0 : currentAcc.typeCode;\n\n    // Ïª¥Ìè¨ÎÑåÌä∏ ÎßàÏö¥Ìä∏ Ïãú ÎîîÎ≤ÑÍπÖ Î°úÍ∑∏\n    useEffect(() => {\n      console.log(`üîç AccessorySelector ${accTypeKey} ÎßàÏö¥Ìä∏:`, {\n        accTypeKey,\n        typeCode,\n        currentAcc,\n        accMakerListLength: accMakerList.length,\n        accModelListLength: accModelList.length\n      });\n\n      // accMakerListÏôÄ accModelListÏùò ÎÇ¥Ïö© ÌôïÏù∏\n      console.log(`üîç ${accTypeKey} - accMakerList ÎÇ¥Ïö©:`, accMakerList);\n      console.log(`üîç ${accTypeKey} - accModelList ÎÇ¥Ïö© (ÌÉÄÏûÖÎ≥Ñ ÌïÑÌÑ∞ÎßÅ):`, accModelList.filter(item => item.accTypeCode === typeCode));\n    }, [accTypeKey, typeCode, currentAcc, accMakerList.length, accModelList.length, accMakerList, accModelList]);\n\n    // Ïª¥Ìè¨ÎÑåÌä∏ ÎßàÏö¥Ìä∏ Ïãú ÎòêÎäî accSelections Î≥ÄÍ≤Ω Ïãú ÏûÖÎ†• ÌïÑÎìú Ï¥àÍ∏∞Ìôî Î∞è ÏÑ†ÌÉù ÏÉÅÌÉú ÏÑ§Ï†ï\n    useEffect(() => {\n      if (currentAcc !== null && currentAcc !== void 0 && currentAcc.modelCode) {\n        var _accMakerList$find, _accModelList$find;\n        const selectedMakerName = ((_accMakerList$find = accMakerList.find(maker => maker.accMakerCode === (currentAcc === null || currentAcc === void 0 ? void 0 : currentAcc.makerCode) && maker.accTypeCode === typeCode)) === null || _accMakerList$find === void 0 ? void 0 : _accMakerList$find.accMakerName) || '';\n        const selectedModelName = ((_accModelList$find = accModelList.find(model => model.accModelCode === (currentAcc === null || currentAcc === void 0 ? void 0 : currentAcc.modelCode) && model.accTypeCode === typeCode)) === null || _accModelList$find === void 0 ? void 0 : _accModelList$find.accModelName) || '';\n        setMakerSearchTerm(selectedMakerName);\n        setModelSearchTerm(selectedModelName);\n        setSpecSearchTerm(currentAcc.specification || '');\n        setIsSelected(true); // Î™®Îç∏Ïù¥ Ïù¥ÎØ∏ ÏÑ†ÌÉùÎêòÏñ¥ ÏûàÏúºÎ©¥ isSelectedÎ•º trueÎ°ú\n      } else {\n        setMakerSearchTerm('');\n        setModelSearchTerm('');\n        setSpecSearchTerm('');\n        setIsSelected(false); // Î™®Îç∏Ïù¥ ÏóÜÏúºÎ©¥ isSelectedÎ•º falseÎ°ú\n      }\n    }, [currentAcc, accMakerList, accModelList, typeCode]);\n\n    // ÌÜµÌï© Í≤ÄÏÉâ ÌïÑÌÑ∞ÎßÅ Î°úÏßÅ\n    const filteredModels = useMemo(() => {\n      const allSearchTerms = [makerSearchTerm, modelSearchTerm, specSearchTerm].filter(term => term);\n      console.log('üîç AccessorySelector ÎîîÎ≤ÑÍπÖ:');\n      console.log('  - accTypeKey:', accTypeKey);\n      console.log('  - typeCode:', typeCode);\n      console.log('  - accModelList Í∏∏Ïù¥:', accModelList.length);\n      console.log('  - accMakerList Í∏∏Ïù¥:', accMakerList.length);\n      if (allSearchTerms.length === 0) {\n        // Í≤ÄÏÉâÏñ¥Í∞Ä ÏóÜÏúºÎ©¥ Ìï¥Îãπ ÌÉÄÏûÖ ÏΩîÎìúÏôÄ ÏùºÏπòÌïòÎäî Ï†ÑÏ≤¥ Î™®Îç∏ Î∞òÌôò\n        const filtered = accModelList.filter(item => item.accTypeCode === typeCode);\n        console.log('  - ÌïÑÌÑ∞ÎßÅÎêú Î™®Îç∏ Ïàò (Í≤ÄÏÉâÏñ¥ ÏóÜÏùå):', filtered.length);\n        console.log('  - ÌïÑÌÑ∞ÎßÅÎêú Î™®Îç∏Îì§:', filtered);\n        return filtered;\n      }\n      const lowerCaseSearchWords = allSearchTerms.map(term => term.toLowerCase().split(' ').filter(word => word)).flat();\n      const filtered = accModelList.filter(item => {\n        var _accMakerList$find2;\n        if (!typeCode || item.accTypeCode !== typeCode) {\n          return false;\n        }\n        const makerName = (((_accMakerList$find2 = accMakerList.find(maker => maker.accMakerCode === item.accMakerCode && maker.accTypeCode === item.accTypeCode)) === null || _accMakerList$find2 === void 0 ? void 0 : _accMakerList$find2.accMakerName) || '').toLowerCase();\n        const modelName = (item.accModelName || '').toLowerCase();\n        const specification = (item.accSize || '').toLowerCase();\n\n        // Î™®Îì† Í≤ÄÏÉâ Îã®Ïñ¥Î•º Î™®Îì† ÌïÑÎìúÏóêÏÑú AND Í≤ÄÏÉâ\n        return lowerCaseSearchWords.every(word => makerName.includes(word) || modelName.includes(word) || specification.includes(word));\n      });\n      console.log('  - ÌïÑÌÑ∞ÎßÅÎêú Î™®Îç∏ Ïàò (Í≤ÄÏÉâÏñ¥ ÏûàÏùå):', filtered.length);\n      console.log('  - ÌïÑÌÑ∞ÎßÅÎêú Î™®Îç∏Îì§:', filtered);\n      return filtered;\n    }, [makerSearchTerm, modelSearchTerm, specSearchTerm, accModelList, accMakerList, typeCode]);\n\n    // ÏïÖÏÑ∏ÏÇ¨Î¶¨ ÏÑ†ÌÉù Ìï∏Îì§Îü¨\n    const handleSelectAccessory = selectedModel => {\n      var _accMakerList$find3;\n      setAccSelections(prev => ({\n        ...prev,\n        [accTypeKey]: {\n          typeCode: selectedModel.accTypeCode,\n          makerCode: selectedModel.accMakerCode,\n          modelCode: selectedModel.accModelCode,\n          specification: selectedModel.accSize || ''\n        }\n      }));\n      // ÏÑ†ÌÉù Ïãú ÏÑ∏ ÏûÖÎ†• ÌïÑÎìúÎ•º ÏÑ†ÌÉùÎêú Í∞íÏúºÎ°ú Ï±ÑÏö∞Í∏∞\n      const selectedMakerName = ((_accMakerList$find3 = accMakerList.find(maker => maker.accMakerCode === selectedModel.accMakerCode && maker.accTypeCode === selectedModel.accTypeCode)) === null || _accMakerList$find3 === void 0 ? void 0 : _accMakerList$find3.accMakerName) || '';\n      setMakerSearchTerm(selectedMakerName);\n      setModelSearchTerm(selectedModel.accModelName || '');\n      setSpecSearchTerm(selectedModel.accSize || '');\n      setIsDropdownOpen(false);\n      setIsSelected(true); // ÏÑ†ÌÉù ÏôÑÎ£å Ïãú isSelectedÎ•º trueÎ°ú\n    };\n\n    // ÏÑ†ÌÉù Ìï¥Ï†ú Ìï∏Îì§Îü¨\n    const handleReset = () => {\n      setAccSelections(prev => ({\n        ...prev,\n        [accTypeKey]: {\n          typeCode: typeCode || '',\n          // Í∏∞Ï°¥ typeCode Ïú†ÏßÄ\n          makerCode: '',\n          modelCode: '',\n          specification: ''\n        }\n      }));\n      setMakerSearchTerm('');\n      setModelSearchTerm('');\n      setSpecSearchTerm('');\n      setIsSelected(false); // ÏÑ†ÌÉù Ìï¥Ï†ú Ïãú isSelectedÎ•º falseÎ°ú\n      setIsDropdownOpen(false); // ÎìúÎ°≠Îã§Ïö¥ Îã´Í∏∞\n    };\n\n    // Ïô∏Î∂Ä ÌÅ¥Î¶≠ Í∞êÏßÄ (ÎìúÎ°≠Îã§Ïö¥ Îã´Í∏∞)\n    useEffect(() => {\n      const handleClickOutside = event => {\n        if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n          setIsDropdownOpen(false);\n        }\n      };\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => {\n        document.removeEventListener('mousedown', handleClickOutside);\n      };\n    }, []);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"accessory-selector\",\n      ref: dropdownRef,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group-detail\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"\\uBA54\\uC774\\uCEE4\",\n          value: makerSearchTerm,\n          onChange: e => {\n            if (!isSelected) {\n              setMakerSearchTerm(e.target.value);\n              setIsDropdownOpen(true);\n            }\n          },\n          onFocus: () => {\n            if (!isSelected) setIsDropdownOpen(true);\n          },\n          readOnly: isSelected || isReadOnly // isReadOnly ÏÉÅÌÉúÏóê Îî∞Îùº ÏùΩÍ∏∞ Ï†ÑÏö©\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2132,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"\\uBAA8\\uB378\\uBA85\",\n          value: modelSearchTerm,\n          onChange: e => {\n            if (!isSelected) {\n              setModelSearchTerm(e.target.value);\n              setIsDropdownOpen(true);\n            }\n          },\n          onFocus: () => {\n            if (!isSelected) setIsDropdownOpen(true);\n          },\n          readOnly: isSelected || isReadOnly\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2140,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"\\uADDC\\uACA9\",\n          value: specSearchTerm,\n          onChange: e => {\n            if (!isSelected) {\n              setSpecSearchTerm(e.target.value);\n              setIsDropdownOpen(true);\n            }\n          },\n          onFocus: () => {\n            if (!isSelected) setIsDropdownOpen(true);\n          },\n          readOnly: isSelected || isReadOnly\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2148,\n          columnNumber: 11\n        }, this), isSelected && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleReset,\n          className: \"reset-button\",\n          disabled: isReadOnly,\n          children: \"\\uCD08\\uAE30\\uD654\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2157,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2131,\n        columnNumber: 9\n      }, this), isDropdownOpen && /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"dropdown-list\",\n        children: filteredModels.length > 0 ? filteredModels.map(item => {\n          var _accMakerList$find4;\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            onClick: () => {\n              if (!isReadOnly) handleSelectAccessory(item);\n            } // isReadOnlyÏùº Îïå ÌÅ¥Î¶≠ Î∂àÍ∞Ä\n            ,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"dropdown-maker\",\n              children: ((_accMakerList$find4 = accMakerList.find(maker => maker.accMakerCode === item.accMakerCode)) === null || _accMakerList$find4 === void 0 ? void 0 : _accMakerList$find4.accMakerName) || ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2168,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"dropdown-model\",\n              children: item.accModelName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2169,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"dropdown-spec\",\n              children: item.accSize || ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2170,\n              columnNumber: 19\n            }, this)]\n          }, `${item.accTypeCode}-${item.accMakerCode}-${item.accModelCode}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2164,\n            columnNumber: 17\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\uAC80\\uC0C9 \\uACB0\\uACFC\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2174,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2161,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2130,\n      columnNumber: 7\n    }, this);\n  };\n  // Ï¥àÍ∏∞Ìôî\n  _s(AccessorySelector, \"tfF51svEF+CQ5XBmtNonKekAjZg=\");\n  useEffect(() => {\n    console.log('EstimateDetailPage Ï¥àÍ∏∞Ìôî ÏãúÏûë');\n    fetchBodyValveList();\n    fetchMasterData();\n  }, []); // ÏùòÏ°¥ÏÑ± Î∞∞Ïó¥ ÎπÑÏõÄ - Ï¥àÍ∏∞ Î°úÎìúÎßå ÌïÑÏöî\n\n  // bodyValveListÏôÄ bodyRatingListÍ∞Ä Î°úÎìúÎêú ÌõÑ Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞ Î°úÎìú\n  useEffect(() => {\n    console.log('useEffect Ïã§Ìñâ:', {\n      bodyValveListLength: bodyValveList.length,\n      bodyRatingListLength: bodyRatingList.length,\n      tempEstimateNo\n    });\n    if (bodyValveList.length > 0 && bodyRatingList.length > 0 && tempEstimateNo) {\n      console.log('loadExistingData Ìò∏Ï∂ú ÏãúÏûë');\n      loadExistingData();\n    }\n  }, [bodyValveList.length, bodyRatingList.length, tempEstimateNo]); // loadExistingData ÏùòÏ°¥ÏÑ± Ï†úÍ±∞\n\n  // bodyValveListÍ∞Ä Î°úÎìúÎêú ÌõÑ ÌÉÄÏûÖ Ïù¥Î¶ÑÏùÑ ÏΩîÎìú‚ÜíÏãúÎ¶¨Ï¶àÎ™ÖÏúºÎ°ú ÎèôÍ∏∞Ìôî\n  useEffect(() => {\n    if (bodyValveList.length > 0) {\n      setTypes(prevTypes => {\n        let changed = false;\n        const next = prevTypes.map(type => {\n          var _code;\n          const key = (_code = type.code) !== null && _code !== void 0 ? _code : type.id;\n          const valveInfo = bodyValveList.find(v => v.valveSeriesCode === key);\n          const newName = valveInfo ? valveInfo.valveSeries : type.name;\n          if (newName !== type.name) {\n            changed = true;\n            return {\n              ...type,\n              name: newName\n            };\n          }\n          return type;\n        });\n        return changed ? next : prevTypes;\n      });\n    }\n  }, [bodyValveList]);\n\n  // selectedValveÍ∞Ä Î≥ÄÍ≤ΩÎê† ÎïåÎßàÎã§ Í∏∞Ï°¥ ÏÇ¨Ïñë Îç∞Ïù¥ÌÑ∞ Î°úÎìú\n  useEffect(() => {\n    if (selectedValve) {\n      // Ï¥àÍ∏∞ Î°úÎìúÎßå ÌïÑÏöîÌïòÎØÄÎ°ú Ïó¨Í∏∞ÏÑúÎäî ÏïÑÎ¨¥Í≤ÉÎèÑ ÌïòÏßÄ ÏïäÏùå\n      // handleValveSelectionÏóêÏÑú Ï≤òÎ¶¨Îê®\n    }\n  }, [selectedValve]);\n\n  // selectedTypeÏù¥ Î≥ÄÍ≤ΩÎêòÎ©¥ selectedValveÎ•º Ï¥àÍ∏∞ÌôîÌïòÏó¨ Step 3Î•º Ïà®ÍπÄ\n  useEffect(() => {\n    setSelectedValve(null);\n  }, [selectedType]);\n\n  // Ï¥àÍ∏∞ ÏÇ¨Ïñë Îç∞Ïù¥ÌÑ∞ Î°úÎìú (DBÏóêÏÑú Î∂àÎü¨Ïò§Í∏∞)\n  const loadInitialSpecification = async sheetID => {\n    // Ïù¥ÎØ∏ ÏûÑÏãú Ï†ÄÏû•Îêú Í∞íÏù¥ ÏûàÏúºÎ©¥ ÏÑúÎ≤ÑÍ∞íÏúºÎ°ú ÎçÆÏñ¥Ïì∞ÏßÄ ÏïäÏùå\n    if (tempSelections[sheetID]) {\n      const saved = tempSelections[sheetID];\n      setBodySelections(saved.body || {});\n      setTrimSelections(saved.trim || {});\n      setActSelections(saved.act || {});\n      setAccSelections(saved.acc || {});\n      return;\n    }\n    try {\n      if (!tempEstimateNo) {\n        console.error(\"tempEstimateNoÍ∞Ä ÏóÜÏäµÎãàÎã§.\");\n        return;\n      }\n      const response = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/specification/${sheetID}`);\n      if (response.ok) {\n        const specificationData = await response.json();\n        console.log('--- Ïã§Ï†ú Accessories Îç∞Ïù¥ÌÑ∞ Íµ¨Ï°∞ ---', specificationData.accessories);\n        if (specificationData.accessories) {\n          console.log('Í∞úÎ≥Ñ ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ (Positioner):', specificationData.accessories.positioner);\n          console.log('Í∞úÎ≥Ñ ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ (Solenoid):', specificationData.accessories.solenoid);\n          console.log('Í∞úÎ≥Ñ ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ (AirOperator):', specificationData.accessories.airOperator);\n          console.log('Í∞úÎ≥Ñ ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ (LockUp):', specificationData.accessories.lockUp);\n        }\n\n        // Body ÏÇ¨Ïñë Îç∞Ïù¥ÌÑ∞ ÏÑ§Ï†ï (Ï¥àÍ∏∞Í∞íÎßå) - null Ï≤òÎ¶¨ Í∞úÏÑ†\n        if (specificationData.body) {\n          console.log('Body Îç∞Ïù¥ÌÑ∞:', specificationData.body); // Body Îç∞Ïù¥ÌÑ∞ Î°úÍ∑∏ Ï∂îÍ∞Ä\n          setBodySelections(prev => ({\n            ...prev,\n            bonnetType: specificationData.body.bonnetTypeCode || '',\n            bonnetTypeCode: specificationData.body.bonnetTypeCode || '',\n            materialBody: specificationData.body.materialBodyCode || '',\n            materialBodyCode: specificationData.body.materialBodyCode || '',\n            sizeBodyUnit: specificationData.body.sizeUnit || '',\n            sizeBody: specificationData.body.sizeCode || '',\n            sizeBodyUnitCode: specificationData.body.sizeUnit || '',\n            // Code Í∞í Ï∂îÍ∞Ä\n            sizeBodyCode: specificationData.body.sizeCode || '',\n            // Code Í∞í Ï∂îÍ∞Ä\n            ratingUnit: (() => {\n              if (specificationData.body.ratingUnit && bodyRatingList.length > 0) {\n                const ratingItem = bodyRatingList.find(item => item.ratingUnitCode === specificationData.body.ratingUnit);\n                return ratingItem ? ratingItem.ratingUnit : '';\n              }\n              return '';\n            })(),\n            // ratingUnitCodeÏóê Ìï¥ÎãπÌïòÎäî ratingUnit Ïù¥Î¶Ñ Ï∞æÍ∏∞\n            rating: specificationData.body.ratingCode || '',\n            ratingUnitCode: (() => {\n              if (specificationData.body.ratingUnit && bodyRatingList.length > 0) {\n                const ratingItem = bodyRatingList.find(item => item.ratingUnitCode === specificationData.body.ratingUnit);\n                return ratingItem ? ratingItem.ratingUnitCode : '';\n              }\n              return '';\n            })(),\n            // ratingUnitCodeÏóê Ìï¥ÎãπÌïòÎäî ratingUnitCode Ï∞æÍ∏∞\n            ratingCode: specificationData.body.ratingCode || '',\n            // Code Í∞í Ï∂îÍ∞Ä\n            connection: specificationData.body.connectionCode || '',\n            connectionCode: specificationData.body.connectionCode || ''\n          }));\n        }\n\n        // Trim ÏÇ¨Ïñë Îç∞Ïù¥ÌÑ∞ ÏÑ§Ï†ï (Ï¥àÍ∏∞Í∞íÎßå) - null Ï≤òÎ¶¨ Í∞úÏÑ†\n        if (specificationData.trim) {\n          console.log('Trim Îç∞Ïù¥ÌÑ∞:', specificationData.trim); // Trim Îç∞Ïù¥ÌÑ∞ Î°úÍ∑∏ Ï∂îÍ∞Ä\n          setTrimSelections(prev => {\n            var _specificationData$bo, _specificationData$bo2, _specificationData$bo3;\n            return {\n              ...prev,\n              trimType: specificationData.trim.typeCode || '',\n              trimTypeCode: specificationData.trim.typeCode || '',\n              trimSeries: specificationData.trim.seriesCode || '',\n              trimSeriesCode: specificationData.trim.seriesCode || '',\n              materialTrim: ((_specificationData$bo = specificationData.body) === null || _specificationData$bo === void 0 ? void 0 : _specificationData$bo.materialTrimCode) || '',\n              materialTrimCode: ((_specificationData$bo2 = specificationData.body) === null || _specificationData$bo2 === void 0 ? void 0 : _specificationData$bo2.materialTrimCode) || '',\n              sizePortUnit: specificationData.trim.portSizeUnit || '',\n              sizePort: specificationData.trim.portSizeCode || '',\n              sizePortUnitCode: specificationData.trim.portSizeUnit || '',\n              // Code Í∞í Ï∂îÍ∞Ä\n              sizePortCode: specificationData.trim.portSizeCode || '',\n              // Code Í∞í Ï∂îÍ∞Ä\n              form: specificationData.trim.formCode || '',\n              formCode: specificationData.trim.formCode || '',\n              option: ((_specificationData$bo3 = specificationData.body) === null || _specificationData$bo3 === void 0 ? void 0 : _specificationData$bo3.optionCode) || '' // BodyÏóêÏÑú Option Í∞íÏùÑ Í∞ÄÏ†∏Ïò¥\n            };\n          });\n        }\n\n        // Actuator ÏÇ¨Ïñë Îç∞Ïù¥ÌÑ∞ ÏÑ§Ï†ï (Ï¥àÍ∏∞Í∞íÎßå) - null Ï≤òÎ¶¨ Í∞úÏÑ†\n        if (specificationData.actuator) {\n          console.log('Actuator Îç∞Ïù¥ÌÑ∞:', specificationData.actuator); // Actuator Îç∞Ïù¥ÌÑ∞ Î°úÍ∑∏ Ï∂îÍ∞Ä\n          const seriesCode = specificationData.actuator.seriesCode || '';\n          setActSelections(prev => ({\n            ...prev,\n            actionType: specificationData.actuator.typeCode || '',\n            actionTypeCode: specificationData.actuator.typeCode || '',\n            series: seriesCode,\n            seriesCode: seriesCode,\n            size: specificationData.actuator.sizeCode || '',\n            sizeCode: specificationData.actuator.sizeCode || '',\n            hw: specificationData.actuator.hwCode || '',\n            hwCode: specificationData.actuator.hwCode || ''\n          }));\n\n          // Series ÏΩîÎìúÍ∞Ä ÏûàÏúºÎ©¥ Ìï¥Îãπ Size Î™©Î°ùÏùÑ Í∞ÄÏ†∏Ïò¥\n          if (seriesCode) {\n            fetchActSizeList(seriesCode);\n          }\n        }\n\n        // Accessory ÏÇ¨Ïñë Îç∞Ïù¥ÌÑ∞ ÏÑ§Ï†ï - Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÏúºÎ©¥ Î°úÎìú, ÏóÜÏúºÎ©¥ fetchMasterDataÏóêÏÑú Ï¥àÍ∏∞ÌôîÎê®\n        if (specificationData.accessories) {\n          const newAccSelections = {\n            positioner: {\n              typeCode: 'Positioner',\n              makerCode: '',\n              modelCode: '',\n              specification: ''\n            },\n            solenoid: {\n              typeCode: 'Solenoid',\n              makerCode: '',\n              modelCode: '',\n              specification: ''\n            },\n            limiter: {\n              typeCode: 'Limit',\n              makerCode: '',\n              modelCode: '',\n              specification: ''\n            },\n            airSupply: {\n              typeCode: 'Airset',\n              makerCode: '',\n              modelCode: '',\n              specification: ''\n            },\n            volumeBooster: {\n              typeCode: 'Volume',\n              makerCode: '',\n              modelCode: '',\n              specification: ''\n            },\n            airOperator: {\n              typeCode: 'Airoperate',\n              makerCode: '',\n              modelCode: '',\n              specification: ''\n            },\n            lockUp: {\n              typeCode: 'Lockup',\n              makerCode: '',\n              modelCode: '',\n              specification: ''\n            },\n            snapActingRelay: {\n              typeCode: 'Snapacting',\n              makerCode: '',\n              modelCode: '',\n              specification: ''\n            }\n          };\n          const accKeys = ['positioner', 'solenoid', 'limiter', 'airSupply', 'volumeBooster', 'airOperator', 'lockUp', 'snapActingRelay'];\n          accKeys.forEach(key => {\n            const accObj = specificationData.accessories[key];\n            console.log(`Î°úÎî©Îê† ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ (${String(key)}):`, accObj);\n            // 1. Îç∞Ïù¥ÌÑ∞ Í∞úÏàò ÌôïÏù∏\n            console.log('accModelList Í∏∏Ïù¥:', accModelList.length);\n            console.log('accMakerList Í∏∏Ïù¥:', accMakerList.length);\n\n            // 2. Positioner Îç∞Ïù¥ÌÑ∞ ÌôïÏù∏\n            console.log('Positioner Î™®Îç∏Îì§:', accModelList.filter(item => item.accTypeCode === 'Positioner'));\n            console.log('Positioner Î©îÏù¥Ïª§Îì§:', accMakerList.filter(item => item.accTypeCode === 'Positioner'));\n\n            // 3. Îç∞Ïù¥ÌÑ∞ Íµ¨Ï°∞ ÌôïÏù∏\n            console.log('Ï≤´ Î≤àÏß∏ Î™®Îç∏:', accModelList[0]);\n            console.log('Ï≤´ Î≤àÏß∏ Î©îÏù¥Ïª§:', accMakerList[0]);\n            if (accObj && accObj.makerCode && accObj.modelCode) {\n              // Ïã§Ï†ú Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÎäî Í≤ΩÏö∞ÏóêÎßå ÏÑ§Ï†ï\n              newAccSelections[key] = {\n                typeCode: accObj.typeCode || newAccSelections[key].typeCode,\n                makerCode: accObj.makerCode || '',\n                modelCode: accObj.modelCode || '',\n                specification: accObj.specification || ''\n              };\n              console.log(`ÏÉàÎ°úÏö¥ AccSelections (${String(key)}) Îç∞Ïù¥ÌÑ∞ ÏÑ§Ï†ïÎê®:`, newAccSelections[key]);\n            }\n            // Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏúºÎ©¥ Í∏∞Î≥∏Í∞í Ïú†ÏßÄ (fetchMasterDataÏóêÏÑú ÏÑ§Ï†ïÎê®)\n          });\n          console.log('ÏµúÏ¢Ö ÏóÖÎç∞Ïù¥Ìä∏Îê† AccSelections:', newAccSelections);\n          setAccSelections(newAccSelections);\n        }\n        // Ïï°ÏÑ∏ÏÑúÎ¶¨ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÎäî Í≤ΩÏö∞ fetchMasterDataÏóêÏÑú Ï¥àÍ∏∞ÌôîÎê®\n      } else {\n        console.log('API ÏùëÎãµ Ïã§Ìå®:', response.status, response.statusText);\n      }\n    } catch (error) {\n      console.log('Ï¥àÍ∏∞ ÏÇ¨Ïñë Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïã§Ìå®:', error);\n    }\n  };\n  const saveOrder = async () => {\n    const sheetIDs = valves.map(v => v.sheetID);\n    const resp = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/requests/order`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(sheetIDs)\n    });\n    if (resp.ok) {\n      alert('ÏàúÏÑúÍ∞Ä Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.');\n    } else {\n      alert('ÏàúÏÑú Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n    }\n  };\n  const handleDragStart = (e, index) => {\n    e.dataTransfer.setData('text/plain', String(index));\n  };\n  const handleDragOver = e => {\n    e.preventDefault();\n  };\n  const handleDrop = (e, dropIndex) => {\n    e.preventDefault();\n    const dragIndex = Number(e.dataTransfer.getData('text/plain'));\n    if (Number.isNaN(dragIndex)) return;\n    setValves(prev => {\n      const arr = [...prev];\n      const [moved] = arr.splice(dragIndex, 1);\n      arr.splice(dropIndex, 0, moved);\n      return arr.map((it, i) => ({\n        ...it,\n        sheetNo: i + 1\n      }));\n    });\n  };\n\n  // TagNo Î≥ÄÍ≤Ω Ïãú ÏûÑÏãú Ï†ÄÏû•Îêú ÏÑ†ÌÉùÍ∞í Î≥µÏõê\n  const restoreTempSelections = sheetID => {\n    const tempData = tempSelections[sheetID];\n    if (tempData) {\n      console.log(`${sheetID}Ïùò ÏûÑÏãú Ï†ÄÏû•Îêú ÏÑ†ÌÉùÍ∞íÎì§ÏùÑ Î≥µÏõêÌï©ÎãàÎã§:`, tempData);\n\n      // Body ÏÑ†ÌÉùÍ∞í Î≥µÏõê\n      if (tempData.body) {\n        setBodySelections(prev => ({\n          ...prev,\n          ...tempData.body\n        }));\n      }\n\n      // Trim ÏÑ†ÌÉùÍ∞í Î≥µÏõê\n      if (tempData.trim) {\n        setTrimSelections(prev => ({\n          ...prev,\n          ...tempData.trim\n        }));\n      }\n\n      // Actuator ÏÑ†ÌÉùÍ∞í Î≥µÏõê\n      if (tempData.act) {\n        setActSelections(prev => ({\n          ...prev,\n          ...tempData.act\n        }));\n      }\n\n      // Accessory ÏÑ†ÌÉùÍ∞í Î≥µÏõê\n      if (tempData.acc) {\n        setAccSelections(prev => ({\n          ...prev,\n          ...tempData.acc\n        }));\n      }\n    } else {\n      console.log(`${sheetID}Ïùò ÏûÑÏãú Ï†ÄÏû•Îêú ÏÑ†ÌÉùÍ∞íÏù¥ ÏóÜÏäµÎãàÎã§.`);\n    }\n  };\n\n  // Step 1, 2, 3 ÌÜµÌï© ÏÑπÏÖò\n  const StepsSection = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"step-section-detail\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"step-header-detail\",\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uACAC\\uC801 \\uC0C1\\uC138 \\uC815\\uBCF4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2471,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2470,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"steps-horizontal-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-col-detail\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-subsection-detail\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Step 1: Type \\uC120\\uC815\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2478,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"type-list-detail\",\n            children: types.map(type => {\n              var _bodyValveList$find;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `type-item-detail ${selectedType === type.id ? 'selected' : ''}`,\n                onClick: () => handleTypeSelection(type),\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"type-name-detail\",\n                  children: ((_bodyValveList$find = bodyValveList.find(v => v.valveSeriesCode === type.id)) === null || _bodyValveList$find === void 0 ? void 0 : _bodyValveList$find.valveSeries) || type.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2486,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"type-count\",\n                  children: [\"(\", type.count, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2487,\n                  columnNumber: 19\n                }, this)]\n              }, type.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2481,\n                columnNumber: 17\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2479,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2477,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2475,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-col-detail\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-subsection-detail\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Step 2: TagNo \\uC120\\uD0DD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2497,\n            columnNumber: 13\n          }, this), selectedType ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"valve-list-detail\",\n            children: valves.filter(valve => valve.typeId === selectedType).map(valve => {\n              var _valve$sheetID2;\n              const originalIndex = valves.findIndex(v => {\n                var _v$sheetID, _valve$sheetID;\n                return ((_v$sheetID = v.sheetID) !== null && _v$sheetID !== void 0 ? _v$sheetID : v.id) === ((_valve$sheetID = valve.sheetID) !== null && _valve$sheetID !== void 0 ? _valve$sheetID : valve.id);\n              });\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `valve-item-detail ${(selectedValve === null || selectedValve === void 0 ? void 0 : selectedValve.id) === valve.id ? 'selected' : ''}`,\n                onClick: () => handleValveSelection(valve),\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"valve-tag-detail\",\n                  children: valve.tagNo\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2510,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"valve-qty-detail\",\n                  children: [\"(\", valve.qty, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2511,\n                  columnNumber: 23\n                }, this)]\n              }, (_valve$sheetID2 = valve.sheetID) !== null && _valve$sheetID2 !== void 0 ? _valve$sheetID2 : valve.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2505,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2499,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-type-selected\",\n            children: \"Step 1\\uC5D0\\uC11C Type\\uC744 \\uC120\\uD0DD\\uD558\\uC138\\uC694.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2517,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2496,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2494,\n        columnNumber: 9\n      }, this), selectedValve && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-col-detail\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-subsection-detail\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Step 3: \\uC0C1\\uC138\\uC0AC\\uC591 \\uC785\\uB825\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2525,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"specification-grid-detail\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"spec-section-detail\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"BODY\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2529,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"spec-grid-detail\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spec-item-detail\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Bonnet Type:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2532,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: bodySelections.bonnetType,\n                    onChange: e => handleBodyChange('bonnetType', e.target.value),\n                    disabled: isReadOnly,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2534,\n                      columnNumber: 23\n                    }, this), bodyBonnetList && bodyBonnetList.length > 0 && bodyBonnetList.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: item.bonnetCode,\n                      children: item.bonnet\n                    }, item.bonnetCode, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2536,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2533,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2531,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spec-item-detail\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Material Body:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2543,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: bodySelections.materialBody,\n                    onChange: e => handleBodyChange('materialBody', e.target.value),\n                    disabled: isReadOnly,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2545,\n                      columnNumber: 23\n                    }, this), bodyMatList && bodyMatList.length > 0 && bodyMatList.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: item.bodyMatCode,\n                      children: item.bodyMat\n                    }, item.bodyMatCode, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2547,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2544,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2542,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spec-item-detail\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Size Body:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2554,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"size-input-group-detail\",\n                    children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                      value: bodySelections.sizeBodyUnitCode,\n                      onChange: e => {\n                        handleBodyChange('sizeBodyUnit', e.target.value);\n                        handleBodyChange('sizeBodyUnitCode', e.target.value);\n                      },\n                      disabled: isReadOnly,\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"\",\n                        children: \"Unit \\uC120\\uD0DD\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2560,\n                        columnNumber: 25\n                      }, this), bodySizeList && bodySizeList.length > 0 && bodySizeList.map(item => item.sizeUnitCode).filter((unit, index, arr) => arr.indexOf(unit) === index).map(unit => {\n                        // Unit ÏΩîÎìúÎ•º ÏÇ¨Ïö©Ïûê ÏπúÌôîÏ†ÅÏù∏ Ïù¥Î¶ÑÏúºÎ°ú Î≥ÄÌôò\n                        let displayName = unit;\n                        if (unit === 'A') displayName = 'DN';\n                        if (unit === 'I') displayName = 'inch';\n                        if (unit === 'N') displayName = 'None';\n                        if (unit === 'Z') displayName = 'SPECIAL';\n                        return /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: unit,\n                          children: displayName\n                        }, unit, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2574,\n                          columnNumber: 33\n                        }, this);\n                      })]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2556,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                      value: bodySelections.sizeBodyCode,\n                      onChange: e => {\n                        const selectedItem = bodySizeList.find(item => item.bodySizeCode === e.target.value);\n                        if (selectedItem) {\n                          handleBodyChange('sizeBody', selectedItem.bodySize);\n                          handleBodyChange('sizeBodyCode', selectedItem.bodySizeCode);\n                        }\n                      },\n                      disabled: !bodySelections.sizeBodyUnit || isReadOnly,\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"\",\n                        children: \"\\uAC12 \\uC120\\uD0DD\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2588,\n                        columnNumber: 25\n                      }, this), bodySelections.sizeBodyUnit && bodySizeList && bodySizeList.length > 0 && bodySizeList.filter(item => item.sizeUnitCode === bodySelections.sizeBodyUnit).map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: item.bodySizeCode,\n                        children: [item.bodySize, \" (\", item.sizeUnit, \")\"]\n                      }, item.bodySizeCode, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2593,\n                        columnNumber: 31\n                      }, this))]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2581,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2555,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2553,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spec-item-detail\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Rating:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2602,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rating-input-group-detail\",\n                    children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                      value: bodySelections.ratingUnit,\n                      onChange: e => {\n                        const selectedUnit = bodyRatingList.find(item => item.ratingUnit === e.target.value);\n                        if (selectedUnit) {\n                          handleBodyChange('ratingUnit', selectedUnit.ratingUnit);\n                          handleBodyChange('ratingUnitCode', selectedUnit.ratingUnitCode);\n                        }\n                      },\n                      disabled: isReadOnly,\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"\",\n                        children: \"Unit \\uC120\\uD0DD\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2611,\n                        columnNumber: 25\n                      }, this), bodyRatingList && bodyRatingList.length > 0 && bodyRatingList.map(item => item.ratingUnit).filter((unit, index, arr) => arr.indexOf(unit) === index).map(unit => /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: unit,\n                        children: unit\n                      }, unit, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2617,\n                        columnNumber: 31\n                      }, this))]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2604,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                      value: bodySelections.ratingCode,\n                      onChange: e => {\n                        const selectedItem = bodyRatingList.find(item => item.ratingCode === e.target.value);\n                        if (selectedItem) {\n                          handleBodyChange('rating', selectedItem.ratingName);\n                          handleBodyChange('ratingCode', selectedItem.ratingCode);\n                        }\n                      },\n                      disabled: !bodySelections.ratingUnitCode || isReadOnly,\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"\",\n                        children: \"\\uAC12 \\uC120\\uD0DD\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2630,\n                        columnNumber: 25\n                      }, this), bodySelections.ratingUnit && bodyRatingList && bodyRatingList.length > 0 && bodyRatingList.filter(item => item.ratingUnit === bodySelections.ratingUnit).map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: item.ratingCode,\n                        children: item.ratingName\n                      }, item.ratingCode, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2635,\n                        columnNumber: 31\n                      }, this))]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2623,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2603,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2601,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spec-item-detail\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Connection:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2644,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: bodySelections.connection,\n                    onChange: e => handleBodyChange('connection', e.target.value),\n                    disabled: isReadOnly,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2646,\n                      columnNumber: 23\n                    }, this), bodyConnectionList && bodyConnectionList.length > 0 && bodyConnectionList.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: item.connectionCode,\n                      children: item.connection\n                    }, item.connectionCode, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2648,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2645,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2643,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2530,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2528,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"spec-section-detail\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Trim\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2659,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"spec-grid-detail\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spec-item-detail\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Trim Type:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2662,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: trimSelections.trimType,\n                    onChange: e => handleTrimChange('trimType', e.target.value),\n                    disabled: isReadOnly,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2664,\n                      columnNumber: 23\n                    }, this), trimTypeList && trimTypeList.length > 0 && trimTypeList.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: item.trimTypeCode,\n                      children: item.trimType\n                    }, item.trimTypeCode, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2666,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2663,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2661,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spec-item-detail\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Trim Series:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2673,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: trimSelections.trimSeries,\n                    onChange: e => handleTrimChange('trimSeries', e.target.value),\n                    disabled: isReadOnly,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2675,\n                      columnNumber: 23\n                    }, this), trimSeriesList && trimSeriesList.length > 0 && trimSeriesList.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: item.trimSeriesCode,\n                      children: item.trimSeries\n                    }, item.trimSeriesCode, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2677,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2674,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2672,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spec-item-detail\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Material Trim:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2684,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: trimSelections.materialTrim,\n                    onChange: e => handleTrimChange('materialTrim', e.target.value),\n                    disabled: isReadOnly,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2686,\n                      columnNumber: 23\n                    }, this), trimMatList && trimMatList.length > 0 && trimMatList.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: item.trimMatCode,\n                      children: item.trimMat\n                    }, item.trimMatCode, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2688,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2685,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2683,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spec-item-detail\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Option:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2695,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: trimSelections.option,\n                    onChange: e => handleTrimChange('option', e.target.value),\n                    disabled: isReadOnly,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2697,\n                      columnNumber: 23\n                    }, this), trimOptionList && trimOptionList.length > 0 && trimOptionList.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: item.trimOptionCode,\n                      children: item.trimOption\n                    }, item.trimOptionCode, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2699,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2696,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2694,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spec-item-detail\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Size Port:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2706,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"size-input-group-detail\",\n                    children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                      value: trimSelections.sizePortUnitCode,\n                      onChange: e => {\n                        handleTrimChange('sizePortUnit', e.target.value);\n                        handleTrimChange('sizePortUnitCode', e.target.value);\n                      },\n                      disabled: isReadOnly,\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"\",\n                        children: \"Unit \\uC120\\uD0DD\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2712,\n                        columnNumber: 25\n                      }, this), trimPortSizeList && trimPortSizeList.length > 0 && trimPortSizeList.map(item => item.unitCode).filter((unit, index, arr) => arr.indexOf(unit) === index).map(unit => /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: unit,\n                        children: unit\n                      }, unit, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2718,\n                        columnNumber: 31\n                      }, this))]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2708,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                      value: trimSelections.sizePortCode,\n                      onChange: e => {\n                        const selectedItem = trimPortSizeList.find(item => item.portSizeCode === e.target.value);\n                        if (selectedItem) {\n                          handleTrimChange('sizePort', selectedItem.portSize);\n                          handleTrimChange('sizePortCode', selectedItem.portSizeCode);\n                        }\n                      },\n                      disabled: !trimSelections.sizePortUnit || isReadOnly,\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"\",\n                        children: \"\\uAC12 \\uC120\\uD0DD\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2731,\n                        columnNumber: 25\n                      }, this), trimSelections.sizePortUnit && trimPortSizeList && trimPortSizeList.length > 0 && trimPortSizeList.filter(item => item.unitCode === trimSelections.sizePortUnit).map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: item.portSizeCode,\n                        children: [item.portSize, \" (\", item.unitName, \")\"]\n                      }, item.portSizeCode, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2736,\n                        columnNumber: 63\n                      }, this))]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2724,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2707,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2705,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spec-item-detail\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Form:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2745,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: trimSelections.form,\n                    onChange: e => handleTrimChange('form', e.target.value),\n                    disabled: isReadOnly,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2747,\n                      columnNumber: 23\n                    }, this), trimFormList && trimFormList.length > 0 && trimFormList.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: item.trimFormCode,\n                      children: item.trimForm\n                    }, item.trimFormCode, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2749,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2746,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2744,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2660,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2658,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"spec-section-detail\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"ACT\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2760,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"spec-grid-detail\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spec-item-detail\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Action Type:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2763,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: actSelections.actionType,\n                    onChange: e => handleActChange('actionType', e.target.value),\n                    disabled: isReadOnly,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2765,\n                      columnNumber: 23\n                    }, this), actTypeList && actTypeList.length > 0 && actTypeList.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: item.actTypeCode,\n                      children: item.actType\n                    }, item.actTypeCode, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2767,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2764,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2762,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spec-item-detail\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Series:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2774,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: actSelections.series,\n                    onChange: e => handleActChange('series', e.target.value),\n                    disabled: isReadOnly,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2776,\n                      columnNumber: 23\n                    }, this), actSeriesList && actSeriesList.length > 0 && actSeriesList.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: item.actSeriesCode,\n                      children: item.actSeries\n                    }, item.actSeriesCode, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2778,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2775,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2773,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spec-item-detail\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Size:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2785,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: actSelections.size,\n                    onChange: e => handleActChange('size', e.target.value),\n                    disabled: !actSelections.series || isReadOnly,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2787,\n                      columnNumber: 23\n                    }, this), actSizeList && actSizeList.length > 0 && actSizeList.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: item.actSizeCode,\n                      children: [item.actSize, \" \"]\n                    }, item.actSizeCode, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2790,\n                      columnNumber: 27\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2786,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2784,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spec-item-detail\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"H.W:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2798,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: actSelections.hw,\n                    onChange: e => handleActChange('hw', e.target.value),\n                    disabled: isReadOnly,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2800,\n                      columnNumber: 23\n                    }, this), actHWList && actHWList.length > 0 && actHWList.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: item.hwCode,\n                      children: item.hw\n                    }, item.hwCode, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2802,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2799,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2797,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2761,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2759,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2526,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"acc-section-detail\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                marginBottom: '10px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"ACC\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2815,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: async () => {\n                  console.log('ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ Í∞ïÏ†ú Î¶¨Î°úÎìú ÏãúÏûë...');\n                  const success = await fetchAccessoryData();\n                  if (success) {\n                    alert('ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Î°úÎìúÎêòÏóàÏäµÎãàÎã§!');\n                  } else {\n                    alert('ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ Î°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');\n                  }\n                },\n                style: {\n                  padding: '8px 16px',\n                  backgroundColor: '#007bff',\n                  color: 'white',\n                  border: 'none',\n                  borderRadius: '4px',\n                  cursor: 'pointer',\n                  fontSize: '12px'\n                },\n                title: \"\\uC545\\uC138\\uC0AC\\uB9AC \\uB370\\uC774\\uD130 \\uAC15\\uC81C \\uB9AC\\uB85C\\uB4DC\",\n                children: \"\\uD83D\\uDD04 \\uC545\\uC138\\uC0AC\\uB9AC \\uB9AC\\uB85C\\uB4DC\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2816,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: '11px',\n                  color: '#666',\n                  marginLeft: '10px'\n                },\n                children: [\"\\uBA54\\uC774\\uCEE4: \", accMakerList.length, \"\\uAC1C, \\uBAA8\\uB378: \", accModelList.length, \"\\uAC1C\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2839,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2814,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"acc-table-detail\",\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"\\uC120\\uD0DD\\uBAA9\\uB85D\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2847,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"\\uBA54\\uC774\\uCEE4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2848,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"\\uBAA8\\uB378\\uBA85\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2849,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"\\uADDC\\uACA9\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2850,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2846,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2845,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: \"Positioner\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2855,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"acc-options-group-detail\",\n                      colSpan: 3,\n                      children: /*#__PURE__*/_jsxDEV(AccessorySelector, {\n                        accTypeKey: \"positioner\",\n                        accSelections: accSelections,\n                        setAccSelections: setAccSelections,\n                        accMakerList: accMakerList,\n                        accModelList: accModelList\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2857,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2856,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2854,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: \"Solenoid Valve\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2867,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"acc-options-group-detail\",\n                      colSpan: 3,\n                      children: /*#__PURE__*/_jsxDEV(AccessorySelector, {\n                        accTypeKey: \"solenoid\",\n                        accSelections: accSelections,\n                        setAccSelections: setAccSelections,\n                        accMakerList: accMakerList,\n                        accModelList: accModelList\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2869,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2868,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2866,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: \"Limit Switch\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2879,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"acc-options-group-detail\",\n                      colSpan: 3,\n                      children: /*#__PURE__*/_jsxDEV(AccessorySelector, {\n                        accTypeKey: \"limiter\",\n                        accSelections: accSelections,\n                        setAccSelections: setAccSelections,\n                        accMakerList: accMakerList,\n                        accModelList: accModelList\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2881,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2880,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2878,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: \"Air Set\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2891,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"acc-options-group-detail\",\n                      colSpan: 3,\n                      children: /*#__PURE__*/_jsxDEV(AccessorySelector, {\n                        accTypeKey: \"airSupply\",\n                        accSelections: accSelections,\n                        setAccSelections: setAccSelections,\n                        accMakerList: accMakerList,\n                        accModelList: accModelList\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2893,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2892,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2890,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: \"Volume Booster\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2903,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"acc-options-group-detail\",\n                      colSpan: 3,\n                      children: /*#__PURE__*/_jsxDEV(AccessorySelector, {\n                        accTypeKey: \"volumeBooster\",\n                        accSelections: accSelections,\n                        setAccSelections: setAccSelections,\n                        accMakerList: accMakerList,\n                        accModelList: accModelList\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2905,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2904,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2902,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: \"Air Operated Valve\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2915,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"acc-options-group-detail\",\n                      colSpan: 3,\n                      children: /*#__PURE__*/_jsxDEV(AccessorySelector, {\n                        accTypeKey: \"airOperator\",\n                        accSelections: accSelections,\n                        setAccSelections: setAccSelections,\n                        accMakerList: accMakerList,\n                        accModelList: accModelList\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2917,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2916,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2914,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: \"Lock-Up Valve\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2927,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"acc-options-group-detail\",\n                      colSpan: 3,\n                      children: /*#__PURE__*/_jsxDEV(AccessorySelector, {\n                        accTypeKey: \"lockUp\",\n                        accSelections: accSelections,\n                        setAccSelections: setAccSelections,\n                        accMakerList: accMakerList,\n                        accModelList: accModelList\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2929,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2928,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2926,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: \"Snap Acting Relay\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2939,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"acc-options-group-detail\",\n                      colSpan: 3,\n                      children: /*#__PURE__*/_jsxDEV(AccessorySelector, {\n                        accTypeKey: \"snapActingRelay\",\n                        accSelections: accSelections,\n                        setAccSelections: setAccSelections,\n                        accMakerList: accMakerList,\n                        accModelList: accModelList\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2941,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2940,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2938,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2853,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2844,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2843,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2813,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2524,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2522,\n        columnNumber: 27\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2474,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2469,\n    columnNumber: 5\n  }, this);\n\n  // Í≥†Í∞ù ÏöîÏ≤≠ÏÇ¨Ìï≠ ÏÑπÏÖò (Ìï≠ÏÉÅ readonly)\n  const CustomerRequirementSection = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"step-section-detail\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"step-header-detail\",\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uACE0\\uAC1D \\uC694\\uCCAD\\uC0AC\\uD56D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2964,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2963,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"customer-requirement-content-detail\",\n      children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: customerRequirement,\n        onChange: () => {} // Î≥ÄÍ≤Ω Î∂àÍ∞Ä\n        ,\n        readOnly: true // Ìï≠ÏÉÅ readonly\n        ,\n        placeholder: \"\\uACE0\\uAC1D \\uC694\\uCCAD\\uC0AC\\uD56D\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\",\n        className: \"customer-requirement-textarea-detail\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2967,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2966,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2962,\n    columnNumber: 5\n  }, this);\n\n  // Í¥ÄÎ¶¨Ïûê ÏΩîÎ©òÌä∏ ÏÑπÏÖò\n  const StaffCommentSection = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"step-section-detail\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"step-header-detail\",\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uAD00\\uB9AC\\uC790 \\uCF54\\uBA58\\uD2B8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2982,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2981,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"staff-comment-content-detail\",\n      children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: staffComment,\n        onChange: e => !isReadOnly && setStaffComment(e.target.value),\n        readOnly: isReadOnly,\n        placeholder: \"\\uAD00\\uB9AC\\uC790 \\uCF54\\uBA58\\uD2B8\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\",\n        className: \"staff-comment-textarea-detail\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2985,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2984,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2980,\n    columnNumber: 5\n  }, this);\n\n  // Í≥†Í∞ù ÏöîÏ≤≠ Ï≤®Î∂ÄÌååÏùº ÏÑπÏÖò (Îã§Ïö¥Î°úÎìúÎßå Í∞ÄÎä•)\n  const CustomerAttachmentsSection = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"step-section-detail\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"step-header-detail\",\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uACE0\\uAC1D \\uC694\\uCCAD \\uCCA8\\uBD80\\uD30C\\uC77C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3000,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2999,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"attachments-content\",\n      children: customerAttachments.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"attachment-list-detail\",\n        children: customerAttachments.map((file, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"attachment-item-detail\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"file-name-detail\",\n            children: file.fileName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3007,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"file-size-detail\",\n            children: [\"(\", (file.fileSize / 1024).toFixed(2), \" KB)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3008,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary btn-sm\",\n            onClick: () => handleDownloadFile(file, 'customer'),\n            disabled: !file.fileName.toLowerCase().endsWith('.pdf'),\n            children: \"PDF \\uB2E4\\uC6B4\\uB85C\\uB4DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3009,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3006,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3004,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-attachments\",\n        children: \"\\uACE0\\uAC1D \\uC694\\uCCAD \\uCCA8\\uBD80\\uD30C\\uC77C\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3020,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3002,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2998,\n    columnNumber: 5\n  }, this);\n\n  // Í¥ÄÎ¶¨ Ï≤®Î∂ÄÌååÏùº ÏÑπÏÖò (ÏóÖÎ°úÎìú, Îã§Ïö¥Î°úÎìú, ÏÉùÏÑ± Í∞ÄÎä•)\n  const ManagerAttachmentsSection = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"step-section-detail\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"step-header-detail\",\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uACAC\\uC801 \\uC11C\\uB958 \\uBC1C\\uAE09\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3032,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3031,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"doc-issue-list\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"doc-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"doc-label\",\n          children: \"CV LIST\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3036,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `icon-download ${docGenerating['cvlist'] ? 'loading' : ''}`,\n          title: \"\\uC0DD\\uC131 \\uD6C4 \\uB2E4\\uC6B4\\uB85C\\uB4DC\",\n          onClick: () => generateAndDownload('cvlist', 'generate-cv'),\n          disabled: !!docGenerating['cvlist'],\n          children: docGenerating['cvlist'] ? '‚è≥' : '‚¨áÔ∏è'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3037,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3035,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"doc-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"doc-label\",\n          children: \"VALVE LIST\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3045,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `icon-download ${docGenerating['vllist'] ? 'loading' : ''}`,\n          title: \"\\uC0DD\\uC131 \\uD6C4 \\uB2E4\\uC6B4\\uB85C\\uB4DC\",\n          onClick: () => generateAndDownload('vllist', 'generate-vl'),\n          disabled: !!docGenerating['vllist'],\n          children: docGenerating['vllist'] ? '‚è≥' : '‚¨áÔ∏è'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3046,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3044,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"doc-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"doc-label\",\n          children: \"DATA SHEET\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3054,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `icon-download ${docGenerating['datasheet'] ? 'loading' : ''}`,\n          title: \"\\uC0DD\\uC131 \\uD6C4 \\uB2E4\\uC6B4\\uB85C\\uB4DC\",\n          onClick: () => generateAndDownload('datasheet', 'generate-datasheet'),\n          disabled: !!docGenerating['datasheet'],\n          children: docGenerating['datasheet'] ? '‚è≥' : '‚¨áÔ∏è'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3055,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3053,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"doc-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"doc-label\",\n          children: \"\\uACAC\\uC801\\uC11C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3063,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `icon-download ${docGenerating['singlequote'] ? 'loading' : ''}`,\n          title: \"\\uC0DD\\uC131 \\uD6C4 \\uB2E4\\uC6B4\\uB85C\\uB4DC\",\n          onClick: () => generateAndDownload('singlequote', 'generate-single-quote'),\n          disabled: !!docGenerating['singlequote'],\n          children: docGenerating['singlequote'] ? '‚è≥' : '‚¨áÔ∏è'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3064,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3062,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3034,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 3030,\n    columnNumber: 5\n  }, this);\n  useEffect(() => {\n    if (tempEstimateNo) {\n      loadExistingData();\n      // üîë ÌååÏùº Î™©Î°ù Ï°∞Ìöå Ï∂îÍ∞Ä\n      fetchManagerFiles();\n      fetchCustomerFiles();\n    }\n  }, [tempEstimateNo, loadExistingData]); // loadExistingData Ï∂îÍ∞Ä\n\n  useEffect(() => {\n    // typesÏôÄ accModelListÍ∞Ä Î™®Îëê Î°úÎìúÎêú ÌõÑÏóêÎßå loadInitialSpecificationÏùÑ Ìò∏Ï∂ú\n    if (tempEstimateNo && types.length > 0 && accModelList.length > 0) {\n      if (selectedValve && selectedValve.sheetID > 0) {\n        loadInitialSpecification(selectedValve.sheetID);\n      }\n    }\n  }, [selectedValve === null || selectedValve === void 0 ? void 0 : selectedValve.sheetID, tempEstimateNo, types, accModelList]); // typesÏôÄ accModelList Ï∂îÍ∞Ä\n\n  // ÏãúÏûë Ï∑®ÏÜå Ìï∏Îì§Îü¨\n  const handleCancelStart = async () => {\n    if (!tempEstimateNo) return;\n    if (window.confirm('Í≤¨Ï†Å ÏãúÏûëÏùÑ Ï∑®ÏÜåÌïòÏãúÍ≤†ÏäµÎãàÍπå? Îã¥ÎãπÏûê Î∞∞Ï†ïÏù¥ Ìï¥Ï†úÎêòÍ≥† \"Í≤¨Ï†ÅÏöîÏ≤≠\" ÏÉÅÌÉúÎ°ú ÎèåÏïÑÍ∞ëÎãàÎã§.')) {\n      try {\n        const response = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/cancel-start`, {\n          method: 'POST'\n        });\n        if (response.ok) {\n          alert('Í≤¨Ï†Å ÏãúÏûëÏù¥ Ï∑®ÏÜåÎêòÏóàÏäµÎãàÎã§.');\n          setCurrentStatus('Í≤¨Ï†ÅÏöîÏ≤≠');\n          loadExistingData(); // Îç∞Ïù¥ÌÑ∞ ÏÉàÎ°úÍ≥†Ïπ®\n        } else {\n          const errorText = await response.text();\n          alert(`ÏãúÏûë Ï∑®ÏÜåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§: ${errorText}`);\n        }\n      } catch (error) {\n        console.error('ÏãúÏûë Ï∑®ÏÜå Ï§ë Ïò§Î•ò Î∞úÏÉù:', error);\n        alert('ÏãúÏûë Ï∑®ÏÜå Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n      }\n    }\n  };\n\n  // Ï£ºÎ¨∏ Ï∑®ÏÜå Ìï∏Îì§Îü¨\n  const handleCancelOrder = async () => {\n    if (!tempEstimateNo) return;\n    if (window.confirm('Ï†ïÎßêÎ°ú Ï£ºÎ¨∏ÏùÑ Ï∑®ÏÜåÌïòÏãúÍ≤†ÏäµÎãàÍπå? \"Í≤¨Ï†ÅÏôÑÎ£å\" ÏÉÅÌÉúÎ°ú ÎèåÏïÑÍ∞ëÎãàÎã§.')) {\n      try {\n        const response = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/order/cancel`, {\n          method: 'POST'\n        });\n        if (response.ok) {\n          alert('Ï£ºÎ¨∏Ïù¥ Ï∑®ÏÜåÎêòÏóàÏäµÎãàÎã§.');\n          setCurrentStatus('Í≤¨Ï†ÅÏôÑÎ£å');\n          loadExistingData(); // Îç∞Ïù¥ÌÑ∞ ÏÉàÎ°úÍ≥†Ïπ®\n        } else {\n          const errorText = await response.text();\n          alert(`Ï£ºÎ¨∏ Ï∑®ÏÜåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§: ${errorText}`);\n        }\n      } catch (error) {\n        console.error('Ï£ºÎ¨∏ Ï∑®ÏÜå Ï§ë Ïò§Î•ò Î∞úÏÉù:', error);\n        alert('Ï£ºÎ¨∏ Ï∑®ÏÜå Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n      }\n    }\n  };\n  if (isLoadingFiles) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"\\uB85C\\uB529 \\uC911...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3141,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"estimate-detail-page dashboard-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-header-detail\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-button-detail\",\n        onClick: () => navigate(-1),\n        children: \"\\u2190 \\uACAC\\uC801\\uC694\\uCCAD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uC0AC\\uC591 \\uC120\\uC815\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3151,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3147,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mini-tools-panel\",\n      children: [/*#__PURE__*/_jsxDEV(EstimateSummaryCard, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3156,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ManagerAttachmentsSection, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3157,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-section-detail customer-uploader\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"uploader-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uACE0\\uAC1D \\uC81C\\uCD9C \\uBB38\\uC11C \\uC5C5\\uB85C\\uB4DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3160,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header-actions-detail\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              ref: customerAddInputRef,\n              type: \"file\",\n              multiple: true,\n              onChange: handleCustomerFileSelect,\n              accept: \".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.hwp,.txt,.zip,.rar,.7z,.csv,.json\",\n              style: {\n                display: 'none'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3162,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-light btn-xs\",\n              onClick: () => {\n                var _customerAddInputRef$;\n                return (_customerAddInputRef$ = customerAddInputRef.current) === null || _customerAddInputRef$ === void 0 ? void 0 : _customerAddInputRef$.click();\n              },\n              children: \"\\uCD94\\uAC00\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3170,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3161,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3159,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"uploader-list\",\n          children: isLoadingFiles ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading\",\n            style: {\n              padding: 8\n            },\n            children: \"\\uB85C\\uB529 \\uC911\\u2026\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3175,\n            columnNumber: 15\n          }, this) : customerFiles.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-files\",\n            style: {\n              padding: 8,\n              color: '#6c757d'\n            },\n            children: \"\\uC5C5\\uB85C\\uB4DC\\uB41C \\uD30C\\uC77C\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3177,\n            columnNumber: 15\n          }, this) : customerFiles.map(file => {\n            const name = file.fileName || '';\n            const ext = (name.split('.').pop() || '').toLowerCase();\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"uploader-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: `file-icon ext-${ext}`,\n                \"aria-hidden\": true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3184,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"file-name-detail\",\n                title: name,\n                children: name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3185,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"remove-btn\",\n                onClick: () => deleteAttachmentById(file.attachmentID),\n                children: \"\\u2715\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3186,\n                columnNumber: 21\n              }, this)]\n            }, file.attachmentID, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3183,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3173,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"quote-actions\",\n        children: (() => {\n          // Î™ÖÌôïÌïú ÏÉÅÌÉú Í∏∞Î∞ò Î∂ÑÍ∏∞ Ï≤òÎ¶¨\n          if (currentStatus === 'Í≤¨Ï†ÅÏöîÏ≤≠') {\n            return /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-success\",\n              onClick: handleStartQuote,\n              children: \"\\uACAC\\uC801\\uC2DC\\uC791\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3199,\n              columnNumber: 17\n            }, this);\n          }\n          if (currentStatus === 'Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë') {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"button-column\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary\",\n                onClick: handleCompleteQuote,\n                children: \"\\uACAC\\uC801\\uC644\\uB8CC\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3205,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-danger\",\n                onClick: handleCancelStart,\n                children: \"\\uC2DC\\uC791\\uCDE8\\uC18C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3206,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3204,\n              columnNumber: 17\n            }, this);\n          }\n          if (currentStatus === 'Í≤¨Ï†ÅÏôÑÎ£å') {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"button-column\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success\",\n                onClick: handleConfirmOrder,\n                children: \"\\uC8FC\\uBB38\\uD655\\uC815\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3213,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-danger\",\n                onClick: handleCancelComplete,\n                children: \"\\uC644\\uB8CC\\uCDE8\\uC18C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3214,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3212,\n              columnNumber: 17\n            }, this);\n          }\n          if (currentStatus === 'Ï£ºÎ¨∏') {\n            return /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-danger\",\n              onClick: handleCancelOrder,\n              children: \"\\uC8FC\\uBB38\\uCDE8\\uC18C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3220,\n              columnNumber: 17\n            }, this);\n          }\n          // Í∑∏ Ïô∏Ïùò Í≤ΩÏö∞ (Î°úÎî© Ï§ë Îì±)Îäî Î≤ÑÌäºÏùÑ ÌëúÏãúÌïòÏßÄ ÏïäÏùå\n          return null;\n        })()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3194,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3155,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status-section-detail\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"project-group-detail\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\uD504\\uB85C\\uC81D\\uD2B8\\uBA85:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3252,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: projectName,\n          readOnly: isReadOnly,\n          className: \"project-input-detail\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3253,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3251,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"save-section\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary save-specification-btn\",\n          onClick: handleSaveSpecification,\n          disabled: isReadOnly // isReadOnly ÏÉÅÌÉúÏóê Îî∞Îùº ÎπÑÌôúÏÑ±Ìôî\n          ,\n          children: \"\\uC0AC\\uC591 \\uC800\\uC7A5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3258,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3257,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3230,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-content-detail\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"steps-container-detail\",\n        children: [/*#__PURE__*/_jsxDEV(StepsSection, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3271,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"customer-request-block-detail\",\n          children: [/*#__PURE__*/_jsxDEV(CustomerRequirementSection, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3275,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CustomerAttachmentsSection, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3276,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(StaffCommentSection, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3279,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3270,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"part-number-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-gray-800 mb-4\",\n          children: \"\\uC0DD\\uC131\\uB41C \\uD488\\uBC88\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3284,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"part-number-single-line\",\n          children: generatePartNumber.split('').map((char, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `char-box ${char === '0' ? 'empty-char' : 'filled-char'}`,\n            title: `ÏúÑÏπò ${index}: ${char}`,\n            children: char\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3287,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3285,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3283,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3269,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 3145,\n    columnNumber: 5\n  }, this);\n};\n_s2(EstimateDetailPage, \"gyyWBRteZ2q0+DW6hdAQZrRes2Q=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = EstimateDetailPage;\nexport default EstimateDetailPage;\nvar _c;\n$RefreshReg$(_c, \"EstimateDetailPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","useMemo","useNavigate","useParams","getEstimateDetail","assignEstimate","jsxDEV","_jsxDEV","isManagerFile","filePath","normalizedPath","replace","managerFilePatterns","some","pattern","includes","extractManagerFileType","pathParts","split","resultFilesIndex","findIndex","part","length","isCustomerFile","customerFilePatterns","isResultCustomerFile","toLowerCase","EstimateDetailPage","_s2","_s","$RefreshSig$","navigate","tempEstimateNo","types","setTypes","valves","setValves","selectedValve","setSelectedValve","selectedType","setSelectedType","bodyValveList","setBodyValveList","bodySizeList","setBodySizeList","bodyMatList","setBodyMatList","trimMatList","setTrimMatList","trimOptionList","setTrimOptionList","bodyRatingList","setBodyRatingList","bodyBonnetList","setBodyBonnetList","bodyConnectionList","setBodyConnectionList","trimTypeList","setTrimTypeList","trimSeriesList","setTrimSeriesList","trimPortSizeList","setTrimPortSizeList","trimFormList","setTrimFormList","actTypeList","setActTypeList","actSeriesList","setActSeriesList","actSizeList","setActSizeList","actHWList","setActHWList","accMakerList","setAccMakerList","accModelList","setAccModelList","customerRequirement","setCustomerRequirement","staffComment","setStaffComment","attachments","setAttachments","customerAttachments","setCustomerAttachments","managerAttachments","setManagerAttachments","currentStatus","setCurrentStatus","isReadOnly","setIsReadOnly","managerFiles","setManagerFiles","customerFiles","setCustomerFiles","isLoadingFiles","setIsLoadingFiles","selectedPdfFiles","setSelectedPdfFiles","datasheet","cvlist","vllist","singlequote","multiquote","uploadedPdfUrls","setUploadedPdfUrls","quoteStarted","setQuoteStarted","docGenerating","setDocGenerating","summaryEstimateNo","setSummaryEstimateNo","summaryCompanyName","setSummaryCompanyName","summaryRequesterName","setSummaryRequesterName","summaryRequestDate","setSummaryRequestDate","summaryManager","setSummaryManager","summaryCompletedDate","setSummaryCompletedDate","fileInputRefs","selectedCustomerFiles","setSelectedCustomerFiles","customerAddInputRef","accSelections","setAccSelections","positioner","typeCode","makerCode","modelCode","specification","solenoid","limiter","airSupply","volumeBooster","airOperator","lockUp","snapActingRelay","tempSelections","setTempSelections","buildSaveSpecFromSelections","sel","_sel$body","_sel$body2","_sel$body3","_sel$body4","_sel$body5","_sel$body6","_sel$body7","_sel$trim","_sel$trim2","_sel$trim3","_sel$trim4","_sel$trim5","_sel$trim6","_sel$trim7","_sel$trim8","_sel$act","_sel$act2","_sel$act3","_sel$act4","_sel$acc","_sel$acc$positioner","_sel$acc2","_sel$acc2$positioner","_sel$acc3","_sel$acc3$solenoid","_sel$acc4","_sel$acc4$solenoid","_sel$acc5","_sel$acc5$limiter","_sel$acc6","_sel$acc6$limiter","_sel$acc7","_sel$acc7$airSupply","_sel$acc8","_sel$acc8$airSupply","_sel$acc9","_sel$acc9$volumeBoost","_sel$acc0","_sel$acc0$volumeBoost","_sel$acc1","_sel$acc1$airOperator","_sel$acc10","_sel$acc10$airOperato","_sel$acc11","_sel$acc11$lockUp","_sel$acc12","_sel$acc12$lockUp","_sel$acc13","_sel$acc13$snapActing","_sel$acc14","_sel$acc14$snapActing","valveId","valveTypeCode","body","bonnetType","materialBody","rating","ratingCode","ratingUnit","ratingUnitCode","connection","sizeUnit","sizeBodyUnitCode","size","sizeBodyCode","trim","type","trimType","series","trimSeries","portSize","sizePortCode","portSizeUnit","sizePortUnitCode","form","formCode","materialTrim","option","actuator","act","actionType","hw","accessories","PosCode","acc","PosMakerCode","SolCode","SolMakerCode","LimCode","LimMakerCode","ASCode","ASMakerCode","VolCode","VolMakerCode","AirOpCode","AirOpMakerCode","LockupCode","LockupMakerCode","SnapActCode","SnapActMakerCode","saveCurrentSelections","sheetID","prev","bodySelections","trimSelections","actSelections","handleValveSelection","valve","saved","setBodySelections","setTrimSelections","setActSelections","loadInitialSpecification","handleTypeSelection","id","bonnetTypeCode","materialBodyCode","sizeBodyUnit","sizeBody","connectionCode","trimTypeCode","trimSeriesCode","materialTrimCode","sizePortUnit","sizePort","actionTypeCode","seriesCode","sizeCode","hwCode","projectName","setProjectName","fetchBodyValveList","response","fetch","ok","console","error","status","statusText","data","json","fetchActSizeList","actSeriesCode","log","fetchManagerFiles","allManagerFiles","filter","att","path","isManagerFileResult","name","fileName","map","managerFileType","fetchCustomerFiles","files","onlyResultCustomer","deleteFile","window","confirm","method","alert","deleteAttachmentById","attachmentID","e","downloadFile","encodeURIComponent","blob","url","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","revokeObjectURL","removeChild","errorText","text","getFileTypeDisplayName","typeMap","formatFileSize","bytes","decimals","k","sizes","i","Math","floor","parseFloat","pow","toFixed","formatDate","dateString","Date","toLocaleString","handlePdfUpload","event","fileType","_event$target$files","preventDefault","file","target","setTimeout","handleFileSelect","input","accept","style","display","onchange","handleBodyChange","field","value","newSelections","selectedItem","find","item","bonnetCode","bodyMatCode","handleTrimChange","trimMatCode","trimFormCode","handleActChange","actTypeCode","actSizeCode","fetchAccessoryData","retryCount","maxRetries","accSearchRes","accSearchData","Object","keys","allAccMakerData","allAccModelData","groupedByType","reduce","accTypeCode","push","entries","forEach","items","typeItems","existingMaker","maker","accMakerCode","accMakerName","accModelCode","accModelName","accSize","uniqueMakers","Set","Array","from","typeMakers","index","makerCountByType","initialAccSelections","fetchMasterData","sizeRes","matRes","trimMatRes","optionRes","ratingRes","Promise","all","sizeData","matData","trimMatData","optionData","ratingData","bodyBonnetRes","bodyConnectionRes","trimTypeRes","trimSeriesRes","trimPortSizeRes","trimFormRes","actTypeRes","actSeriesRes","actHWRes","onDragStart","listKey","dataTransfer","setData","JSON","stringify","onDragOver","onDrop","dropIndex","parse","getData","arr","moved","splice","it","sheetNo","bodyBonnetData","bodyConnectionData","trimTypeData","trimSeriesData","trimPortSizeData","trimFormData","actTypeData","actSeriesData","actHWData","generatePartNumber","bodySection","join","trimSection","actSection","accSection","loadExistingData","_ref","_es$curEstimateNo","_data$estimateSheet","_data$estimateSheet2","userStr","localStorage","getItem","currentUser","userId","estimateSheet","project","es","tempNo","TempEstimateNo","curNo","curEstimateNo","CurEstimateNo","customerName","CustomerName","customerUserName","CustomerUserName","managerId","managerID","ManagerID","managerName","ManagerName","parseFromTemp","no","m","exec","parseFromCur","isStatusThree","isCurrentUserManager","shouldBeReadOnly","estimateRequests","_data$estimateRequest","tagNos","_data$estimateRequest2","_data$estimateRequest3","Map","req","valveType","has","get","count","sum","tag","qty","totalQty","set","order","typesData","code","info","valveInfo","v","valveSeriesCode","valveSeries","sortedTypesData","sort","b","_data$estimateRequest4","_data$estimateRequest5","_data$estimateRequest6","_data$estimateRequest7","aFirstTag","bFirstTag","aSheetNo","bSheetNo","valvesData","_tag$sheetNo","bodyTypeName","ratingInfo","r","bodyRating","tagNo","typeId","fluid","medium","density","molecular","molecularWeight","t1","max","inletTemperatureQ","normal","inletTemperatureNorQ","min","inletTemperatureMinQ","p1","inletPressureMaxQ","inletPressureNorQ","inletPressureMinQ","p2","outletPressureMaxQ","outletPressureNorQ","outletPressureMinQ","dp","differentialPressureMaxQ","differentialPressureNorQ","differentialPressureMinQ","qm","qmMax","qmNor","qmMin","unit","qmUnit","qn","qnMax","qnNor","qnMin","qnUnit","pressureUnit","temperatureUnit","bodySize","bodySizeUnit","bodyMat","trimMat","trimOption","actType","isHW","accessory","positionerType","exists","isPositioner","explosionProof","transmitter","transmitterType","solenoidValve","isSolenoid","limitSwitch","isLimSwitch","airSet","isAirSet","isVolumeBooster","airOperatedValve","isAirOperated","lockupValve","isLockUp","isSnapActingRelay","isQM","isP2","isN1","isDensity","fileList","fileSize","handleStatusChange","newStatus","getStatusCodeFromText","newStatusCode","Error","estimateResponse","estimateData","headers","_estimateData$estimat","errorData","message","handleDownloadFile","endsWith","handleUploadManagerFile","formData","FormData","append","fileInput","getElementById","handleCustomerFileSelect","_e$target$files","uploadCustomerFiles","current","msg","er","err","handleUploadCustomerFiles","handleGenerateDatasheet","generateAndDownload","endpoint","resp","catch","pickLatest","list","f","uploadDate","getTime","retries","EstimateSummaryCard","Number","className","children","marginBottom","_jsxFileName","lineNumber","columnNumber","handleStartQuote","currentUserId","res","handleEndQuote","handleCompleteQuote","handleCancelComplete","handleConfirmOrder","handleGenerateFile","apiEndpoint","fileTypeName","result","_selectedValve$body","_accSelections$positi","_accSelections$positi2","_accSelections$soleno","_accSelections$soleno2","_accSelections$limite","_accSelections$limite2","_accSelections$airSup","_accSelections$airSup2","_accSelections$volume","_accSelections$volume2","_accSelections$airOpe","_accSelections$airOpe2","_accSelections$lockUp","_accSelections$lockUp2","_accSelections$snapAc","_accSelections$snapAc2","dto","setSpecBySheetId","handleDeleteManagerFile","specBySheetId","_selectedValve$body2","handleSaveValveOrder","sheetIDs","saveValveOrder","handleSaveSpecification","_selectedValve$body3","template","_specBySheetId$v$shee","AccessorySelector","accTypeKey","makerSearchTerm","setMakerSearchTerm","modelSearchTerm","setModelSearchTerm","specSearchTerm","setSpecSearchTerm","isDropdownOpen","setIsDropdownOpen","isSelected","setIsSelected","dropdownRef","currentAcc","accMakerListLength","accModelListLength","_accMakerList$find","_accModelList$find","selectedMakerName","selectedModelName","model","filteredModels","allSearchTerms","term","filtered","lowerCaseSearchWords","word","flat","_accMakerList$find2","makerName","modelName","every","handleSelectAccessory","selectedModel","_accMakerList$find3","handleReset","handleClickOutside","contains","addEventListener","removeEventListener","ref","placeholder","onChange","onFocus","readOnly","onClick","disabled","_accMakerList$find4","bodyValveListLength","bodyRatingListLength","prevTypes","changed","next","_code","key","newName","specificationData","ratingItem","_specificationData$bo","_specificationData$bo2","_specificationData$bo3","portSizeCode","optionCode","newAccSelections","accKeys","accObj","String","saveOrder","handleDragStart","handleDragOver","handleDrop","dragIndex","isNaN","restoreTempSelections","tempData","StepsSection","_bodyValveList$find","_valve$sheetID2","originalIndex","_v$sheetID","_valve$sheetID","bonnet","sizeUnitCode","indexOf","displayName","bodySizeCode","selectedUnit","ratingName","trimOptionCode","unitCode","unitName","trimForm","actSeries","actSize","justifyContent","alignItems","success","padding","backgroundColor","color","border","borderRadius","cursor","fontSize","title","marginLeft","colSpan","CustomerRequirementSection","StaffCommentSection","CustomerAttachmentsSection","ManagerAttachmentsSection","handleCancelStart","handleCancelOrder","multiple","_customerAddInputRef$","ext","pop","char","_c","$RefreshReg$"],"sources":["/Users/simjimin/Downloads/final_develop/projec/frontend/src/pages/Dashboard/EstimateDetailPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef, useMemo } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { getEstimateDetail, assignEstimate } from '../../api/estimateRequest';\nimport './DashboardPages.css';\nimport './EstimateDetailPage.css';\n\n// Îã®ÏúÑ/ÏÇ¨Ïù¥Ï¶à ÎßàÏä§ÌÑ∞ Îç∞Ïù¥ÌÑ∞ ÌÉÄÏûÖ\ninterface BodySizeListDto {\n  sizeUnitCode: string;  // RatingUnitCodeÏôÄ ÎèôÏùºÌïú Ìå®ÌÑ¥\n  bodySizeCode: string;\n  bodySize: string;\n  sizeUnit: string;      // RatingUnitÍ≥º ÎèôÏùºÌïú Ìå®ÌÑ¥\n}\n\ninterface TrimPortSizeListDto {\n  portSizeCode: string;\n  unitCode: string;\n  portSize: string;\n  unitName: string;  // Îã®ÏúÑÎ™Ö (inch, mm Îì±)\n}\n\n// ÌÅ¨Î°úÏä§ÌîåÎû´Ìèº Í≤ΩÎ°ú Ï≤òÎ¶¨Î•º ÏúÑÌïú Ïú†Ìã∏Î¶¨Ìã∞ Ìï®Ïàò\nconst isManagerFile = (filePath: string): boolean => {\n  if (!filePath) return false;\n  \n  // WindowsÏôÄ Unix Í≤ΩÎ°ú Î™®Îëê ÏßÄÏõê\n  const normalizedPath = filePath.replace(/\\\\/g, '/'); // Windows Î∞±Ïä¨ÎûòÏãúÎ•º Ïä¨ÎûòÏãúÎ°ú Î≥ÄÌôò\n  \n  // Îã§ÏñëÌïú Í≤ΩÎ°ú Ìå®ÌÑ¥ ÏßÄÏõê\n  const managerFilePatterns = [\n    '/ResultFiles/',\n    '\\\\ResultFiles\\\\',\n    'ResultFiles/',\n    'ResultFiles\\\\'\n  ];\n  \n  return managerFilePatterns.some(pattern => normalizedPath.includes(pattern));\n};\n\n// Í≤ΩÎ°úÏóêÏÑú managerFileType Ï∂îÏ∂úÌïòÎäî ÌÅ¨Î°úÏä§ÌîåÎû´Ìèº Ìï®Ïàò\nconst extractManagerFileType = (filePath: string): string | null => {\n  if (!filePath) return null;\n  \n  const normalizedPath = filePath.replace(/\\\\/g, '/');\n  const pathParts = normalizedPath.split('/');\n  const resultFilesIndex = pathParts.findIndex(part => part === 'ResultFiles');\n  \n  if (resultFilesIndex !== -1 && resultFilesIndex + 1 < pathParts.length) {\n    return pathParts[resultFilesIndex + 1];\n  }\n  \n  return null;\n};\n\n// CustomerRequest ÌååÏùºÏù∏ÏßÄ ÌôïÏù∏ÌïòÎäî ÌÅ¨Î°úÏä§ÌîåÎû´Ìèº Ìï®Ïàò (ÌïòÏúÑ Í≥†Í∞ùÏöîÏ≤≠ Ï≤®Î∂Ä ÏòÅÏó≠Ïóê ÏÇ¨Ïö©)\nconst isCustomerFile = (filePath: string): boolean => {\n  if (!filePath) return false;\n  \n  const normalizedPath = filePath.replace(/\\\\/g, '/');\n  \n  const customerFilePatterns = [\n    '/CustomerRequest/',\n    '\\\\CustomerRequest\\\\',\n    'CustomerRequest/',\n    'CustomerRequest\\\\'\n  ];\n  \n  return customerFilePatterns.some(pattern => normalizedPath.includes(pattern));\n};\n\n// ResultFiles/customer ÌååÏùºÏù∏ÏßÄ ÌôïÏù∏ (ÏÉÅÎã® \"Í≥†Í∞ù Ï†úÏ∂ú Î¨∏ÏÑú ÏóÖÎ°úÎìú\" Ï†ÑÏö©)\nconst isResultCustomerFile = (filePath: string): boolean => {\n  if (!filePath) return false;\n  const normalizedPath = filePath.replace(/\\\\/g, '/').toLowerCase();\n  return normalizedPath.includes('/resultfiles/customer/');\n};\n\ninterface AccessorySelectorProps {\n  accTypeKey: string;\n  accSelections: { [key: string]: { typeCode: string; makerCode: string; modelCode: string; specification: string; }; };\n  setAccSelections: React.Dispatch<React.SetStateAction<{\n    positioner: { typeCode: string; makerCode: string; modelCode: string; specification: string; };\n    solenoid: { typeCode: string; makerCode: string; modelCode: string; specification: string; };\n    limiter: { typeCode: string; makerCode: string; modelCode: string; specification: string; };\n    airSupply: { typeCode: string; makerCode: string; modelCode: string; specification: string; };\n    volumeBooster: { typeCode: string; makerCode: string; modelCode: string; specification: string; };\n    airOperator: { typeCode: string; makerCode: string; modelCode: string; specification: string; };\n    lockUp: { typeCode: string; makerCode: string; modelCode: string; specification: string; };\n    snapActingRelay: { typeCode: string; makerCode: string; modelCode: string; specification: string; };\n  }>>;\n  accMakerList: any[];\n  accModelList: any[];\n}\n\ninterface ValveData {\n  id: string;\n  tagNo: string;\n  qty: number;\n  order: number;\n  sheetID: number;\n  typeId: string;\n  fluid: {\n    medium: string;\n    fluid: string;\n    density: string;\n    molecular: string;\n    t1: { max: number; normal: number; min: number; };\n    p1: { max: number; normal: number; min: number; };\n    p2: { max: number; normal: number; min: number; };\n    dp: { max: number; normal: number; min: number; };\n    qm: { max: number; normal: number; min: number; unit: string; };\n    qn: { max: number; normal: number; min: number; unit: string; };\n    pressureUnit: string;\n    temperatureUnit: string;\n  };\n  body: {\n    type: string;\n    typeCode: string;\n    size: string;\n    sizeUnit: string;\n    materialBody: string;\n    materialTrim: string;\n    option: string;\n    rating: string;\n    ratingUnit: string;\n  };\n  actuator: {\n    type: string;\n    hw: string;\n  };\n  accessory: {\n    positioner: { type: string; exists: boolean; };\n    explosionProof: string;\n    transmitter: { type: string; exists: boolean; };\n    solenoidValve: boolean;\n    limitSwitch: boolean;\n    airSet: boolean;\n    volumeBooster: boolean;\n    airOperatedValve: boolean;\n    lockupValve: boolean;\n    snapActingRelay: boolean;\n  };\n  isQM: boolean;\n  isP2: boolean;\n  isN1: boolean;\n  isDensity: boolean;\n  isHW: boolean;\n}\n\ninterface TypeData {\n  id: string;\n  name: string;\n  code: string;\n  count: number;\n  order: number;\n}\n\ninterface BodyValveData {\n  valveSeries: string;\n  valveSeriesCode: string;\n}\n\n\n\n// üîë ÌååÏùº Í¥ÄÎ†® ÌÉÄÏûÖ Ï∂îÍ∞Ä\ninterface EstimateAttachment {\n  attachmentID: number;\n  tempEstimateNo: string;\n  fileName: string;\n  filePath: string;\n  fileSize: number;\n  uploadDate: string;\n  uploadUserID: string | null;\n  managerFileType: string;\n}\n\nconst EstimateDetailPage: React.FC = () => {\n  const navigate = useNavigate();\n  const { tempEstimateNo } = useParams<{ tempEstimateNo: string }>();\n  \n  // ÏÉÅÌÉú Í¥ÄÎ¶¨\n  const [types, setTypes] = useState<TypeData[]>([]);\n  const [valves, setValves] = useState<ValveData[]>([]);\n  const [selectedValve, setSelectedValve] = useState<ValveData | null>(null);\n  const [selectedType, setSelectedType] = useState<string>('');\n  \n  // ÎßàÏä§ÌÑ∞ Îç∞Ïù¥ÌÑ∞\n  const [bodyValveList, setBodyValveList] = useState<BodyValveData[]>([]);\n  const [bodySizeList, setBodySizeList] = useState<BodySizeListDto[]>([]);\n  const [bodyMatList, setBodyMatList] = useState<any[]>([]);\n  const [trimMatList, setTrimMatList] = useState<any[]>([]);\n  const [trimOptionList, setTrimOptionList] = useState<any[]>([]);\n  const [bodyRatingList, setBodyRatingList] = useState<any[]>([]);\n  \n  // Step 3 ÎßàÏä§ÌÑ∞ Îç∞Ïù¥ÌÑ∞\n  const [bodyBonnetList, setBodyBonnetList] = useState<any[]>([]);\n  const [bodyConnectionList, setBodyConnectionList] = useState<any[]>([]);\n  const [trimTypeList, setTrimTypeList] = useState<any[]>([]);\n  const [trimSeriesList, setTrimSeriesList] = useState<any[]>([]);\n  const [trimPortSizeList, setTrimPortSizeList] = useState<TrimPortSizeListDto[]>([]);\n  const [trimFormList, setTrimFormList] = useState<any[]>([]);\n  const [actTypeList, setActTypeList] = useState<any[]>([]);\n  const [actSeriesList, setActSeriesList] = useState<any[]>([]);\n  const [actSizeList, setActSizeList] = useState<any[]>([]);\n  const [actHWList, setActHWList] = useState<any[]>([]);\n  const [accMakerList, setAccMakerList] = useState<any[]>([]);\n  const [accModelList, setAccModelList] = useState<any[]>([]);\n  \n  // Í∏∞ÌÉÄ Îç∞Ïù¥ÌÑ∞\n  const [customerRequirement, setCustomerRequirement] = useState(''); // Í≥†Í∞ù ÏöîÏ≤≠ÏÇ¨Ìï≠\n  const [staffComment, setStaffComment] = useState(''); // Í¥ÄÎ¶¨Ïûê ÏΩîÎ©òÌä∏\n  const [attachments, setAttachments] = useState<File[]>([]);\n  const [customerAttachments, setCustomerAttachments] = useState<any[]>([]); // Í≥†Í∞ù ÏöîÏ≤≠ Ï≤®Î∂ÄÌååÏùº\n  const [managerAttachments, setManagerAttachments] = useState<any[]>([]); // Í¥ÄÎ¶¨ Ï≤®Î∂ÄÌååÏùº\n  const [currentStatus, setCurrentStatus] = useState<string>('Í≤¨Ï†ÅÏöîÏ≤≠');\n  const [isReadOnly, setIsReadOnly] = useState(false); // ÏùΩÍ∏∞ Ï†ÑÏö© ÏÉÅÌÉú \n\n  // üîë ÌååÏùº Í¥ÄÎ¶¨ ÏÉÅÌÉú Ï∂îÍ∞Ä\n  const [managerFiles, setManagerFiles] = useState<EstimateAttachment[]>([]);\n  const [customerFiles, setCustomerFiles] = useState<EstimateAttachment[]>([]);\n  const [isLoadingFiles, setIsLoadingFiles] = useState(false);\n\n  // üîë PDF ÏóÖÎ°úÎìú Í¥ÄÎ†® state Ï∂îÍ∞Ä\n  const [selectedPdfFiles, setSelectedPdfFiles] = useState<{ [key: string]: File | null }>({\n    datasheet: null,\n    cvlist: null,\n    vllist: null,\n    singlequote: null,\n    multiquote: null\n  });\n\n  // üîë PDF Î∑∞Ïñ¥Î•º ÏúÑÌïú state Ï∂îÍ∞Ä\n  const [uploadedPdfUrls, setUploadedPdfUrls] = useState<{ [key: string]: string | null }>({\n    datasheet: null,\n    cvlist: null,\n    vllist: null,\n    singlequote: null,\n    multiquote: null\n  });\n\n  // Í≤¨Ï†Å ÏãúÏûë Ïó¨Î∂Ä(UI ÌÜ†Í∏Ä)\n  const [quoteStarted, setQuoteStarted] = useState(false);\n  // ÏÑúÎ•ò Î∞úÍ∏â ÏÉùÏÑ±/Îã§Ïö¥Î°úÎìú ÏßÑÌñâ ÏÉÅÌÉú\n  const [docGenerating, setDocGenerating] = useState<Record<string, boolean>>({});\n  // ÏöîÏïΩÏπ¥Îìú ÌëúÏãúÍ∞í ÏÉÅÌÉú\n  const [summaryEstimateNo, setSummaryEstimateNo] = useState<string>('-');\n  const [summaryCompanyName, setSummaryCompanyName] = useState<string>('-');\n  const [summaryRequesterName, setSummaryRequesterName] = useState<string>('-');\n  const [summaryRequestDate, setSummaryRequestDate] = useState<string>('-');\n  const [summaryManager, setSummaryManager] = useState<string>('-');\n  const [summaryCompletedDate, setSummaryCompletedDate] = useState<string>('-');\n\n  // üîë ÌååÏùº ÏûÖÎ†• ref Ï∂îÍ∞Ä\n  const fileInputRefs = useRef<{ [key: string]: HTMLInputElement | null }>({\n    datasheet: null,\n    cvlist: null,\n    vllist: null,\n    singlequote: null,\n    multiquote: null\n  });\n\n  // Í≥†Í∞ù Ï≤®Î∂Ä Îã§Ï§ë ÏóÖÎ°úÎìúÏö© ÏÉÅÌÉú\n  const [selectedCustomerFiles, setSelectedCustomerFiles] = useState<File[]>([]);\n  const customerAddInputRef = useRef<HTMLInputElement | null>(null);\n\n  // ACC ÏÑπÏÖò ÏÑ†ÌÉù ÏÉÅÌÉú Í¥ÄÎ¶¨\n  const [accSelections, setAccSelections] = useState<{\n    positioner: { typeCode: string; makerCode: string; modelCode: string; specification: string; };\n    solenoid: { typeCode: string; makerCode: string; modelCode: string; specification: string; };\n    limiter: { typeCode: string; makerCode: string; modelCode: string; specification: string; };\n    airSupply: { typeCode: string; makerCode: string; modelCode: string; specification: string; };\n    volumeBooster: { typeCode: string; makerCode: string; modelCode: string; specification: string; };\n    airOperator: { typeCode: string; makerCode: string; modelCode: string; specification: string; };\n    lockUp: { typeCode: string; makerCode: string; modelCode: string; specification: string; };\n    snapActingRelay: { typeCode: string; makerCode: string; modelCode: string; specification: string; };\n  }>({ // Í∞Å ÏïÖÏÑ∏ÏÇ¨Î¶¨Ïùò typeCodeÎ•º ÌïòÎìúÏΩîÎî©Îêú Í∞íÏúºÎ°ú Ï¥àÍ∏∞Ìôî\n    positioner: { typeCode: 'A', makerCode: '', modelCode: '', specification: '' },\n    solenoid: { typeCode: 'B', makerCode: '', modelCode: '', specification: '' },\n    limiter: { typeCode: 'C', makerCode: '', modelCode: '', specification: '' },\n    airSupply: { typeCode: 'D', makerCode: '', modelCode: '', specification: '' },\n    volumeBooster: { typeCode: 'E', makerCode: '', modelCode: '', specification: '' },\n    airOperator: { typeCode: 'F', makerCode: '', modelCode: '', specification: '' },\n    lockUp: { typeCode: 'G', makerCode: '', modelCode: '', specification: '' },\n    snapActingRelay: { typeCode: 'H', makerCode: '', modelCode: '', specification: '' },\n  });\n\n  // Î™®Îì† ÏÉÅÌÉú Î≥ÄÏàò ÏÑ†Ïñ∏ ÌõÑ, Î†åÎçîÎßÅ Ïãú accSelections ÏÉÅÌÉú Î°úÍπÖ\n  //console.log('EstimateDetailPage render - accSelections:', accSelections);\n\n  // TagNoÎ≥Ñ ÏÇ¨Ïö©Ïûê ÏÑ†ÌÉùÍ∞í ÏûÑÏãú Ï†ÄÏû• (TagNo Î≥ÄÍ≤Ω Ïãú Î≥µÏõêÏö©)\n  const [tempSelections, setTempSelections] = useState<{\n    [sheetID: number]: {\n      body: any;\n      trim: any;\n      act: any;\n      acc: any;\n    };\n  }>({});\n  // ÌååÏùº ÎÇ¥ Ìï®ÏàòÎì§ ÏÇ¨Ïù¥ ÏïÑÎ¨¥ Í≥≥Ïóê Ï∂îÍ∞Ä\n  const buildSaveSpecFromSelections = (sel: { body:any; trim:any; act:any; acc:any; valveTypeCode?:string }) => ({\n    valveId: sel.valveTypeCode || '',\n    body: { bonnetType: sel.body?.bonnetType || '', materialBody: sel.body?.materialBody || '', rating: sel.body?.ratingCode || '', ratingUnit: sel.body?.ratingUnitCode || '', connection: sel.body?.connection || '', sizeUnit: sel.body?.sizeBodyUnitCode || '', size: sel.body?.sizeBodyCode || '' },\n    trim: { type: sel.trim?.trimType || '', series: sel.trim?.trimSeries || '', portSize: sel.trim?.sizePortCode || '', portSizeUnit: sel.trim?.sizePortUnitCode || '', form: sel.trim?.formCode || sel.trim?.form || '', materialTrim: sel.trim?.materialTrim || '', option: sel.trim?.option || '' },\n    actuator: { type: sel.act?.actionType || '', series: sel.act?.series || '', size: sel.act?.size || '', hw: sel.act?.hw || '' },\n    accessories: {\n      PosCode: sel.acc?.positioner?.modelCode || null, PosMakerCode: sel.acc?.positioner?.makerCode || null,\n      SolCode: sel.acc?.solenoid?.modelCode || null,   SolMakerCode: sel.acc?.solenoid?.makerCode || null,\n      LimCode: sel.acc?.limiter?.modelCode || null,    LimMakerCode: sel.acc?.limiter?.makerCode || null,\n      ASCode: sel.acc?.airSupply?.modelCode || null,   ASMakerCode: sel.acc?.airSupply?.makerCode || null,\n      VolCode: sel.acc?.volumeBooster?.modelCode || null, VolMakerCode: sel.acc?.volumeBooster?.makerCode || null,\n      AirOpCode: sel.acc?.airOperator?.modelCode || null,  AirOpMakerCode: sel.acc?.airOperator?.makerCode || null,\n      LockupCode: sel.acc?.lockUp?.modelCode || null,  LockupMakerCode: sel.acc?.lockUp?.makerCode || null,\n      SnapActCode: sel.acc?.snapActingRelay?.modelCode || null, SnapActMakerCode: sel.acc?.snapActingRelay?.makerCode || null\n    }\n  });\n\n  // ÌòÑÏû¨ ÏÑ†ÌÉùÍ∞íÏùÑ tempSelectionsÏóê Ï†ÄÏû•ÌïòÎäî Ìï®Ïàò\n  const saveCurrentSelections = (sheetID: number) => {\n    if (sheetID) {\n      setTempSelections(prev => ({\n        ...prev,\n        [sheetID]: {\n          body: { ...bodySelections },\n          trim: { ...trimSelections },\n          act: { ...actSelections },\n          acc: { ...accSelections }\n        }\n      }));\n      //console.log(`${sheetID}Ïùò ÏÑ†ÌÉùÍ∞íÎì§ÏùÑ ÏûÑÏãú Ï†ÄÏû•ÌñàÏäµÎãàÎã§.`);\n    }\n  };\n\n  // valve ÏÑ†ÌÉù Ïãú Ìò∏Ï∂úÎêòÎäî Ìï®Ïàò\n  const handleValveSelection = (valve: ValveData) => {\n    // ÌòÑÏû¨ ÌÉúÍ∑∏ÏóêÏÑú Îñ†ÎÇòÍ∏∞ Ï†Ñ, ÌòÑÏû¨ ÏÑ†ÌÉùÍ∞í ÏûÑÏãú Ï†ÄÏû•\n    if (selectedValve) {\n      setTempSelections(prev => ({\n        ...prev,\n        [selectedValve.sheetID]: {\n          body: { ...bodySelections },\n          trim: { ...trimSelections },\n          act:  { ...actSelections },\n          acc:  { ...accSelections },\n        }\n      }));\n    }\n  \n    setSelectedValve(valve);\n  \n    // ÏÉà ÌÉúÍ∑∏Ïóê ÎåÄÌï¥: ÏûÑÏãúÍ∞í ÏûàÏúºÎ©¥ Í∑∏Í±∏ Î≥µÏõê, ÏóÜÏúºÎ©¥ ÏÑúÎ≤Ñ Ï¥àÍ∏∞Í∞í Î°úÎìú\n    if (tempSelections[valve.sheetID]) {\n      const saved = tempSelections[valve.sheetID];\n      // Î≥µÏõê(Í∞Å selections set Ìï®Ïàò Ìò∏Ï∂ú)\n      setBodySelections(saved.body || {});\n      setTrimSelections(saved.trim || {});\n      setActSelections(saved.act || {});\n      setAccSelections(saved.acc || {});\n    } else {\n      loadInitialSpecification(valve.sheetID);\n    }\n  };\n\n  const handleTypeSelection = (type: TypeData) => {\n    setSelectedType(type.id);\n    setSelectedValve(null); // TypeÏùÑ Î≥ÄÍ≤ΩÌïòÎ©¥ ÏÑ†ÌÉùÎêú ValveÎäî Ï¥àÍ∏∞ÌôîÎê©ÎãàÎã§.\n  };\n\n                    // Body ÏÑπÏÖò ÏÑ†ÌÉù ÏÉÅÌÉú Í¥ÄÎ¶¨\n                  const [bodySelections, setBodySelections] = useState({\n                    bonnetType: '',\n                    bonnetTypeCode: '', // Code Í∞í Ï∂îÍ∞Ä\n                    materialBody: '',\n                    materialBodyCode: '', // Code Í∞í Ï∂îÍ∞Ä\n                    sizeBodyUnit: '',\n                    sizeBody: '',\n                    sizeBodyUnitCode: '', // Code Í∞í Ï∂îÍ∞Ä\n                    sizeBodyCode: '', // Code Í∞í Ï∂îÍ∞Ä\n                    ratingUnit: '',\n                    rating: '',\n                    ratingUnitCode: '', // Code Í∞í Ï∂îÍ∞Ä\n                    ratingCode: '', // Code Í∞í Ï∂îÍ∞Ä\n                    connection: '',\n                    connectionCode: '' // Code Í∞í Ï∂îÍ∞Ä\n                  });\n                \n                  // Trim ÏÑπÏÖò ÏÑ†ÌÉù ÏÉÅÌÉú Í¥ÄÎ¶¨\n                  const [trimSelections, setTrimSelections] = useState({\n                    trimType: '',\n                    trimTypeCode: '', // Code Í∞í Ï∂îÍ∞Ä\n                    trimSeries: '',\n                    trimSeriesCode: '', // Code Í∞í Ï∂îÍ∞Ä\n                    materialTrim: '',\n                    materialTrimCode: '', // Code Í∞í Ï∂îÍ∞Ä\n                    sizePortUnit: '',\n                    sizePort: '',\n                    sizePortUnitCode: '', // Code Í∞í Ï∂îÍ∞Ä\n                    sizePortCode: '', // Code Í∞í Ï∂îÍ∞Ä\n                    form: '',\n                    formCode: '', // Code Í∞í Ï∂îÍ∞Ä\n                    option: '' // Trim Option ÌïÑÎìú Ï∂îÍ∞Ä\n                  });\n                \n                  // ACT ÏÑπÏÖò ÏÑ†ÌÉù ÏÉÅÌÉú Í¥ÄÎ¶¨\n                  const [actSelections, setActSelections] = useState({\n                    actionType: '',\n                    actionTypeCode: '', // Code Í∞í Ï∂îÍ∞Ä\n                    series: '',\n                    seriesCode: '', // Code Í∞í Ï∂îÍ∞Ä\n                    size: '',\n                    sizeCode: '', // Code Í∞í Ï∂îÍ∞Ä\n                    hw: '',\n                    hwCode: '' // Code Í∞í Ï∂îÍ∞Ä\n                  });\n\n  // ÏÉÅÌÉú Î∞è ÌîÑÎ°úÏ†ùÌä∏ Ï†ïÎ≥¥\n  const [projectName, setProjectName] = useState<string>('');\n\n  // BodyValveList Í∞ÄÏ†∏Ïò§Í∏∞\n  const fetchBodyValveList = async () => {\n    try {\n      const response = await fetch('http://192.168.0.14:5135/api/estimate/body-valve-list');\n      if (!response.ok) {\n        console.error('body-valve-list ÏöîÏ≤≠ Ïã§Ìå®:', response.status, response.statusText);\n        setBodyValveList([]);\n        return;\n      }\n      const data = await response.json();\n      setBodyValveList(data ?? []);\n    } catch (error) {\n      console.error('BodyValveList Í∞ÄÏ†∏Ïò§Í∏∞ Ïã§Ìå®:', error);\n    }\n  };\n\n  // ACT Size Î™©Î°ù Í∞ÄÏ†∏Ïò§Í∏∞\n  const fetchActSizeList = async (actSeriesCode: string) => {\n    try {\n      console.log('fetchActSizeList ÏãúÏûë:', actSeriesCode);\n      const response = await fetch(`http://192.168.0.14:5135/api/masterdata/act/size?actSeriesCode=${actSeriesCode}`);\n      const data = await response.json();\n      console.log('ACT Size API ÏùëÎãµ:', data);\n      setActSizeList(data || []);\n    } catch (error) {\n      console.error('ACT Size Î™©Î°ù Í∞ÄÏ†∏Ïò§Í∏∞ Ïã§Ìå®:', error);\n      setActSizeList([]);\n    }\n  };\n\n  // üîë ÌååÏùº Í¥ÄÎ¶¨ Ìï®ÏàòÎì§ Ï∂îÍ∞Ä\n  const fetchManagerFiles = async (): Promise<any[]> => {\n    if (!tempEstimateNo) return [];\n    \n    try {\n      setIsLoadingFiles(true);\n      console.log('üîÑ fetchManagerFiles ÏãúÏûë - tempEstimateNo:', tempEstimateNo);\n      const response = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/attachments`);\n      console.log('üì° API ÏùëÎãµ ÏÉÅÌÉú:', response.status, response.ok);\n      \n      if (response.ok) {\n        const attachments = await response.json();\n        console.log('üì• API ÏùëÎãµ Îç∞Ïù¥ÌÑ∞:', attachments);\n        console.log('üì• API ÏùëÎãµ Îç∞Ïù¥ÌÑ∞ Í∏∏Ïù¥:', attachments.length);\n        \n        // üîë ResultFiles Í≤ΩÎ°úÏùò Î™®Îì† ÌååÏùº Í∞ÄÏ†∏Ïò§Í∏∞ (ÏóëÏÖÄ + PDF)\n        const allManagerFiles = attachments.filter((att: any) => {\n          const filePath = att.path || att.filePath;\n          const isManagerFileResult = filePath && isManagerFile(filePath);\n          console.log('üîç ÌååÏùº ÌïÑÌÑ∞ÎßÅ Ï≤¥ÌÅ¨:', att.name || att.fileName, 'Í≤ΩÎ°ú:', filePath, 'Í¥ÄÎ¶¨ÌååÏùºÏó¨Î∂Ä:', isManagerFileResult);\n          return isManagerFileResult;\n        }).map((att: any) => {\n          // Í≤ΩÎ°úÏóêÏÑú managerFileType Ï∂îÏ∂ú (ÌÅ¨Î°úÏä§ÌîåÎû´Ìèº)\n          const filePath = att.path || att.filePath;\n          att.managerFileType = extractManagerFileType(filePath);\n          console.log('üè∑Ô∏è Ï∂îÏ∂úÎêú managerFileType:', att.managerFileType);\n          return att;\n        });\n        \n        setManagerFiles(allManagerFiles);\n        console.log('‚úÖ Í¥ÄÎ¶¨Ïûê ÌååÏùº Î™©Î°ù Î°úÎìú ÏôÑÎ£å:', allManagerFiles.length, 'Í∞ú');\n        console.log('üîç ÌïÑÌÑ∞ÎßÅÎêú Í¥ÄÎ¶¨ ÌååÏùºÎì§:', allManagerFiles);\n        return allManagerFiles;\n      } else {\n        console.error('‚ùå API ÏùëÎãµ Ïã§Ìå®:', response.status, response.statusText);\n        return [];\n      }\n    } catch (error) {\n      console.error('Í¥ÄÎ¶¨Ïûê ÌååÏùº Î™©Î°ù Ï°∞Ìöå Ï§ë Ïò§Î•ò:', error);\n      return [];\n    } finally {\n      setIsLoadingFiles(false);\n    }\n  };\n\n  const fetchCustomerFiles = async () => {\n    if (!tempEstimateNo) return;\n    \n    try {\n      setIsLoadingFiles(true);\n      console.log('üîÑ fetchCustomerFiles ÏãúÏûë - tempEstimateNo:', tempEstimateNo);\n      const response = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/attachments`);\n      console.log('üì° API ÏùëÎãµ ÏÉÅÌÉú:', response.status, response.ok);\n      \n      if (response.ok) {\n        const files = await response.json();\n        const onlyResultCustomer = (files || []).filter((att: any) => isResultCustomerFile(att.filePath || att.path));\n        setCustomerFiles(onlyResultCustomer);\n        console.log('‚úÖ Í≥†Í∞ù ÌååÏùº Î™©Î°ù Î°úÎìú ÏôÑÎ£å (ResultFiles/customer ÌïúÏ†ï):', onlyResultCustomer.length, 'Í∞ú');\n      } else {\n        console.error('‚ùå API ÏùëÎãµ Ïã§Ìå®:', response.status, response.statusText);\n      }\n    } catch (error) {\n      console.error('Í≥†Í∞ù ÌååÏùº Î™©Î°ù Ï°∞Ìöå Ï§ë Ïò§Î•ò:', error);\n    } finally {\n      setIsLoadingFiles(false);\n    }\n  };\n\n  const deleteFile = async (managerFileType: string) => {\n    if (!tempEstimateNo) return;\n    \n    if (!window.confirm('Ï†ïÎßêÎ°ú Ïù¥ ÌååÏùºÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {\n      return;\n    }\n    \n    try {\n      const response = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/files/${managerFileType}`, {\n        method: 'DELETE'\n      });\n      \n      if (response.ok) {\n        // ÌååÏùº Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ®\n        await fetchManagerFiles();\n        alert('ÌååÏùºÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.');\n      } else {\n        alert('ÌååÏùº ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n      }\n    } catch (error) {\n      console.error('ÌååÏùº ÏÇ≠Ï†ú Ï§ë Ïò§Î•ò:', error);\n      alert('ÌååÏùº ÏÇ≠Ï†ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n\n  // Í∞úÎ≥Ñ Ï≤®Î∂ÄÌååÏùº ÏÇ≠Ï†ú(attachmentID Í∏∞Ï§Ä) - Í≥†Í∞ù Îã§Ï§ë ÌååÏùº ÎåÄÏùë\n  const deleteAttachmentById = async (attachmentID: number) => {\n    if (!tempEstimateNo) return;\n    if (!window.confirm('Ï†ïÎßêÎ°ú Ïù¥ ÌååÏùºÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) return;\n    try {\n      const response = await fetch(`http://192.168.0.14:5135/api/estimate/attachments/${attachmentID}`, {\n        method: 'DELETE'\n      });\n      if (response.ok) {\n        await fetchCustomerFiles();\n        await fetchManagerFiles();\n      } else {\n        alert('ÌååÏùº ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n      }\n    } catch (e) {\n      console.error('Ï≤®Î∂ÄÌååÏùº ÏÇ≠Ï†ú Ïò§Î•ò:', e);\n      alert('ÌååÏùº ÏÇ≠Ï†ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n\n  const downloadFile = async (filePath: string, fileName: string) => {\n    try {\n      // üîë ÌååÏùº Îã§Ïö¥Î°úÎìú API ÏàòÏ†ï - ÏÉàÎ°ú Ï∂îÍ∞ÄÎêú API ÏÇ¨Ïö©\n      const response = await fetch(`http://192.168.0.14:5135/api/estimate/attachments/download?filePath=${encodeURIComponent(filePath)}`);\n      if (response.ok) {\n        const blob = await response.blob();\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = fileName;\n        document.body.appendChild(a);\n        a.click();\n        window.URL.revokeObjectURL(url);\n        document.body.removeChild(a);\n      } else {\n        // üîë Îã§Ïö¥Î°úÎìú Ïã§Ìå® Ïãú ÏÉÅÏÑ∏ ÏóêÎü¨ Ï†ïÎ≥¥ ÌëúÏãú\n        const errorText = await response.text();\n        console.error('ÌååÏùº Îã§Ïö¥Î°úÎìú Ïã§Ìå®:', response.status, errorText);\n        alert(`ÌååÏùº Îã§Ïö¥Î°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. (${response.status})\\n${errorText}`);\n      }\n    } catch (error) {\n      console.error('ÌååÏùº Îã§Ïö¥Î°úÎìú Ï§ë Ïò§Î•ò:', error);\n      alert('ÌååÏùº Îã§Ïö¥Î°úÎìú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n\n  const getFileTypeDisplayName = (managerFileType: string) => {\n    const typeMap: { [key: string]: string } = {\n      'cvlist': 'CV List',\n      'vllist': 'VL List',\n      'datasheet': 'DataSheet',\n      'singlequote': 'Îã®ÌíàÍ≤¨Ï†ÅÏÑú',\n      'multiquote': 'Îã§ÏàòÎüâÍ≤¨Ï†ÅÏÑú'\n    };\n    return typeMap[managerFileType] || managerFileType;\n  };\n\n  const formatFileSize = (bytes: number, decimals = 2) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(decimals)) + ' ' + sizes[i];\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleString('ko-KR');\n  };\n\n  // üîë PDF ÏóÖÎ°úÎìú Í¥ÄÎ†® Ìï®ÏàòÎì§ Ï∂îÍ∞Ä\n  const handlePdfUpload = (event: React.ChangeEvent<HTMLInputElement>, fileType: string) => {\n    // üîë ÌôîÎ©¥ Ïù¥Îèô Î∞©ÏßÄ\n    event.preventDefault();\n    \n    const file = event.target.files?.[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        alert('PDF ÌååÏùºÎßå ÏóÖÎ°úÎìú Í∞ÄÎä•Ìï©ÎãàÎã§.');\n        return;\n      }\n      \n      // üîë ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏Î•º ÎπÑÎèôÍ∏∞Î°ú Ï≤òÎ¶¨ÌïòÏó¨ ÌôîÎ©¥ Ïù¥Îèô Î∞©ÏßÄ\n      setTimeout(() => {\n        setSelectedPdfFiles(prev => ({\n          ...prev,\n          [fileType]: file\n        }));\n      }, 0);\n    }\n  };\n\n  // üîë ÌååÏùº ÏÑ†ÌÉùÏùÑ ÏúÑÌïú Î≥ÑÎèÑ Ìï®Ïàò Ï∂îÍ∞Ä\n  const handleFileSelect = (fileType: string) => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    // Í≥†Í∞ù/Í¥ÄÎ¶¨Ïûê Í≥µÌÜµ ÏÑ†ÌÉùÍ∏∞: Î¨∏ÏÑú/ÏïïÏ∂ï Ìè¨Ìï® Í¥ëÎ≤îÏúÑ ÌóàÏö©\n    input.accept = '.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.hwp,.txt,.zip,.rar,.7z,.csv,.json';\n    input.style.display = 'none';\n    \n    input.onchange = (e) => {\n      const target = e.target as HTMLInputElement;\n      if (target.files && target.files[0]) {\n        const file = target.files[0];\n        // Í≥†Í∞ù ÏóÖÎ°úÎìú/Î≤îÏö© ÏÑ†ÌÉù: ÌååÏùº ÌÉÄÏûÖ Ï†úÌïú ÏôÑÌôî (ÏÑúÎ≤ÑÏóêÏÑú ÏµúÏ¢Ö Í≤ÄÏ¶ù)\n        \n        setSelectedPdfFiles(prev => ({\n          ...prev,\n          [fileType]: file\n        }));\n      }\n    };\n    \n    document.body.appendChild(input);\n    input.click();\n    document.body.removeChild(input);\n  };\n\n                    // Body ÏÑπÏÖò Ïù¥Î≤§Ìä∏ Ìï∏Îì§Îü¨Îì§\n                  const handleBodyChange = (field: string, value: string) => {\n                    setBodySelections(prev => {\n                      const newSelections = { ...prev, [field]: value };\n                      \n                      // Bonnet Type Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n                      if (field === 'bonnetType') {\n                        const selectedItem = bodyBonnetList.find(item => item.bonnetCode === value);\n                        if (selectedItem) {\n                          newSelections.bonnetTypeCode = selectedItem.bonnetCode;\n                        }\n                      }\n                      \n                      // Material Body Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n                      if (field === 'materialBody') {\n                        const selectedItem = bodyMatList.find(item => item.bodyMatCode === value);\n                        if (selectedItem) {\n                          newSelections.materialBodyCode = selectedItem.bodyMatCode;\n                        }\n                      }\n                      \n                      // Connection Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n                      if (field === 'connection') {\n                        const selectedItem = bodyConnectionList.find(item => item.connectionCode === value);\n                        if (selectedItem) {\n                          newSelections.connectionCode = selectedItem.connectionCode;\n                        }\n                      }\n                      \n                      // UnitÏù¥ Î≥ÄÍ≤ΩÎêòÎ©¥ Ìï¥ÎãπÌïòÎäî Í∞í Ï¥àÍ∏∞Ìôî\n                      if (field === 'sizeBodyUnit') {\n                        newSelections.sizeBody = '';\n                        newSelections.sizeBodyCode = '';\n                      }\n                      if (field === 'ratingUnit') {\n                        newSelections.rating = '';\n                        newSelections.ratingCode = '';\n                      }\n                      \n                      return newSelections;\n                    });\n                  };\n\n                    // Trim ÏÑπÏÖò Ïù¥Î≤§Ìä∏ Ìï∏Îì§Îü¨Îì§\n                  const handleTrimChange = (field: string, value: string) => {\n                    setTrimSelections(prev => {\n                      const newSelections = { ...prev, [field]: value };\n                      \n                      // Trim Type Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n                      if (field === 'trimType') {\n                        const selectedItem = trimTypeList.find(item => item.trimTypeCode === value);\n                        if (selectedItem) {\n                          newSelections.trimTypeCode = selectedItem.trimTypeCode;\n                        }\n                      }\n                      \n                      // Trim Series Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n                      if (field === 'trimSeries') {\n                        const selectedItem = trimSeriesList.find(item => item.trimSeriesCode === value);\n                        if (selectedItem) {\n                          newSelections.trimSeriesCode = selectedItem.trimSeriesCode;\n                        }\n                      }\n                      \n                      // Material Trim Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n                      if (field === 'materialTrim') {\n                        const selectedItem = trimMatList.find(item => item.trimMatCode === value);\n                        if (selectedItem) {\n                          newSelections.materialTrimCode = selectedItem.trimMatCode;\n                        }\n                      }\n                      \n                      // Form Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n                      if (field === 'form') {\n                        const selectedItem = trimFormList.find(item => item.trimFormCode === value);\n                        if (selectedItem) {\n                          newSelections.formCode = selectedItem.trimFormCode;\n                        }\n                      }\n                      \n                      // UnitÏù¥ Î≥ÄÍ≤ΩÎêòÎ©¥ Ìï¥ÎãπÌïòÎäî Í∞í Ï¥àÍ∏∞Ìôî\n                      if (field === 'sizePortUnit') {\n                        newSelections.sizePort = '';\n                        newSelections.sizePortCode = '';\n                      }\n                      \n                      return newSelections;\n                    });\n                  };\n\n                    // ACT ÏÑπÏÖò Ïù¥Î≤§Ìä∏ Ìï∏Îì§Îü¨Îì§\n                  const handleActChange = (field: string, value: string) => {\n                    //console.log('ACT Change:', field, value);\n                    setActSelections(prev => {\n                      const newSelections = { ...prev, [field]: value };\n                      \n                      // Action Type Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n                      if (field === 'actionType') {\n                        const selectedItem = actTypeList.find(item => item.actTypeCode === value);\n                        if (selectedItem) {\n                          newSelections.actionTypeCode = selectedItem.actTypeCode;\n                        }\n                      }\n                      \n                      // Series Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n                      if (field === 'series') {\n                        const selectedItem = actSeriesList.find(item => item.actSeriesCode === value);\n                        if (selectedItem) {\n                          newSelections.seriesCode = selectedItem.actSeriesCode;\n                        }\n                        \n                        newSelections.size = '';\n                        //console.log('Series Î≥ÄÍ≤ΩÎê®:', value);\n                        // SeriesÍ∞Ä ÏÑ†ÌÉùÎêòÎ©¥ Ìï¥ÎãπÌïòÎäî Size Î™©Î°ù Í∞ÄÏ†∏Ïò§Í∏∞\n                        if (value) {\n                          //console.log('fetchActSizeList Ìò∏Ï∂ú:', value);\n                          fetchActSizeList(value);\n                        } else {\n                          //console.log('actSizeList Ï¥àÍ∏∞Ìôî');\n                          setActSizeList([]);\n                        }\n                      }\n                      \n                      // Size Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n                      if (field === 'size') {\n                        const selectedItem = actSizeList.find(item => item.actSizeCode === value);\n                        if (selectedItem) {\n                          newSelections.sizeCode = selectedItem.actSizeCode;\n                        }\n                      }\n                      \n                      // H.W Î≥ÄÍ≤Ω Ïãú ÏΩîÎìú Í∞íÎèÑ Ìï®Íªò ÏóÖÎç∞Ïù¥Ìä∏\n                      if (field === 'hw') {\n                        const selectedItem = actHWList.find(item => item.hwCode === value);\n                        if (selectedItem) {\n                          newSelections.hwCode = selectedItem.hwCode;\n                        }\n                      }\n                      \n                      return newSelections;\n                    });\n                  };\n\n\n\n  // ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞ (Ïû¨ÏãúÎèÑ Î°úÏßÅ Ìè¨Ìï®)\n  const fetchAccessoryData = async (retryCount = 0): Promise<boolean> => {\n    const maxRetries = 3;\n    \n    try {\n      console.log(`ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏãúÎèÑ ${retryCount + 1}/${maxRetries + 1}...`);\n      \n      const accSearchRes = await fetch('http://192.168.0.14:5135/api/masterdata/acc/search');\n      \n      if (accSearchRes.ok) {\n        const accSearchData = await accSearchRes.json();\n        console.log('ÏïÖÏÑ∏ÏÇ¨Î¶¨ Í≤ÄÏÉâ Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏÑ±Í≥µ:', accSearchData.length, 'Í∞ú');\n        \n        // Î∞±ÏóîÎìú ÏùëÎãµ Îç∞Ïù¥ÌÑ∞ Íµ¨Ï°∞ ÌôïÏù∏\n        if (accSearchData.length > 0) {\n          console.log('üîç Î∞±ÏóîÎìú ÏùëÎãµ Îç∞Ïù¥ÌÑ∞ Ï≤´ Î≤àÏß∏ Ìï≠Î™© Íµ¨Ï°∞:', accSearchData[0]);\n          console.log('üîç Î∞±ÏóîÎìú ÏùëÎãµ Îç∞Ïù¥ÌÑ∞ Ï≤´ Î≤àÏß∏ Ìï≠Î™©Ïùò Î™®Îì† ÌÇ§:', Object.keys(accSearchData[0]));\n        }\n        \n        // Î©îÏù¥Ïª§ÏôÄ Î™®Îç∏ Îç∞Ïù¥ÌÑ∞ Î∂ÑÎ¶¨ - ÏïÖÏÑ∏ÏÇ¨Î¶¨ ÌÉÄÏûÖÎ≥ÑÎ°ú Íµ¨Î∂Ñ\n        const allAccMakerData: any[] = [];\n        const allAccModelData: any[] = [];\n        \n        // ÏïÖÏÑ∏ÏÇ¨Î¶¨ ÌÉÄÏûÖÎ≥ÑÎ°ú Îç∞Ïù¥ÌÑ∞ Í∑∏Î£πÌôî\n        const groupedByType = accSearchData.reduce((acc: any, item: any) => {\n          if (!acc[item.accTypeCode]) {\n            acc[item.accTypeCode] = [];\n          }\n          acc[item.accTypeCode].push(item);\n          return acc;\n        }, {});\n        \n        // Í∞Å ÌÉÄÏûÖÎ≥ÑÎ°ú Î©îÏù¥Ïª§ÏôÄ Î™®Îç∏ Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨\n        Object.entries(groupedByType).forEach(([typeCode, items]: [string, any]) => {\n          const typeItems = items as any[];\n          \n          // Î©îÏù¥Ïª§ Îç∞Ïù¥ÌÑ∞ (ÌÉÄÏûÖÎ≥ÑÎ°ú Ï§ëÎ≥µ Ï†úÍ±∞)\n          typeItems.forEach((item: any) => {\n            const existingMaker = allAccMakerData.find(maker => \n              maker.accMakerCode === item.accMakerCode && maker.accTypeCode === typeCode\n            );\n            if (!existingMaker) {\n              allAccMakerData.push({\n                accMakerCode: item.accMakerCode,\n                accMakerName: item.accMakerName,\n                accTypeCode: typeCode\n              });\n            }\n          });\n          \n          // Î™®Îç∏ Îç∞Ïù¥ÌÑ∞\n          typeItems.forEach((item: any) => {\n            console.log(`üîç ${typeCode} ÌÉÄÏûÖ Î™®Îç∏ Îç∞Ïù¥ÌÑ∞:`, {\n              accMakerCode: item.accMakerCode,\n              accModelCode: item.accModelCode,\n              accModelName: item.accModelName,\n              accSize: item.accSize,\n              accTypeCode: typeCode\n            });\n            \n            allAccModelData.push({\n              accMakerCode: item.accMakerCode,\n              accModelCode: item.accModelCode,\n              accModelName: item.accModelName,\n              accSize: item.accSize,\n              accTypeCode: typeCode  // item.accTypeCode ÎåÄÏã† Í∑∏Î£πÌôîÎêú typeCode ÏÇ¨Ïö©\n            });\n          });\n        });\n        \n        console.log('üîç ÏïÖÏÑ∏ÏÇ¨Î¶¨ ÌÉÄÏûÖÎ≥Ñ Îç∞Ïù¥ÌÑ∞ Í∑∏Î£πÌôî Í≤∞Í≥º:', groupedByType);\n        console.log('üîç Î∂ÑÎ¶¨Îêú Î©îÏù¥Ïª§ Îç∞Ïù¥ÌÑ∞:', allAccMakerData);\n        console.log('üîç Î∂ÑÎ¶¨Îêú Î™®Îç∏ Îç∞Ïù¥ÌÑ∞:', allAccModelData);\n        \n        // Í∞Å ÌÉÄÏûÖÎ≥Ñ Îç∞Ïù¥ÌÑ∞ Í∞úÏàò ÌôïÏù∏\n        Object.entries(groupedByType).forEach(([typeCode, items]: [string, any]) => {\n          console.log(`üîç ${typeCode} ÌÉÄÏûÖ: ${items.length}Í∞ú`);\n          const uniqueMakers = new Set(items.map((item: any) => item.accMakerCode));\n          console.log(`  - Í≥†Ïú† Î©îÏù¥Ïª§ Ïàò: ${uniqueMakers.size}`);\n          console.log(`  - Î©îÏù¥Ïª§ ÏΩîÎìúÎì§:`, Array.from(uniqueMakers));\n          \n          // ÌÉÄÏûÖÎ≥Ñ Î©îÏù¥Ïª§ Î™©Î°ù ÌôïÏù∏\n          const typeMakers = allAccMakerData.filter(maker => maker.accTypeCode === typeCode);\n          console.log(`  - ÌÉÄÏûÖÎ≥Ñ Î©îÏù¥Ïª§ Î™©Î°ù:`, typeMakers);\n        });\n        \n        setAccMakerList(allAccMakerData);\n        setAccModelList(allAccModelData);\n        console.log('ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ ÏÑ§Ï†ï ÏôÑÎ£å - Î©îÏù¥Ïª§:', allAccMakerData.length, 'Í∞ú, Î™®Îç∏:', allAccModelData.length, 'Í∞ú');\n        \n        // accMakerList Íµ¨Ï°∞ ÏÉÅÏÑ∏ ÌôïÏù∏\n        console.log('üîç accMakerList ÏÉÅÏÑ∏ Íµ¨Ï°∞:');\n        allAccMakerData.forEach((maker, index) => {\n          console.log(`  [${index}] ${maker.accTypeCode} - ${maker.accMakerCode}: ${maker.accMakerName}`);\n        });\n        \n        // ÌÉÄÏûÖÎ≥Ñ Î©îÏù¥Ïª§ Í∞úÏàò ÌôïÏù∏\n        const makerCountByType = allAccMakerData.reduce((acc: any, maker) => {\n          if (!acc[maker.accTypeCode]) acc[maker.accTypeCode] = 0;\n          acc[maker.accTypeCode]++;\n          return acc;\n        }, {});\n        console.log('üîç ÌÉÄÏûÖÎ≥Ñ Î©îÏù¥Ïª§ Í∞úÏàò:', makerCountByType);\n        \n        // ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏôÑÎ£å ÌõÑ accSelections Ï¥àÍ∏∞Ìôî\n        const initialAccSelections = {\n          positioner: { typeCode: 'Positioner', makerCode: '', modelCode: '', specification: '' },\n          solenoid: { typeCode: 'Solenoid', makerCode: '', modelCode: '', specification: '' },\n          limiter: { typeCode: 'Limit', makerCode: '', modelCode: '', specification: '' },\n          airSupply: { typeCode: 'Airset', makerCode: '', modelCode: '', specification: '' },\n          volumeBooster: { typeCode: 'Volume', makerCode: '', modelCode: '', specification: '' },\n          airOperator: { typeCode: 'Airoperate', makerCode: '', modelCode: '', specification: '' },\n          lockUp: { typeCode: 'Lockup', makerCode: '', modelCode: '', specification: '' },\n          snapActingRelay: { typeCode: 'Snapacting', makerCode: '', modelCode: '', specification: '' },\n        };\n        setAccSelections(initialAccSelections);\n        \n        return true; // ÏÑ±Í≥µ\n      } else {\n        console.error('ÏïÖÏÑ∏ÏÇ¨Î¶¨ Í≤ÄÏÉâ API ÏùëÎãµ Ïã§Ìå®:', accSearchRes.status, accSearchRes.statusText);\n        return false; // Ïã§Ìå®\n      }\n    } catch (error) {\n      console.error('ÏïÖÏÑ∏ÏÇ¨Î¶¨ Í≤ÄÏÉâ Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïã§Ìå®:', error);\n      return false; // Ïã§Ìå®\n    }\n  };\n\n  // ÎßàÏä§ÌÑ∞ Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞\n  const fetchMasterData = async () => {\n    try {\n      // Step 1, 2 ÎßàÏä§ÌÑ∞ Îç∞Ïù¥ÌÑ∞ (EstimateController)\n      const [sizeRes, matRes, trimMatRes, optionRes, ratingRes] = await Promise.all([\n        fetch('http://192.168.0.14:5135/api/estimate/body-size-list'),\n        fetch('http://192.168.0.14:5135/api/estimate/body-mat-list'),\n        fetch('http://192.168.0.14:5135/api/estimate/trim-mat-list'),\n        fetch('http://192.168.0.14:5135/api/estimate/trim-option-list'),\n        fetch('http://192.168.0.14:5135/api/estimate/body-rating-list')\n      ]);\n      \n      const [sizeData, matData, trimMatData, optionData, ratingData] = await Promise.all([\n        sizeRes.json(),\n        matRes.json(),\n        trimMatRes.json(),\n        optionRes.json(),\n        ratingRes.json()\n      ]);\n      \n      setBodySizeList(sizeData || []);\n      setBodyMatList(matData || []);\n      setTrimMatList(trimMatData || []);\n      setTrimOptionList(optionData || []);\n      setBodyRatingList(ratingData || []);\n      //console.log('BodyRatingList Î°úÎìúÎê®:', ratingData); // ÎîîÎ≤ÑÍπÖ Î°úÍ∑∏ Ï∂îÍ∞Ä\n\n      // Step 3 ÎßàÏä§ÌÑ∞ Îç∞Ïù¥ÌÑ∞ (MasterDataController)\n      const [bodyBonnetRes, bodyConnectionRes, trimTypeRes, trimSeriesRes, trimPortSizeRes, trimFormRes, \n            actTypeRes, actSeriesRes, actHWRes] = await Promise.all([\n        fetch('http://192.168.0.14:5135/api/masterdata/body/bonnet'),\n        fetch('http://192.168.0.14:5135/api/masterdata/body/connection'),\n        fetch('http://192.168.0.14:5135/api/masterdata/trim-type'),\n        fetch('http://192.168.0.14:5135/api/masterdata/trim/series'),\n        fetch('http://192.168.0.14:5135/api/masterdata/trim/port-size'),\n        fetch('http://192.168.0.14:5135/api/masterdata/trim/form'),\n        fetch('http://192.168.0.14:5135/api/masterdata/act/type'),\n        fetch('http://192.168.0.14:5135/api/masterdata/act/series'),\n        fetch('http://192.168.0.14:5135/api/masterdata/act/hw')\n      ]);\n\n      // ÎìúÎûòÍ∑∏ Ïï§ ÎìúÎ°≠ Ìï∏Îì§Îü¨ (Ï∂îÍ∞Ä)\nconst onDragStart = (e: React.DragEvent<HTMLDivElement>, index: number, listKey: 'types' | 'valves') => {\n  e.dataTransfer.setData('text/plain', JSON.stringify({ index, listKey }));\n};\nconst onDragOver = (e: React.DragEvent<HTMLDivElement>) => { e.preventDefault(); };\nconst onDrop = (e: React.DragEvent<HTMLDivElement>, dropIndex: number, listKey: 'types' | 'valves') => {\n  e.preventDefault();\n  const { index } = JSON.parse(e.dataTransfer.getData('text/plain') || '{\"index\":-1}');\n  if (index < 0) return;\n\n  if (listKey === 'types') {\n    setTypes(prev => {\n      const arr = [...prev];\n      const [moved] = arr.splice(index, 1);\n      arr.splice(dropIndex, 0, moved);\n      return arr;\n    });\n  } else {\n    setValves(prev => {\n      const arr = [...prev];\n      const [moved] = arr.splice(index, 1);\n      arr.splice(dropIndex, 0, moved);\n      // Î≥¥Í∏∞Ïö© sheetNo Ïû¨Î∂ÄÏó¨(1Î∂ÄÌÑ∞)\n      return arr.map((it, i) => ({ ...it, sheetNo: i + 1 }));\n    });\n  }\n};\n\n      // Í∞Å API ÏùëÎãµÏùÑ Í∞úÎ≥ÑÏ†ÅÏúºÎ°ú Ï≤òÎ¶¨ÌïòÏó¨ ÏóêÎü¨ Î∞úÏÉù ÏãúÏóêÎèÑ Îã§Î•∏ Îç∞Ïù¥ÌÑ∞Îäî Î°úÎìúÌï† Ïàò ÏûàÎèÑÎ°ù Ìï®\n      let bodyBonnetData = [], bodyConnectionData = [], trimTypeData = [], trimSeriesData = [], \n          trimPortSizeData = [], trimFormData = [], actTypeData = [], actSeriesData = [], \n          actHWData = [];\n\n      try {\n        bodyBonnetData = await bodyBonnetRes.json();\n        //console.log('Body Bonnet Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', bodyBonnetData.length);\n      } catch (e) {\n        console.error('Body Bonnet Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n\n      try {\n        bodyConnectionData = await bodyConnectionRes.json();\n        //console.log('Body Connection Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', bodyConnectionData.length);\n      } catch (e) {\n        console.error('Body Connection Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n\n      try {\n        trimTypeData = await trimTypeRes.json();\n        //console.log('Trim Type Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', trimTypeData.length);\n      } catch (e) {\n        console.error('Trim Type Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n\n      try {\n        trimSeriesData = await trimSeriesRes.json();\n        //console.log('Trim Series Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', trimSeriesData.length);\n      } catch (e) {\n        console.error('Trim Series Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n\n      try {\n        trimPortSizeData = await trimPortSizeRes.json();\n        //console.log('Trim Port Size Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', trimPortSizeData.length);\n      } catch (e) {\n        console.error('Trim Port Size Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n\n      try {\n        trimFormData = await trimFormRes.json();\n        //console.log('Trim Form Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', trimFormData.length);\n      } catch (e) {\n        console.error('Trim Form Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n\n      try {\n        actTypeData = await actTypeRes.json();\n        //console.log('Act Type Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', actTypeData.length);\n      } catch (e) {\n        console.error('Act Type Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n\n      try {\n        actSeriesData = await actSeriesRes.json();\n        //console.log('Act Series Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', actSeriesData.length);\n      } catch (e) {\n        console.error('Act Series Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n\n      try {\n        actHWData = await actHWRes.json();\n        //console.log('Act HW Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', actHWData.length);\n      } catch (e) {\n        console.error('Act HW Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n\n\n\n      // ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ Î°úÎî©ÏùÄ Î≥ÑÎèÑ Ìï®ÏàòÎ°ú Î∂ÑÎ¶¨ÌïòÏó¨ Ïû¨ÏãúÎèÑ Í∞ÄÎä•ÌïòÎèÑÎ°ù Ìï®\n      await fetchAccessoryData();\n\n\n\n      setBodyBonnetList(bodyBonnetData || []);\n      setBodyConnectionList(bodyConnectionData || []);\n      setTrimTypeList(trimTypeData || []);\n      setTrimSeriesList(trimSeriesData || []);\n      setTrimPortSizeList(trimPortSizeData || []);\n      setTrimFormList(trimFormData || []);\n      setActTypeList(actTypeData || []);\n      setActSeriesList(actSeriesData || []);\n      setActHWList(actHWData || []);\n\n    } catch (error) {\n      console.error('ÎßàÏä§ÌÑ∞ Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞ Ïã§Ìå®:', error);\n      \n      // Í∞úÎ≥Ñ API ÏùëÎãµ ÏÉÅÌÉú ÌôïÏù∏ÏùÑ ÏúÑÌïú Î°úÍπÖ Ï∂îÍ∞Ä\n      //console.log('ÎßàÏä§ÌÑ∞ Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏÉÅÌÉú:');\n      //console.log('- Body Size:', bodySizeList.length);\n      //console.log('- Body Material:', bodyMatList.length);\n      //console.log('- Trim Material:', trimMatList.length);\n      //\n      \n      // ÏóêÎü¨ Î∞úÏÉù Ïãú Îπà Î∞∞Ïó¥Î°ú ÏÑ§Ï†ï\n      setBodySizeList([]);\n      setBodyMatList([]);\n      setTrimMatList([]);\n      setTrimOptionList([]);\n      setBodyRatingList([]);\n      setBodyBonnetList([]);\n      setBodyConnectionList([]);\n      setTrimTypeList([]);\n      setTrimSeriesList([]);\n      setTrimPortSizeList([]);\n      setTrimFormList([]);\n      setActTypeList([]);\n      setActSeriesList([]);\n      setActHWList([]);\n      setAccMakerList([]);\n      setAccModelList([]);\n    }\n  };\n\n  // ÌíàÎ≤à ÏÉùÏÑ± Ìï®Ïàò - ÏÑπÏÖòÎ≥ÑÎ°ú Íµ¨Î∂Ñ\n  const generatePartNumber = useMemo(() => {\n    try {\n      // BODY ÏÑπÏÖò (6ÏûêÎ¶¨) - ÏΩîÎìú ÏÇ¨Ïö©\n      const bodySection = [\n        bodySelections.bonnetTypeCode || '0',\n        '2', // valveSeries Í∏∞Î≥∏Í∞í\n        bodySelections.materialBodyCode || '0',\n        bodySelections.sizeBodyCode || '0',\n        bodySelections.ratingCode || '0',\n        bodySelections.connectionCode || '0'\n      ].join('');\n      \n      // TRIM ÏÑπÏÖò (6ÏûêÎ¶¨) - ÏΩîÎìú ÏÇ¨Ïö©\n      const trimSection = [\n        trimSelections.trimTypeCode || '0',\n        trimSelections.trimSeriesCode || '0',\n        trimSelections.materialTrimCode || '0',\n        trimSelections.sizePortCode || '0',\n        trimSelections.sizePortCode || '0', // Ï§ëÎ≥µ\n        trimSelections.formCode || '0'\n      ].join('');\n      \n      // ACT ÏÑπÏÖò (4ÏûêÎ¶¨) - ÏΩîÎìú ÏÇ¨Ïö©\n      const actSection = [\n        actSelections.actionTypeCode || '0',\n        actSelections.seriesCode || '0',\n        actSelections.sizeCode || '0',\n        actSelections.hwCode || '0'\n      ].join('');\n      \n      // ACC ÏÑπÏÖò (11ÏûêÎ¶¨)\n      const accSection = [\n        accSelections.positioner.makerCode || '0',\n        accSelections.positioner.modelCode || '0',\n        accSelections.solenoid.makerCode || '0',\n        accSelections.solenoid.modelCode || '0',\n        accSelections.limiter.makerCode || '0',\n        accSelections.limiter.modelCode || '0',\n        accSelections.airSupply.modelCode || '0',\n        accSelections.volumeBooster.modelCode || '0',\n        accSelections.airOperator.modelCode || '0',\n        accSelections.lockUp.modelCode || '0',\n        accSelections.snapActingRelay.modelCode || '0'\n      ].join('');\n      \n      // ÏÑπÏÖòÏùÑ '-'Î°ú Íµ¨Î∂ÑÌïòÏó¨ Î∞òÌôò\n      return `${bodySection}-${trimSection}-${actSection}-${accSection}`;\n      \n    } catch (error) {\n      console.error('ÌíàÎ≤à ÏÉùÏÑ± Ï§ë Ïò§Î•ò:', error);\n      return '000000-000000-0000-00000000000';\n    }\n  }, [bodySelections, trimSelections, actSelections, accSelections]);\n\n  // Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞ Î°úÎìú\n  const loadExistingData = useCallback(async () => {\n    if (!tempEstimateNo) return;\n    \n    //console.log('ÌòÑÏû¨ tempEstimateNo:', tempEstimateNo); // tempEstimateNo Î°úÍ∑∏ Ï∂îÍ∞Ä\n    \n    try {\n      // ÌòÑÏû¨ Î°úÍ∑∏Ïù∏Ìïú ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞\n      const userStr = localStorage.getItem('user');\n      const currentUser = userStr ? JSON.parse(userStr) : null;\n\n      // currentUserIdÎäî ÏûÑÏãúÎ°ú 'admin' ÏÇ¨Ïö© (Ïã§Ï†úÎ°úÎäî Î°úÍ∑∏Ïù∏Îêú ÏÇ¨Ïö©Ïûê IDÎ•º ÏÇ¨Ïö©Ìï¥Ïïº Ìï®)\n      const response = await getEstimateDetail(tempEstimateNo, currentUser?.userId || 'admin'); // Ïã§Ï†ú ÏÇ¨Ïö©Ïûê ID ÏÇ¨Ïö©\n      const data = response;\n      \n      //console.log('Í≤¨Ï†Å ÏÉÅÏÑ∏ Îç∞Ïù¥ÌÑ∞:', data);\n      \n      \n      // ÌîÑÎ°úÏ†ùÌä∏Î™Ö ÏÑ§Ï†ï\n      if (data.estimateSheet && data.estimateSheet.project) {\n        setProjectName(data.estimateSheet.project);\n      }\n      \n      // ÌòÑÏû¨ ÏÉÅÌÉú ÏÑ§Ï†ï + Í≤¨Ï†ÅÏãúÏûë ÌÜ†Í∏Ä\n      if (data.estimateSheet && data.estimateSheet.statusText) {\n        setCurrentStatus(data.estimateSheet.statusText);\n      }\n      // status === 3(Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë) Ïù¥Î©¥ Î≤ÑÌäºÏùÑ Î≥¥ÎùºÏÉâ ÏÉÅÌÉúÎ°ú ÌÜ†Í∏Ä\n      if (data.estimateSheet && typeof data.estimateSheet.status === 'number') {\n        setQuoteStarted(data.estimateSheet.status === 3);\n      }\n      // ÏöîÏïΩ Ïπ¥Îìú ÌëúÏãúÍ∞í ÏÑ§Ï†ï\n      const es: any = data.estimateSheet || {};\n      const tempNo: string = es.tempEstimateNo || es.TempEstimateNo || '';\n      const curNo: string | null = es.curEstimateNo ?? es.CurEstimateNo ?? null;\n      const customerName: string = es.customerName || es.CustomerName || '-';\n      const customerUserName: string = es.customerUserName || es.CustomerUserName || customerName;\n      const managerId: string = es.managerID || es.ManagerID || '-';\n      const managerName: string = es.managerName || es.ManagerName || managerId;\n\n      const parseFromTemp = (no: string): string => {\n        const m = /TEMP(\\d{4})(\\d{2})(\\d{2})/.exec(no || '');\n        return m ? `${m[1]}.${m[2]}.${m[3]}` : '-';\n      };\n      const parseFromCur = (no?: string | null): string => {\n        if (!no) return '-';\n        const m = /YA(\\d{4})(\\d{2})(\\d{2})-(\\d{3})/.exec(no);\n        return m ? `${m[1]}.${m[2]}.${m[3]}` : '-';\n      };\n\n      setSummaryEstimateNo(curNo ?? '-');\n      setSummaryCompanyName(customerName);\n      setSummaryRequesterName(customerUserName); // ÏöîÏ≤≠Ïûê = User.Name\n      setSummaryRequestDate(parseFromTemp(tempNo));\n      setSummaryManager(managerName || managerId || '-');\n      setSummaryCompletedDate(parseFromCur(curNo));\n      \n      // ÏùΩÍ∏∞ Ï†ÑÏö© ÏÉÅÌÉú ÏÑ§Ï†ï\n      const isStatusThree = data.estimateSheet?.status === 3; // ÏÉÅÌÉúÍ∞Ä 3 (Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë)Ïù∏ÏßÄ\n      const isCurrentUserManager = currentUser?.userId === data.estimateSheet?.managerID; // ÌòÑÏû¨ ÏÇ¨Ïö©ÏûêÍ∞Ä Îã¥ÎãπÏûêÏù∏ÏßÄ\n      \n      const shouldBeReadOnly = !(isStatusThree && isCurrentUserManager); // Îëò Îã§ Ï∞∏Ïùº ÎïåÎßå false (ÏàòÏ†ï Í∞ÄÎä•)\n      setIsReadOnly(shouldBeReadOnly);\n      //console.log('EstimateDetailPage isReadOnly ÏÑ§Ï†ïÎê®:', shouldBeReadOnly);\n      //console.log('  status:', data.estimateSheet?.status, '(3Ïù¥Î©¥ Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë)');\n      //console.log('  managerID:', data.estimateSheet?.managerID);\n      //console.log('  currentUser.userId:', currentUser?.userId);\n      \n      // EstimateRequest Îç∞Ïù¥ÌÑ∞Î•º Í∏∞Î∞òÏúºÎ°ú typesÏôÄ valves ÏÑ§Ï†ï\n      if (data.estimateRequests && data.estimateRequests.length > 0) {\n        // ÎîîÎ≤ÑÍπÖ: Ïã§Ï†ú Îç∞Ïù¥ÌÑ∞ Íµ¨Ï°∞ ÌôïÏù∏\n        console.log('üîç EstimateDetailPage - API ÏùëÎãµ Îç∞Ïù¥ÌÑ∞ Íµ¨Ï°∞:');\n        console.log('data.estimateRequests:', data.estimateRequests);\n        console.log('Ï≤´ Î≤àÏß∏ estimateRequest:', data.estimateRequests[0]);\n        if (data.estimateRequests[0]?.tagNos) {\n          console.log('Ï≤´ Î≤àÏß∏ tagNos:', data.estimateRequests[0].tagNos);\n          console.log('Ï≤´ Î≤àÏß∏ tagNoÏùò ÌïÑÎìúÎì§:', Object.keys(data.estimateRequests[0].tagNos[0] || {}));\n          console.log('Ï≤´ Î≤àÏß∏ tagNoÏùò sheetNo:', data.estimateRequests[0].tagNos[0]?.sheetNo);\n          console.log('Ï≤´ Î≤àÏß∏ tagNoÏùò sheetID:', data.estimateRequests[0].tagNos[0]?.sheetID);\n        }\n        // Type Ï†ïÎ≥¥ ÏÑ§Ï†ï\n        const typeMap = new Map<string, { count: number; order: number }>();\n        \n        data.estimateRequests.forEach((req: any) => {\n          const valveType = req.valveType;\n          if (typeMap.has(valveType)) {\n            \n            typeMap.get(valveType)!.count += req.tagNos.reduce((sum: number, tag: any) => sum + tag.qty, 0);\n          } else {\n            const totalQty = req.tagNos.reduce((sum: number, tag: any) => sum + tag.qty, 0);\n            typeMap.set(valveType, { count: totalQty, order: typeMap.size + 1 });\n          }\n        });\n        \n        // typesDataÎ•º SheetNo Í∏∞Ï§ÄÏúºÎ°ú Ï†ïÎ†¨\n        const typesData = Array.from(typeMap.entries()).map(([code, info]) => {\n          // bodyValveListÍ∞Ä Î°úÎìúÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞Î•º ÎåÄÎπÑÌïòÏó¨ Í∏∞Î≥∏Í∞í ÏÑ§Ï†ï\n          const valveInfo = bodyValveList.find(v => v.valveSeriesCode === code);\n          return {\n            id: code,\n            name: valveInfo ? valveInfo.valveSeries : `Valve Type ${code}`,\n            code: code,\n            count: info.count,\n            order: info.order\n          };\n        });\n        \n        // Î∞∏Î∏å ÌÉÄÏûÖÏùÑ SheetNo ÏàúÏÑúÎåÄÎ°ú Ï†ïÎ†¨\n        const sortedTypesData = typesData.sort((a, b) => {\n          // Í∞Å Î∞∏Î∏å ÌÉÄÏûÖÏùò Ï≤´ Î≤àÏß∏ TagNoÏùò SheetNoÎ•º Í∏∞Ï§ÄÏúºÎ°ú Ï†ïÎ†¨\n          const aFirstTag = data.estimateRequests.find(req => req.valveType === a.code)?.tagNos?.[0];\n          const bFirstTag = data.estimateRequests.find(req => req.valveType === b.code)?.tagNos?.[0];\n          \n          // sheetNo ÎòêÎäî sheetID ÏÇ¨Ïö© (ÌÉÄÏûÖ ÏïàÏ†ÑÏÑ± ÌôïÎ≥¥)\n          const aSheetNo = (aFirstTag as any)?.sheetNo || (aFirstTag as any)?.sheetID || 999;\n          const bSheetNo = (bFirstTag as any)?.sheetNo || (bFirstTag as any)?.sheetID || 999;\n          \n          return aSheetNo - bSheetNo;\n        });\n        \n        setTypes(sortedTypesData);\n        \n        // Valve Ï†ïÎ≥¥ ÏÑ§Ï†ï - TagNoDetailDtoÎ•º Í∏∞Î∞òÏúºÎ°ú Î≥ÄÌôò\n        const valvesData: ValveData[] = [];\n        data.estimateRequests.forEach((req: any) => {\n          req.tagNos.forEach((tag: any) => {\n            // Body Type Ïù¥Î¶Ñ Í∞ÄÏ†∏Ïò§Í∏∞\n            const valveInfo = bodyValveList.find(v => v.valveSeriesCode === req.valveType);\n            const bodyTypeName = valveInfo ? valveInfo.valveSeries : `Valve Type ${req.valveType}`;\n            \n            // Rating Unit Í∞ÄÏ†∏Ïò§Í∏∞ (bodyRatingListÏóêÏÑú Ï∞æÍ∏∞)\n            const ratingInfo = bodyRatingList.find(r => r.ratingCode === tag.bodyRating);\n            const ratingUnit = ratingInfo ? ratingInfo.ratingUnit : '';\n            \n            valvesData.push({\n              id: `${tag.sheetID}`,\n              tagNo: tag.tagNo,\n              qty: tag.qty,\n              order: tag.sheetNo ?? tag.sheetID,\n              sheetID: tag.sheetID,\n              typeId: req.valveType,\n              fluid: {\n                medium: tag.medium || '',\n                fluid: tag.fluid || '',\n                density: tag.density || '',\n                molecular: tag.molecularWeight || '',\n                t1: { max: tag.inletTemperatureQ || 0, normal: tag.inletTemperatureNorQ || 0, min: tag.inletTemperatureMinQ || 0 },\n                p1: { max: tag.inletPressureMaxQ || 0, normal: tag.inletPressureNorQ || 0, min: tag.inletPressureMinQ || 0 },\n                p2: { max: tag.outletPressureMaxQ || 0, normal: tag.outletPressureNorQ || 0, min: tag.outletPressureMinQ || 0 },\n                dp: { max: tag.differentialPressureMaxQ || 0, normal: tag.differentialPressureNorQ || 0, min: tag.differentialPressureMinQ || 0 },\n                qm: { max: tag.qmMax || 0, normal: tag.qmNor || 0, min: tag.qmMin || 0, unit: tag.qmUnit || '' },\n                qn: { max: tag.qnMax || 0, normal: tag.qnNor || 0, min: tag.qnMin || 0, unit: tag.qnUnit || '' },\n                pressureUnit: tag.pressureUnit || '',\n                temperatureUnit: tag.temperatureUnit || ''\n              },\n              body: {\n                type: bodyTypeName, // Body Type Ïù¥Î¶Ñ ÏÑ§Ï†ï\n                typeCode: req.valveType || '',\n                size: tag.bodySize || '',\n                sizeUnit: tag.bodySizeUnit || '',\n                materialBody: tag.bodyMat || '',\n                materialTrim: tag.trimMat || '',\n                option: tag.trimOption || '',\n                rating: tag.bodyRating || '',\n                ratingUnit: ratingUnit // Rating Unit ÏÑ§Ï†ï\n              },\n              actuator: {\n                type: tag.actType || '',\n                hw: tag.isHW ? 'Yes' : 'No'\n              },\n              accessory: {\n                positioner: { type: tag.positionerType || '', exists: tag.isPositioner || false },\n                explosionProof: tag.explosionProof || '',\n                transmitter: { type: tag.transmitterType || '', exists: !!tag.transmitterType },\n                solenoidValve: tag.isSolenoid || false,\n                limitSwitch: tag.isLimSwitch || false,\n                airSet: tag.isAirSet || false,\n                volumeBooster: tag.isVolumeBooster || false,\n                airOperatedValve: tag.isAirOperated || false,\n                lockupValve: tag.isLockUp || false,\n                snapActingRelay: tag.isSnapActingRelay || false\n              },\n              isQM: tag.isQM || false,\n              isP2: tag.isP2 || false,\n              isN1: false, // EstimateRequestDetailDtoÏóêÎäî isN1Ïù¥ ÏóÜÏùå\n              isDensity: tag.isDensity || false,\n              isHW: tag.isHW || false\n            });\n          });\n        });\n        // sheetNo Í∏∞Ï§ÄÏúºÎ°ú Ïò§Î¶ÑÏ∞®Ïàú Ï†ïÎ†¨\n        valvesData.sort((a, b) => a.order - b.order);\n\n        // Ï†ïÎ†¨Îêú Í≤∞Í≥ºÎ°ú ÏÉÅÌÉú Î∞òÏòÅ\n        setValves(valvesData);\n        \n\n        \n        // Ï≤´ Î≤àÏß∏ valveÎ•º Í∏∞Î≥∏ ÏÑ†ÌÉù\n        // if (valvesData.length > 0) {\n        //   setSelectedValve(valvesData[0]);\n        // }\n      }\n      \n      // Í∏∞ÌÉÄ ÏöîÏ≤≠ÏÇ¨Ìï≠ ÏÑ§Ï†ï\n      if (data.estimateSheet && data.estimateSheet.customerRequirement) {\n        setCustomerRequirement(data.estimateSheet.customerRequirement);\n      }\n      \n      // Í¥ÄÎ¶¨Ïûê ÏΩîÎ©òÌä∏ ÏÑ§Ï†ï\n      if (data.estimateSheet && data.estimateSheet.staffComment) {\n        setStaffComment(data.estimateSheet.staffComment);\n      }\n      \n      // Ï≤®Î∂ÄÌååÏùº ÏÑ§Ï†ï - Í≥†Í∞ù ÏöîÏ≤≠Í≥º Í¥ÄÎ¶¨ Ï≤®Î∂ÄÌååÏùº Î∂ÑÎ¶¨\n      if (data.attachments && data.attachments.length > 0) {\n        const customerFiles: any[] = [];\n        const managerFiles: any[] = [];\n        \n        data.attachments.forEach((att: any) => {\n          if (att.filePath && isCustomerFile(att.filePath)) {\n            customerFiles.push(att);\n          } else if (att.filePath && isManagerFile(att.filePath)) {\n            managerFiles.push(att);\n          }\n        });\n        \n        setCustomerAttachments(customerFiles);\n        setManagerAttachments(managerFiles);\n        \n        // Í∏∞Ï°¥ Ìò∏ÌôòÏÑ± Ïú†ÏßÄ\n        const fileList = data.attachments.map((att: any) => ({\n          name: att.fileName || 'Unknown',\n          size: att.fileSize || 0\n        } as any));\n        setAttachments(fileList);\n      }\n      \n    } catch (error) {\n      console.error('Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïã§Ìå®:', error);\n    }\n  }, [tempEstimateNo, bodyValveList, bodyRatingList]);\n\n  // ÏÉÅÌÉú Î≥ÄÍ≤Ω Ï≤òÎ¶¨\n  const handleStatusChange = async (newStatus: string) => {\n    try {\n      // ÏÉÅÌÉú ÌÖçÏä§Ìä∏Î•º Ïà´Ïûê ÏΩîÎìúÎ°ú Î≥ÄÌôòÌïòÎäî Ìó¨Ìçº Ìï®Ïàò\n      const getStatusCodeFromText = (statusText: string): number => {\n        switch (statusText) {\n          case 'ÏûÑÏãúÏ†ÄÏû•': return 1;\n          case 'Í≤¨Ï†ÅÏöîÏ≤≠': return 2;\n          case 'Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë': return 3;\n          case 'Í≤¨Ï†ÅÏôÑÎ£å': return 4;\n          case 'Ï£ºÎ¨∏': return 5;\n          default: return -1; // Ïïå Ïàò ÏóÜÎäî ÏÉÅÌÉú\n        }\n      };\n\n      const newStatusCode = getStatusCodeFromText(newStatus);\n      \n      // ÌòÑÏû¨ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ÏôÄ Í≤¨Ï†Å Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞\n      const userStr = localStorage.getItem('user');\n      const currentUser = userStr ? JSON.parse(userStr) : null;\n      \n      // Í≤¨Ï†Å ÏÉÅÏÑ∏ Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞ (isReadOnly Í≥ÑÏÇ∞ÏùÑ ÏúÑÌï¥)\n      if (!tempEstimateNo) {\n        throw new Error('tempEstimateNoÍ∞Ä ÏóÜÏäµÎãàÎã§.');\n      }\n      const estimateResponse = await getEstimateDetail(tempEstimateNo, currentUser?.userId || 'admin');\n      const estimateData = estimateResponse;\n\n      // Í≤¨Ï†ÅÏöîÏ≤≠ ÏÉÅÌÉú(2)ÏóêÏÑúÎßå Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë(3)ÏúºÎ°ú Î≥ÄÍ≤Ω Í∞ÄÎä•\n      // if (currentStatusCode === 2 && newStatusCode === 3) {\n        // ÏÉÅÌÉú Î≥ÄÍ≤Ω API Ìò∏Ï∂ú\n        const response = await fetch(`/api/estimate/sheets/${tempEstimateNo}/status`, { // API Í≤ΩÎ°ú ÏàòÏ†ï\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ status: newStatusCode }), // Ïà´Ïûê ÏÉÅÌÉú ÏΩîÎìúÎ°ú Ï†ÑÏÜ°\n        });\n\n        if (response.ok) {\n          setCurrentStatus(newStatus); // UI ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏ (Î¨∏ÏûêÏó¥Î°ú Ïú†ÏßÄ)\n          \n          // ÏÉÅÌÉú Î≥ÄÍ≤Ω ÌõÑ isReadOnly Ïû¨Í≥ÑÏÇ∞\n          const newStatusCode = getStatusCodeFromText(newStatus);\n          const isStatusThree = newStatusCode === 3; // ÏÉÅÌÉúÍ∞Ä 3 (Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë)Ïù∏ÏßÄ\n          const isCurrentUserManager = currentUser?.userId === estimateData.estimateSheet?.managerID; // ÌòÑÏû¨ ÏÇ¨Ïö©ÏûêÍ∞Ä Îã¥ÎãπÏûêÏù∏ÏßÄ\n          const shouldBeReadOnly = !(isStatusThree && isCurrentUserManager); // Îëò Îã§ Ï∞∏Ïùº ÎïåÎßå false (ÏàòÏ†ï Í∞ÄÎä•)\n          setIsReadOnly(shouldBeReadOnly);\n          alert('ÏÉÅÌÉúÍ∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§.'); // Î©îÏãúÏßÄ ÏùºÎ∞òÌôî\n          // ÏÉÅÌÉú Î≥ÄÍ≤Ω ÌõÑ ÏÉÅÏÑ∏ Ï†ïÎ≥¥Î•º Îã§Ïãú Î∂àÎü¨Ïò§Îäî Î°úÏßÅÏù¥ ÌïÑÏöîÌï† Ïàò ÏûàÏäµÎãàÎã§.\n          // loadEstimateDetail(); // ÏÉÅÏÑ∏ Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò§Îäî Ìï®ÏàòÍ∞Ä ÏûàÎã§Î©¥ Ìò∏Ï∂ú\n        } else {\n          // ÏùëÎãµ Î≥∏Î¨∏ÏùÑ ÏùΩÏñ¥ÏÑú Îçî ÏûêÏÑ∏Ìïú Ïò§Î•ò Î©îÏãúÏßÄ ÌôïÏù∏\n          const errorData = await response.json();\n          throw new Error(errorData.message || 'ÏÉÅÌÉú Î≥ÄÍ≤ΩÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n        }\n      // } else { // Ïù¥ else Î∏îÎ°ùÎèÑ Ï†úÍ±∞Ìï©ÎãàÎã§.\n      //   alert('Í≤¨Ï†ÅÏöîÏ≤≠ ÏÉÅÌÉúÏóêÏÑúÎßå Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ëÏúºÎ°ú Î≥ÄÍ≤ΩÌï† Ïàò ÏûàÏäµÎãàÎã§.');\n      // }\n    } catch (error: any) {\n      console.error('ÏÉÅÌÉú Î≥ÄÍ≤Ω Ïã§Ìå®:', error.message);\n      alert(`ÏÉÅÌÉú Î≥ÄÍ≤ΩÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§: ${error.message}`);\n    }\n  };\n\n  // Ï≤®Î∂ÄÌååÏùº Í¥ÄÎ†® Ìï®ÏàòÎì§\n  const handleDownloadFile = async (file: any, type: 'customer' | 'manager') => {\n    try {\n      if (type === 'customer' && !file.fileName.toLowerCase().endsWith('.pdf')) {\n        alert('Í≥†Í∞ùÏùÄ PDF ÌååÏùºÎßå Îã§Ïö¥Î°úÎìúÌï† Ïàò ÏûàÏäµÎãàÎã§.');\n        return;\n      }\n      \n      // ÌååÏùº Îã§Ïö¥Î°úÎìú API Ìò∏Ï∂ú\n              const response = await fetch(`/api/estimate/attachments/${file.attachmentID}/download`);\n      if (response.ok) {\n        const blob = await response.blob();\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = file.fileName;\n        document.body.appendChild(a);\n        a.click();\n        window.URL.revokeObjectURL(url);\n        document.body.removeChild(a);\n      } else {\n        alert('ÌååÏùº Îã§Ïö¥Î°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n      }\n    } catch (error) {\n      console.error('ÌååÏùº Îã§Ïö¥Î°úÎìú Ïò§Î•ò:', error);\n      alert('ÌååÏùº Îã§Ïö¥Î°úÎìú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n\n  const handleUploadManagerFile = async (fileType: string) => {\n    const file = selectedPdfFiles[fileType];\n    if (!file) {\n      alert('ÏóÖÎ°úÎìúÌï† PDF ÌååÏùºÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');\n      return;\n    }\n\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n\n      // üîë ÏøºÎ¶¨ ÌååÎùºÎØ∏ÌÑ∞Î°ú Ï†ÑÏÜ°ÌïòÎèÑÎ°ù ÏàòÏ†ï\n      const response = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/attachments?uploadUserID=admin&fileType=manager&managerFileType=${fileType}`, {\n        method: 'POST',\n        body: formData\n      });\n\n      if (response.ok) {\n        alert('PDF ÌååÏùºÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏóÖÎ°úÎìúÎêòÏóàÏäµÎãàÎã§.');\n        \n        // üîë ÌååÏùº Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ® - Îçî ÌôïÏã§ÌïòÍ≤å Ï≤òÎ¶¨\n        console.log('üîÑ ÌååÏùº ÏóÖÎ°úÎìú ÏôÑÎ£å, Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ® ÏãúÏûë');\n        await fetchManagerFiles();\n        await fetchCustomerFiles();\n        \n        // üîë Ï∂îÍ∞ÄÎ°ú Ïû†Ïãú ÌõÑ Ìïú Î≤à Îçî ÏÉàÎ°úÍ≥†Ïπ® (Î∞±ÏóîÎìú Ï≤òÎ¶¨ ÏßÄÏó∞ Í≥†Î†§)\n        setTimeout(async () => {\n          console.log('üîÑ ÏßÄÏó∞ ÏÉàÎ°úÍ≥†Ïπ® Ïã§Ìñâ');\n          await fetchManagerFiles();\n          await fetchCustomerFiles();\n        }, 1000);\n        \n        // üîë ÏóëÏÖÄ ÌååÏùºÎèÑ Ìï®Íªò ÏÉàÎ°úÍ≥†Ïπ® (Î∞±ÏóîÎìú ÍµêÏ≤¥ Î°úÏßÅ Î¨∏Ï†ú Ìï¥Í≤∞)\n        setTimeout(async () => {\n          console.log('üîÑ ÏóëÏÖÄ ÌååÏùº ÏÉàÎ°úÍ≥†Ïπ® Ïã§Ìñâ');\n          await fetchManagerFiles();\n          await fetchCustomerFiles();\n        }, 2000);\n        \n        // ÏÑ†ÌÉùÎêú ÌååÏùº Ï¥àÍ∏∞Ìôî\n        setSelectedPdfFiles(prev => ({\n          ...prev,\n          [fileType]: null\n        }));\n        \n        // ÌååÏùº ÏûÖÎ†• Ï¥àÍ∏∞Ìôî - Ìï¥Îãπ IDÏùò ÏûÖÎ†•Îßå Ï¥àÍ∏∞Ìôî\n        const fileInput = document.getElementById(`pdf-${fileType}`) as HTMLInputElement;\n        if (fileInput) fileInput.value = '';\n      } else {\n        const error = await response.json();\n        alert(`PDF ÏóÖÎ°úÎìú Ïã§Ìå®: ${error.message}`);\n      }\n    } catch (error) {\n      console.error('PDF ÏóÖÎ°úÎìú Ï§ë Ïò§Î•ò:', error);\n      alert('PDF ÏóÖÎ°úÎìú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n\n  // Í≥†Í∞ù Ï≤®Î∂Ä Îã§Ï§ë ÏÑ†ÌÉù\n  const handleCustomerFileSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files ?? []);\n    if (files.length === 0) return;\n    setSelectedCustomerFiles(files);\n    await uploadCustomerFiles(files);\n    if (customerAddInputRef.current) customerAddInputRef.current.value = '';\n  };\n\n  // Í≥†Í∞ù Ï≤®Î∂Ä Îã§Ï§ë ÏóÖÎ°úÎìú (ResultFiles/customerÏóê ÏóÖÎ°úÎìú)\n  const uploadCustomerFiles = async (files: File[]) => {\n    if (files.length === 0) {\n      alert('ÏóÖÎ°úÎìúÌï† ÌååÏùºÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');\n      return;\n    }\n\n    try {\n      for (const file of files) {\n        const formData = new FormData();\n        formData.append('file', file);\n\n        // manager ÏóÖÎ°úÎìú + managerFileType=customer Î°ú ÏóÖÎ°úÎìú ‚Üí ResultFiles/customerÏóê Ï†ÄÏû•ÎêòÎèÑÎ°ù Î∞±ÏóîÎìú Í∑úÏïΩ ÏÇ¨Ïö©\n        const response = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/attachments?uploadUserID=admin&fileType=manager&managerFileType=customer`, {\n          method: 'POST',\n          body: formData,\n        });\n\n        if (!response.ok) {\n          let msg = 'Í≥†Í∞ù ÌååÏùº ÏóÖÎ°úÎìú Ïã§Ìå®';\n          try { const er = await response.json(); msg = er.message || msg; } catch {}\n          console.error(msg);\n        }\n      }\n\n      alert('Í≥†Í∞ù ÌååÏùº ÏóÖÎ°úÎìúÍ∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.');\n      await fetchCustomerFiles();\n      setSelectedCustomerFiles([]);\n    } catch (err) {\n      console.error('Í≥†Í∞ù ÌååÏùº ÏóÖÎ°úÎìú Ï§ë Ïò§Î•ò:', err);\n      alert('Í≥†Í∞ù ÌååÏùº ÏóÖÎ°úÎìú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n\n  const handleUploadCustomerFiles = async () => uploadCustomerFiles(selectedCustomerFiles);\n\n  const handleGenerateDatasheet = async () => {\n    try {\n      // TODO: ÏÇ¨Ïö©ÏûêÍ∞Ä ÎÇòÏ§ëÏóê Ï†úÍ≥µÌï† Datasheet ÏÉùÏÑ± Î°úÏßÅ\n      alert('Datasheet ÏÉùÏÑ± Í∏∞Îä•ÏùÄ Ï§ÄÎπÑ Ï§ëÏûÖÎãàÎã§.');\n    } catch (error) {\n      console.error('Datasheet ÏÉùÏÑ± Ïò§Î•ò:', error);\n      alert('Datasheet ÏÉùÏÑ± Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n\n  // ÏÑúÎ•ò ÏÉùÏÑ± ÌõÑ Îã§Ïö¥Î°úÎìú (ÌîÑÎ°†Ìä∏ÎßåÏúºÎ°ú Ï≤òÎ¶¨)\n  const generateAndDownload = async (type: 'cvlist'|'vllist'|'datasheet'|'singlequote', endpoint: string) => {\n    if (!tempEstimateNo) return;\n    setDocGenerating(prev => ({ ...prev, [type]: true }));\n    try {\n      const resp = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/${endpoint}`, { method: 'POST' });\n      if (!resp.ok) {\n        const er = await resp.json().catch(()=>({}));\n        throw new Error(er.message || 'ÏÉùÏÑ± Ïã§Ìå®');\n      }\n      const pickLatest = (list: any[]) =>\n        list.filter(f => f.managerFileType === type)\n            .sort((a,b) => new Date(b.uploadDate).getTime() - new Date(a.uploadDate).getTime())[0];\n\n      // ÏµúÏ¥à ÏãúÎèÑ\n      let list = await fetchManagerFiles();\n      let target = pickLatest(list);\n\n      // ÏÉùÏÑ± ÏßÅÌõÑ Ïù∏Îç±Ïã± ÏßÄÏó∞ ÎåÄÎπÑ Ìè¥ÎßÅ(ÏµúÎåÄ 5Ìöå, 600ms Í∞ÑÍ≤©)\n      let retries = 5;\n      while (!target && retries-- > 0) {\n        await new Promise(r => setTimeout(r, 600));\n        list = await fetchManagerFiles();\n        target = pickLatest(list);\n      }\n\n      if (!target) throw new Error('ÏÉùÏÑ±Îêú ÌååÏùºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§. ÏÉàÎ°úÍ≥†Ïπ® ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');\n      await downloadFile(target.filePath, target.fileName);\n    } catch (e: any) {\n      alert(e.message || 'ÏÉùÏÑ± Ï§ë Ïò§Î•ò');\n    } finally {\n      setDocGenerating(prev => ({ ...prev, [type]: false }));\n    }\n  };\n  \n  // Í≤¨Ï†Å ÏÑ∏Î∂Ä Ï†ïÎ≥¥ ÎØ∏Îãà Ïπ¥Îìú\n  const EstimateSummaryCard = () => {\n    const totalQty = (valves || []).reduce((sum, v:any) => sum + (Number(v?.qty) || 0), 0);\n    return (\n      <div className=\"step-section-detail estimate-summary-card\">\n        <div className=\"step-header-detail\" style={{ marginBottom: 4 }}>\n          <h3>Í≤¨Ï†Å ÏÑ∏Î∂Ä Ï†ïÎ≥¥</h3>\n        </div>\n        <div className=\"summary-grid\">\n          <div className=\"summary-row\"><span className=\"k\">Í≤¨Ï†ÅÎ≤àÌò∏</span><span className=\"v\">{summaryEstimateNo}</span><span className=\"k\">ÏÉÅÌÉú</span><span className=\"v\">{currentStatus || '-'}</span></div>\n          <div className=\"summary-row\"><span className=\"k\">ÌöåÏÇ¨Î™Ö</span><span className=\"v\">{summaryCompanyName}</span><span className=\"k\">ÏàòÎüâ</span><span className=\"v\">{totalQty || '-'}</span></div>\n          <div className=\"summary-row\"><span className=\"k\">ÏöîÏ≤≠Ïûê</span><span className=\"v\">{summaryRequesterName}</span><span className=\"k\">ÏöîÏ≤≠ÏùºÏûê</span><span className=\"v\">{summaryRequestDate}</span></div>\n          <div className=\"summary-row\"><span className=\"k\">Îã¥ÎãπÏûê</span><span className=\"v\">{summaryManager}</span><span className=\"k\">ÏôÑÎ£åÏùºÏûê</span><span className=\"v\">{summaryCompletedDate}</span></div>\n        </div>\n      </div>\n    );\n  };\n\n  const handleStartQuote = async () => {\n    try {\n      const userStr = localStorage.getItem('user');\n      const currentUser = userStr ? JSON.parse(userStr) : null;\n      const currentUserId = currentUser?.userId;\n      if (!tempEstimateNo || !currentUserId) {\n        alert('Î°úÍ∑∏Ïù∏ Ï†ïÎ≥¥ ÎòêÎäî Í≤¨Ï†ÅÎ≤àÌò∏Í∞Ä ÏóÜÏäµÎãàÎã§.');\n        return;\n      }\n      const res = await assignEstimate(tempEstimateNo, currentUserId);\n      if (res && (res.message || '').includes('ÏôÑÎ£å')) {\n        // ÏÉÅÌÉú ÌÖçÏä§Ìä∏ Í∞±Ïã†\n        setCurrentStatus('Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë');\n        setQuoteStarted(true);\n        // ÏÉÅÏÑ∏ Ï†ïÎ≥¥ Ïû¨Ï°∞ÌöåÎ°ú ÌôîÎ©¥ ÏµúÏã†Ìôî\n        await loadExistingData();\n      } else {\n        alert('Í≤¨Ï†Å ÏãúÏûë Ï≤òÎ¶¨Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n      }\n    } catch (e) {\n      console.error(e);\n      alert('Í≤¨Ï†Å ÏãúÏûë Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n\n  const handleEndQuote = () => {\n    alert('Í≤¨Ï†Å ÎßàÍ∞ê');\n  };\n\n  // Í≤¨Ï†ÅÏôÑÎ£å: CurEstimateNo ÏÉùÏÑ± + ÏÉÅÌÉú Î≥ÄÍ≤Ω\n  const handleCompleteQuote = async () => {\n    if (!tempEstimateNo) return;\n    try {\n      const resp = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/complete`, { method: 'POST' });\n      if (!resp.ok) {\n        const er = await resp.json().catch(()=>({message:'Ï≤òÎ¶¨ Ïã§Ìå®'}));\n        alert(er.message || 'Ï≤òÎ¶¨ Ïã§Ìå®');\n        return;\n      }\n      const data = await resp.json();\n      const curNo = data.curEstimateNo as string;\n      setSummaryEstimateNo(curNo || '-');\n      setSummaryCompletedDate((() => {\n        const m = /YA(\\d{4})(\\d{2})(\\d{2})-(\\d{3})/.exec(curNo || '');\n        return m ? `${m[1]}.${m[2]}.${m[3]}` : '-';\n      })());\n      setCurrentStatus('Í≤¨Ï†ÅÏôÑÎ£å');\n    } catch (e) {\n      alert('Ï≤òÎ¶¨ Ï§ë Ïò§Î•ò');\n    }\n  };\n\n  // ÏôÑÎ£å Ï∑®ÏÜå(ÏßÑÌñâÏ§ëÏúºÎ°ú ÎêòÎèåÎ¶¨Í∏∞)\n  const handleCancelComplete = async () => {\n    if (!tempEstimateNo) return;\n    try {\n      const resp = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/complete/cancel`, { method: 'POST' });\n      if (!resp.ok) throw new Error('ÏôÑÎ£åÏ∑®ÏÜå Ïã§Ìå®');\n      setCurrentStatus('Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë');\n    } catch (e) {\n      alert('ÏôÑÎ£åÏ∑®ÏÜå Ï§ë Ïò§Î•ò');\n    }\n  };\n\n  // Ï£ºÎ¨∏ ÌôïÏ†ï\n  const handleConfirmOrder = async () => {\n    if (!tempEstimateNo) return;\n    try {\n      const resp = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/order/confirm`, { method: 'POST' });\n      if (!resp.ok) throw new Error('Ï£ºÎ¨∏ÌôïÏ†ï Ïã§Ìå®');\n      setCurrentStatus('Ï£ºÎ¨∏');\n    } catch (e) {\n      alert('Ï£ºÎ¨∏ÌôïÏ†ï Ï§ë Ïò§Î•ò');\n    }\n  };\n\n  const handleGenerateFile = async (managerFileType: string) => {\n    try {\n      let apiEndpoint = '';\n      let fileTypeName = '';\n      \n      switch (managerFileType) {\n        case 'cvlist':\n          apiEndpoint = `http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/generate-cv`;\n          fileTypeName = 'CV Î¶¨Ïä§Ìä∏';\n          break;\n        case 'vllist':\n          apiEndpoint = `http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/generate-vl`;\n          fileTypeName = 'VL Î¶¨Ïä§Ìä∏';\n          break;\n        case 'datasheet':\n          apiEndpoint = `http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/generate-datasheet`;\n          fileTypeName = 'DataSheet';\n          break;\n        case 'singlequote':\n          apiEndpoint = `http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/generate-single-quote`;\n          fileTypeName = 'Îã®ÌíàÍ≤¨Ï†ÅÏÑú';\n          break;\n        case 'multiquote':\n          apiEndpoint = `http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/generate-multi-quote`;\n          fileTypeName = 'Îã§ÏàòÎüâÍ≤¨Ï†ÅÏÑú';\n          break;\n        default:\n          alert('ÏßÄÏõêÌïòÏßÄ ÏïäÎäî ÌååÏùº ÌÉÄÏûÖÏûÖÎãàÎã§.');\n          return;\n      }\n      \n      console.log(`${fileTypeName} ÏÉùÏÑ± ÏãúÏûë:`, tempEstimateNo);\n      \n      const response = await fetch(apiEndpoint, {\n        method: 'POST'\n      });\n      \n      if (response.ok) {\n        const result = await response.json();\n        alert(`${fileTypeName}Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§!\\n\\nÏÉùÏÑ±Îêú ÌååÏùº:\\n${result.fileName}`);\n        console.log(`${fileTypeName} ÏÉùÏÑ± ÏÑ±Í≥µ:`, result);\n        \n        // üîë ÌååÏùº ÏÉùÏÑ± ÏôÑÎ£å ÌõÑ ÏûêÎèô ÏÉàÎ°úÍ≥†Ïπ® Ï∂îÍ∞Ä\n        await fetchManagerFiles();\n        await fetchCustomerFiles();\n        \n        // Í∏∞Ï°¥ Ï≤®Î∂ÄÌååÏùº Î™©Î°ùÎèÑ ÏÉàÎ°úÍ≥†Ïπ®\n        loadExistingData();\n      } else {\n        const error = await response.json();\n        alert(`${fileTypeName} ÏÉùÏÑ± Ïã§Ìå®: ${error.message}`);\n        console.error(`${fileTypeName} ÏÉùÏÑ± Ïã§Ìå®:`, error);\n      }\n    } catch (error) {\n      console.error('ÌååÏùº ÏÉùÏÑ± Ïò§Î•ò:', error);\n      alert('ÌååÏùº ÏÉùÏÑ± Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n  // ÏÑ†ÌÉùÍ∞íÏù¥ Î∞îÎÄî ÎïåÎßàÎã§ ÌòÑÏû¨ ÌÉúÍ∑∏(sheetID)Î°ú ÏûÑÏãú Ï†ÄÏû•\nuseEffect(() => {\n  if (!selectedValve) return;\n  setTempSelections(prev => ({\n    ...prev,\n    [selectedValve.sheetID]: {\n      body: { ...bodySelections },\n      trim: { ...trimSelections },\n      act:  { ...actSelections },\n      acc:  { ...accSelections },\n    }\n  }));\n}, [selectedValve?.sheetID, bodySelections, trimSelections, actSelections, accSelections]);\n\n  useEffect(() => {\n    if (!selectedValve) return;\n    const dto = {\n      valveId: selectedValve?.body?.typeCode || '',\n      body: {\n        bonnetType: bodySelections.bonnetType || '',\n        materialBody: bodySelections.materialBody || '',\n        rating: bodySelections.ratingCode || '',\n        ratingUnit: bodySelections.ratingUnitCode || '',\n        connection: bodySelections.connection || '',\n        sizeUnit: bodySelections.sizeBodyUnitCode || '',\n        size: bodySelections.sizeBodyCode || ''\n      },\n      trim: {\n        type: trimSelections.trimType || '',\n        series: trimSelections.trimSeries || '',\n        portSize: trimSelections.sizePortCode || '',\n        portSizeUnit: trimSelections.sizePortUnitCode || '',\n        form: trimSelections.form || '',\n        materialTrim: trimSelections.materialTrim || '',\n        option: trimSelections.option || ''\n      },\n      actuator: {\n        type: actSelections.actionType || '',\n        series: actSelections.series || '',\n        size: actSelections.size || '',\n        hw: actSelections.hw || ''\n      },\n      accessories: {\n        PosCode: accSelections.positioner?.modelCode || null,\n        PosMakerCode: accSelections.positioner?.makerCode || null,\n        SolCode: accSelections.solenoid?.modelCode || null,\n        SolMakerCode: accSelections.solenoid?.makerCode || null,\n        LimCode: accSelections.limiter?.modelCode || null,\n        LimMakerCode: accSelections.limiter?.makerCode || null,\n        ASCode: accSelections.airSupply?.modelCode || null,\n        ASMakerCode: accSelections.airSupply?.makerCode || null,\n        VolCode: accSelections.volumeBooster?.modelCode || null,\n        VolMakerCode: accSelections.volumeBooster?.makerCode || null,\n        AirOpCode: accSelections.airOperator?.modelCode || null,\n        AirOpMakerCode: accSelections.airOperator?.makerCode || null,\n        LockupCode: accSelections.lockUp?.modelCode || null,\n        LockupMakerCode: accSelections.lockUp?.makerCode || null,\n        SnapActCode: accSelections.snapActingRelay?.modelCode || null,\n        SnapActMakerCode: accSelections.snapActingRelay?.makerCode || null,\n      }\n    };\n    setSpecBySheetId(prev => ({ ...prev, [selectedValve.sheetID]: dto }));\n  }, [selectedValve?.sheetID, bodySelections, trimSelections, actSelections, accSelections]);\n\n  const handleDeleteManagerFile = async (file: any) => {\n    try {\n      if (window.confirm('Ï†ïÎßêÎ°ú Ïù¥ ÌååÏùºÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {\n        const response = await fetch(`/api/estimate/attachments/${file.attachmentID}`, {\n          method: 'DELETE'\n        });\n        \n        if (response.ok) {\n          alert('ÌååÏùºÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.');\n          loadExistingData(); // Ï≤®Î∂ÄÌååÏùº Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ®\n        } else {\n          alert('ÌååÏùº ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n        }\n      }\n    } catch (error) {\n      console.error('ÌååÏùº ÏÇ≠Ï†ú Ïò§Î•ò:', error);\n      alert('ÌååÏùº ÏÇ≠Ï†ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n\n  // ÏÇ¨Ïñë Ï†ÄÏû• Ìï®Ïàò\n  // ÌÉúÍ∑∏Î≥Ñ ÏÑúÎ°ú Îã§Î•∏ ÏûÖÎ†•ÏùÑ ÏàòÏßëÌïòÍ∏∞ ÏúÑÌïú ÏÉÅÌÉú\n  const [specBySheetId, setSpecBySheetId] = useState<Record<number, any>>({});\n\n  // selectedValve, bodySelections, trimSelections, actSelections, accSelections Î≥ÄÍ≤Ω Ïãú Ï†ÄÏû•\nuseEffect(() => {\n  if (!selectedValve) return;\n  const dto = buildSaveSpecFromSelections({\n    body: bodySelections,\n    trim: trimSelections,\n    act: actSelections,\n    acc: accSelections,\n    valveTypeCode: selectedValve?.body?.typeCode || ''\n  });\n  setSpecBySheetId(prev => ({ ...prev, [selectedValve.sheetID]: dto }));\n}, [selectedValve?.sheetID, bodySelections, trimSelections, actSelections, accSelections]);\n\nconst handleSaveValveOrder = async () => {\n  const sheetIDs = valves.map(v => v.sheetID);           // ÌòÑÏû¨ ÌôîÎ©¥ ÏàúÏÑúÎåÄÎ°ú\n  const resp = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/requests/order`, {\n    method: 'PUT',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(sheetIDs)\n  });\n  if (resp.ok) {\n    // Î°úÏª¨ Î≥¥Í∏∞Ïö© sheetNo Ïã±ÌÅ¨\n    setValves(prev => prev.map((v, i) => ({ ...v, sheetNo: i + 1 })));\n    alert('ÏàúÏÑúÍ∞Ä Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.');\n  } else {\n    alert('ÏàúÏÑú Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n  }\n};\n\n// ÏàúÏÑú Ï†ÄÏû•: ÌôîÎ©¥Ïùò valves ÏàúÏÑúÎ•º SheetNoÎ°ú Î∞òÏòÅ\nconst saveValveOrder = async () => {\n  if (!tempEstimateNo) return;\n  const sheetIDs = valves.map(v => v.sheetID); // Ï†ÑÏ≤¥ Î™©Î°ùÏùò ÌòÑÏû¨ ÏàúÏÑú\n  await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/requests/order`, {\n    method: 'PUT',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(sheetIDs),\n  });\n};\nconst handleSaveSpecification = useCallback(async () => {\n  try {\n    // 0) ÏàúÏÑú Î®ºÏ†Ä Ï†ÄÏû• ‚Üí SheetNo DB Î∞òÏòÅ\n    await saveValveOrder();\n\n    // 1) ÏùºÍ¥Ñ Ï†ÄÏû• ÎåÄÏÉÅ Í≤∞Ï†ï(Ï†ÑÏ≤¥)\n    const template = buildSaveSpecFromSelections({\n      body: bodySelections, trim: trimSelections, act: actSelections, acc: accSelections,\n      valveTypeCode: selectedValve?.body?.typeCode || ''\n    });\n    const items = valves.map(v => ({\n      sheetID: v.sheetID,\n      specification: specBySheetId[v.sheetID]\n        ?? (tempSelections[v.sheetID]\n            ? buildSaveSpecFromSelections({\n                body: tempSelections[v.sheetID].body,\n                trim: tempSelections[v.sheetID].trim,\n                act:  tempSelections[v.sheetID].act,\n                acc:  tempSelections[v.sheetID].acc\n              })\n            : template)\n    }));\n\n    // 2) ÏùºÍ¥Ñ ÏÇ¨Ïñë Ï†ÄÏû•\n    const resp = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/specification/bulk`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ items })\n    });\n\n    if (resp.ok) alert('Î™®Îì† ÌÉúÍ∑∏Ïóê ÏÇ¨ÏñëÏù¥ ÏùºÍ¥Ñ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.');\n    else alert('ÏÇ¨Ïñë ÏùºÍ¥Ñ Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n  } catch (e) {\n    console.error(e);\n    alert('ÏÇ¨Ïñë ÏùºÍ¥Ñ Ï†ÄÏû• Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n  }\n  // ÏùòÏ°¥ÏÑ±: valves, specBySheetId, tempSelections, bodySelections, trimSelections, actSelections, accSelections, selectedValve, tempEstimateNo\n}, [valves, specBySheetId, tempSelections, bodySelections, trimSelections, actSelections, accSelections, selectedValve, tempEstimateNo]);\n\n  const AccessorySelector: React.FC<AccessorySelectorProps> = ({\n    accTypeKey,\n    accSelections,\n    setAccSelections,\n    accMakerList,\n    accModelList,\n  }) => {\n    const [makerSearchTerm, setMakerSearchTerm] = useState('');\n    const [modelSearchTerm, setModelSearchTerm] = useState('');\n    const [specSearchTerm, setSpecSearchTerm] = useState('');\n    const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n    const [isSelected, setIsSelected] = useState(false); // ÏÑ†ÌÉù Ïó¨Î∂Ä ÏÉÅÌÉú Ï∂îÍ∞Ä\n    const dropdownRef = useRef<HTMLDivElement>(null);\n\n    const currentAcc = accSelections[accTypeKey];\n    const typeCode = currentAcc?.typeCode;\n\n    // Ïª¥Ìè¨ÎÑåÌä∏ ÎßàÏö¥Ìä∏ Ïãú ÎîîÎ≤ÑÍπÖ Î°úÍ∑∏\n    useEffect(() => {\n      console.log(`üîç AccessorySelector ${accTypeKey} ÎßàÏö¥Ìä∏:`, {\n        accTypeKey,\n        typeCode,\n        currentAcc,\n        accMakerListLength: accMakerList.length,\n        accModelListLength: accModelList.length\n      });\n      \n      // accMakerListÏôÄ accModelListÏùò ÎÇ¥Ïö© ÌôïÏù∏\n      console.log(`üîç ${accTypeKey} - accMakerList ÎÇ¥Ïö©:`, accMakerList);\n      console.log(`üîç ${accTypeKey} - accModelList ÎÇ¥Ïö© (ÌÉÄÏûÖÎ≥Ñ ÌïÑÌÑ∞ÎßÅ):`, \n        accModelList.filter(item => item.accTypeCode === typeCode)\n      );\n    }, [accTypeKey, typeCode, currentAcc, accMakerList.length, accModelList.length, accMakerList, accModelList]);\n\n    // Ïª¥Ìè¨ÎÑåÌä∏ ÎßàÏö¥Ìä∏ Ïãú ÎòêÎäî accSelections Î≥ÄÍ≤Ω Ïãú ÏûÖÎ†• ÌïÑÎìú Ï¥àÍ∏∞Ìôî Î∞è ÏÑ†ÌÉù ÏÉÅÌÉú ÏÑ§Ï†ï\n    useEffect(() => {\n      if (currentAcc?.modelCode) {\n        const selectedMakerName = accMakerList.find(maker => \n          maker.accMakerCode === currentAcc?.makerCode && maker.accTypeCode === typeCode\n        )?.accMakerName || '';\n        const selectedModelName = accModelList.find(model => \n          model.accModelCode === currentAcc?.modelCode && model.accTypeCode === typeCode\n        )?.accModelName || '';\n        setMakerSearchTerm(selectedMakerName);\n        setModelSearchTerm(selectedModelName);\n        setSpecSearchTerm(currentAcc.specification || '');\n        setIsSelected(true); // Î™®Îç∏Ïù¥ Ïù¥ÎØ∏ ÏÑ†ÌÉùÎêòÏñ¥ ÏûàÏúºÎ©¥ isSelectedÎ•º trueÎ°ú\n      } else {\n        setMakerSearchTerm('');\n        setModelSearchTerm('');\n        setSpecSearchTerm('');\n        setIsSelected(false); // Î™®Îç∏Ïù¥ ÏóÜÏúºÎ©¥ isSelectedÎ•º falseÎ°ú\n      }\n    }, [currentAcc, accMakerList, accModelList, typeCode]);\n\n\n\n    // ÌÜµÌï© Í≤ÄÏÉâ ÌïÑÌÑ∞ÎßÅ Î°úÏßÅ\n    const filteredModels = useMemo(() => {\n      const allSearchTerms = [\n        makerSearchTerm,\n        modelSearchTerm,\n        specSearchTerm\n      ].filter(term => term);\n\n      console.log('üîç AccessorySelector ÎîîÎ≤ÑÍπÖ:');\n      console.log('  - accTypeKey:', accTypeKey);\n      console.log('  - typeCode:', typeCode);\n      console.log('  - accModelList Í∏∏Ïù¥:', accModelList.length);\n      console.log('  - accMakerList Í∏∏Ïù¥:', accMakerList.length);\n\n      if (allSearchTerms.length === 0) {\n        // Í≤ÄÏÉâÏñ¥Í∞Ä ÏóÜÏúºÎ©¥ Ìï¥Îãπ ÌÉÄÏûÖ ÏΩîÎìúÏôÄ ÏùºÏπòÌïòÎäî Ï†ÑÏ≤¥ Î™®Îç∏ Î∞òÌôò\n        const filtered = accModelList.filter(item => item.accTypeCode === typeCode);\n        console.log('  - ÌïÑÌÑ∞ÎßÅÎêú Î™®Îç∏ Ïàò (Í≤ÄÏÉâÏñ¥ ÏóÜÏùå):', filtered.length);\n        console.log('  - ÌïÑÌÑ∞ÎßÅÎêú Î™®Îç∏Îì§:', filtered);\n        return filtered;\n      }\n\n      const lowerCaseSearchWords = allSearchTerms.map(term => term.toLowerCase().split(' ').filter(word => word)).flat();\n\n      const filtered = accModelList.filter(item => {\n        if (!typeCode || item.accTypeCode !== typeCode) {\n          return false;\n        }\n\n        const makerName = (accMakerList.find(maker => maker.accMakerCode === item.accMakerCode && maker.accTypeCode === item.accTypeCode)?.accMakerName || '').toLowerCase();\n        const modelName = (item.accModelName || '').toLowerCase();\n        const specification = (item.accSize || '').toLowerCase();\n\n        // Î™®Îì† Í≤ÄÏÉâ Îã®Ïñ¥Î•º Î™®Îì† ÌïÑÎìúÏóêÏÑú AND Í≤ÄÏÉâ\n        return lowerCaseSearchWords.every(word =>\n          makerName.includes(word) || modelName.includes(word) || specification.includes(word)\n        );\n      });\n\n      console.log('  - ÌïÑÌÑ∞ÎßÅÎêú Î™®Îç∏ Ïàò (Í≤ÄÏÉâÏñ¥ ÏûàÏùå):', filtered.length);\n      console.log('  - ÌïÑÌÑ∞ÎßÅÎêú Î™®Îç∏Îì§:', filtered);\n      return filtered;\n    }, [makerSearchTerm, modelSearchTerm, specSearchTerm, accModelList, accMakerList, typeCode]);\n\n    // ÏïÖÏÑ∏ÏÇ¨Î¶¨ ÏÑ†ÌÉù Ìï∏Îì§Îü¨\n    const handleSelectAccessory = (selectedModel: any) => {\n      setAccSelections(prev => ({\n        ...prev,\n        [accTypeKey]: {\n          typeCode: selectedModel.accTypeCode,\n          makerCode: selectedModel.accMakerCode,\n          modelCode: selectedModel.accModelCode,\n          specification: selectedModel.accSize || '',\n        },\n      }));\n      // ÏÑ†ÌÉù Ïãú ÏÑ∏ ÏûÖÎ†• ÌïÑÎìúÎ•º ÏÑ†ÌÉùÎêú Í∞íÏúºÎ°ú Ï±ÑÏö∞Í∏∞\n      const selectedMakerName = accMakerList.find(maker => \n        maker.accMakerCode === selectedModel.accMakerCode && maker.accTypeCode === selectedModel.accTypeCode\n      )?.accMakerName || '';\n      setMakerSearchTerm(selectedMakerName);\n      setModelSearchTerm(selectedModel.accModelName || '');\n      setSpecSearchTerm(selectedModel.accSize || '');\n      setIsDropdownOpen(false);\n      setIsSelected(true); // ÏÑ†ÌÉù ÏôÑÎ£å Ïãú isSelectedÎ•º trueÎ°ú\n    };\n\n    // ÏÑ†ÌÉù Ìï¥Ï†ú Ìï∏Îì§Îü¨\n    const handleReset = () => {\n      setAccSelections(prev => ({\n        ...prev,\n        [accTypeKey]: {\n          typeCode: typeCode || '', // Í∏∞Ï°¥ typeCode Ïú†ÏßÄ\n          makerCode: '',\n          modelCode: '',\n          specification: '',\n        },\n      }));\n      setMakerSearchTerm('');\n      setModelSearchTerm('');\n      setSpecSearchTerm('');\n      setIsSelected(false); // ÏÑ†ÌÉù Ìï¥Ï†ú Ïãú isSelectedÎ•º falseÎ°ú\n      setIsDropdownOpen(false); // ÎìúÎ°≠Îã§Ïö¥ Îã´Í∏∞\n    };\n\n    // Ïô∏Î∂Ä ÌÅ¥Î¶≠ Í∞êÏßÄ (ÎìúÎ°≠Îã§Ïö¥ Îã´Í∏∞)\n    useEffect(() => {\n      const handleClickOutside = (event: MouseEvent) => {\n        if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n          setIsDropdownOpen(false);\n        }\n      };\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => {\n        document.removeEventListener('mousedown', handleClickOutside);\n      };\n    }, []);\n\n\n    return (\n      <div className=\"accessory-selector\" ref={dropdownRef}>\n        <div className=\"input-group-detail\">\n          <input\n            type=\"text\"\n            placeholder=\"Î©îÏù¥Ïª§\"\n            value={makerSearchTerm}\n            onChange={(e) => {if (!isSelected) {setMakerSearchTerm(e.target.value); setIsDropdownOpen(true);}}}\n            onFocus={() => {if (!isSelected) setIsDropdownOpen(true);}}\n            readOnly={isSelected || isReadOnly} // isReadOnly ÏÉÅÌÉúÏóê Îî∞Îùº ÏùΩÍ∏∞ Ï†ÑÏö©\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Î™®Îç∏Î™Ö\"\n            value={modelSearchTerm}\n            onChange={(e) => {if (!isSelected) {setModelSearchTerm(e.target.value); setIsDropdownOpen(true);}}}\n            onFocus={() => {if (!isSelected) setIsDropdownOpen(true);}}\n            readOnly={isSelected || isReadOnly}\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Í∑úÍ≤©\"\n            value={specSearchTerm}\n            onChange={(e) => {if (!isSelected) {setSpecSearchTerm(e.target.value); setIsDropdownOpen(true);}}}\n            onFocus={() => {if (!isSelected) setIsDropdownOpen(true);}}\n            readOnly={isSelected || isReadOnly}\n          />\n          {isSelected && (\n            <button type=\"button\" onClick={handleReset} className=\"reset-button\" disabled={isReadOnly}>Ï¥àÍ∏∞Ìôî</button>\n          )}\n        </div>\n        {isDropdownOpen && (\n          <ul className=\"dropdown-list\">\n            {filteredModels.length > 0 ? (\n              filteredModels.map((item: any) => (\n                <li\n                  key={`${item.accTypeCode}-${item.accMakerCode}-${item.accModelCode}`}\n                  onClick={() => {if (!isReadOnly) handleSelectAccessory(item);}} // isReadOnlyÏùº Îïå ÌÅ¥Î¶≠ Î∂àÍ∞Ä\n                >\n                  <span className=\"dropdown-maker\">{accMakerList.find(maker => maker.accMakerCode === item.accMakerCode)?.accMakerName || ''}</span>\n                  <span className=\"dropdown-model\">{item.accModelName}</span>\n                  <span className=\"dropdown-spec\">{item.accSize || ''}</span>\n                </li>\n              ))\n            ) : ( \n              <li>Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§.</li>\n            )}\n          </ul>\n        )}\n      </div>\n    );\n  };\n  // Ï¥àÍ∏∞Ìôî\n  useEffect(() => {\n    console.log('EstimateDetailPage Ï¥àÍ∏∞Ìôî ÏãúÏûë');\n    fetchBodyValveList();\n    fetchMasterData();\n  }, []); // ÏùòÏ°¥ÏÑ± Î∞∞Ïó¥ ÎπÑÏõÄ - Ï¥àÍ∏∞ Î°úÎìúÎßå ÌïÑÏöî\n\n  // bodyValveListÏôÄ bodyRatingListÍ∞Ä Î°úÎìúÎêú ÌõÑ Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞ Î°úÎìú\n  useEffect(() => {\n    console.log('useEffect Ïã§Ìñâ:', { \n      bodyValveListLength: bodyValveList.length, \n      bodyRatingListLength: bodyRatingList.length, \n      tempEstimateNo \n    });\n    if (bodyValveList.length > 0 && bodyRatingList.length > 0 && tempEstimateNo) {\n      console.log('loadExistingData Ìò∏Ï∂ú ÏãúÏûë');\n      loadExistingData();\n    }\n  }, [bodyValveList.length, bodyRatingList.length, tempEstimateNo]); // loadExistingData ÏùòÏ°¥ÏÑ± Ï†úÍ±∞\n\n  // bodyValveListÍ∞Ä Î°úÎìúÎêú ÌõÑ ÌÉÄÏûÖ Ïù¥Î¶ÑÏùÑ ÏΩîÎìú‚ÜíÏãúÎ¶¨Ï¶àÎ™ÖÏúºÎ°ú ÎèôÍ∏∞Ìôî\n  useEffect(() => {\n    if (bodyValveList.length > 0) {\n      setTypes(prevTypes => {\n        let changed = false;\n        const next = prevTypes.map(type => {\n          const key = (type as any).code ?? (type as any).id;\n          const valveInfo = bodyValveList.find((v: any) => v.valveSeriesCode === key);\n          const newName = valveInfo ? valveInfo.valveSeries : type.name;\n          if (newName !== type.name) {\n            changed = true;\n            return { ...type, name: newName } as any;\n          }\n          return type;\n        });\n        return changed ? next : prevTypes;\n      });\n    }\n  }, [bodyValveList]);\n\n  // selectedValveÍ∞Ä Î≥ÄÍ≤ΩÎê† ÎïåÎßàÎã§ Í∏∞Ï°¥ ÏÇ¨Ïñë Îç∞Ïù¥ÌÑ∞ Î°úÎìú\n  useEffect(() => {\n    if (selectedValve) {\n      // Ï¥àÍ∏∞ Î°úÎìúÎßå ÌïÑÏöîÌïòÎØÄÎ°ú Ïó¨Í∏∞ÏÑúÎäî ÏïÑÎ¨¥Í≤ÉÎèÑ ÌïòÏßÄ ÏïäÏùå\n      // handleValveSelectionÏóêÏÑú Ï≤òÎ¶¨Îê®\n    }\n  }, [selectedValve]);\n\n  // selectedTypeÏù¥ Î≥ÄÍ≤ΩÎêòÎ©¥ selectedValveÎ•º Ï¥àÍ∏∞ÌôîÌïòÏó¨ Step 3Î•º Ïà®ÍπÄ\n  useEffect(() => {\n      setSelectedValve(null);\n  }, [selectedType]);\n\n  // Ï¥àÍ∏∞ ÏÇ¨Ïñë Îç∞Ïù¥ÌÑ∞ Î°úÎìú (DBÏóêÏÑú Î∂àÎü¨Ïò§Í∏∞)\n  const loadInitialSpecification = async (sheetID: number) => {\n    // Ïù¥ÎØ∏ ÏûÑÏãú Ï†ÄÏû•Îêú Í∞íÏù¥ ÏûàÏúºÎ©¥ ÏÑúÎ≤ÑÍ∞íÏúºÎ°ú ÎçÆÏñ¥Ïì∞ÏßÄ ÏïäÏùå\n  if (tempSelections[sheetID]) {\n    const saved = tempSelections[sheetID];\n    setBodySelections(saved.body || {});\n    setTrimSelections(saved.trim || {});\n    setActSelections(saved.act || {});\n    setAccSelections(saved.acc || {});\n    return;\n  }\n    \n    try {\n      if (!tempEstimateNo) {\n        console.error(\"tempEstimateNoÍ∞Ä ÏóÜÏäµÎãàÎã§.\");\n        return;\n      }\n      const response = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/specification/${sheetID}`);\n      if (response.ok) {\n        const specificationData = await response.json();\n        console.log('--- Ïã§Ï†ú Accessories Îç∞Ïù¥ÌÑ∞ Íµ¨Ï°∞ ---', specificationData.accessories);\n        \n        if (specificationData.accessories) {\n          console.log('Í∞úÎ≥Ñ ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ (Positioner):', specificationData.accessories.positioner);\n          console.log('Í∞úÎ≥Ñ ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ (Solenoid):', specificationData.accessories.solenoid);\n          console.log('Í∞úÎ≥Ñ ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ (AirOperator):', specificationData.accessories.airOperator);\n          console.log('Í∞úÎ≥Ñ ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ (LockUp):', specificationData.accessories.lockUp);\n        }\n        \n        // Body ÏÇ¨Ïñë Îç∞Ïù¥ÌÑ∞ ÏÑ§Ï†ï (Ï¥àÍ∏∞Í∞íÎßå) - null Ï≤òÎ¶¨ Í∞úÏÑ†\n        if (specificationData.body) {\n          console.log('Body Îç∞Ïù¥ÌÑ∞:', specificationData.body); // Body Îç∞Ïù¥ÌÑ∞ Î°úÍ∑∏ Ï∂îÍ∞Ä\n          setBodySelections(prev => ({\n            ...prev,\n            bonnetType: specificationData.body.bonnetTypeCode || '',\n            bonnetTypeCode: specificationData.body.bonnetTypeCode || '',\n            materialBody: specificationData.body.materialBodyCode || '',\n            materialBodyCode: specificationData.body.materialBodyCode || '',\n            sizeBodyUnit: specificationData.body.sizeUnit || '',\n            sizeBody: specificationData.body.sizeCode || '',\n            sizeBodyUnitCode: specificationData.body.sizeUnit || '', // Code Í∞í Ï∂îÍ∞Ä\n            sizeBodyCode: specificationData.body.sizeCode || '', // Code Í∞í Ï∂îÍ∞Ä\n            ratingUnit: (() => {\n              if (specificationData.body.ratingUnit && bodyRatingList.length > 0) {\n                const ratingItem = bodyRatingList.find(item => item.ratingUnitCode === specificationData.body.ratingUnit);\n                return ratingItem ? ratingItem.ratingUnit : '';\n              }\n              return '';\n            })(), // ratingUnitCodeÏóê Ìï¥ÎãπÌïòÎäî ratingUnit Ïù¥Î¶Ñ Ï∞æÍ∏∞\n            rating: specificationData.body.ratingCode || '',\n            ratingUnitCode: (() => {\n              if (specificationData.body.ratingUnit && bodyRatingList.length > 0) {\n                const ratingItem = bodyRatingList.find(item => item.ratingUnitCode === specificationData.body.ratingUnit);\n                return ratingItem ? ratingItem.ratingUnitCode : '';\n              }\n              return '';\n            })(), // ratingUnitCodeÏóê Ìï¥ÎãπÌïòÎäî ratingUnitCode Ï∞æÍ∏∞\n            ratingCode: specificationData.body.ratingCode || '', // Code Í∞í Ï∂îÍ∞Ä\n            connection: specificationData.body.connectionCode || '',\n            connectionCode: specificationData.body.connectionCode || ''\n          }));\n        }\n        \n        // Trim ÏÇ¨Ïñë Îç∞Ïù¥ÌÑ∞ ÏÑ§Ï†ï (Ï¥àÍ∏∞Í∞íÎßå) - null Ï≤òÎ¶¨ Í∞úÏÑ†\n        if (specificationData.trim) {\n          console.log('Trim Îç∞Ïù¥ÌÑ∞:', specificationData.trim); // Trim Îç∞Ïù¥ÌÑ∞ Î°úÍ∑∏ Ï∂îÍ∞Ä\n          setTrimSelections(prev => ({\n            ...prev,\n            trimType: specificationData.trim.typeCode || '',\n            trimTypeCode: specificationData.trim.typeCode || '',\n            trimSeries: specificationData.trim.seriesCode || '',\n            trimSeriesCode: specificationData.trim.seriesCode || '',\n            materialTrim: specificationData.body?.materialTrimCode || '',\n            materialTrimCode: specificationData.body?.materialTrimCode || '',\n            sizePortUnit: specificationData.trim.portSizeUnit || '',\n            sizePort: specificationData.trim.portSizeCode || '',\n            sizePortUnitCode: specificationData.trim.portSizeUnit || '', // Code Í∞í Ï∂îÍ∞Ä\n            sizePortCode: specificationData.trim.portSizeCode || '', // Code Í∞í Ï∂îÍ∞Ä\n            form: specificationData.trim.formCode || '',\n            formCode: specificationData.trim.formCode || '',\n            option: specificationData.body?.optionCode || '' // BodyÏóêÏÑú Option Í∞íÏùÑ Í∞ÄÏ†∏Ïò¥\n          }));\n        }\n        \n        // Actuator ÏÇ¨Ïñë Îç∞Ïù¥ÌÑ∞ ÏÑ§Ï†ï (Ï¥àÍ∏∞Í∞íÎßå) - null Ï≤òÎ¶¨ Í∞úÏÑ†\n        if (specificationData.actuator) {\n          console.log('Actuator Îç∞Ïù¥ÌÑ∞:', specificationData.actuator); // Actuator Îç∞Ïù¥ÌÑ∞ Î°úÍ∑∏ Ï∂îÍ∞Ä\n          const seriesCode = specificationData.actuator.seriesCode || '';\n          setActSelections(prev => ({\n            ...prev,\n            actionType: specificationData.actuator.typeCode || '',\n            actionTypeCode: specificationData.actuator.typeCode || '',\n            series: seriesCode,\n            seriesCode: seriesCode,\n            size: specificationData.actuator.sizeCode || '',\n            sizeCode: specificationData.actuator.sizeCode || '',\n            hw: specificationData.actuator.hwCode || '',\n            hwCode: specificationData.actuator.hwCode || ''\n          }));\n\n          // Series ÏΩîÎìúÍ∞Ä ÏûàÏúºÎ©¥ Ìï¥Îãπ Size Î™©Î°ùÏùÑ Í∞ÄÏ†∏Ïò¥\n          if (seriesCode) {\n            fetchActSizeList(seriesCode);\n          }\n        }\n        \n        // Accessory ÏÇ¨Ïñë Îç∞Ïù¥ÌÑ∞ ÏÑ§Ï†ï - Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÏúºÎ©¥ Î°úÎìú, ÏóÜÏúºÎ©¥ fetchMasterDataÏóêÏÑú Ï¥àÍ∏∞ÌôîÎê®\n        if (specificationData.accessories) {\n          const newAccSelections = {\n            positioner: { typeCode: 'Positioner', makerCode: '', modelCode: '', specification: '' },\n            solenoid: { typeCode: 'Solenoid', makerCode: '', modelCode: '', specification: '' },\n            limiter: { typeCode: 'Limit', makerCode: '', modelCode: '', specification: '' },\n            airSupply: { typeCode: 'Airset', makerCode: '', modelCode: '', specification: '' },\n            volumeBooster: { typeCode: 'Volume', makerCode: '', modelCode: '', specification: '' },\n            airOperator: { typeCode: 'Airoperate', makerCode: '', modelCode: '', specification: '' },\n            lockUp: { typeCode: 'Lockup', makerCode: '', modelCode: '', specification: '' },\n            snapActingRelay: { typeCode: 'Snapacting', makerCode: '', modelCode: '', specification: '' },\n          };\n\n          const accKeys: Array<keyof typeof specificationData.accessories> = [\n            'positioner', 'solenoid', 'limiter', 'airSupply',\n            'volumeBooster', 'airOperator', 'lockUp', 'snapActingRelay',\n          ];\n\n          accKeys.forEach(key => {\n            const accObj = specificationData.accessories[key];\n            console.log(`Î°úÎî©Îê† ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ (${String(key)}):`, accObj);\n            // 1. Îç∞Ïù¥ÌÑ∞ Í∞úÏàò ÌôïÏù∏\nconsole.log('accModelList Í∏∏Ïù¥:', accModelList.length);\nconsole.log('accMakerList Í∏∏Ïù¥:', accMakerList.length);\n\n// 2. Positioner Îç∞Ïù¥ÌÑ∞ ÌôïÏù∏\nconsole.log('Positioner Î™®Îç∏Îì§:', accModelList.filter(item => item.accTypeCode === 'Positioner'));\nconsole.log('Positioner Î©îÏù¥Ïª§Îì§:', accMakerList.filter(item => item.accTypeCode === 'Positioner'));\n\n// 3. Îç∞Ïù¥ÌÑ∞ Íµ¨Ï°∞ ÌôïÏù∏\nconsole.log('Ï≤´ Î≤àÏß∏ Î™®Îç∏:', accModelList[0]);\nconsole.log('Ï≤´ Î≤àÏß∏ Î©îÏù¥Ïª§:', accMakerList[0]);\n            if (accObj && accObj.makerCode && accObj.modelCode) {\n              // Ïã§Ï†ú Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÎäî Í≤ΩÏö∞ÏóêÎßå ÏÑ§Ï†ï\n              newAccSelections[key as keyof typeof newAccSelections] = {\n                typeCode: accObj.typeCode || newAccSelections[key as keyof typeof newAccSelections].typeCode,\n                makerCode: accObj.makerCode || '',\n                modelCode: accObj.modelCode || '',\n                specification: accObj.specification || '',\n              };\n              console.log(`ÏÉàÎ°úÏö¥ AccSelections (${String(key)}) Îç∞Ïù¥ÌÑ∞ ÏÑ§Ï†ïÎê®:`, newAccSelections[key as keyof typeof newAccSelections]);\n            }\n            // Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏúºÎ©¥ Í∏∞Î≥∏Í∞í Ïú†ÏßÄ (fetchMasterDataÏóêÏÑú ÏÑ§Ï†ïÎê®)\n          });\n          console.log('ÏµúÏ¢Ö ÏóÖÎç∞Ïù¥Ìä∏Îê† AccSelections:', newAccSelections);\n          setAccSelections(newAccSelections);\n        }\n        // Ïï°ÏÑ∏ÏÑúÎ¶¨ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÎäî Í≤ΩÏö∞ fetchMasterDataÏóêÏÑú Ï¥àÍ∏∞ÌôîÎê®\n      } else {\n        console.log('API ÏùëÎãµ Ïã§Ìå®:', response.status, response.statusText);\n      }\n    } catch (error) {\n      console.log('Ï¥àÍ∏∞ ÏÇ¨Ïñë Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïã§Ìå®:', error);\n    }\n  };\n  const saveOrder = async () => {\n  const sheetIDs = valves.map(v => v.sheetID);\n  const resp = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/requests/order`, {\n    method: 'PUT',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(sheetIDs)\n  });\n  if (resp.ok) {\n    alert('ÏàúÏÑúÍ∞Ä Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.');\n  } else {\n    alert('ÏàúÏÑú Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n  }\n};\n\nconst handleDragStart = (e: React.DragEvent<HTMLDivElement>, index: number) => {\n  e.dataTransfer.setData('text/plain', String(index));\n};\nconst handleDragOver = (e: React.DragEvent<HTMLDivElement>) => { e.preventDefault(); };\nconst handleDrop = (e: React.DragEvent<HTMLDivElement>, dropIndex: number) => {\n  e.preventDefault();\n  const dragIndex = Number(e.dataTransfer.getData('text/plain'));\n  if (Number.isNaN(dragIndex)) return;\n  setValves(prev => {\n    const arr = [...prev];\n    const [moved] = arr.splice(dragIndex, 1);\n    arr.splice(dropIndex, 0, moved);\n    return arr.map((it, i) => ({ ...it, sheetNo: i + 1 }));\n  });\n};\n\n  // TagNo Î≥ÄÍ≤Ω Ïãú ÏûÑÏãú Ï†ÄÏû•Îêú ÏÑ†ÌÉùÍ∞í Î≥µÏõê\n  const restoreTempSelections = (sheetID: number) => {\n    const tempData = tempSelections[sheetID];\n    if (tempData) {\n      console.log(`${sheetID}Ïùò ÏûÑÏãú Ï†ÄÏû•Îêú ÏÑ†ÌÉùÍ∞íÎì§ÏùÑ Î≥µÏõêÌï©ÎãàÎã§:`, tempData);\n      \n      // Body ÏÑ†ÌÉùÍ∞í Î≥µÏõê\n      if (tempData.body) {\n        setBodySelections(prev => ({\n          ...prev,\n          ...tempData.body\n        }));\n      }\n      \n      // Trim ÏÑ†ÌÉùÍ∞í Î≥µÏõê\n      if (tempData.trim) {\n        setTrimSelections(prev => ({\n          ...prev,\n          ...tempData.trim\n        }));\n      }\n      \n      // Actuator ÏÑ†ÌÉùÍ∞í Î≥µÏõê\n      if (tempData.act) {\n        setActSelections(prev => ({\n          ...prev,\n          ...tempData.act\n        }));\n      }\n      \n      // Accessory ÏÑ†ÌÉùÍ∞í Î≥µÏõê\n      if (tempData.acc) {\n        setAccSelections(prev => ({\n          ...prev,\n          ...tempData.acc\n        }));\n      }\n    } else {\n      console.log(`${sheetID}Ïùò ÏûÑÏãú Ï†ÄÏû•Îêú ÏÑ†ÌÉùÍ∞íÏù¥ ÏóÜÏäµÎãàÎã§.`);\n    }\n  };\n\n  // Step 1, 2, 3 ÌÜµÌï© ÏÑπÏÖò\n  const StepsSection = () => (\n    <div className=\"step-section-detail\">\n      <div className=\"step-header-detail\">\n        <h3>Í≤¨Ï†Å ÏÉÅÏÑ∏ Ï†ïÎ≥¥</h3>\n      </div>\n\n      <div className=\"steps-horizontal-container\">\n        <div className=\"step-col-detail\">\n          {/* Step 1: Type ÏÑ†Ï†ï */}\n          <div className=\"step-subsection-detail\">\n            <h4>Step 1: Type ÏÑ†Ï†ï</h4>\n            <div className=\"type-list-detail\">\n              {types.map((type) => (\n                <div\n                  key={type.id}\n                  className={`type-item-detail ${selectedType === type.id ? 'selected' : ''}`}\n                  onClick={() => handleTypeSelection(type)}\n                >\n                  <span className=\"type-name-detail\">{(bodyValveList.find((v: any) => v.valveSeriesCode === type.id)?.valveSeries) || type.name}</span>\n                  <span className=\"type-count\">({type.count})</span>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"step-col-detail\">\n          {/* Step 2: TagNo ÏÑ†ÌÉù */}\n          <div className=\"step-subsection-detail\">\n            <h4>Step 2: TagNo ÏÑ†ÌÉù</h4>\n            {selectedType ? (\n              <div className=\"valve-list-detail\">\n              {valves\n                .filter((valve) => valve.typeId === selectedType)\n                .map((valve) => {\n                  const originalIndex = valves.findIndex(v => (v.sheetID ?? v.id) === (valve.sheetID ?? valve.id));\n                  return (\n                    <div\n                      key={valve.sheetID ?? valve.id}\n                      className={`valve-item-detail ${selectedValve?.id === valve.id ? 'selected' : ''}`}\n                      onClick={() => handleValveSelection(valve)}\n                    >\n                      <span className=\"valve-tag-detail\">{valve.tagNo}</span>\n                      <span className=\"valve-qty-detail\">({valve.qty})</span>\n                    </div>\n                  );\n                })}\n            </div>\n            ) : (\n              <div className=\"no-type-selected\">Step 1ÏóêÏÑú TypeÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî.</div>\n            )}\n          </div>\n        </div>\n        \n        {selectedValve && <div className=\"step-col-detail\">\n          {/* Step 3: ÏÉÅÏÑ∏ÏÇ¨Ïñë ÏûÖÎ†• */}\n          <div className=\"step-subsection-detail\">\n            <h4>Step 3: ÏÉÅÏÑ∏ÏÇ¨Ïñë ÏûÖÎ†•</h4>\n            <div className=\"specification-grid-detail\">\n              {/* BODY ÏÑπÏÖò */}\n              <div className=\"spec-section-detail\">\n                <h4>BODY</h4>\n                <div className=\"spec-grid-detail\">\n                  <div className=\"spec-item-detail\">\n                    <label>Bonnet Type:</label>\n                    <select value={bodySelections.bonnetType} onChange={(e) => handleBodyChange('bonnetType', e.target.value)} disabled={isReadOnly}>\n                      <option value=\"\">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>\n                      {bodyBonnetList && bodyBonnetList.length > 0 && bodyBonnetList.map((item: any) => (\n                        <option key={item.bonnetCode} value={item.bonnetCode}>\n                          {item.bonnet}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  <div className=\"spec-item-detail\">\n                    <label>Material Body:</label>\n                    <select value={bodySelections.materialBody} onChange={(e) => handleBodyChange('materialBody', e.target.value)} disabled={isReadOnly}>\n                      <option value=\"\">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>\n                      {bodyMatList && bodyMatList.length > 0 && bodyMatList.map((item: any) => (\n                        <option key={item.bodyMatCode} value={item.bodyMatCode}>\n                          {item.bodyMat}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  <div className=\"spec-item-detail\">\n                    <label>Size Body:</label>\n                    <div className=\"size-input-group-detail\">\n                      <select value={bodySelections.sizeBodyUnitCode} onChange={(e) => {\n                        handleBodyChange('sizeBodyUnit', e.target.value);\n                        handleBodyChange('sizeBodyUnitCode', e.target.value);\n                      }} disabled={isReadOnly}>\n                        <option value=\"\">Unit ÏÑ†ÌÉù</option>\n                        {bodySizeList && bodySizeList.length > 0 && \n                          bodySizeList\n                            .map(item => item.sizeUnitCode)\n                            .filter((unit, index, arr) => arr.indexOf(unit) === index)\n                            .map((unit: string) => {\n                              // Unit ÏΩîÎìúÎ•º ÏÇ¨Ïö©Ïûê ÏπúÌôîÏ†ÅÏù∏ Ïù¥Î¶ÑÏúºÎ°ú Î≥ÄÌôò\n                              let displayName = unit;\n                              if (unit === 'A') displayName = 'DN';\n                              if (unit === 'I') displayName = 'inch';\n                              if (unit === 'N') displayName = 'None';\n                              if (unit === 'Z') displayName = 'SPECIAL';\n                              \n                              return (\n                                <option key={unit} value={unit}>\n                                  {displayName}\n                                </option>\n                              );\n                            })\n                        }\n                      </select>\n                      <select value={bodySelections.sizeBodyCode} onChange={(e) => {\n                        const selectedItem = bodySizeList.find(item => item.bodySizeCode === e.target.value);\n                        if (selectedItem) {\n                          handleBodyChange('sizeBody', selectedItem.bodySize);\n                          handleBodyChange('sizeBodyCode', selectedItem.bodySizeCode);\n                        }\n                      }} disabled={!bodySelections.sizeBodyUnit || isReadOnly}>\n                        <option value=\"\">Í∞í ÏÑ†ÌÉù</option>\n                        {bodySelections.sizeBodyUnit && bodySizeList && bodySizeList.length > 0 && \n                          bodySizeList\n                            .filter(item => item.sizeUnitCode === bodySelections.sizeBodyUnit)\n                            .map((item: any) => (\n                              <option key={item.bodySizeCode} value={item.bodySizeCode}>\n                                {item.bodySize} ({item.sizeUnit})\n                              </option>\n                            ))\n                        }\n                      </select>\n                    </div>\n                  </div>\n                  <div className=\"spec-item-detail\">\n                    <label>Rating:</label>\n                    <div className=\"rating-input-group-detail\">\n                      <select value={bodySelections.ratingUnit} onChange={(e) => {\n                        const selectedUnit = bodyRatingList.find(item => item.ratingUnit === e.target.value);\n                        if (selectedUnit) {\n                          handleBodyChange('ratingUnit', selectedUnit.ratingUnit);\n                          handleBodyChange('ratingUnitCode', selectedUnit.ratingUnitCode);\n                        }\n                      }} disabled={isReadOnly}>\n                        <option value=\"\">Unit ÏÑ†ÌÉù</option>\n                        {bodyRatingList && bodyRatingList.length > 0 && \n                          bodyRatingList\n                            .map(item => item.ratingUnit)\n                            .filter((unit, index, arr) => arr.indexOf(unit) === index)\n                            .map((unit: string) => (\n                              <option key={unit} value={unit}>\n                                {unit}\n                              </option>\n                            ))\n                        }\n                      </select>\n                      <select value={bodySelections.ratingCode} onChange={(e) => {\n                        const selectedItem = bodyRatingList.find(item => item.ratingCode === e.target.value);\n                        if (selectedItem) {\n                          handleBodyChange('rating', selectedItem.ratingName);\n                          handleBodyChange('ratingCode', selectedItem.ratingCode);\n                        }\n                      }} disabled={!bodySelections.ratingUnitCode || isReadOnly}>\n                        <option value=\"\">Í∞í ÏÑ†ÌÉù</option>\n                        {bodySelections.ratingUnit && bodyRatingList && bodyRatingList.length > 0 && \n                          bodyRatingList\n                            .filter(item => item.ratingUnit === bodySelections.ratingUnit)\n                            .map((item: any) => (\n                              <option key={item.ratingCode} value={item.ratingCode}>\n                                {item.ratingName}\n                              </option>\n                            ))\n                        }\n                      </select>\n                    </div>\n                  </div>\n                  <div className=\"spec-item-detail\">\n                    <label>Connection:</label>\n                    <select value={bodySelections.connection} onChange={(e) => handleBodyChange('connection', e.target.value)} disabled={isReadOnly}>\n                      <option value=\"\">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>\n                      {bodyConnectionList && bodyConnectionList.length > 0 && bodyConnectionList.map((item: any) => (\n                        <option key={item.connectionCode} value={item.connectionCode}>\n                          {item.connection}\n                        </option>\n                      ))}\n                    </select>\n                    </div>\n                </div>\n              </div>\n\n              {/* Trim ÏÑπÏÖò */}\n              <div className=\"spec-section-detail\">\n                <h4>Trim</h4>\n                <div className=\"spec-grid-detail\">\n                  <div className=\"spec-item-detail\">\n                    <label>Trim Type:</label>\n                    <select value={trimSelections.trimType} onChange={(e) => handleTrimChange('trimType', e.target.value)} disabled={isReadOnly}>\n                      <option value=\"\">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>\n                      {trimTypeList && trimTypeList.length > 0 && trimTypeList.map((item: any) => (\n                        <option key={item.trimTypeCode} value={item.trimTypeCode}>\n                          {item.trimType}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  <div className=\"spec-item-detail\">\n                    <label>Trim Series:</label>\n                    <select value={trimSelections.trimSeries} onChange={(e) => handleTrimChange('trimSeries', e.target.value)} disabled={isReadOnly}>\n                      <option value=\"\">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>\n                      {trimSeriesList && trimSeriesList.length > 0 && trimSeriesList.map((item: any) => (\n                        <option key={item.trimSeriesCode} value={item.trimSeriesCode}>\n                          {item.trimSeries}\n                        </option>\n                        ))}\n                      </select>\n                  </div>\n                  <div className=\"spec-item-detail\">\n                    <label>Material Trim:</label>\n                    <select value={trimSelections.materialTrim} onChange={(e) => handleTrimChange('materialTrim', e.target.value)} disabled={isReadOnly}>\n                      <option value=\"\">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>\n                      {trimMatList && trimMatList.length > 0 && trimMatList.map((item: any) => (\n                        <option key={item.trimMatCode} value={item.trimMatCode}>\n                          {item.trimMat}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  <div className=\"spec-item-detail\">\n                    <label>Option:</label>\n                    <select value={trimSelections.option} onChange={(e) => handleTrimChange('option', e.target.value)} disabled={isReadOnly}>\n                      <option value=\"\">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>\n                      {trimOptionList && trimOptionList.length > 0 && trimOptionList.map((item: any) => (\n                        <option key={item.trimOptionCode} value={item.trimOptionCode}>\n                          {item.trimOption}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  <div className=\"spec-item-detail\">\n                    <label>Size Port:</label>\n                    <div className=\"size-input-group-detail\">\n                      <select value={trimSelections.sizePortUnitCode} onChange={(e) => {\n                        handleTrimChange('sizePortUnit', e.target.value);\n                        handleTrimChange('sizePortUnitCode', e.target.value);\n                      }} disabled={isReadOnly}>\n                        <option value=\"\">Unit ÏÑ†ÌÉù</option>\n                        {trimPortSizeList && trimPortSizeList.length > 0 && \n                          trimPortSizeList\n                            .map(item => item.unitCode)\n                            .filter((unit, index, arr) => arr.indexOf(unit) === index)\n                            .map((unit: string) => (\n                              <option key={unit} value={unit}>\n                                {unit}\n                              </option>\n                            ))\n                        }\n                      </select>\n                      <select value={trimSelections.sizePortCode} onChange={(e) => {\n                        const selectedItem = trimPortSizeList.find(item => item.portSizeCode === e.target.value);\n                        if (selectedItem) {\n                          handleTrimChange('sizePort', selectedItem.portSize);\n                          handleTrimChange('sizePortCode', selectedItem.portSizeCode);\n                        }\n                      }} disabled={!trimSelections.sizePortUnit || isReadOnly}>\n                        <option value=\"\">Í∞í ÏÑ†ÌÉù</option>\n                        {trimSelections.sizePortUnit && trimPortSizeList && trimPortSizeList.length > 0 && \n                          trimPortSizeList\n                            .filter(item => item.unitCode === trimSelections.sizePortUnit)\n                            .map((item: any) => (\n                                                              <option key={item.portSizeCode} value={item.portSizeCode}>\n                                  {item.portSize} ({item.unitName})\n                                </option>\n                            ))\n                        }\n                      </select>\n                    </div>\n                  </div>\n                  <div className=\"spec-item-detail\">\n                    <label>Form:</label>\n                    <select value={trimSelections.form} onChange={(e) => handleTrimChange('form', e.target.value)} disabled={isReadOnly}>\n                      <option value=\"\">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>\n                      {trimFormList && trimFormList.length > 0 && trimFormList.map((item: any) => (\n                        <option key={item.trimFormCode} value={item.trimFormCode}>\n                          {item.trimForm}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n              </div>\n\n              {/* ACT ÏÑπÏÖò */}\n              <div className=\"spec-section-detail\">\n                <h4>ACT</h4>\n                <div className=\"spec-grid-detail\">\n                  <div className=\"spec-item-detail\">\n                    <label>Action Type:</label>\n                    <select value={actSelections.actionType} onChange={(e) => handleActChange('actionType', e.target.value)} disabled={isReadOnly}>\n                      <option value=\"\">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>\n                      {actTypeList && actTypeList.length > 0 && actTypeList.map((item: any) => (\n                        <option key={item.actTypeCode} value={item.actTypeCode}>\n                          {item.actType}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  <div className=\"spec-item-detail\">\n                    <label>Series:</label>\n                    <select value={actSelections.series} onChange={(e) => handleActChange('series', e.target.value)} disabled={isReadOnly}>\n                      <option value=\"\">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>\n                      {actSeriesList && actSeriesList.length > 0 && actSeriesList.map((item: any) => (\n                        <option key={item.actSeriesCode} value={item.actSeriesCode}>\n                          {item.actSeries}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  <div className=\"spec-item-detail\">\n                    <label>Size:</label>\n                    <select value={actSelections.size} onChange={(e) => handleActChange('size', e.target.value)} disabled={!actSelections.series || isReadOnly}>\n                      <option value=\"\">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>\n                      {actSizeList && actSizeList.length > 0 && \n                        actSizeList.map((item: any) => (\n                          <option key={item.actSizeCode} value={item.actSizeCode}>\n                            {item.actSize} {/* actSizeName -> actSizeÎ°ú Î≥ÄÍ≤Ω */}\n                          </option>\n                        ))\n                      }\n                    </select>\n                  </div>\n                  <div className=\"spec-item-detail\">\n                    <label>H.W:</label>\n                    <select value={actSelections.hw} onChange={(e) => handleActChange('hw', e.target.value)} disabled={isReadOnly}>\n                      <option value=\"\">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>\n                      {actHWList && actHWList.length > 0 && actHWList.map((item: any) => (\n                        <option key={item.hwCode} value={item.hwCode}>\n                          {item.hw}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* ACC ÏÑπÏÖò - ÏÇ¨ÏßÑÍ≥º ÎèôÏùºÌïú 3Ïó¥ Íµ¨Ï°∞Î°ú Î≥ÄÍ≤Ω */}\n            <div className=\"acc-section-detail\">\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '10px' }}>\n                <h4>ACC</h4>\n                <button \n                  onClick={async () => {\n                    console.log('ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ Í∞ïÏ†ú Î¶¨Î°úÎìú ÏãúÏûë...');\n                    const success = await fetchAccessoryData();\n                    if (success) {\n                      alert('ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Î°úÎìúÎêòÏóàÏäµÎãàÎã§!');\n                    } else {\n                      alert('ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ Î°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');\n                    }\n                  }}\n                  style={{\n                    padding: '8px 16px',\n                    backgroundColor: '#007bff',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer',\n                    fontSize: '12px'\n                  }}\n                  title=\"ÏïÖÏÑ∏ÏÇ¨Î¶¨ Îç∞Ïù¥ÌÑ∞ Í∞ïÏ†ú Î¶¨Î°úÎìú\"\n                >\n                  üîÑ ÏïÖÏÑ∏ÏÇ¨Î¶¨ Î¶¨Î°úÎìú\n                </button>\n                <span style={{ fontSize: '11px', color: '#666', marginLeft: '10px' }}>\n                  Î©îÏù¥Ïª§: {accMakerList.length}Í∞ú, Î™®Îç∏: {accModelList.length}Í∞ú\n                </span>\n              </div>\n              <div className=\"acc-table-detail\">\n                <table>\n                  <thead>\n                    <tr>\n                      <th>ÏÑ†ÌÉùÎ™©Î°ù</th>\n                      <th>Î©îÏù¥Ïª§</th>\n                      <th>Î™®Îç∏Î™Ö</th>\n                      <th>Í∑úÍ≤©</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                  <tr>\n                            <td>Positioner</td>\n                            <td className=\"acc-options-group-detail\" colSpan={3}>\n                              <AccessorySelector \n                                accTypeKey=\"positioner\" \n                                accSelections={accSelections} \n                                setAccSelections={setAccSelections} \n                                accMakerList={accMakerList} \n                                accModelList={accModelList} \n                              />\n                            </td>\n                          </tr>\n                          <tr>\n                            <td>Solenoid Valve</td>\n                            <td className=\"acc-options-group-detail\" colSpan={3}>\n                              <AccessorySelector \n                                accTypeKey=\"solenoid\" \n                                accSelections={accSelections} \n                                setAccSelections={setAccSelections} \n                                accMakerList={accMakerList} \n                                accModelList={accModelList} \n                              />\n                            </td>\n                          </tr>\n                    <tr>\n                    <td>Limit Switch</td>\n                            <td className=\"acc-options-group-detail\" colSpan={3}>\n                              <AccessorySelector \n                                accTypeKey=\"limiter\" \n                                accSelections={accSelections} \n                                setAccSelections={setAccSelections} \n                                accMakerList={accMakerList} \n                                accModelList={accModelList} \n                              />\n                            </td>\n                          </tr>\n                          <tr>\n                            <td>Air Set</td>\n                            <td className=\"acc-options-group-detail\" colSpan={3}>\n                              <AccessorySelector \n                                accTypeKey=\"airSupply\" \n                                accSelections={accSelections} \n                                setAccSelections={setAccSelections} \n                                accMakerList={accMakerList} \n                                accModelList={accModelList} \n                              />\n                            </td>\n                          </tr>\n                          <tr>\n                            <td>Volume Booster</td>\n                            <td className=\"acc-options-group-detail\" colSpan={3}>\n                              <AccessorySelector \n                                accTypeKey=\"volumeBooster\" \n                                accSelections={accSelections} \n                                setAccSelections={setAccSelections} \n                                accMakerList={accMakerList} \n                                accModelList={accModelList} \n                              />\n                            </td>\n                          </tr>\n                          <tr>\n                            <td>Air Operated Valve</td>\n                            <td className=\"acc-options-group-detail\" colSpan={3}>\n                              <AccessorySelector \n                                accTypeKey=\"airOperator\" \n                                accSelections={accSelections} \n                                setAccSelections={setAccSelections} \n                                accMakerList={accMakerList} \n                                accModelList={accModelList} \n                              />\n                            </td>\n                          </tr>\n                          <tr>\n                            <td>Lock-Up Valve</td>\n                            <td className=\"acc-options-group-detail\" colSpan={3}>\n                              <AccessorySelector \n                                accTypeKey=\"lockUp\" \n                                accSelections={accSelections} \n                                setAccSelections={setAccSelections} \n                                accMakerList={accMakerList} \n                                accModelList={accModelList} \n                              />\n                            </td>\n                          </tr>\n                          <tr>\n                            <td>Snap Acting Relay</td>\n                            <td className=\"acc-options-group-detail\" colSpan={3}>\n                              <AccessorySelector \n                                accTypeKey=\"snapActingRelay\" \n                                accSelections={accSelections} \n                                setAccSelections={setAccSelections} \n                                accMakerList={accMakerList} \n                                accModelList={accModelList} \n                              />\n                            </td>\n                          </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>}\n      </div>\n    </div>\n  );\n\n  // Í≥†Í∞ù ÏöîÏ≤≠ÏÇ¨Ìï≠ ÏÑπÏÖò (Ìï≠ÏÉÅ readonly)\n  const CustomerRequirementSection = () => (\n    <div className=\"step-section-detail\">\n      <div className=\"step-header-detail\">\n        <h3>Í≥†Í∞ù ÏöîÏ≤≠ÏÇ¨Ìï≠</h3>\n      </div>\n      <div className=\"customer-requirement-content-detail\">\n        <textarea\n          value={customerRequirement}\n          onChange={() => {}} // Î≥ÄÍ≤Ω Î∂àÍ∞Ä\n          readOnly={true} // Ìï≠ÏÉÅ readonly\n          placeholder=\"Í≥†Í∞ù ÏöîÏ≤≠ÏÇ¨Ìï≠Ïù¥ ÏóÜÏäµÎãàÎã§.\"\n          className=\"customer-requirement-textarea-detail\"\n        />\n      </div>\n    </div>\n  );\n\n  // Í¥ÄÎ¶¨Ïûê ÏΩîÎ©òÌä∏ ÏÑπÏÖò\n  const StaffCommentSection = () => (\n    <div className=\"step-section-detail\">\n      <div className=\"step-header-detail\">\n        <h3>Í¥ÄÎ¶¨Ïûê ÏΩîÎ©òÌä∏</h3>\n      </div>\n      <div className=\"staff-comment-content-detail\">\n        <textarea\n          value={staffComment}\n          onChange={(e) => !isReadOnly && setStaffComment(e.target.value)}\n          readOnly={isReadOnly}\n          placeholder=\"Í¥ÄÎ¶¨Ïûê ÏΩîÎ©òÌä∏Í∞Ä ÏóÜÏäµÎãàÎã§.\"\n          className=\"staff-comment-textarea-detail\"\n        />\n      </div>\n    </div>\n  );\n\n  // Í≥†Í∞ù ÏöîÏ≤≠ Ï≤®Î∂ÄÌååÏùº ÏÑπÏÖò (Îã§Ïö¥Î°úÎìúÎßå Í∞ÄÎä•)\n  const CustomerAttachmentsSection = () => (\n    <div className=\"step-section-detail\">\n      <div className=\"step-header-detail\">\n        <h3>Í≥†Í∞ù ÏöîÏ≤≠ Ï≤®Î∂ÄÌååÏùº</h3>\n      </div>\n      <div className=\"attachments-content\">\n        {customerAttachments.length > 0 ? (\n          <div className=\"attachment-list-detail\">\n            {customerAttachments.map((file, index) => (\n              <div key={index} className=\"attachment-item-detail\">\n                <span className=\"file-name-detail\">{file.fileName}</span>\n                <span className=\"file-size-detail\">({(file.fileSize / 1024).toFixed(2)} KB)</span>\n                <button \n                  className=\"btn btn-primary btn-sm\"\n                  onClick={() => handleDownloadFile(file, 'customer')}\n                  disabled={!file.fileName.toLowerCase().endsWith('.pdf')}\n                >\n                  PDF Îã§Ïö¥Î°úÎìú\n                </button>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className=\"no-attachments\">\n            Í≥†Í∞ù ÏöîÏ≤≠ Ï≤®Î∂ÄÌååÏùºÏù¥ ÏóÜÏäµÎãàÎã§.\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  // Í¥ÄÎ¶¨ Ï≤®Î∂ÄÌååÏùº ÏÑπÏÖò (ÏóÖÎ°úÎìú, Îã§Ïö¥Î°úÎìú, ÏÉùÏÑ± Í∞ÄÎä•)\n  const ManagerAttachmentsSection = () => (\n    <div className=\"step-section-detail\">\n      <div className=\"step-header-detail\">\n        <h3>Í≤¨Ï†Å ÏÑúÎ•ò Î∞úÍ∏â</h3>\n      </div>\n      <div className=\"doc-issue-list\">\n        <div className=\"doc-item\">\n          <span className=\"doc-label\">CV LIST</span>\n          <button\n            className={`icon-download ${docGenerating['cvlist'] ? 'loading' : ''}`}\n            title=\"ÏÉùÏÑ± ÌõÑ Îã§Ïö¥Î°úÎìú\"\n            onClick={() => generateAndDownload('cvlist', 'generate-cv')}\n            disabled={!!docGenerating['cvlist']}\n          >{docGenerating['cvlist'] ? '‚è≥' : '‚¨áÔ∏è'}</button>\n        </div>\n        <div className=\"doc-item\">\n          <span className=\"doc-label\">VALVE LIST</span>\n          <button\n            className={`icon-download ${docGenerating['vllist'] ? 'loading' : ''}`}\n            title=\"ÏÉùÏÑ± ÌõÑ Îã§Ïö¥Î°úÎìú\"\n            onClick={() => generateAndDownload('vllist', 'generate-vl')}\n            disabled={!!docGenerating['vllist']}\n          >{docGenerating['vllist'] ? '‚è≥' : '‚¨áÔ∏è'}</button>\n        </div>\n        <div className=\"doc-item\">\n          <span className=\"doc-label\">DATA SHEET</span>\n          <button\n            className={`icon-download ${docGenerating['datasheet'] ? 'loading' : ''}`}\n            title=\"ÏÉùÏÑ± ÌõÑ Îã§Ïö¥Î°úÎìú\"\n            onClick={() => generateAndDownload('datasheet', 'generate-datasheet')}\n            disabled={!!docGenerating['datasheet']}\n          >{docGenerating['datasheet'] ? '‚è≥' : '‚¨áÔ∏è'}</button>\n        </div>\n        <div className=\"doc-item\">\n          <span className=\"doc-label\">Í≤¨Ï†ÅÏÑú</span>\n          <button\n            className={`icon-download ${docGenerating['singlequote'] ? 'loading' : ''}`}\n            title=\"ÏÉùÏÑ± ÌõÑ Îã§Ïö¥Î°úÎìú\"\n            onClick={() => generateAndDownload('singlequote', 'generate-single-quote')}\n            disabled={!!docGenerating['singlequote']}\n          >{docGenerating['singlequote'] ? '‚è≥' : '‚¨áÔ∏è'}</button>\n        </div>\n      </div>\n    </div>\n  );\n  useEffect(() => {\n    if (tempEstimateNo) {\n      loadExistingData();\n      // üîë ÌååÏùº Î™©Î°ù Ï°∞Ìöå Ï∂îÍ∞Ä\n      fetchManagerFiles();\n      fetchCustomerFiles();\n    }\n  }, [tempEstimateNo, loadExistingData]); // loadExistingData Ï∂îÍ∞Ä\n\n  useEffect(() => {\n    // typesÏôÄ accModelListÍ∞Ä Î™®Îëê Î°úÎìúÎêú ÌõÑÏóêÎßå loadInitialSpecificationÏùÑ Ìò∏Ï∂ú\n    if (tempEstimateNo && types.length > 0 && accModelList.length > 0) {\n      if (selectedValve && selectedValve.sheetID > 0) {\n        loadInitialSpecification(selectedValve.sheetID);\n      }\n    }\n  }, [selectedValve?.sheetID, tempEstimateNo, types, accModelList]); // typesÏôÄ accModelList Ï∂îÍ∞Ä\n\n  // ÏãúÏûë Ï∑®ÏÜå Ìï∏Îì§Îü¨\n  const handleCancelStart = async () => {\n    if (!tempEstimateNo) return;\n    if (window.confirm('Í≤¨Ï†Å ÏãúÏûëÏùÑ Ï∑®ÏÜåÌïòÏãúÍ≤†ÏäµÎãàÍπå? Îã¥ÎãπÏûê Î∞∞Ï†ïÏù¥ Ìï¥Ï†úÎêòÍ≥† \"Í≤¨Ï†ÅÏöîÏ≤≠\" ÏÉÅÌÉúÎ°ú ÎèåÏïÑÍ∞ëÎãàÎã§.')) {\n      try {\n        const response = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/cancel-start`, {\n          method: 'POST',\n        });\n\n        if (response.ok) {\n          alert('Í≤¨Ï†Å ÏãúÏûëÏù¥ Ï∑®ÏÜåÎêòÏóàÏäµÎãàÎã§.');\n          setCurrentStatus('Í≤¨Ï†ÅÏöîÏ≤≠');\n          loadExistingData(); // Îç∞Ïù¥ÌÑ∞ ÏÉàÎ°úÍ≥†Ïπ®\n        } else {\n          const errorText = await response.text();\n          alert(`ÏãúÏûë Ï∑®ÏÜåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§: ${errorText}`);\n        }\n      } catch (error) {\n        console.error('ÏãúÏûë Ï∑®ÏÜå Ï§ë Ïò§Î•ò Î∞úÏÉù:', error);\n        alert('ÏãúÏûë Ï∑®ÏÜå Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n      }\n    }\n  };\n\n  // Ï£ºÎ¨∏ Ï∑®ÏÜå Ìï∏Îì§Îü¨\n  const handleCancelOrder = async () => {\n    if (!tempEstimateNo) return;\n    if (window.confirm('Ï†ïÎßêÎ°ú Ï£ºÎ¨∏ÏùÑ Ï∑®ÏÜåÌïòÏãúÍ≤†ÏäµÎãàÍπå? \"Í≤¨Ï†ÅÏôÑÎ£å\" ÏÉÅÌÉúÎ°ú ÎèåÏïÑÍ∞ëÎãàÎã§.')) {\n      try {\n        const response = await fetch(`http://192.168.0.14:5135/api/estimate/sheets/${tempEstimateNo}/order/cancel`, {\n          method: 'POST',\n        });\n\n        if (response.ok) {\n          alert('Ï£ºÎ¨∏Ïù¥ Ï∑®ÏÜåÎêòÏóàÏäµÎãàÎã§.');\n          setCurrentStatus('Í≤¨Ï†ÅÏôÑÎ£å');\n          loadExistingData(); // Îç∞Ïù¥ÌÑ∞ ÏÉàÎ°úÍ≥†Ïπ®\n        } else {\n          const errorText = await response.text();\n          alert(`Ï£ºÎ¨∏ Ï∑®ÏÜåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§: ${errorText}`);\n        }\n      } catch (error) {\n        console.error('Ï£ºÎ¨∏ Ï∑®ÏÜå Ï§ë Ïò§Î•ò Î∞úÏÉù:', error);\n        alert('Ï£ºÎ¨∏ Ï∑®ÏÜå Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n      }\n    }\n  };\n\n  if (isLoadingFiles) {\n    return <div className=\"loading\">Î°úÎî© Ï§ë...</div>;\n  }\n\n  return (\n    <div className=\"estimate-detail-page dashboard-page\">\n      {/* Ìó§Îçî */}\n      <div className=\"page-header-detail\">\n        <button className=\"back-button-detail\" onClick={() => navigate(-1)}>\n          ‚Üê Í≤¨Ï†ÅÏöîÏ≤≠\n        </button>\n        <h1>ÏÇ¨Ïñë ÏÑ†Ï†ï</h1>\n      </div>\n\n      {/* ÏÉÅÎã® Ïö∞Ï∏° ÎØ∏Îãà Ìå®ÎÑê: Í≤¨Ï†Å ÏÑúÎ•ò Î∞úÍ∏â + Í≥†Í∞ù Ï†úÏ∂ú Î¨∏ÏÑú ÏóÖÎ°úÎìú */}\n      <div className=\"mini-tools-panel\">\n        <EstimateSummaryCard />\n        <ManagerAttachmentsSection />\n        <div className=\"step-section-detail customer-uploader\">\n          <div className=\"uploader-header\">\n            <h3>Í≥†Í∞ù Ï†úÏ∂ú Î¨∏ÏÑú ÏóÖÎ°úÎìú</h3>\n            <div className=\"header-actions-detail\">\n              <input\n                ref={customerAddInputRef}\n                type=\"file\"\n                multiple\n                onChange={handleCustomerFileSelect}\n                accept=\".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.hwp,.txt,.zip,.rar,.7z,.csv,.json\"\n                style={{ display: 'none' }}\n              />\n              <button className=\"btn btn-light btn-xs\" onClick={() => customerAddInputRef.current?.click()}>Ï∂îÍ∞Ä</button>\n            </div>\n          </div>\n          <div className=\"uploader-list\">\n            {isLoadingFiles ? (\n              <div className=\"loading\" style={{ padding: 8 }}>Î°úÎî© Ï§ë‚Ä¶</div>\n            ) : customerFiles.length === 0 ? (\n              <div className=\"no-files\" style={{ padding: 8, color: '#6c757d' }}>ÏóÖÎ°úÎìúÎêú ÌååÏùºÏù¥ ÏóÜÏäµÎãàÎã§.</div>\n            ) : (\n              customerFiles.map(file => {\n                const name = file.fileName || '';\n                const ext = (name.split('.').pop() || '').toLowerCase();\n                return (\n                  <div key={file.attachmentID} className=\"uploader-item\">\n                    <span className={`file-icon ext-${ext}`} aria-hidden />\n                    <span className=\"file-name-detail\" title={name}>{name}</span>\n                    <button className=\"remove-btn\" onClick={() => deleteAttachmentById(file.attachmentID)}>‚úï</button>\n                  </div>\n                );\n              })\n            )}\n          </div>\n        </div>\n        {/* Í≤¨Ï†Å ÏãúÏûë/ÎßàÍ∞ê Î≤ÑÌäº Ïª¨Îüº */}\n        <div className=\"quote-actions\">\n          {(() => {\n            // Î™ÖÌôïÌïú ÏÉÅÌÉú Í∏∞Î∞ò Î∂ÑÍ∏∞ Ï≤òÎ¶¨\n            if (currentStatus === 'Í≤¨Ï†ÅÏöîÏ≤≠') {\n              return (\n                <button className=\"btn btn-success\" onClick={handleStartQuote}>Í≤¨Ï†ÅÏãúÏûë</button>\n              );\n            }\n            if (currentStatus === 'Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë') {\n              return (\n                <div className=\"button-column\">\n                  <button className=\"btn btn-primary\" onClick={handleCompleteQuote}>Í≤¨Ï†ÅÏôÑÎ£å</button>\n                  <button className=\"btn btn-danger\" onClick={handleCancelStart}>ÏãúÏûëÏ∑®ÏÜå</button>\n                </div>\n              );\n            }\n            if (currentStatus === 'Í≤¨Ï†ÅÏôÑÎ£å') {\n              return (\n                <div className=\"button-column\">\n                  <button className=\"btn btn-success\" onClick={handleConfirmOrder}>Ï£ºÎ¨∏ÌôïÏ†ï</button>\n                  <button className=\"btn btn-danger\" onClick={handleCancelComplete}>ÏôÑÎ£åÏ∑®ÏÜå</button>\n                </div>\n              );\n            }\n            if (currentStatus === 'Ï£ºÎ¨∏') {\n              return (\n                <button className=\"btn btn-danger\" onClick={handleCancelOrder}>Ï£ºÎ¨∏Ï∑®ÏÜå</button>\n              );\n            }\n            // Í∑∏ Ïô∏Ïùò Í≤ΩÏö∞ (Î°úÎî© Ï§ë Îì±)Îäî Î≤ÑÌäºÏùÑ ÌëúÏãúÌïòÏßÄ ÏïäÏùå\n            return null;\n          })()}\n        </div>\n      </div>\n\n      {/* ÏÉÅÌÉú Î∞è ÌîÑÎ°úÏ†ùÌä∏ Ï†ïÎ≥¥ */}\n      <div className=\"status-section-detail\">\n        {/*\n        <div className=\"status-group\">\n          <label>ÏßÑÌñâÏÉÅÌÉú:</label>\n          <select \n            value={currentStatus} \n            onChange={(e) => {\n              const newStatus = e.target.value;\n              if (newStatus !== currentStatus) {\n                handleStatusChange(newStatus);\n              }\n            }}\n            className=\"status-select-detail\"\n          >\n            <option value=\"Í≤¨Ï†ÅÏöîÏ≤≠\">Í≤¨Ï†ÅÏöîÏ≤≠</option>\n            <option value=\"Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë\">Í≤¨Ï†ÅÏ≤òÎ¶¨Ï§ë</option>\n            <option value=\"Í≤¨Ï†ÅÏôÑÎ£å\">Í≤¨Ï†ÅÏôÑÎ£å</option>\n            <option value=\"Ï£ºÎ¨∏\">Ï£ºÎ¨∏</option>\n          </select>\n        </div>\n        */}\n        <div className=\"project-group-detail\">\n          <label>ÌîÑÎ°úÏ†ùÌä∏Î™Ö:</label>\n          <input type=\"text\" value={projectName} readOnly={isReadOnly} className=\"project-input-detail\" />\n        </div>\n        \n        {/* Ï†ÄÏû• Î≤ÑÌäº */}\n        <div className=\"save-section\">\n              <button \n                className=\"btn btn-primary save-specification-btn\"\n                onClick={handleSaveSpecification}\n                disabled={isReadOnly} // isReadOnly ÏÉÅÌÉúÏóê Îî∞Îùº ÎπÑÌôúÏÑ±Ìôî\n              >\n                ÏÇ¨Ïñë Ï†ÄÏû•\n              </button>\n            </div>\n      </div>\n\n      {/* Î©îÏù∏ ÏΩòÌÖêÏ∏† */}\n      <div className=\"main-content-detail\">\n        <div className=\"steps-container-detail\">\n          <StepsSection />\n          \n          {/* Í≥†Í∞ù ÏöîÏ≤≠ ÏÇ¨Ìï≠Í≥º Ï≤®Î∂ÄÌååÏùºÏùÑ ÌïòÎÇòÏùò Î∏îÎ°ùÏúºÎ°ú Î¨∂Ïùå */}\n          <div className=\"customer-request-block-detail\">\n            <CustomerRequirementSection />\n            <CustomerAttachmentsSection />\n          </div>\n\n          <StaffCommentSection />\n        </div>\n        \n        {/* ÌíàÎ≤à ÌëúÏãú ÏÑπÏÖò - Ìïú Ï§Ñ Î™®ÎààÏ¢ÖÏù¥ */}\n        <div className=\"part-number-section\">\n          <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">ÏÉùÏÑ±Îêú ÌíàÎ≤à</h3>\n          <div className=\"part-number-single-line\">\n            {generatePartNumber.split('').map((char, index) => (\n              <div \n                key={index}\n                className={`char-box ${char === '0' ? 'empty-char' : 'filled-char'}`}\n                title={`ÏúÑÏπò ${index}: ${char}`}\n              >\n                {char}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  };\n  \n  export default EstimateDetailPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}